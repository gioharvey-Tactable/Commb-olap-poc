{"ast":null,"code":"import * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { Chart, ColumnSeries, LineSeries, Legend, Tooltip, Category, AreaSeries, Selection, StripLine, DataLabel } from '@syncfusion/ej2-charts';\nimport { AccumulationChart, PieSeries, FunnelSeries, PyramidSeries } from '@syncfusion/ej2-charts';\nimport { SplineAreaSeries, MultiColoredLineSeries, RangeAreaSeries, StackingAreaSeries, StepAreaSeries } from '@syncfusion/ej2-charts';\nimport { MultiColoredAreaSeries, SplineSeries, StepLineSeries, AccumulationLegend, AccumulationTooltip } from '@syncfusion/ej2-charts';\nimport { StackingColumnSeries, RangeColumnSeries, BarSeries, StackingBarSeries, ScatterSeries } from '@syncfusion/ej2-charts';\nimport { RadarSeries } from '@syncfusion/ej2-charts';\nimport { ScrollBar, Zoom, PolarSeries } from '@syncfusion/ej2-charts';\nimport { ParetoSeries, Export, Crosshair, MultiLevelLabel } from '@syncfusion/ej2-charts';\nimport { BubbleSeries } from '@syncfusion/ej2-charts';\nimport { AccumulationDataLabel } from '@syncfusion/ej2-charts';\nimport { createElement, remove, isNullOrUndefined, isBlazor, select } from '@syncfusion/ej2-base';\nimport { PivotUtil } from '../../base/util';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { hideSpinner } from '@syncfusion/ej2-popups';\n\nvar PivotChart = function () {\n  function PivotChart() {\n    this.headerColl = {};\n    this.maxLevel = 0;\n    this.columnGroupObject = {};\n    this.fieldPosition = [];\n    this.measurePos = -1;\n    this.measuresNames = {};\n    this.accumulationType = ['Pie', 'Pyramid', 'Doughnut', 'Funnel'];\n  }\n  /**\n   * Get component name.\n   * @returns {string} - string\n   * @private\n   */\n\n\n  PivotChart.prototype.getModuleName = function () {\n    return 'pivotchart';\n  };\n  /* eslint-disable */\n\n\n  PivotChart.prototype.loadChart = function (parent, chartSettings) {\n    this.parent = parent;\n    this.measuresNames = {};\n    this.engineModule = this.parent.dataType === 'olap' ? this.parent.olapEngineModule : this.parent.engineModule;\n    this.dataSourceSettings = this.parent.dataSourceSettings;\n    this.chartSettings = chartSettings;\n    var isDataAvail = parent.dataType === 'olap' ? parent.olapEngineModule.tupColumnInfo.length > 0 && parent.olapEngineModule.tupRowInfo.length > 0 && (!isNullOrUndefined(parent.olapEngineModule.colMeasurePos) || !isNullOrUndefined(parent.olapEngineModule.rowMeasurePos)) : parent.dataSourceSettings.values.length > 0;\n\n    if (isDataAvail) {\n      if (!this.parent.chart && (this.parent.element.querySelector('.e-chart') || this.parent.element.querySelector('.e-accumulationchart'))) {\n        remove(select('#' + this.parent.element.id + '_chart', this.parent.element));\n      }\n\n      if (this.chartSettings.enableMultipleAxis && this.accumulationType.indexOf(chartSettings.chartSeries.type) < 0) {\n        this.measureList = this.dataSourceSettings.values.map(function (item) {\n          return item.name;\n        });\n      } else {\n        this.measureList = [chartSettings.value === '' ? this.dataSourceSettings.values[0].name : chartSettings.value];\n      }\n\n      for (var _i = 0, _a = this.dataSourceSettings.values; _i < _a.length; _i++) {\n        var field = _a[_i];\n        var fieldName = field.name.replace(/[^A-Z0-9]+/ig, '_');\n        this.measuresNames[field.name] = fieldName;\n        this.measuresNames[fieldName] = field.name;\n\n        if (this.chartSettings.chartSeries.type === 'Polar' || this.chartSettings.chartSeries.type === 'Radar') {\n          this.measuresNames[field.caption ? field.caption : field.name] = field.name;\n        }\n      }\n    } else if (this.parent.chart) {\n      if (this.parent.element.querySelector('.e-chart')) {\n        this.parent.chart.series = [];\n        this.parent.chart.rows = [];\n        this.parent.chart.primaryXAxis.title = '';\n        this.parent.chart.primaryYAxis.title = '';\n        this.parent.chart.primaryXAxis.multiLevelLabels = [];\n        this.parent.chart.primaryYAxis.multiLevelLabels = [];\n\n        if (this.parent.chart.axes.length > 0) {\n          this.parent.chart.axes[0].title = '';\n        }\n\n        this.parent.chart.primaryXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? 1 : this.parent.chartSettings.primaryXAxis.zoomFactor;\n      } else if (this.parent.element.querySelector('.e-accumulationchart')) {\n        this.parent.chart.series[0].dataSource = [{}];\n        this.parent.chart.series[0].dataLabel = {};\n      }\n\n      this.parent.chart.refresh();\n      return;\n    } else {\n      if (!select('#' + this.parent.element.id + '_chart', this.parent.element)) {\n        if (this.parent.displayOption.view === 'Both') {\n          this.parent.displayOption.primary === 'Chart' ? this.parent.element.insertBefore(createElement('div', {\n            className: cls.PIVOTCHART,\n            id: this.parent.element.id + '_chart'\n          }), this.parent.element.querySelector('.' + cls.GRID_CLASS)) : this.parent.element.appendChild(createElement('div', {\n            className: cls.PIVOTCHART,\n            id: this.parent.element.id + '_chart'\n          }));\n        } else {\n          this.parent.element.appendChild(createElement('div', {\n            className: cls.PIVOTCHART,\n            id: this.parent.element.id + '_chart'\n          }));\n        }\n\n        var width = this.parent.width.toString();\n\n        if (this.parent.showToolbar && this.parent.grid) {\n          width = this.parent.getGridWidthAsNumber().toString();\n        }\n\n        var height = this.getChartHeight();\n        var tmpChart = void 0;\n\n        if (this.chartSettings && this.chartSettings.chartSeries && this.accumulationType.indexOf(this.chartSettings.chartSeries.type) > -1) {\n          tmpChart = new AccumulationChart({\n            width: width,\n            height: height\n          });\n        } else {\n          tmpChart = new Chart({\n            width: width,\n            height: height\n          });\n        }\n\n        tmpChart.appendTo('#' + this.parent.element.id + '_chart');\n\n        if (this.parent.showToolbar) {\n          if (this.parent.displayOption.view === 'Both' && this.parent.currentView === 'Chart') {\n            this.parent.grid.element.style.display = 'none';\n          }\n\n          if (this.parent.currentView !== 'Chart') {\n            select('#' + this.parent.element.id + '_chart', this.parent.element).style.display = 'none';\n          }\n        }\n      }\n\n      this.parent.notify(events.contentReady, {});\n      return;\n    }\n\n    this.columnGroupObject = {};\n    this.accEmptyPoint = false;\n    var pivotValues = this.engineModule.pivotValues;\n    this.currentMeasure = chartSettings.enableMultipleAxis && this.accumulationType.indexOf(chartSettings.chartSeries.type) < 0 ? this.measureList[0] : (chartSettings.value === '' || this.dataSourceSettings.values.filter(function (item) {\n      return item.name === chartSettings.value;\n    }).length === 0) && this.dataSourceSettings.values.length > 0 ? this.dataSourceSettings.values[0].name : chartSettings.value;\n    var totColIndex = this.getColumnTotalIndex(pivotValues);\n    var rKeys = Object.keys(pivotValues);\n    var prevLevel;\n    var firstLevelUName;\n    var levelCollection = {};\n    var prevCell;\n    var integratedLevel = 0;\n    var indexCount = -0.5;\n    this.headerColl = {};\n    this.maxLevel = 0;\n    var levelPos = {};\n    var lastHierarchy = '';\n    var lastDimension = '';\n    var memberCell;\n    var drillDimension = '';\n    var isDrill = false;\n\n    if (this.parent.dataType === 'olap') {\n      levelPos = this.groupHierarchyWithLevels(pivotValues);\n      lastHierarchy = this.fieldPosition[this.fieldPosition.length - 1];\n      lastDimension = this.measurePos === this.fieldPosition.length - 1 && this.fieldPosition.length > 1 ? this.fieldPosition[this.fieldPosition.length - 2] : lastHierarchy;\n      drillDimension = lastDimension;\n    }\n\n    for (var _b = 0, rKeys_1 = rKeys; _b < rKeys_1.length; _b++) {\n      var rKey = rKeys_1[_b];\n      var rowIndex = Number(rKey);\n\n      if (!isNullOrUndefined(pivotValues[rowIndex])) {\n        if (pivotValues[rowIndex][0] && pivotValues[rowIndex][0].axis === 'row' && (this.dataSourceSettings.rows.length === 0 ? true : pivotValues[rowIndex][0].type !== 'grand sum')) {\n          var firstRowCell = pivotValues[rowIndex][0];\n          var tupInfo = this.parent.dataType === 'olap' ? this.engineModule.tupRowInfo[firstRowCell.ordinal] : undefined;\n          var fieldPos = -1;\n          var currrentLevel = firstRowCell.level;\n\n          if (this.parent.dataType === 'olap') {\n            isDrill = firstRowCell.hierarchy === '[Measures]' ? isDrill : this.isAttributeDrill(firstRowCell.hierarchy, tupInfo.drillInfo);\n            drillDimension = drillDimension === lastDimension ? lastDimension : firstRowCell.hierarchy === '[Measures]' || firstRowCell.isNamedSet || this.engineModule.fieldList[firstRowCell.hierarchy] && !this.engineModule.fieldList[firstRowCell.hierarchy].hasAllMember ? lastDimension : drillDimension;\n            fieldPos = tupInfo.drillInfo.length - 1;\n\n            if (firstRowCell.memberType !== 3 && (tupInfo.measureName ? tupInfo.measureName === this.dataSourceSettings.values[0].name : true)) {\n              firstLevelUName = firstLevelUName === undefined ? firstRowCell.levelUniqueName : firstLevelUName;\n              integratedLevel = firstLevelUName === firstRowCell.levelUniqueName ? 0 : integratedLevel;\n              levelCollection = integratedLevel === 0 ? {} : levelCollection;\n              integratedLevel = prevCell && firstLevelUName !== firstRowCell.levelUniqueName ? prevCell.hierarchy === firstRowCell.hierarchy ? integratedLevel + (firstRowCell.level - prevCell.level) : isNullOrUndefined(levelCollection[firstRowCell.levelUniqueName]) ? levelPos[firstRowCell.hierarchy].start : levelCollection[firstRowCell.levelUniqueName] : integratedLevel;\n              levelCollection[firstRowCell.levelUniqueName] = integratedLevel;\n              currrentLevel = integratedLevel;\n              indexCount += prevCell && drillDimension === prevCell.hierarchy && !(prevCell.isDrilled && prevCell.hasChild) ? 1 : 0;\n              drillDimension = isDrill ? firstRowCell.hierarchy : lastDimension;\n              prevLevel = integratedLevel;\n              prevCell = firstRowCell;\n            }\n          } else if (firstRowCell.type !== 'value') {\n            if (!(prevLevel === undefined || prevLevel < currrentLevel)) {\n              indexCount++;\n            }\n\n            prevLevel = currrentLevel;\n          }\n\n          this.maxLevel = currrentLevel > this.maxLevel ? currrentLevel : this.maxLevel;\n          var name_1 = this.parent.dataType === 'olap' ? firstRowCell.formattedText : firstRowCell.actualText ? firstRowCell.actualText.toString() : firstRowCell.formattedText.toString();\n          var text = firstRowCell.formattedText ? firstRowCell.formattedText.toString() : name_1;\n          var caption = firstRowCell.hasChild && !firstRowCell.isNamedSet ? (firstRowCell.isDrilled ? ' - ' : ' + ') + text : text;\n          var levelName = tupInfo ? tupInfo.uNameCollection : firstRowCell.valueSort.levelName.toString();\n          var cellInfo = {\n            name: name_1,\n            text: caption,\n            hasChild: firstRowCell.hasChild,\n            isDrilled: firstRowCell.isDrilled,\n            levelName: levelName,\n            level: currrentLevel,\n            fieldName: firstRowCell.valueSort.axis ? firstRowCell.valueSort.axis.toString() : '',\n            rowIndex: rowIndex,\n            colIndex: 0,\n            cell: firstRowCell\n          };\n\n          if (this.parent.dataType === 'olap' ? firstRowCell.memberType !== 3 : firstRowCell.type !== 'value') {\n            if (this.headerColl[indexCount]) {\n              this.headerColl[indexCount][currrentLevel] = cellInfo;\n            } else {\n              this.headerColl[indexCount] = {};\n              this.headerColl[indexCount][currrentLevel] = cellInfo;\n            }\n          }\n\n          var rows = pivotValues[rowIndex];\n          var cKeys = Object.keys(rows);\n          var prevMemberCell = void 0;\n\n          if (this.parent.dataType === 'olap') {\n            memberCell = firstRowCell.memberType !== 3 ? firstRowCell : memberCell;\n          } else {\n            memberCell = firstRowCell.type !== 'value' ? firstRowCell : memberCell;\n          }\n\n          for (var _c = 0, cKeys_1 = cKeys; _c < cKeys_1.length; _c++) {\n            var cKey = cKeys_1[_c];\n            var cellIndex = Number(cKey);\n            var cell = pivotValues[rowIndex][cellIndex];\n            var measureAllow = isNullOrUndefined(cell.rowHeaders) ? this.dataSourceSettings.rows.length === 0 : true;\n            var actualText = this.parent.dataType === 'olap' && tupInfo && tupInfo.measureName ? tupInfo.measureName : cell.actualText;\n\n            if (!(this.parent.dataType === 'olap' && cell.isGrandSum) && !totColIndex[cell.colIndex] && cell.axis === 'value' && firstRowCell.type !== 'header' && actualText !== '' && (chartSettings.enableMultipleAxis && this.accumulationType.indexOf(chartSettings.chartSeries.type) < 0 ? true : actualText === this.currentMeasure)) {\n              if (isNullOrUndefined(firstRowCell.members)) {\n                firstRowCell.members = [];\n              }\n\n              if (this.parent.dataType === 'olap' ? lastHierarchy === firstRowCell.hierarchy || isDrill ? firstRowCell.memberType === 3 && prevMemberCell ? fieldPos === this.measurePos ? prevMemberCell.isDrilled && prevMemberCell.hasChild : true : firstRowCell.isDrilled && firstRowCell.hasChild : true : (firstRowCell.type === 'value' && prevMemberCell ? prevMemberCell.members.length > 0 : firstRowCell.members.length > 0) || !measureAllow) {\n                break;\n              }\n\n              var colHeaders = this.parent.dataType === 'olap' ? cell.columnHeaders.toString().split(/~~|::/).join(' - ') : cell.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(' - ');\n              var rowHeaders = this.parent.dataType === 'olap' ? cell.rowHeaders.toString().split(/~~|::/).join(' - ') : cell.rowHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(' - ');\n              var columnSeries = colHeaders + ' | ' + actualText;\n              var yValue = this.parent.dataType === 'pivot' ? this.engineModule.aggregatedValueMatrix[rowIndex] && !isNullOrUndefined(this.engineModule.aggregatedValueMatrix[rowIndex][cellIndex]) ? Number(this.engineModule.aggregatedValueMatrix[rowIndex][cellIndex]) : Number(cell.value) : Number(cell.value);\n\n              if (yValue === 0) {\n                this.accEmptyPoint = true;\n              }\n\n              if (this.columnGroupObject[columnSeries]) {\n                this.columnGroupObject[columnSeries].push({\n                  x: this.dataSourceSettings.rows.length === 0 ? firstRowCell.formattedText : rowHeaders,\n                  y: yValue,\n                  rIndex: rowIndex,\n                  cIndex: cellIndex\n                });\n              } else {\n                this.columnGroupObject[columnSeries] = [{\n                  x: this.dataSourceSettings.rows.length === 0 ? firstRowCell.formattedText : rowHeaders,\n                  y: yValue,\n                  rIndex: rowIndex,\n                  cIndex: cellIndex\n                }];\n              }\n            }\n\n            prevMemberCell = memberCell;\n          }\n        }\n      }\n    }\n\n    this.refreshChart();\n  };\n  /**\n   * Refreshing chart based on the updated chartSettings.\n   * @returns {void}\n   */\n\n\n  PivotChart.prototype.refreshChart = function () {\n    this.chartSeries = [];\n    var columnKeys = Object.keys(this.columnGroupObject);\n    this.persistSettings = JSON.parse(this.parent.getPersistData()).chartSettings;\n    var delimiter = this.parent.chartSettings.columnDelimiter ? this.parent.chartSettings.columnDelimiter : '-';\n    var columnHeader = this.parent.chartSettings.columnHeader && this.parent.chartSettings.columnHeader !== '' ? this.parent.chartSettings.columnHeader.split(delimiter).join(' - ') : '';\n    var chartType = this.chartSettings.chartSeries ? this.chartSettings.chartSeries.type : undefined;\n    var fieldWithCaption = {};\n\n    for (var i = 0; i < this.parent.dataSourceSettings.values.length; i++) {\n      fieldWithCaption[this.parent.dataSourceSettings.values[i].name] = !isNullOrUndefined(this.parent.dataSourceSettings.values[i].caption) ? this.parent.dataSourceSettings.values[i].caption : undefined;\n    }\n\n    if (this.accumulationType.indexOf(chartType) > -1 && columnKeys.length > 0) {\n      this.currentColumn = columnKeys.indexOf(columnHeader + ' | ' + this.currentMeasure) > -1 && columnHeader !== undefined ? columnHeader + ' | ' + this.currentMeasure : columnKeys[0];\n      var currentSeries = {};\n      currentSeries = this.persistSettings.chartSeries ? this.frameChartSeries(this.persistSettings.chartSeries) : currentSeries;\n\n      if ((isNullOrUndefined(currentSeries.palettes) || currentSeries.palettes.length == 0) && !isNullOrUndefined(this.persistSettings.palettes) && this.persistSettings.palettes.length > 0) {\n        currentSeries.palettes = this.persistSettings.palettes;\n      }\n\n      currentSeries.dataSource = this.columnGroupObject[this.currentColumn];\n      currentSeries.xName = 'x';\n      currentSeries.yName = 'y';\n\n      if (isBlazor()) {\n        if (isNullOrUndefined(this.persistSettings.chartSeries.dataLabel.visible)) {\n          this.persistSettings.chartSeries.dataLabel.visible = true;\n          this.persistSettings.chartSeries.dataLabel.position = \"Outside\";\n        }\n      }\n\n      if (this.persistSettings.chartSeries && this.persistSettings.chartSeries.dataLabel) {\n        currentSeries.dataLabel = this.persistSettings.chartSeries.dataLabel;\n        currentSeries.dataLabel.name = 'x';\n      } else {\n        currentSeries.dataLabel = {\n          visible: true,\n          position: \"Outside\",\n          name: 'x'\n        };\n        this.parent.setProperties({\n          chartSettings: {\n            chartSeries: {\n              dataLabel: {\n                visible: true,\n                position: \"Outside\"\n              }\n            }\n          }\n        }, true);\n      }\n\n      if (this.accEmptyPoint && currentSeries.emptyPointSettings) {\n        currentSeries.emptyPointSettings.mode = 'Zero';\n      } else if (this.accEmptyPoint) {\n        currentSeries.emptyPointSettings = {\n          mode: 'Zero'\n        };\n      }\n\n      currentSeries.name = this.currentColumn;\n\n      if (chartType === 'Doughnut') {\n        currentSeries.type = 'Pie';\n        currentSeries.innerRadius = this.chartSettings.chartSeries.innerRadius ? this.chartSettings.chartSeries.innerRadius : '40%';\n      } else if (chartType === 'Pie') {\n        currentSeries.innerRadius = this.chartSettings.chartSeries.innerRadius ? this.chartSettings.chartSeries.innerRadius : '0';\n      }\n\n      this.chartSeries = this.chartSeries.concat(currentSeries);\n    } else {\n      for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n        var key = columnKeys_1[_i];\n        var currentSeries = {};\n        currentSeries = this.persistSettings.chartSeries ? this.frameChartSeries(this.persistSettings.chartSeries) : currentSeries;\n\n        if (!isNullOrUndefined(currentSeries.palettes) && currentSeries.palettes.length > 0 && (isNullOrUndefined(this.persistSettings.palettes) || this.persistSettings.palettes.length == 0)) {\n          this.chartSettings.palettes = currentSeries.palettes;\n        }\n\n        for (var i = 0; i < this.columnGroupObject[key].length; i++) {\n          this.columnGroupObject[key][i].x = this.columnGroupObject[key][i].x === '' ? this.parent.localeObj.getConstant('blank') : this.columnGroupObject[key][i].x;\n        }\n\n        currentSeries.dataSource = this.columnGroupObject[key];\n        currentSeries.xName = 'x';\n        currentSeries.yName = 'y';\n        var multiAxisKey = void 0;\n\n        if (this.chartSettings.enableMultipleAxis) {\n          var fieldCaptionName = key.split(' | ')[1];\n          fieldCaptionName = !isNullOrUndefined(fieldWithCaption[fieldCaptionName]) ? fieldWithCaption[fieldCaptionName] : fieldCaptionName;\n          multiAxisKey = key.split(' | ')[0] + ' | ' + fieldCaptionName;\n        }\n\n        currentSeries.name = this.chartSettings.enableMultipleAxis ? multiAxisKey : key.split(' | ')[0];\n\n        if (['Radar', 'Polar'].indexOf(chartType) < 0) {\n          var measure = key.split(' | ')[1];\n          currentSeries.yAxisName = this.measuresNames[measure] ? this.measuresNames[measure] : measure;\n        }\n\n        if (this.persistSettings.chartSeries && this.persistSettings.chartSeries.emptyPointSettings) {\n          currentSeries.emptyPointSettings = this.persistSettings.chartSeries.emptyPointSettings;\n        }\n\n        this.chartSeries = this.chartSeries.concat(currentSeries);\n      }\n    }\n\n    var seriesEvent = {\n      series: this.chartSeries,\n      cancel: false\n    };\n    var pivotChart = this;\n    this.parent.trigger(events.chartSeriesCreated, seriesEvent, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        pivotChart.bindChart();\n      } else {\n        if (pivotChart.element) {\n          remove(pivotChart.element);\n        }\n\n        pivotChart.parent.notify(events.contentReady, {});\n      }\n    });\n  };\n\n  PivotChart.prototype.frameObjectWithKeys = function (series) {\n    var keys = Object.keys(series);\n    var keyPos = 0;\n    var framedSeries = {};\n\n    while (keyPos < keys.length) {\n      framedSeries[keys[keyPos]] = series[keys[keyPos]];\n      keyPos++;\n    }\n\n    return framedSeries;\n  };\n\n  PivotChart.prototype.frameChartSeries = function (series) {\n    var keys = Object.keys(series);\n    var keyPos = 0;\n    var framedSeries = {};\n\n    while (keyPos < keys.length) {\n      if (this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type) > -1 && ['fill', 'dashArray', 'width', 'segmentAxis', 'drawType', 'isClosed', 'segments', 'stackingGroup', 'marker', 'errorBar', 'trendlines', 'minRadius', 'splineType', 'maxRadius', 'cardinalSplineTension', 'columnWidth', 'columnSpacing', 'cornerRadius'].indexOf(keys[keyPos]) > -1 || this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type) < 0 && ['endAngle', 'explode', 'explodeAll', 'explodeIndex', 'explodeOffset', 'gapRatio', 'groupMode', 'groupTo', 'neckHeight', 'neckWidth', 'pyramidMode', 'startAngle', 'dataLabel', 'innerRadius'].indexOf(keys[keyPos]) > -1) {\n        keyPos++;\n        continue;\n      }\n\n      framedSeries[keys[keyPos]] = series[keys[keyPos]];\n      keyPos++;\n    }\n\n    return framedSeries;\n  };\n\n  PivotChart.prototype.bindChart = function () {\n    this.parent.showWaitingPopup();\n    var currentXAxis = this.configXAxis();\n    var currentTooltipSettings = this.configTooltipSettings();\n    var currentLegendSettings = this.configLegendSettings();\n    var currentZoomSettings = this.configZoomSettings();\n    var axesWithRows = this.frameAxesWithRows();\n    var type = this.chartSettings.chartSeries.type;\n\n    if (this.parent.displayOption.view === 'Both') {\n      this.element = this.parent.displayOption.primary === 'Chart' ? this.parent.element.insertBefore(!this.element ? createElement('div', {\n        className: cls.PIVOTCHART,\n        id: this.parent.element.id + '_chart'\n      }) : this.element, this.parent.element.querySelector('.' + cls.GRID_CLASS)) : this.parent.element.appendChild(!this.element ? createElement('div', {\n        className: cls.PIVOTCHART,\n        id: this.parent.element.id + '_chart'\n      }) : this.element);\n    } else if (!this.element) {\n      this.element = this.parent.element.appendChild(createElement('div', {\n        className: cls.PIVOTCHART,\n        id: this.parent.element.id + '_chart'\n      }));\n    }\n\n    if (!this.chartElement && this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n      this.parent.element.querySelector('.' + cls.PIVOTCHART).innerHTML = '';\n      this.chartElement = this.parent.element.querySelector('.' + cls.PIVOTCHART).appendChild(createElement('div', {\n        className: cls.PIVOTCHART_INNER,\n        id: this.parent.element.id + '_chartInner'\n      }));\n    }\n\n    if (this.parent.element.querySelector('.' + cls.PIVOTCHART_INNER)) {\n      this.parent.element.querySelector('.' + cls.PIVOTCHART_INNER).innerHTML = '';\n    }\n\n    if (this.parent.showGroupingBar) {\n      this.element.style.minWidth = '400px !important';\n    } else {\n      this.element.style.minWidth = '310px !important';\n    }\n\n    var width = this.parent.width.toString();\n\n    if (this.parent.showToolbar && this.parent.grid) {\n      width = this.parent.getGridWidthAsNumber().toString();\n    }\n\n    var height = this.getChartHeight();\n\n    if (this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis && this.accumulationType.indexOf(type) < 0) {\n      this.parent.element.querySelector('.' + cls.PIVOTCHART).style.height = (height === 'auto' ? this.getChartAutoHeight() : height) + 'px';\n      this.parent.element.querySelector('.' + cls.PIVOTCHART).style.width = width + 'px';\n\n      if (this.parent.chartSettings.chartSeries.type !== 'Polar' && this.parent.chartSettings.chartSeries.type !== 'Radar') {\n        this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflow = 'auto';\n        this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflowX = 'hidden';\n      }\n    }\n\n    if (this.parent.chart && (this.parent.chart.getModuleName() === 'accumulationchart' && this.accumulationType.indexOf(type) < 0 || this.parent.chart.getModuleName() === 'chart' && this.accumulationType.indexOf(type) > -1)) {\n      this.parent.chart.destroy();\n\n      if (select('#' + this.parent.element.id + '_chart', this.parent.element)) {\n        select('#' + this.parent.element.id + '_chart', this.parent.element).innerHTML = '';\n        select('#' + this.parent.element.id + '_chart', this.parent.element).appendChild(createElement('div', {\n          className: cls.PIVOTCHART_INNER,\n          id: this.parent.element.id + '_chartInner'\n        }));\n      }\n    }\n\n    if (!(this.parent.chart && this.parent.chart.element && this.parent.element.querySelector('.e-chart') || this.parent.element.querySelector('.e-accumulationchart')) || this.parent.toolbarModule && this.parent.toolbarModule.isMultiAxisChange) {\n      if (this.parent.toolbarModule && this.parent.toolbarModule.isMultiAxisChange && this.parent.chart) {\n        if (!this.parent.chart.isDestroyed) {\n          this.parent.chart.destroy();\n        }\n\n        this.parent.chart = undefined;\n        select('#' + this.parent.element.id + '_chart', this.parent.element).innerHTML = '';\n        select('#' + this.parent.element.id + '_chart', this.parent.element).appendChild(createElement('div', {\n          className: cls.PIVOTCHART_INNER,\n          id: this.parent.element.id + '_chartInner'\n        }));\n        this.parent.toolbarModule.isMultiAxisChange = false;\n      }\n\n      Chart.Inject(ColumnSeries, StackingColumnSeries, RangeColumnSeries, BarSeries, StackingBarSeries, ScatterSeries, BubbleSeries, LineSeries, StepLineSeries, SplineSeries, SplineAreaSeries, MultiColoredLineSeries, PolarSeries, RadarSeries, AreaSeries, RangeAreaSeries, StackingAreaSeries, StepAreaSeries, MultiColoredAreaSeries, ParetoSeries, Legend, Tooltip, Category, MultiLevelLabel, ScrollBar, Zoom, Export, Crosshair, Selection, StripLine, DataLabel);\n      AccumulationChart.Inject(PieSeries, FunnelSeries, PyramidSeries, AccumulationDataLabel, AccumulationLegend, AccumulationTooltip, Export);\n\n      if (this.accumulationType.indexOf(type) > -1) {\n        this.parent.chart = new AccumulationChart({\n          series: this.chartSeries.length > 0 ? this.chartSeries : [{}],\n          legendSettings: currentLegendSettings,\n          tooltip: currentTooltipSettings,\n          width: width,\n          height: height.toString(),\n          title: this.chartSettings.title,\n          enableSmartLabels: this.chartSettings.enableSmartLabels,\n          center: this.chartSettings.pieCenter,\n          enableBorderOnMouseMove: this.chartSettings.enableBorderOnMouseMove,\n          highLightMode: this.chartSettings.highlightMode,\n          highlightPattern: this.chartSettings.highlightPattern,\n          titleStyle: this.chartSettings.titleStyle,\n          subTitle: this.chartSettings.subTitle,\n          subTitleStyle: this.chartSettings.subTitleStyle,\n          margin: this.chartSettings.margin,\n          border: this.chartSettings.border,\n          background: this.chartSettings.background,\n          theme: this.chartSettings.theme,\n          selectionMode: this.chartSettings.accumulationSelectionMode,\n          isMultiSelect: this.chartSettings.isMultiSelect,\n          enableExport: this.chartSettings.enableExport,\n          selectedDataIndexes: this.chartSettings.selectedDataIndexes,\n          enableAnimation: this.chartSettings.enableAnimation,\n          useGroupingSeparator: this.chartSettings.useGroupingSeparator,\n          locale: this.parent.locale,\n          enableRtl: this.parent.enableRtl,\n          beforePrint: this.chartSettings.beforePrint ? this.chartSettings.beforePrint.bind(this) : undefined,\n          animationComplete: this.chartSettings.animationComplete ? this.chartSettings.animationComplete.bind(this) : undefined,\n          legendRender: this.chartSettings.legendRender ? this.chartSettings.legendRender.bind(this) : undefined,\n          textRender: this.chartSettings.textRender ? this.chartSettings.textRender.bind(this) : undefined,\n          pointRender: this.chartSettings.pointRender ? this.chartSettings.pointRender.bind(this) : undefined,\n          seriesRender: this.chartSettings.seriesRender ? this.chartSettings.seriesRender.bind(this) : undefined,\n          chartMouseMove: this.chartSettings.chartMouseMove ? this.chartSettings.chartMouseMove.bind(this) : undefined,\n          chartMouseClick: this.chartSettings.chartMouseClick ? this.chartSettings.chartMouseClick.bind(this) : undefined,\n          pointMove: this.chartSettings.pointMove ? this.chartSettings.pointMove.bind(this) : undefined,\n          pointClick: this.pointClick.bind(this),\n          chartMouseLeave: this.chartSettings.chartMouseLeave ? this.chartSettings.chartMouseLeave.bind(this) : undefined,\n          chartMouseDown: this.chartSettings.chartMouseDown ? this.chartSettings.chartMouseDown.bind(this) : undefined,\n          chartMouseUp: this.chartSettings.chartMouseUp ? this.chartSettings.chartMouseUp.bind(this) : undefined,\n          tooltipRender: this.tooltipRender.bind(this),\n          loaded: this.loaded.bind(this),\n          load: this.load.bind(this),\n          resized: this.resized.bind(this)\n        });\n      } else {\n        this.parent.chart = new Chart({\n          series: this.chartSeries.length > 0 ? this.chartSeries : [{}],\n          legendSettings: currentLegendSettings,\n          tooltip: currentTooltipSettings,\n          zoomSettings: currentZoomSettings,\n          axes: type === 'Polar' || type === 'Radar' ? [] : axesWithRows.axes,\n          rows: type === 'Polar' || type === 'Radar' ? [{}] : type === 'Bar' || type === 'StackingBar' || type === 'StackingBar100' && this.chartSettings.enableMultipleAxis ? [{\n            height: '100%'\n          }] : axesWithRows.rows,\n          columns: type === 'Polar' || type === 'Radar' ? [{}] : type === 'Bar' || type === 'StackingBar' || type === 'StackingBar100' && this.chartSettings.enableMultipleAxis ? axesWithRows.columns : [{\n            width: '100%'\n          }],\n          primaryYAxis: type === 'Polar' || type === 'Radar' ? axesWithRows.axes[0] : {\n            visible: false\n          },\n          primaryXAxis: currentXAxis,\n          width: width,\n          height: this.parent.chartSettings.chartSeries.type !== 'Polar' && this.parent.chartSettings.chartSeries.type !== 'Radar' && this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis && this.parent.dataSourceSettings.values.length > 0 ? Number(height) > this.parent.dataSourceSettings.values.length * 235 + 100 ? isNaN(Number(height)) ? height.toString() : (Number(height) - 5).toString() : !isNaN(Number(height)) || this.parent.dataSourceSettings.values.length > 1 ? (this.parent.dataSourceSettings.values.length * 235 + 100).toString() : height.toString() : height.toString(),\n          title: this.chartSettings.title,\n          titleStyle: this.chartSettings.titleStyle,\n          subTitle: this.chartSettings.subTitle,\n          subTitleStyle: this.chartSettings.subTitleStyle,\n          margin: this.chartSettings.margin,\n          border: this.chartSettings.border,\n          background: this.chartSettings.background,\n          chartArea: this.chartSettings.chartArea,\n          palettes: this.chartSettings.palettes,\n          theme: this.chartSettings.theme,\n          crosshair: this.chartSettings.crosshair,\n          selectionMode: this.chartSettings.selectionMode,\n          isMultiSelect: this.chartSettings.isMultiSelect,\n          enableExport: this.chartSettings.enableExport,\n          selectedDataIndexes: this.chartSettings.selectedDataIndexes,\n          isTransposed: this.chartSettings.isTransposed,\n          enableAnimation: this.chartSettings.enableAnimation,\n          enableCanvas: this.chartSettings.enableCanvas,\n          useGroupingSeparator: this.chartSettings.useGroupingSeparator,\n          description: this.chartSettings.description,\n          tabIndex: this.chartSettings.tabIndex,\n          locale: this.parent.locale,\n          enableRtl: this.parent.enableRtl,\n          enableSideBySidePlacement: this.chartSettings.enableSideBySidePlacement,\n          beforePrint: this.chartSettings.beforePrint ? this.chartSettings.beforePrint.bind(this) : undefined,\n          animationComplete: this.chartSettings.animationComplete ? this.chartSettings.animationComplete.bind(this) : undefined,\n          legendRender: this.chartSettings.legendRender ? this.chartSettings.legendRender.bind(this) : undefined,\n          textRender: this.chartSettings.textRender ? this.chartSettings.textRender.bind(this) : undefined,\n          pointRender: this.chartSettings.pointRender ? this.chartSettings.pointRender.bind(this) : undefined,\n          seriesRender: this.chartSettings.seriesRender ? this.chartSettings.seriesRender.bind(this) : undefined,\n          axisMultiLabelRender: this.chartSettings.multiLevelLabelRender ? this.chartSettings.multiLevelLabelRender.bind(this) : undefined,\n          chartMouseMove: this.chartSettings.chartMouseMove ? this.chartSettings.chartMouseMove.bind(this) : undefined,\n          chartMouseClick: this.chartSettings.chartMouseClick ? this.chartSettings.chartMouseClick.bind(this) : undefined,\n          pointMove: this.chartSettings.pointMove ? this.chartSettings.pointMove.bind(this) : undefined,\n          pointClick: this.pointClick.bind(this),\n          chartMouseLeave: this.chartSettings.chartMouseLeave ? this.chartSettings.chartMouseLeave.bind(this) : undefined,\n          chartMouseDown: this.chartSettings.chartMouseDown ? this.chartSettings.chartMouseDown.bind(this) : undefined,\n          chartMouseUp: this.chartSettings.chartMouseUp ? this.chartSettings.chartMouseUp.bind(this) : undefined,\n          dragComplete: this.chartSettings.dragComplete ? this.chartSettings.dragComplete.bind(this) : undefined,\n          zoomComplete: this.chartSettings.zoomComplete ? this.chartSettings.zoomComplete.bind(this) : undefined,\n          scrollStart: this.chartSettings.scrollStart ? this.chartSettings.scrollStart.bind(this) : undefined,\n          scrollEnd: this.chartSettings.scrollEnd ? this.chartSettings.scrollEnd.bind(this) : undefined,\n          scrollChanged: this.chartSettings.scrollChanged ? this.chartSettings.scrollChanged.bind(this) : undefined,\n          tooltipRender: this.tooltipRender.bind(this),\n          loaded: this.loaded.bind(this),\n          load: this.load.bind(this),\n          resized: this.resized.bind(this),\n          axisLabelRender: this.axisLabelRender.bind(this),\n          multiLevelLabelClick: this.multiLevelLabelClick.bind(this)\n        });\n      }\n\n      this.parent.chart.isStringTemplate = true;\n    } else {\n      this.parent.chart.series = this.chartSeries;\n      this.parent.chart.title = this.parent.chartSettings.title;\n      this.parent.chart.subTitle = this.parent.chartSettings.subTitle;\n      this.parent.chart.background = this.parent.chartSettings.background;\n      this.parent.chart.theme = this.parent.chartSettings.theme;\n      this.parent.chart.legendSettings = currentLegendSettings;\n      this.parent.chart.selectionMode = this.parent.chartSettings.selectionMode;\n      this.parent.chart.enableExport = this.parent.chartSettings.enableExport;\n      this.parent.chart.isMultiSelect = this.parent.chartSettings.isMultiSelect;\n      this.parent.chart.enableAnimation = this.parent.chartSettings.enableAnimation;\n      this.parent.chart.useGroupingSeparator = this.parent.chartSettings.useGroupingSeparator;\n      this.parent.chart.highlightPattern = this.parent.chartSettings.highlightPattern;\n\n      if (this.accumulationType.indexOf(type) > -1) {\n        this.parent.chart.enableBorderOnMouseMove = this.parent.chartSettings.enableBorderOnMouseMove;\n        this.parent.chart.highLightMode = this.parent.chartSettings.highlightMode;\n        this.parent.chart.enableSmartLabels = this.parent.chartSettings.enableSmartLabels;\n      } else {\n        this.parent.chart.palettes = this.parent.chartSettings.palettes;\n        this.parent.chart.isTransposed = this.parent.chartSettings.isTransposed;\n        this.parent.chart.enableSideBySidePlacement = this.parent.chartSettings.enableSideBySidePlacement;\n        this.parent.chart.tabIndex = this.parent.chartSettings.tabIndex;\n        this.parent.chart.description = this.parent.chartSettings.description;\n        this.parent.chart.enableCanvas = this.parent.chartSettings.enableCanvas;\n      }\n\n      if (type === 'Polar' || type === 'Radar') {\n        this.parent.chart.primaryXAxis = currentXAxis;\n        this.parent.chart.primaryYAxis.visible = true;\n        this.parent.chart.primaryYAxis = axesWithRows.axes[0];\n        this.parent.chart.axes = [];\n        this.parent.chart.rows = [{}];\n      } else if (this.accumulationType.indexOf(type) < 0 && this.parent.chart.getModuleName() === 'chart') {\n        this.parent.chart.primaryYAxis.visible = false;\n        this.parent.chart.primaryXAxis = currentXAxis;\n        this.parent.chart.axes = axesWithRows.axes;\n\n        if (type === 'Bar' || type === 'StackingBar' || type === 'StackingBar100' && this.chartSettings.enableMultipleAxis) {\n          this.parent.chart.rows = [{\n            height: '100%'\n          }];\n          this.parent.chart.columns = axesWithRows.columns;\n        } else {\n          this.parent.chart.rows = axesWithRows.rows;\n          this.parent.chart.columns = [{\n            width: '100%'\n          }];\n        }\n      }\n\n      this.parent.chart.refresh();\n\n      if (this.accumulationType.indexOf(type) > -1 && this.parent.chart.getModuleName() === 'accumulationchart' && (this.parent.dataSourceSettings.rows.length === 0 || this.parent.dataSourceSettings.columns.length === 0)) {\n        this.parent.hideWaitingPopup();\n\n        if (this.parent.pivotFieldListModule) {\n          hideSpinner(this.parent.pivotFieldListModule.fieldListSpinnerElement);\n        }\n      }\n    }\n\n    if (this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n      this.parent.chart.appendTo('#' + this.parent.element.id + '_chartInner');\n    } else {\n      this.parent.chart.appendTo('#' + this.parent.element.id + '_chart');\n    }\n  };\n\n  PivotChart.prototype.pointClick = function (args) {\n    var dataSource = args.series.dataSource ? args.series.dataSource : this.parent.chart.series[args.seriesIndex].dataSource;\n\n    if ((['Pie', 'Funnel', 'Doughnut', 'Pyramid', 'Radar', 'Polar'].indexOf(this.parent.chartSettings.chartSeries.type) > -1 || !this.parent.chartSettings.showMultiLevelLabels) && this.parent.dataSourceSettings.rows.length > 1) {\n      this.pivotIndex = {\n        rIndex: dataSource ? dataSource[args.pointIndex].rIndex : undefined,\n        cIndex: dataSource ? dataSource[args.pointIndex].cIndex : undefined\n      };\n      this.creatMenu();\n      var pos = this.parent.element.getBoundingClientRect();\n      var y = (this.parent.element.querySelector('.e-pivot-toolbar') ? this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 0) + (this.parent.element.querySelector('.e-chart-grouping-bar') ? this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 0) + (window.scrollY || document.documentElement.scrollTop) + pos.top;\n      this.accumulationMenu.open(y + args.y, args.x + pos.left + (window.scrollX || document.documentElement.scrollLeft));\n    } else if ((this.parent.allowDrillThrough || this.parent.editSettings.allowEditing) && this.parent.drillThroughModule) {\n      var rIndex = dataSource[args.pointIndex].rIndex;\n      var cIndex = dataSource[args.pointIndex].cIndex;\n      this.parent.drillThroughModule.executeDrillThrough(this.parent.pivotValues[rIndex][cIndex], rIndex, cIndex);\n    }\n\n    this.parent.trigger(events.chartPointClick, args);\n  };\n  /* eslint-enable */\n\n\n  PivotChart.prototype.frameAxesWithRows = function () {\n    var axes = [];\n    var rows = [];\n    var columns = [];\n    var percentChart = this.persistSettings.chartSeries && (this.persistSettings.chartSeries.type === 'StackingColumn100' || this.persistSettings.chartSeries.type === 'StackingBar100' || this.persistSettings.chartSeries.type === 'StackingArea100');\n    var percentAggregateTypes = ['PercentageOfGrandTotal', 'PercentageOfColumnTotal', 'PercentageOfRowTotal', 'PercentageOfDifferenceFrom', 'PercentageOfParentRowTotal', 'PercentageOfParentColumnTotal', 'PercentageOfParentTotal'];\n\n    if (this.chartSettings.enableMultipleAxis) {\n      var valCnt = 0;\n      var divider = 100 / this.dataSourceSettings.values.length + '%';\n\n      for (var _i = 0, _a = this.dataSourceSettings.values; _i < _a.length; _i++) {\n        var item = _a[_i];\n        var measureField = this.engineModule.fieldList[item.name];\n        var measureAggregatedName = (this.parent.dataType === 'olap' ? '' : this.parent.localeObj.getConstant(measureField.aggregateType) + ' ' + this.parent.localeObj.getConstant('of') + ' ') + measureField.caption; // let formatSetting: IFormatSettings = this.dataSourceSettings.formatSettings.filter((itm: IFormatSettings) => {\n        //     return itm.name === item.name;\n        // })[0];\n\n        var formatSetting = void 0;\n\n        for (var _b = 0, _c = this.dataSourceSettings.formatSettings; _b < _c.length; _b++) {\n          var field = _c[_b];\n\n          if (field.name === item.name) {\n            formatSetting = field;\n            break;\n          }\n        }\n\n        var format = PivotUtil.inArray(measureField.aggregateType, percentAggregateTypes) !== -1 ? 'P2' : formatSetting ? formatSetting.format.toLowerCase().match(/n|p|c/) === null ? 'N' : formatSetting.format : this.parent.dataType === 'olap' ? this.getFormat(measureField.formatString) : 'N';\n        var resFormat = this.chartSettings.chartSeries.type === 'Polar' || this.chartSettings.chartSeries.type === 'Radar' ? true : false;\n        var currentYAxis = {};\n        currentYAxis = this.persistSettings.primaryYAxis ? this.frameObjectWithKeys(this.persistSettings.primaryYAxis) : currentYAxis;\n        currentYAxis.labelFormat = currentYAxis.labelFormat ? currentYAxis.labelFormat : percentChart ? '' : !resFormat ? format : 'N';\n        currentYAxis.title = currentYAxis.title ? currentYAxis.title : measureAggregatedName;\n        currentYAxis.plotOffsetTop = currentYAxis.plotOffsetTop ? currentYAxis.plotOffsetTop : this.chartSettings.chartSeries.type === 'Bar' || this.chartSettings.chartSeries.type === 'StackingBar' || this.chartSettings.chartSeries.type === 'StackingBar100' ? 50 : 30;\n\n        if (!resFormat) {\n          currentYAxis.name = this.measuresNames[item.name] ? this.measuresNames[item.name] : item.name;\n        }\n\n        axes = axes.concat(currentYAxis);\n\n        if (this.chartSettings.multipleAxisMode === 'Stacked') {\n          currentYAxis.rowIndex = valCnt;\n          currentYAxis.columnIndex = valCnt;\n          rows.push({\n            height: divider\n          });\n          columns.push({\n            width: divider\n          });\n        } else {\n          currentYAxis.rowIndex = 0;\n          currentYAxis.columnIndex = 0;\n          rows = [{\n            height: '100%'\n          }];\n          columns = [{\n            width: '100%'\n          }];\n        }\n\n        valCnt++;\n      }\n    } else {\n      var measureField = this.engineModule.fieldList[this.currentMeasure];\n      var measureAggregatedName = (this.parent.dataType === 'olap' ? '' : this.parent.localeObj.getConstant(measureField.aggregateType) + ' ' + this.parent.localeObj.getConstant('of') + ' ') + measureField.caption; // let formatSetting: IFormatSettings = this.dataSourceSettings.formatSettings.filter((item: IFormatSettings) => {\n      //     return item.name === this.currentMeasure;\n      // })[0];\n\n      var formatSetting = void 0;\n\n      for (var _d = 0, _e = this.dataSourceSettings.formatSettings; _d < _e.length; _d++) {\n        var item = _e[_d];\n\n        if (item.name === this.currentMeasure) {\n          formatSetting = item;\n          break;\n        }\n      }\n\n      var lengthofFormat = void 0;\n\n      if (formatSetting) {\n        lengthofFormat = formatSetting.format.length;\n      }\n\n      var currentYAxis = {};\n      var format = PivotUtil.inArray(measureField.aggregateType, percentAggregateTypes) !== -1 ? 'P2' : formatSetting ? formatSetting.format.toLowerCase().match(/n[0-10]|p[0-10]|c[0-10]/) === null || lengthofFormat > 3 ? 'N' : formatSetting.format : this.parent.dataType === 'olap' ? this.getFormat(measureField.formatString) : 'N';\n      currentYAxis = this.persistSettings.primaryYAxis ? this.frameObjectWithKeys(this.persistSettings.primaryYAxis) : currentYAxis;\n      currentYAxis.rowIndex = 0;\n      currentYAxis.columnIndex = 0;\n\n      if (!(this.chartSettings.chartSeries.type === 'Polar' || this.chartSettings.chartSeries.type === 'Radar')) {\n        currentYAxis.name = this.measuresNames[this.currentMeasure] ? this.measuresNames[this.currentMeasure] : this.currentMeasure;\n      }\n\n      currentYAxis.labelFormat = currentYAxis.labelFormat ? currentYAxis.labelFormat : percentChart ? '' : format;\n      currentYAxis.title = currentYAxis.title ? currentYAxis.title : measureAggregatedName;\n      axes = axes.concat(currentYAxis);\n      rows.push({\n        height: '100%'\n      });\n      columns.push({\n        width: '100%'\n      });\n    }\n\n    return {\n      axes: axes,\n      rows: rows,\n      columns: columns\n    };\n  };\n\n  PivotChart.prototype.getFormat = function (format) {\n    if (format === 'Currency') {\n      format = 'C';\n    } else if (format === 'Percent') {\n      format = 'P';\n    } else {\n      format = 'N';\n    }\n\n    return format;\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  PivotChart.prototype.getColumnTotalIndex = function (pivotValues) {\n    var colIndexColl = {};\n    var rKeys = Object.keys(pivotValues);\n\n    for (var _i = 0, rKeys_2 = rKeys; _i < rKeys_2.length; _i++) {\n      var rowIndex = rKeys_2[_i];\n      var rows = pivotValues[Number(rowIndex)];\n      var cKeys = void 0;\n\n      if (!isNullOrUndefined(rows)) {\n        cKeys = Object.keys(rows);\n\n        for (var _a = 0, cKeys_2 = cKeys; _a < cKeys_2.length; _a++) {\n          var cellIndex = cKeys_2[_a];\n          var cell = rows[Number(cellIndex)];\n\n          if (!isNullOrUndefined(cell)) {\n            if (cell.axis !== 'column') {\n              return colIndexColl;\n            } else if ((cell.type === 'sum' || (this.dataSourceSettings.columns.length === 0 ? false : cell.type === 'grand sum')) && cell.rowSpan !== -1) {\n              colIndexColl[cell.colIndex] = cell.colIndex;\n            }\n          }\n        }\n      }\n    }\n\n    return colIndexColl;\n  };\n\n  PivotChart.prototype.groupHierarchyWithLevels = function (pivotValues) {\n    var _a, _b;\n\n    this.fieldPosition = [];\n    var group = {};\n    var fieldCount = 0;\n    var levelPos = {};\n    this.measurePos = this.engineModule.tupRowInfo[0].measurePosition;\n\n    for (var rowPos = 0; rowPos < pivotValues.length; rowPos++) {\n      var cell = pivotValues[rowPos][0];\n\n      if (cell && cell.axis === 'row' && cell.type !== 'grand sum') {\n        if (isNullOrUndefined(group[cell.hierarchy])) {\n          if (cell.memberType === 3) {\n            if (fieldCount === this.measurePos) {\n              this.fieldPosition[this.measurePos] = cell.hierarchy;\n              group[cell.hierarchy] = (_a = {}, _a[cell.levelUniqueName] = cell.levelUniqueName, _a);\n            } else {\n              fieldCount--;\n            }\n          } else {\n            this.fieldPosition[fieldCount] = cell.hierarchy;\n            group[cell.hierarchy] = (_b = {}, _b[cell.levelUniqueName] = cell.levelUniqueName, _b);\n          }\n\n          fieldCount++;\n        } else {\n          group[cell.hierarchy][cell.levelUniqueName] = cell.levelUniqueName;\n        }\n      }\n    }\n\n    var lastEnd = -1;\n\n    for (var pos = 0; pos < this.fieldPosition.length; pos++) {\n      if (this.measurePos !== pos) {\n        levelPos[this.fieldPosition[pos]] = {\n          start: lastEnd + 1,\n          end: lastEnd + Object.keys(group[this.fieldPosition[pos]]).length\n        };\n        lastEnd = levelPos[this.fieldPosition[pos]].end;\n      }\n    }\n\n    return levelPos;\n  };\n  /* eslint-disable */\n\n\n  PivotChart.prototype.frameMultiLevelLabels = function () {\n    var startKeys = Object.keys(this.headerColl);\n    var parentHeaders = this.headerColl[-0.5];\n\n    for (var _i = 0, startKeys_1 = startKeys; _i < startKeys_1.length; _i++) {\n      var startKey = startKeys_1[_i];\n      var sKey = Number(startKey);\n      var headers = this.headerColl[sKey];\n      var levelPos = 0;\n      var isAvail = false;\n\n      while (levelPos <= this.maxLevel) {\n        if (!isAvail) {\n          if (!headers[levelPos]) {\n            headers[levelPos] = parentHeaders[levelPos];\n          } else {\n            isAvail = true;\n          }\n        } else if (!headers[levelPos]) {\n          headers[levelPos] = {\n            name: headers[levelPos - 1].name,\n            // text: headers[levelPos - 1].text,\n            text: '',\n            hasChild: headers[levelPos - 1].hasChild,\n            isDrilled: headers[levelPos - 1].isDrilled,\n            levelName: headers[levelPos - 1].levelName,\n            level: headers[levelPos - 1].level,\n            fieldName: headers[levelPos - 1].fieldName,\n            rowIndex: headers[levelPos - 1].rowIndex,\n            colIndex: headers[levelPos - 1].colIndex,\n            span: -1\n          }; // headers[levelPos - 1].span = 0;\n        }\n\n        levelPos++;\n      }\n\n      parentHeaders = this.headerColl[sKey];\n    }\n\n    var gRows = {};\n\n    for (var _a = 0, startKeys_2 = startKeys; _a < startKeys_2.length; _a++) {\n      var startKey = startKeys_2[_a];\n      var sKey = Number(startKey);\n      var headers = this.headerColl[sKey];\n      var lKeys = Object.keys(headers);\n\n      for (var _b = 0, lKeys_1 = lKeys; _b < lKeys_1.length; _b++) {\n        var levelKey = lKeys_1[_b];\n        var lKey = Number(levelKey);\n\n        if (gRows[lKey]) {\n          var len = gRows[lKey].length;\n\n          if (headers[lKey].levelName === parentHeaders[lKey].levelName) {\n            gRows[lKey][len - 1].end = gRows[lKey][len - 1].end + 1;\n          } else {\n            gRows[lKey].push({\n              start: sKey,\n              end: sKey + 1,\n              text: headers[lKey].text,\n              type: headers[lKey].span === -1 ? 'WithoutTopandBottomBorder' : 'WithoutTopBorder',\n              customAttributes: headers[lKey]\n            });\n          }\n        } else {\n          gRows[lKey] = [{\n            start: sKey,\n            end: sKey + 1,\n            text: headers[lKey].text,\n            type: headers[lKey].span === -1 ? 'WithoutTopandBottomBorder' : 'WithoutTopBorder',\n            customAttributes: headers[lKey]\n          }];\n        }\n      }\n\n      parentHeaders = headers;\n    }\n\n    var levellength = Object.keys(gRows).length;\n    var multiLevelLabels = [];\n\n    for (var level = levellength - 1; level > -1; level--) {\n      multiLevelLabels.push({\n        categories: gRows[level],\n        border: {\n          width: 1\n        },\n        overflow: 'Trim'\n      });\n    }\n\n    return multiLevelLabels;\n  };\n  /* eslint-enable */\n\n\n  PivotChart.prototype.getZoomFactor = function () {\n    if (!isNaN(Number(this.parent.width))) {\n      this.calculatedWidth = Number(this.parent.width);\n    } else if (this.parent.width.indexOf('%') > -1) {\n      this.calculatedWidth = this.parent.element.clientWidth * (parseFloat(this.parent.width) / 100);\n    } else if (this.parent.width.indexOf('px') > -1) {\n      this.calculatedWidth = Number(this.parent.width.toString().split('px')[0]);\n    } else {\n      this.calculatedWidth = this.parent.element.clientWidth;\n    }\n\n    var seriesLength = this.chartSeries.length * 10 > 120 ? this.chartSeries.length * 10 : 120;\n    var zoomFactor = this.chartSeries.length > 0 ? this.calculatedWidth / (Object.keys(this.chartSeries[0].dataSource).length * seriesLength) : 1;\n    zoomFactor = zoomFactor < 1 && zoomFactor > 0 ? zoomFactor : 1;\n    return zoomFactor;\n  };\n\n  PivotChart.prototype.configTooltipSettings = function () {\n    var tooltip = this.persistSettings.tooltip ? this.persistSettings.tooltip : this.chartSettings.tooltip;\n    tooltip.enable = tooltip.enable === undefined ? true : tooltip.enable;\n\n    if (tooltip.enable && tooltip.template) {\n      this.templateFn = this.parent.templateParser(tooltip.template);\n    }\n\n    if (this.parent.tooltipTemplate) {\n      tooltip.template = tooltip.template ? tooltip.template : this.parent.tooltipTemplate;\n    }\n\n    if (isBlazor()) {\n      this.parent.allowServerDataBinding = false;\n      this.parent.setProperties({\n        chartSettings: {\n          tooltip: {\n            header: tooltip.header ? tooltip.header : ''\n          }\n        }\n      }, true);\n      this.parent.allowServerDataBinding = true;\n    } else {\n      tooltip.header = tooltip.header ? tooltip.header : '';\n    }\n\n    tooltip.enableMarker = tooltip.enableMarker === undefined ? true : tooltip.enableMarker;\n    return tooltip;\n  };\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n\n  PivotChart.prototype.configLegendSettings = function () {\n    var legendSettings = {};\n\n    if (this.chartSettings.legendSettings) {\n      var keyPos = 0;\n      var keys = Object.keys(this.chartSettings.legendSettings);\n\n      while (keyPos < keys.length) {\n        legendSettings[keys[keyPos]] = this.chartSettings.legendSettings[keys[keyPos]];\n        keyPos++;\n      }\n    }\n\n    if (this.accumulationType.indexOf(this.chartSettings.chartSeries.type) > -1 && legendSettings.visible === undefined) {\n      legendSettings.visible = false;\n    }\n\n    legendSettings.padding = legendSettings.padding ? legendSettings.padding : 25;\n    legendSettings.shapePadding = legendSettings.shapePadding ? legendSettings.shapePadding : 10;\n    return legendSettings;\n  };\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n\n  PivotChart.prototype.configXAxis = function () {\n    var currentXAxis = {};\n    currentXAxis = this.persistSettings.primaryXAxis ? this.frameObjectWithKeys(this.persistSettings.primaryXAxis) : currentXAxis;\n    currentXAxis.valueType = 'Category';\n    currentXAxis.labelIntersectAction = currentXAxis.labelIntersectAction ? currentXAxis.labelIntersectAction : 'Rotate45';\n    currentXAxis.title = currentXAxis.title ? currentXAxis.title : this.dataSourceSettings.rows.map(function (args) {\n      return args.caption || args.name;\n    }).join(' / ');\n    currentXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? this.getZoomFactor() : this.parent.chartSettings.primaryXAxis.zoomFactor;\n\n    if (!this.parent.chartSettings.zoomSettings.enableScrollbar) {\n      currentXAxis.zoomFactor = 1;\n    }\n\n    if (this.chartSettings.showMultiLevelLabels && this.chartSettings.chartSeries.type !== 'Pareto') {\n      currentXAxis.multiLevelLabels = this.frameMultiLevelLabels();\n      currentXAxis.border = {\n        width: 1,\n        type: 'WithoutTopandBottomBorder'\n      };\n      currentXAxis.majorTickLines = {\n        width: 0,\n        height: -10\n      };\n    } else {\n      currentXAxis.multiLevelLabels = [];\n      currentXAxis.border = {\n        width: 1,\n        type: 'Rectangle'\n      };\n      currentXAxis.majorTickLines = {\n        width: 0,\n        height: 5\n      };\n    }\n\n    return currentXAxis;\n  };\n\n  PivotChart.prototype.configZoomSettings = function () {\n    var zoomSettings = this.chartSettings.zoomSettings;\n    zoomSettings.enableSelectionZooming = zoomSettings.enableSelectionZooming === undefined ? true : zoomSettings.enableSelectionZooming;\n    zoomSettings.enableScrollbar = zoomSettings.enableScrollbar === undefined ? true : zoomSettings.enableScrollbar;\n    return zoomSettings;\n  };\n\n  PivotChart.prototype.tooltipRender = function (args) {\n    var measure = args.series.yAxisName ? args.series.yAxisName.split('_CumulativeAxis')[0] : this.chartSettings.enableMultipleAxis && this.accumulationType.indexOf(this.chartSettings.chartSeries.type) < 0 ? args.series.name ? args.series.name.split(' | ')[1] : args.data.seriesName ? args.data.seriesName.split(' | ')[1] : this.currentMeasure : this.measuresNames[this.currentMeasure] ? this.measuresNames[this.currentMeasure] : this.currentMeasure;\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n\n    var dataSource = args.series.dataSource ? args.series.dataSource : this.parent.chart.series[args.data.seriesIndex].dataSource;\n    var rowIndex = dataSource ? dataSource[args.data.pointIndex].rIndex : undefined;\n    var colIndex = dataSource ? dataSource[args.data.pointIndex].cIndex : undefined;\n    var measureField = this.engineModule.fieldList[this.measuresNames[measure] ? this.measuresNames[measure] : measure];\n    var aggregateType = this.parent.dataType === 'olap' ? '' : this.parent.localeObj.getConstant(measureField.aggregateType);\n    var measureAggregatedName = (this.parent.dataType === 'olap' ? '' : aggregateType + ' ' + this.parent.localeObj.getConstant('of') + ' ') + measureField.caption;\n    var formattedText = this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type) < 0 ? args.text.split('<b>')[1].split('</b>')[0] : this.engineModule.pivotValues[rowIndex][colIndex].formattedText;\n    var formatField = this.engineModule.formatFields[measureField.id];\n    var formattedValue = formatField && formatField.format && formatField.format.toLowerCase().match(/n|p|c/) !== null && this.chartSettings.useGroupingSeparator ? this.parent.dataType === 'olap' ? this.engineModule.getFormattedValue(args.point.y, measureField.id, formattedText) : this.parent.engineModule.getFormattedValue(args.point.y, measureField.id).formattedText : formattedText;\n    var columnText = args.series.name ? args.series.name.split(' | ')[0] : args.data.seriesName.split(' | ')[0];\n    var rowText = args.point.x;\n\n    if (this.parent.tooltipTemplate && this.parent.getTooltipTemplate() !== undefined || this.chartSettings.tooltip.template) {\n      var rowFields = dataSource ? this.parent.getHeaderField(rowIndex, colIndex, 'row') : '';\n      var columnFields = dataSource ? this.parent.getHeaderField(rowIndex, colIndex, 'Column') : '';\n      var templateVariable = {\n        rowHeaders: rowText,\n        columnHeaders: columnText,\n        aggregateType: aggregateType,\n        value: formattedValue,\n        valueField: measureField.caption,\n        rowFields: rowFields,\n        columnFields: columnFields\n      };\n      var template = void 0;\n\n      if (this.parent.chartSettings && this.parent.chartSettings.tooltip && this.parent.chartSettings.tooltip.enable && this.parent.chartSettings.tooltip.template) {\n        template = this.tooltipTemplateFn()(templateVariable, this, 'tooltipTemplate', this.element.id + '1tooltipTemplate')[0].outerHTML;\n      } else {\n        /* eslint-enable @typescript-eslint/no-explicit-any */\n        template = this.parent.getTooltipTemplate()(templateVariable, this, 'tooltipTemplate', this.element.id + 'tooltipTemplate')[0].outerHTML;\n      }\n\n      args.template = template;\n    } else {\n      args.text = measureAggregatedName + ': ' + formattedValue + (this.dataSourceSettings.columns.length === 0 ? '' : ' <br/>' + this.parent.localeObj.getConstant('column') + ': ' + columnText) + (this.dataSourceSettings.rows.length === 0 ? '' : ' <br/>' + this.parent.localeObj.getConstant('row') + ': ' + rowText);\n      this.parent.trigger(events.chartTooltipRender, args);\n    }\n  };\n\n  PivotChart.prototype.tooltipTemplateFn = function () {\n    return this.templateFn;\n  };\n\n  PivotChart.prototype.loaded = function (args) {\n    this.parent.isChartLoaded = true;\n\n    if (this.parent.chart && this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.showFieldList && this.parent.currentView === 'Chart') {\n      this.parent.groupingBarModule.alignIcon();\n    }\n\n    if (this.chartSettings.showMultiLevelLabels) {\n      var multilabelAxisName = PivotUtil.inArray(this.chartSettings.chartSeries.type, ['Bar', 'StackingBar', 'StackingBar100']) > -1 ? '_chartYAxisMultiLevelLabel0' : '_chartXAxisMultiLevelLabel0';\n\n      if (!isNullOrUndefined(select('#' + this.parent.element.id + multilabelAxisName, this.parent.element))) {\n        this.parent.element.querySelector('#' + this.parent.element.id + multilabelAxisName).setAttribute('cursor', 'pointer');\n      }\n    }\n\n    if (['Pie', 'Funnel', 'Pyramid', 'Doughnut', 'Radar', 'Polar'].indexOf(this.parent.chartSettings.chartSeries.type) >= 0 && this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n      this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflow = 'visible';\n    } else if (this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n      this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflow = 'auto';\n      this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflowX = 'hidden';\n    }\n\n    this.parent.chart.height = ['Pie', 'Funnel', 'Pyramid', 'Doughnut', 'Radar', 'Polar'].indexOf(this.parent.chartSettings.chartSeries.type) < 0 && this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis && this.parent.dataSourceSettings.values.length > 0 ? Number(this.parent.chart.height) > this.parent.dataSourceSettings.values.length * 235 + 100 ?\n    /* eslint-disable-line */\n    isNaN(Number(this.getChartHeight())) ? this.getChartHeight().toString() : (Number(this.getChartHeight()) - 5).toString() : !isNaN(Number(this.getChartHeight())) || this.parent.dataSourceSettings.values.length > 1 ? (this.parent.dataSourceSettings.values.length * 235 + 100).toString() : this.getChartHeight().toString() : this.getChartHeight().toString();\n    this.updateView();\n    this.parent.notify(events.contentReady, {});\n    this.parent.trigger(events.chartLoaded, args);\n\n    if (this.parent.dataSourceSettings.mode === 'Server' && this.parent.isServerWaitingPopup || this.parent.dataSourceSettings.mode === 'Local') {\n      this.parent.hideWaitingPopup();\n    }\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  PivotChart.prototype.updateView = function () {\n    if (this.parent.grid && this.parent.chart && this.parent.showToolbar) {\n      if (this.parent.currentView === 'Table') {\n        this.parent.grid.element.style.display = '';\n        this.parent.chart.element.style.display = 'none';\n\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.e-pivot-grouping-bar') && this.parent.element.querySelector('.e-chart-grouping-bar')) {\n          var groupingTable = this.parent.element.querySelector('.e-pivot-grouping-bar');\n          groupingTable.style.display = '';\n\n          if (groupingTable && groupingTable.querySelector('.' + cls.ALL_FIELDS_PANEL_CLASS) && this.parent.groupingBarModule.gridPanel != null && !this.parent.groupingBarModule.gridPanel.isDestroyed) {\n            this.parent.groupingBarModule.gridPanel.refreshOverflow();\n          }\n\n          this.parent.element.querySelector('.e-chart-grouping-bar').style.display = 'none';\n        }\n\n        if (this.parent.chartSettings.enableMultipleAxis && this.parent.chartSettings.enableScrollOnMultiAxis) {\n          this.parent.element.querySelector('.e-pivotchart').style.display = 'none';\n        }\n      } else {\n        this.parent.grid.element.style.display = 'none';\n        this.parent.chart.element.style.display = '';\n\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.e-pivot-grouping-bar') && this.parent.element.querySelector('.e-chart-grouping-bar')) {\n          this.parent.element.querySelector('.e-pivot-grouping-bar').style.display = 'none';\n          var groupingChartTable = this.parent.element.querySelector('.e-chart-grouping-bar');\n          groupingChartTable.style.display = '';\n\n          if (groupingChartTable && groupingChartTable.querySelector('.' + cls.ALL_FIELDS_PANEL_CLASS) && this.parent.groupingBarModule.chartPanel != null && !this.parent.groupingBarModule.chartPanel.isDestroyed) {\n            this.parent.groupingBarModule.chartPanel.refreshOverflow();\n          }\n        }\n\n        if (this.parent.chartSettings.enableMultipleAxis && this.parent.chartSettings.enableScrollOnMultiAxis) {\n          this.parent.element.querySelector('.e-pivotchart').style.display = '';\n        }\n      }\n    }\n  };\n\n  PivotChart.prototype.creatMenu = function () {\n    if (this.accumulationMenu && !this.accumulationMenu.isDestroyed) {\n      this.accumulationMenu.destroy();\n    }\n\n    var items = (this.parent.allowDrillThrough || this.parent.editSettings.allowEditing) && this.parent.drillThroughModule ? ['expand', 'collapse', 'drillThrough', 'exit'] : ['expand', 'collapse', 'exit'];\n    var option = [];\n\n    for (var i = 0; i < items.length; i++) {\n      option.push({\n        id: this.parent.element.id + '_DrillMenuChart_' + items[i],\n        text: this.parent.localeObj.getConstant(items[i]),\n        items: []\n      });\n    }\n\n    var getString = this.getMenuItems();\n    var expand = [];\n    var collapse = [];\n\n    for (var i = 0; i < getString.length; i++) {\n      if (getString[i].type === 'expand') {\n        expand.push({\n          id: this.element.id + 'drillExpand_' + getString[i].key,\n          text: getString[i].value\n        });\n      } else {\n        collapse.push({\n          id: this.element.id + 'drillCollapse_' + getString[i].key,\n          text: getString[i].value\n        });\n      }\n    }\n\n    if (expand.length > 0) {\n      option[0].items = expand;\n    }\n\n    if (collapse.length > 0) {\n      option[1].items = collapse;\n    }\n\n    var menuOptions = {\n      cssClass: this.parent.element.id + '_accumulationChart',\n      items: option,\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: this.drillMenuOpen.bind(this),\n      select: this.drillMenuSelect.bind(this),\n      locale: this.parent.locale\n    };\n    this.accumulationMenu = new ContextMenu(menuOptions);\n    var contextMenu;\n\n    if (select('#' + this.parent.element.id + '_accumulationChart', this.parent.element)) {\n      contextMenu = select('#' + this.parent.element.id + '_accumulationChart', this.parent.element);\n      contextMenu.innerHTML = '';\n    } else {\n      contextMenu = createElement('ul', {\n        id: this.parent.element.id + '_accumulationChart'\n      });\n      this.parent.element.appendChild(contextMenu);\n    }\n\n    this.accumulationMenu.isStringTemplate = true;\n    this.accumulationMenu.appendTo(contextMenu);\n  };\n\n  PivotChart.prototype.drillMenuOpen = function (args) {\n    if (args.items[0] && args.items[0].text === this.parent.localeObj.getConstant('expand') && args.items[0].items && args.items[0].items.length === 0) {\n      this.accumulationMenu.enableItems([this.parent.localeObj.getConstant('expand')], false);\n    }\n\n    if (args.items[1] && args.items[1].text === this.parent.localeObj.getConstant('collapse') && args.items[1].items && args.items[1].items.length === 0) {\n      this.accumulationMenu.enableItems([this.parent.localeObj.getConstant('collapse')], false);\n    }\n  };\n\n  PivotChart.prototype.getMenuItems = function () {\n    var rowIndex = this.pivotIndex.rIndex;\n    var menuItem = [];\n    var pivotValues = this.engineModule.pivotValues;\n    var levelCol = [];\n    var pivotValue = pivotValues[rowIndex][this.pivotIndex.cIndex]; // let hierarchy: string = pivotValues[rowIndex][0].hierarchy;\n\n    var level = !pivotValues[rowIndex][0].isNamedSet && pivotValues[rowIndex][0].hasChild ? pivotValues[rowIndex][0].level : undefined;\n    var levels = this.parent.dataType === 'olap' ? pivotValue.rowHeaders.toString().split(/~~|::/) : pivotValue.rowHeaders.toString().split(this.engineModule.valueSortSettings.headerDelimiter);\n\n    while (pivotValues[rowIndex][0]) {\n      pivotValue = pivotValues[rowIndex][0];\n\n      if (levels.length !== 0 && levels.indexOf(pivotValue.formattedText.toString()) === levels.length - 1) {\n        if (pivotValue.hasChild && !pivotValue.isNamedSet && levelCol.indexOf(pivotValue.level) < 0 && (level ? level >= pivotValue.level : level === 0 ? pivotValue.level === 0 : true)) {\n          if (!(pivotValue.isDrilled && pivotValue.hasChild)) {\n            menuItem.push({\n              key: rowIndex,\n              type: 'expand',\n              value: pivotValue.formattedText\n            });\n          } else {\n            menuItem.push({\n              key: rowIndex,\n              type: 'collapse',\n              value: pivotValue.formattedText\n            });\n          }\n\n          levelCol.push(pivotValue.level);\n          level = level ? level - 1 : pivotValue.level - 1;\n        }\n\n        var index = levels.indexOf(pivotValue.formattedText.toString());\n        levels.splice(index, 1);\n      }\n\n      if (pivotValue.level === 0 && pivotValue.hasChild && !pivotValue.isNamedSet) {\n        level = undefined;\n        levelCol = [];\n      }\n\n      rowIndex--;\n    }\n\n    return menuItem;\n  };\n\n  PivotChart.prototype.drillMenuSelect = function (args) {\n    var pivotValues = this.parent.dataType === 'olap' ? this.parent.olapEngineModule.pivotValues : this.parent.engineModule.pivotValues;\n    var option = args.element.id.split('_DrillMenuChart_')[1];\n\n    if (args.element.id.indexOf(this.element.id + 'drill') === 0) {\n      var type = args.element.id.split(this.element.id + 'drill')[1].indexOf('Expand') >= 0 ? 'drillExpand' : 'drillCollapse';\n      var rowIndex = Number(args.element.id.split(this.element.id + type + '_')[1]);\n      var pivotValue = pivotValues[rowIndex][0];\n      var name_2 = this.parent.dataType === 'olap' ? pivotValue.formattedText : pivotValue.actualText ? pivotValue.actualText.toString() : pivotValue.formattedText.toString();\n      var text = pivotValue.formattedText ? pivotValue.formattedText.toString() : name_2;\n      var caption = pivotValue.hasChild && !pivotValue.isNamedSet ? (pivotValue.isDrilled ? ' - ' : ' + ') + text : text;\n      var tupInfo = this.parent.dataType === 'olap' ? this.engineModule.tupRowInfo[pivotValue.ordinal] : undefined;\n      var levelName = tupInfo ? tupInfo.uNameCollection : pivotValue.valueSort.levelName.toString();\n      var customAttributes = {\n        fieldName: pivotValue.valueSort.axis,\n        level: pivotValue.level,\n        hasChild: pivotValue.hasChild,\n        levelName: levelName,\n        name: name_2,\n        text: caption,\n        rowIndex: rowIndex,\n        colIndex: 0,\n        isDrilled: pivotValue.isDrilled,\n        cell: pivotValue\n      };\n\n      if (this.parent.dataType === 'olap') {\n        this.parent.onDrill(undefined, customAttributes);\n      } else {\n        this.onDrill({\n          customAttributes: customAttributes\n        });\n      }\n    } else if (option === 'drillThrough') {\n      this.parent.drillThroughModule.executeDrillThrough(pivotValues[this.pivotIndex.rIndex][this.pivotIndex.cIndex], this.pivotIndex.rIndex, this.pivotIndex.rIndex);\n      /* eslint-disable-line */\n    } else if (option === 'exit') {\n      this.accumulationMenu.close();\n    }\n  };\n\n  PivotChart.prototype.getChartHeight = function () {\n    var height;\n    var offSetHeight;\n\n    if (isNullOrUndefined(this.parent.getHeightAsNumber())) {\n      height = 'auto';\n    } else {\n      var offSetVal = this.parent.showToolbar ? 6 : 5;\n      height = (this.parent.getHeightAsNumber() - offSetVal).toString();\n      offSetHeight = this.parent.getHeightAsNumber() - offSetVal;\n    }\n\n    if (!isNullOrUndefined(this.parent.getHeightAsNumber())) {\n      if (this.parent.showToolbar && this.parent.showGroupingBar) {\n        height = (offSetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ? this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42) - (this.parent.element.querySelector('.e-chart-grouping-bar') ? this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62)).toString();\n      } else if (this.parent.showToolbar) {\n        height = (offSetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ? this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42)).toString();\n      } else if (this.parent.showGroupingBar) {\n        height = (offSetHeight - (this.parent.element.querySelector('.e-chart-grouping-bar') ? this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62)).toString();\n      } else if (this.parent.chart && parseInt(this.parent.chart.height, 10) < 200 || offSetHeight < 200) {\n        height = '200';\n      }\n    } else {\n      height = 'auto';\n    }\n\n    return height;\n  };\n\n  PivotChart.prototype.getChartAutoHeight = function () {\n    var height = this.parent.element.offsetHeight;\n\n    if (this.parent.showToolbar && this.parent.showGroupingBar) {\n      height = this.parent.element.offsetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ? this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42) - (this.parent.element.querySelector('.e-chart-grouping-bar') ? this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62);\n    } else if (this.parent.showToolbar) {\n      height = this.parent.element.offsetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ? this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42);\n    } else if (this.parent.showGroupingBar) {\n      height = this.parent.element.offsetHeight - (this.parent.element.querySelector('.e-chart-grouping-bar') ? this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62);\n    }\n\n    return height;\n  };\n\n  PivotChart.prototype.axisLabelRender = function (args) {\n    if (this.chartSettings.showMultiLevelLabels && this.chartSettings.chartSeries.type !== 'Pareto') {\n      if (args.axis.name === 'primaryXAxis') {\n        args.text = '';\n      }\n    }\n\n    this.parent.trigger(events.chartAxisLabelRender, args);\n  };\n\n  PivotChart.prototype.multiLevelLabelClick = function (args) {\n    var eventArgs = {\n      axis: args.axis,\n      text: args.text,\n      cell: !isNullOrUndefined(args.customAttributes) ? args.customAttributes.cell : undefined,\n      cancel: false\n    };\n    this.parent.trigger(events.multiLevelLabelClick, eventArgs);\n\n    if (!eventArgs.cancel && args.customAttributes && args.customAttributes.hasChild && !args.customAttributes.cell.isNamedSet) {\n      /* eslint-disable-line */\n      if (this.parent.dataType === 'olap') {\n        this.parent.onDrill(undefined, args.customAttributes);\n      } else {\n        this.onDrill(args);\n      }\n    }\n  };\n  /* eslint-disable */\n\n  /** @hidden */\n\n\n  PivotChart.prototype.onDrill = function (args) {\n    var labelInfo = args.customAttributes;\n    /* eslint-enable */\n\n    var delimiter = this.dataSourceSettings.drilledMembers[0] && this.dataSourceSettings.drilledMembers[0].delimiter ? this.dataSourceSettings.drilledMembers[0].delimiter : '**';\n    var fieldName = labelInfo.fieldName;\n    var currentCell = this.engineModule.pivotValues[labelInfo.rowIndex][labelInfo.colIndex];\n    var memberUqName = currentCell.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(delimiter);\n    var fieldAvail = false;\n\n    if (this.dataSourceSettings.drilledMembers.length === 0) {\n      this.parent.setProperties({\n        dataSourceSettings: {\n          drilledMembers: [{\n            name: fieldName,\n            items: [memberUqName],\n            delimiter: delimiter\n          }]\n        }\n      }, true);\n    } else {\n      for (var fCnt = 0; fCnt < this.dataSourceSettings.drilledMembers.length; fCnt++) {\n        var field = this.dataSourceSettings.drilledMembers[fCnt];\n        memberUqName = memberUqName.split(delimiter).join(field.delimiter ? field.delimiter : delimiter);\n        delimiter = field.delimiter = field.delimiter ? field.delimiter : delimiter;\n\n        if (field.name === fieldName) {\n          fieldAvail = true;\n          var memIndex = field.items.indexOf(memberUqName);\n\n          if (memIndex > -1) {\n            field.items.splice(memIndex, 1);\n          } else {\n            field.items.push(memberUqName);\n          }\n        } else {\n          continue;\n        }\n      }\n\n      if (!fieldAvail) {\n        this.dataSourceSettings.drilledMembers.push({\n          name: fieldName,\n          items: [memberUqName],\n          delimiter: delimiter\n        });\n      }\n    }\n\n    this.parent.showWaitingPopup();\n    var pivot = this;\n    /* eslint-disable-line */\n    //setTimeout(() => {\n\n    var drilledItem = {\n      fieldName: fieldName,\n      memberName: memberUqName,\n      delimiter: delimiter,\n      axis: 'row',\n      action: labelInfo.isDrilled ? 'up' : 'down',\n      currentCell: currentCell\n    };\n    var drillArgs = {\n      drillInfo: drilledItem,\n      pivotview: isBlazor() ? undefined : pivot.parent\n    };\n    pivot.parent.trigger(events.drill, drillArgs);\n    var enginePopulatingEventArgs = {\n      dataSourceSettings: PivotUtil.getClonedDataSourceSettings(this.parent.dataSourceSettings)\n    };\n    this.parent.trigger(events.enginePopulating, enginePopulatingEventArgs);\n    this.parent.setProperties({\n      dataSourceSettings: enginePopulatingEventArgs.dataSourceSettings\n    }, true);\n\n    if (pivot.parent.enableVirtualization) {\n      if (isBlazor()) {\n        /* eslint-disable */\n        var sfBlazor = 'sfBlazor';\n        var dataSourceSettings = window[sfBlazor].copyWithoutCircularReferences([pivot.dataSourceSettings], pivot.dataSourceSettings);\n        var drillItem = window[sfBlazor].copyWithoutCircularReferences([drilledItem], drilledItem);\n        var args_1 = window[sfBlazor].copyWithoutCircularReferences([drillArgs], drillArgs);\n        pivot.parent.interopAdaptor.invokeMethodAsync('PivotInteropMethod', 'onDrill', {\n          'dataSourceSettings': dataSourceSettings,\n          'drilledItem': drillItem\n        }).then(function (data) {\n          pivot.parent.updateBlazorData(data, pivot.parent);\n          pivot.parent.engineModule.drilledMembers = pivot.dataSourceSettings.drilledMembers;\n          pivot.parent.allowServerDataBinding = false;\n          pivot.parent.setProperties({\n            pivotValues: pivot.engineModule.pivotValues\n          }, true);\n          delete pivot.parent.bulkChanges.pivotValues;\n          pivot.parent.allowServerDataBinding = true;\n          pivot.parent.renderPivotGrid();\n        });\n        /* eslint-enable */\n      } else if (pivot.parent.dataSourceSettings.mode === 'Server') {\n        pivot.parent.getEngine('onDrill', drilledItem, null, null, null, null, null);\n      } else {\n        pivot.engineModule.drilledMembers = pivot.dataSourceSettings.drilledMembers;\n        pivot.engineModule.onDrill(drilledItem);\n      }\n    } else if (pivot.parent.dataSourceSettings.mode === 'Server') {\n      pivot.parent.getEngine('onDrill', drilledItem, null, null, null, null, null);\n    } else {\n      pivot.engineModule.generateGridData(pivot.dataSourceSettings);\n    }\n\n    pivot.parent.allowServerDataBinding = false;\n    pivot.parent.setProperties({\n      pivotValues: pivot.engineModule.pivotValues\n    }, true);\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n\n    delete pivot.parent.bulkChanges.pivotValues;\n    pivot.parent.allowServerDataBinding = true;\n    var eventArgs = {\n      dataSourceSettings: PivotUtil.getClonedDataSourceSettings(this.parent.dataSourceSettings),\n      pivotValues: this.parent.pivotValues\n    };\n    this.parent.trigger(events.enginePopulated, eventArgs);\n    pivot.engineModule.pivotValues = eventArgs.pivotValues;\n    pivot.parent.renderPivotGrid(); //});\n  };\n\n  PivotChart.prototype.isAttributeDrill = function (hierarchy, drillInfo) {\n    var isDrill = false;\n\n    for (var i = 0; i < this.dataSourceSettings.drilledMembers.length; i++) {\n      if (this.dataSourceSettings.drilledMembers[i].name === hierarchy) {\n        for (var j = 0; j < this.dataSourceSettings.drilledMembers[i].items.length; j++) {\n          var drillItems = this.dataSourceSettings.drilledMembers[i].items[j].split(this.dataSourceSettings.drilledMembers[i].delimiter);\n          var levelName = '';\n\n          for (var k = 0; k < drillItems.length; k++) {\n            if (drillInfo[k] && drillInfo[k].uName) {\n              levelName = levelName + (levelName === '' ? '' : this.dataSourceSettings.drilledMembers[i].delimiter) + (drillInfo[k].uName.indexOf('[Measures]') > -1 ? '[Measures]' : drillInfo[k].uName);\n            }\n          }\n\n          if (levelName === this.dataSourceSettings.drilledMembers[i].items[j]) {\n            isDrill = true;\n            break;\n          }\n        }\n      }\n    }\n\n    return isDrill;\n  };\n\n  PivotChart.prototype.load = function (args) {\n    if (args.chart.zoomModule) {\n      args.chart.zoomModule.isZoomed = true;\n    }\n\n    this.parent.trigger(events.chartLoad, args);\n  };\n\n  PivotChart.prototype.resized = function (args) {\n    if (isBlazor()) {\n      args.chart = this.parent.chart;\n    }\n\n    if (this.accumulationType.indexOf(this.chartSettings.chartSeries.type) < 0) {\n      args.chart.primaryXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? this.getZoomFactor() : this.parent.chartSettings.primaryXAxis.zoomFactor;\n\n      if (!this.parent.chartSettings.zoomSettings.enableScrollbar) {\n        args.chart.primaryXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? 1 : this.parent.chartSettings.primaryXAxis.zoomFactor;\n      }\n    }\n\n    this.parent.trigger(events.chartResized, args);\n  };\n  /**\n   * To destroy the chart module\n   * @returns {void}\n   * @hidden\n   */\n\n\n  PivotChart.prototype.destroy = function () {\n    if (this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.engineModule) {\n      this.engineModule.fieldList = {};\n      this.engineModule = {};\n    }\n\n    if (this.chartSeries) {\n      this.chartSeries = null;\n    }\n\n    if (this.columnGroupObject) {\n      this.columnGroupObject = null;\n    }\n\n    if (this.chartSettings) {\n      this.chartSettings = null;\n    }\n\n    if (this.dataSourceSettings) {\n      this.dataSourceSettings = null;\n    }\n\n    if (this.accumulationMenu && !this.accumulationMenu.isDestroyed) {\n      this.accumulationMenu.destroy();\n      this.accumulationMenu = null;\n    }\n\n    if (this.parent && this.parent.chart && !this.parent.chart.isDestroyed) {\n      this.parent.chart.destroy();\n      this.parent.chart = null;\n    } else {\n      return;\n    }\n  };\n\n  return PivotChart;\n}();\n\nexport { PivotChart };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-pivotview/src/pivotchart/base/pivotchart.js"],"names":["events","cls","Chart","ColumnSeries","LineSeries","Legend","Tooltip","Category","AreaSeries","Selection","StripLine","DataLabel","AccumulationChart","PieSeries","FunnelSeries","PyramidSeries","SplineAreaSeries","MultiColoredLineSeries","RangeAreaSeries","StackingAreaSeries","StepAreaSeries","MultiColoredAreaSeries","SplineSeries","StepLineSeries","AccumulationLegend","AccumulationTooltip","StackingColumnSeries","RangeColumnSeries","BarSeries","StackingBarSeries","ScatterSeries","RadarSeries","ScrollBar","Zoom","PolarSeries","ParetoSeries","Export","Crosshair","MultiLevelLabel","BubbleSeries","AccumulationDataLabel","createElement","remove","isNullOrUndefined","isBlazor","select","PivotUtil","ContextMenu","hideSpinner","PivotChart","headerColl","maxLevel","columnGroupObject","fieldPosition","measurePos","measuresNames","accumulationType","prototype","getModuleName","loadChart","parent","chartSettings","engineModule","dataType","olapEngineModule","dataSourceSettings","isDataAvail","tupColumnInfo","length","tupRowInfo","colMeasurePos","rowMeasurePos","values","chart","element","querySelector","id","enableMultipleAxis","indexOf","chartSeries","type","measureList","map","item","name","value","_i","_a","field","fieldName","replace","caption","series","rows","primaryXAxis","title","primaryYAxis","multiLevelLabels","axes","zoomFactor","dataSource","dataLabel","refresh","displayOption","view","primary","insertBefore","className","PIVOTCHART","GRID_CLASS","appendChild","width","toString","showToolbar","grid","getGridWidthAsNumber","height","getChartHeight","tmpChart","appendTo","currentView","style","display","notify","contentReady","accEmptyPoint","pivotValues","currentMeasure","filter","totColIndex","getColumnTotalIndex","rKeys","Object","keys","prevLevel","firstLevelUName","levelCollection","prevCell","integratedLevel","indexCount","levelPos","lastHierarchy","lastDimension","memberCell","drillDimension","isDrill","groupHierarchyWithLevels","_b","rKeys_1","rKey","rowIndex","Number","axis","firstRowCell","tupInfo","ordinal","undefined","fieldPos","currrentLevel","level","hierarchy","isAttributeDrill","drillInfo","isNamedSet","fieldList","hasAllMember","memberType","measureName","levelUniqueName","start","isDrilled","hasChild","name_1","formattedText","actualText","text","levelName","uNameCollection","valueSort","cellInfo","colIndex","cell","cKeys","prevMemberCell","_c","cKeys_1","cKey","cellIndex","measureAllow","rowHeaders","isGrandSum","members","colHeaders","columnHeaders","split","join","valueSortSettings","headerDelimiter","columnSeries","yValue","aggregatedValueMatrix","push","x","y","rIndex","cIndex","refreshChart","columnKeys","persistSettings","JSON","parse","getPersistData","delimiter","columnDelimiter","columnHeader","chartType","fieldWithCaption","i","currentColumn","currentSeries","frameChartSeries","palettes","xName","yName","visible","position","setProperties","emptyPointSettings","mode","innerRadius","concat","columnKeys_1","key","localeObj","getConstant","multiAxisKey","fieldCaptionName","measure","yAxisName","seriesEvent","cancel","pivotChart","trigger","chartSeriesCreated","observedArgs","bindChart","frameObjectWithKeys","keyPos","framedSeries","showWaitingPopup","currentXAxis","configXAxis","currentTooltipSettings","configTooltipSettings","currentLegendSettings","configLegendSettings","currentZoomSettings","configZoomSettings","axesWithRows","frameAxesWithRows","chartElement","enableScrollOnMultiAxis","innerHTML","PIVOTCHART_INNER","showGroupingBar","minWidth","getChartAutoHeight","overflow","overflowX","destroy","toolbarModule","isMultiAxisChange","isDestroyed","Inject","legendSettings","tooltip","enableSmartLabels","center","pieCenter","enableBorderOnMouseMove","highLightMode","highlightMode","highlightPattern","titleStyle","subTitle","subTitleStyle","margin","border","background","theme","selectionMode","accumulationSelectionMode","isMultiSelect","enableExport","selectedDataIndexes","enableAnimation","useGroupingSeparator","locale","enableRtl","beforePrint","bind","animationComplete","legendRender","textRender","pointRender","seriesRender","chartMouseMove","chartMouseClick","pointMove","pointClick","chartMouseLeave","chartMouseDown","chartMouseUp","tooltipRender","loaded","load","resized","zoomSettings","columns","isNaN","chartArea","crosshair","isTransposed","enableCanvas","description","tabIndex","enableSideBySidePlacement","axisMultiLabelRender","multiLevelLabelRender","dragComplete","zoomComplete","scrollStart","scrollEnd","scrollChanged","axisLabelRender","multiLevelLabelClick","isStringTemplate","hideWaitingPopup","pivotFieldListModule","fieldListSpinnerElement","args","seriesIndex","showMultiLevelLabels","pivotIndex","pointIndex","creatMenu","pos","getBoundingClientRect","clientHeight","window","scrollY","document","documentElement","scrollTop","top","accumulationMenu","open","left","scrollX","scrollLeft","allowDrillThrough","editSettings","allowEditing","drillThroughModule","executeDrillThrough","chartPointClick","percentChart","percentAggregateTypes","valCnt","divider","measureField","measureAggregatedName","aggregateType","formatSetting","formatSettings","format","inArray","toLowerCase","match","getFormat","formatString","resFormat","currentYAxis","labelFormat","plotOffsetTop","multipleAxisMode","columnIndex","_d","_e","lengthofFormat","colIndexColl","rKeys_2","cKeys_2","rowSpan","group","fieldCount","measurePosition","rowPos","lastEnd","end","frameMultiLevelLabels","startKeys","parentHeaders","startKeys_1","startKey","sKey","headers","isAvail","span","gRows","startKeys_2","lKeys","lKeys_1","levelKey","lKey","len","customAttributes","levellength","categories","getZoomFactor","calculatedWidth","clientWidth","parseFloat","seriesLength","enable","template","templateFn","templateParser","tooltipTemplate","allowServerDataBinding","header","enableMarker","padding","shapePadding","valueType","labelIntersectAction","enableScrollbar","majorTickLines","enableSelectionZooming","data","seriesName","formatField","formatFields","formattedValue","getFormattedValue","point","columnText","rowText","getTooltipTemplate","rowFields","getHeaderField","columnFields","templateVariable","valueField","tooltipTemplateFn","outerHTML","chartTooltipRender","isChartLoaded","groupingBarModule","showFieldList","alignIcon","multilabelAxisName","setAttribute","updateView","chartLoaded","isServerWaitingPopup","groupingTable","ALL_FIELDS_PANEL_CLASS","gridPanel","refreshOverflow","groupingChartTable","chartPanel","items","option","getString","getMenuItems","expand","collapse","menuOptions","cssClass","beforeOpen","drillMenuOpen","drillMenuSelect","contextMenu","enableItems","menuItem","levelCol","pivotValue","levels","index","splice","name_2","onDrill","close","offSetHeight","getHeightAsNumber","offSetVal","parseInt","offsetHeight","chartAxisLabelRender","eventArgs","labelInfo","drilledMembers","currentCell","memberUqName","fieldAvail","fCnt","memIndex","pivot","drilledItem","memberName","action","drillArgs","pivotview","drill","enginePopulatingEventArgs","getClonedDataSourceSettings","enginePopulating","enableVirtualization","sfBlazor","copyWithoutCircularReferences","drillItem","args_1","interopAdaptor","invokeMethodAsync","then","updateBlazorData","bulkChanges","renderPivotGrid","getEngine","generateGridData","enginePopulated","j","drillItems","k","uName","zoomModule","isZoomed","chartLoad","chartResized"],"mappings":"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","sourcesContent":["import * as events from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\nimport { Chart, ColumnSeries, LineSeries, Legend, Tooltip, Category, AreaSeries, Selection, StripLine, DataLabel } from '@syncfusion/ej2-charts';\nimport { AccumulationChart, PieSeries, FunnelSeries, PyramidSeries } from '@syncfusion/ej2-charts';\nimport { SplineAreaSeries, MultiColoredLineSeries, RangeAreaSeries, StackingAreaSeries, StepAreaSeries } from '@syncfusion/ej2-charts';\nimport { MultiColoredAreaSeries, SplineSeries, StepLineSeries, AccumulationLegend, AccumulationTooltip } from '@syncfusion/ej2-charts';\nimport { StackingColumnSeries, RangeColumnSeries, BarSeries, StackingBarSeries, ScatterSeries } from '@syncfusion/ej2-charts';\nimport { RadarSeries } from '@syncfusion/ej2-charts';\nimport { ScrollBar, Zoom, PolarSeries } from '@syncfusion/ej2-charts';\nimport { ParetoSeries, Export, Crosshair, MultiLevelLabel } from '@syncfusion/ej2-charts';\nimport { BubbleSeries } from '@syncfusion/ej2-charts';\nimport { AccumulationDataLabel } from '@syncfusion/ej2-charts';\nimport { createElement, remove, isNullOrUndefined, isBlazor, select } from '@syncfusion/ej2-base';\nimport { PivotUtil } from '../../base/util';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { hideSpinner } from '@syncfusion/ej2-popups';\nvar PivotChart = /** @class */ (function () {\n    function PivotChart() {\n        this.headerColl = {};\n        this.maxLevel = 0;\n        this.columnGroupObject = {};\n        this.fieldPosition = [];\n        this.measurePos = -1;\n        this.measuresNames = {};\n        this.accumulationType = ['Pie', 'Pyramid', 'Doughnut', 'Funnel'];\n    }\n    /**\n     * Get component name.\n     * @returns {string} - string\n     * @private\n     */\n    PivotChart.prototype.getModuleName = function () {\n        return 'pivotchart';\n    };\n    /* eslint-disable */\n    PivotChart.prototype.loadChart = function (parent, chartSettings) {\n        this.parent = parent;\n        this.measuresNames = {};\n        this.engineModule = this.parent.dataType === 'olap' ? this.parent.olapEngineModule : this.parent.engineModule;\n        this.dataSourceSettings = this.parent.dataSourceSettings;\n        this.chartSettings = chartSettings;\n        var isDataAvail = parent.dataType === 'olap' ?\n            (parent.olapEngineModule.tupColumnInfo.length > 0 && parent.olapEngineModule.tupRowInfo.length > 0 &&\n                (!isNullOrUndefined(parent.olapEngineModule.colMeasurePos) || !isNullOrUndefined(parent.olapEngineModule.rowMeasurePos)))\n            : parent.dataSourceSettings.values.length > 0;\n        if (isDataAvail) {\n            if (!this.parent.chart && (this.parent.element.querySelector('.e-chart') || this.parent.element.querySelector('.e-accumulationchart'))) {\n                remove(select('#' + this.parent.element.id + '_chart', this.parent.element));\n            }\n            if (this.chartSettings.enableMultipleAxis && this.accumulationType.indexOf(chartSettings.chartSeries.type) < 0) {\n                this.measureList = this.dataSourceSettings.values.map(function (item) { return item.name; });\n            }\n            else {\n                this.measureList = [chartSettings.value === '' ? this.dataSourceSettings.values[0].name : chartSettings.value];\n            }\n            for (var _i = 0, _a = this.dataSourceSettings.values; _i < _a.length; _i++) {\n                var field = _a[_i];\n                var fieldName = field.name.replace(/[^A-Z0-9]+/ig, '_');\n                this.measuresNames[field.name] = fieldName;\n                this.measuresNames[fieldName] = field.name;\n                if ((this.chartSettings.chartSeries.type === 'Polar' || this.chartSettings.chartSeries.type === 'Radar')) {\n                    this.measuresNames[field.caption ? field.caption : field.name] = field.name;\n                }\n            }\n        }\n        else if (this.parent.chart) {\n            if (this.parent.element.querySelector('.e-chart')) {\n                this.parent.chart.series = [];\n                this.parent.chart.rows = [];\n                this.parent.chart.primaryXAxis.title = '';\n                this.parent.chart.primaryYAxis.title = '';\n                this.parent.chart.primaryXAxis.multiLevelLabels = [];\n                this.parent.chart.primaryYAxis.multiLevelLabels = [];\n                if (this.parent.chart.axes.length > 0) {\n                    this.parent.chart.axes[0].title = '';\n                }\n                this.parent.chart.primaryXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? 1 : this.parent.chartSettings.primaryXAxis.zoomFactor;\n            }\n            else if (this.parent.element.querySelector('.e-accumulationchart')) {\n                this.parent.chart.series[0].dataSource = [{}];\n                this.parent.chart.series[0].dataLabel = {};\n            }\n            this.parent.chart.refresh();\n            return;\n        }\n        else {\n            if (!select('#' + this.parent.element.id + '_chart', this.parent.element)) {\n                if (this.parent.displayOption.view === 'Both') {\n                    this.parent.displayOption.primary === 'Chart' ?\n                        (this.parent.element.insertBefore((createElement('div', {\n                            className: cls.PIVOTCHART, id: this.parent.element.id + '_chart'\n                        })), this.parent.element.querySelector('.' + cls.GRID_CLASS))) :\n                        (this.parent.element.appendChild(createElement('div', {\n                            className: cls.PIVOTCHART, id: this.parent.element.id + '_chart'\n                        })));\n                }\n                else {\n                    this.parent.element.appendChild(createElement('div', {\n                        className: cls.PIVOTCHART, id: this.parent.element.id + '_chart'\n                    }));\n                }\n                var width = this.parent.width.toString();\n                if (this.parent.showToolbar && this.parent.grid) {\n                    width = this.parent.getGridWidthAsNumber().toString();\n                }\n                var height = this.getChartHeight();\n                var tmpChart = void 0;\n                if (this.chartSettings && this.chartSettings.chartSeries && this.accumulationType.indexOf(this.chartSettings.chartSeries.type) > -1) {\n                    tmpChart = new AccumulationChart({ width: width, height: height });\n                }\n                else {\n                    tmpChart = new Chart({ width: width, height: height });\n                }\n                tmpChart.appendTo('#' + this.parent.element.id + '_chart');\n                if (this.parent.showToolbar) {\n                    if (this.parent.displayOption.view === 'Both' && this.parent.currentView === 'Chart') {\n                        this.parent.grid.element.style.display = 'none';\n                    }\n                    if (this.parent.currentView !== 'Chart') {\n                        select('#' + this.parent.element.id + '_chart', this.parent.element).style.display = 'none';\n                    }\n                }\n            }\n            this.parent.notify(events.contentReady, {});\n            return;\n        }\n        this.columnGroupObject = {};\n        this.accEmptyPoint = false;\n        var pivotValues = this.engineModule.pivotValues;\n        this.currentMeasure = (chartSettings.enableMultipleAxis && this.accumulationType.indexOf(chartSettings.chartSeries.type) < 0) ? this.measureList[0] :\n            (((chartSettings.value === '' || this.dataSourceSettings.values.filter(function (item) {\n                return item.name === chartSettings.value;\n            }).length === 0) && this.dataSourceSettings.values.length > 0) ? this.dataSourceSettings.values[0].name : chartSettings.value);\n        var totColIndex = this.getColumnTotalIndex(pivotValues);\n        var rKeys = Object.keys(pivotValues);\n        var prevLevel;\n        var firstLevelUName;\n        var levelCollection = {};\n        var prevCell;\n        var integratedLevel = 0;\n        var indexCount = -0.5;\n        this.headerColl = {};\n        this.maxLevel = 0;\n        var levelPos = {};\n        var lastHierarchy = '';\n        var lastDimension = '';\n        var memberCell;\n        var drillDimension = '';\n        var isDrill = false;\n        if (this.parent.dataType === 'olap') {\n            levelPos = this.groupHierarchyWithLevels(pivotValues);\n            lastHierarchy = this.fieldPosition[this.fieldPosition.length - 1];\n            lastDimension = (this.measurePos === (this.fieldPosition.length - 1) && this.fieldPosition.length > 1) ?\n                this.fieldPosition[this.fieldPosition.length - 2] : lastHierarchy;\n            drillDimension = lastDimension;\n        }\n        for (var _b = 0, rKeys_1 = rKeys; _b < rKeys_1.length; _b++) {\n            var rKey = rKeys_1[_b];\n            var rowIndex = Number(rKey);\n            if (!isNullOrUndefined(pivotValues[rowIndex])) {\n                if (pivotValues[rowIndex][0] && pivotValues[rowIndex][0].axis === 'row' &&\n                    (this.dataSourceSettings.rows.length === 0 ? true : pivotValues[rowIndex][0].type !== 'grand sum')) {\n                    var firstRowCell = pivotValues[rowIndex][0];\n                    var tupInfo = this.parent.dataType === 'olap' ?\n                        this.engineModule.tupRowInfo[firstRowCell.ordinal] : undefined;\n                    var fieldPos = -1;\n                    var currrentLevel = firstRowCell.level;\n                    if (this.parent.dataType === 'olap') {\n                        isDrill = firstRowCell.hierarchy === '[Measures]' ? isDrill : this.isAttributeDrill(firstRowCell.hierarchy, tupInfo.drillInfo);\n                        drillDimension = drillDimension === lastDimension ? lastDimension : (firstRowCell.hierarchy === '[Measures]' || firstRowCell.isNamedSet || (this.engineModule.fieldList[firstRowCell.hierarchy] && !this.engineModule.fieldList[firstRowCell.hierarchy].hasAllMember)) ? lastDimension : drillDimension;\n                        fieldPos = tupInfo.drillInfo.length - 1;\n                        if (firstRowCell.memberType !== 3 && (tupInfo.measureName ?\n                            tupInfo.measureName === this.dataSourceSettings.values[0].name : true)) {\n                            firstLevelUName = firstLevelUName === undefined ? firstRowCell.levelUniqueName : firstLevelUName;\n                            integratedLevel = firstLevelUName === firstRowCell.levelUniqueName ? 0 : integratedLevel;\n                            levelCollection = integratedLevel === 0 ? {} : levelCollection;\n                            integratedLevel = (prevCell && firstLevelUName !== firstRowCell.levelUniqueName) ?\n                                (prevCell.hierarchy === firstRowCell.hierarchy ?\n                                    (integratedLevel + (firstRowCell.level - prevCell.level)) :\n                                    (isNullOrUndefined(levelCollection[firstRowCell.levelUniqueName]) ?\n                                        (levelPos[firstRowCell.hierarchy].start) :\n                                        levelCollection[firstRowCell.levelUniqueName])) : integratedLevel;\n                            levelCollection[firstRowCell.levelUniqueName] = integratedLevel;\n                            currrentLevel = integratedLevel;\n                            indexCount += (prevCell && drillDimension === prevCell.hierarchy && !(prevCell.isDrilled && prevCell.hasChild)) ? 1 : 0;\n                            drillDimension = isDrill ? firstRowCell.hierarchy : lastDimension;\n                            prevLevel = integratedLevel;\n                            prevCell = firstRowCell;\n                        }\n                    }\n                    else if (firstRowCell.type !== 'value') {\n                        if (!(prevLevel === undefined || prevLevel < currrentLevel)) {\n                            indexCount++;\n                        }\n                        prevLevel = currrentLevel;\n                    }\n                    this.maxLevel = currrentLevel > this.maxLevel ? currrentLevel : this.maxLevel;\n                    var name_1 = this.parent.dataType === 'olap' ? firstRowCell.formattedText :\n                        (firstRowCell.actualText ? firstRowCell.actualText.toString() : firstRowCell.formattedText.toString());\n                    var text = firstRowCell.formattedText ? firstRowCell.formattedText.toString() : name_1;\n                    var caption = (firstRowCell.hasChild && !firstRowCell.isNamedSet) ?\n                        ((firstRowCell.isDrilled ? ' - ' : ' + ') + text) : text;\n                    var levelName = tupInfo ? tupInfo.uNameCollection : firstRowCell.valueSort.levelName.toString();\n                    var cellInfo = {\n                        name: name_1,\n                        text: caption,\n                        hasChild: firstRowCell.hasChild,\n                        isDrilled: firstRowCell.isDrilled,\n                        levelName: levelName,\n                        level: currrentLevel,\n                        fieldName: firstRowCell.valueSort.axis ? firstRowCell.valueSort.axis.toString() : '',\n                        rowIndex: rowIndex,\n                        colIndex: 0,\n                        cell: firstRowCell\n                    };\n                    if (this.parent.dataType === 'olap' ? firstRowCell.memberType !== 3 : firstRowCell.type !== 'value') {\n                        if (this.headerColl[indexCount]) {\n                            this.headerColl[indexCount][currrentLevel] = cellInfo;\n                        }\n                        else {\n                            this.headerColl[indexCount] = {};\n                            this.headerColl[indexCount][currrentLevel] = cellInfo;\n                        }\n                    }\n                    var rows = pivotValues[rowIndex];\n                    var cKeys = Object.keys(rows);\n                    var prevMemberCell = void 0;\n                    if (this.parent.dataType === 'olap') {\n                        memberCell = firstRowCell.memberType !== 3 ? firstRowCell : memberCell;\n                    }\n                    else {\n                        memberCell = firstRowCell.type !== 'value' ? firstRowCell : memberCell;\n                    }\n                    for (var _c = 0, cKeys_1 = cKeys; _c < cKeys_1.length; _c++) {\n                        var cKey = cKeys_1[_c];\n                        var cellIndex = Number(cKey);\n                        var cell = pivotValues[rowIndex][cellIndex];\n                        var measureAllow = isNullOrUndefined(cell.rowHeaders) ? this.dataSourceSettings.rows.length === 0 : true;\n                        var actualText = (this.parent.dataType === 'olap' && tupInfo && tupInfo.measureName) ?\n                            tupInfo.measureName : cell.actualText;\n                        if (!(this.parent.dataType === 'olap' && cell.isGrandSum) && !totColIndex[cell.colIndex] && cell.axis === 'value' && firstRowCell.type !== 'header' &&\n                            actualText !== '' && ((chartSettings.enableMultipleAxis && this.accumulationType.indexOf(chartSettings.chartSeries.type) < 0) ? true : actualText === this.currentMeasure)) {\n                            if (isNullOrUndefined(firstRowCell.members)) {\n                                firstRowCell.members = [];\n                            }\n                            if (this.parent.dataType === 'olap' ? ((lastHierarchy === firstRowCell.hierarchy || isDrill) ?\n                                ((firstRowCell.memberType === 3 && prevMemberCell) ?\n                                    (fieldPos === this.measurePos ? (prevMemberCell.isDrilled && prevMemberCell.hasChild) : true) : (firstRowCell.isDrilled && firstRowCell.hasChild)) : true)\n                                : (((firstRowCell.type === 'value' && prevMemberCell) ?\n                                    prevMemberCell.members.length > 0 : firstRowCell.members.length > 0) || !measureAllow)) {\n                                break;\n                            }\n                            var colHeaders = this.parent.dataType === 'olap' ? cell.columnHeaders.toString().split(/~~|::/).join(' - ')\n                                : cell.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(' - ');\n                            var rowHeaders = this.parent.dataType === 'olap' ? cell.rowHeaders.toString().split(/~~|::/).join(' - ')\n                                : cell.rowHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(' - ');\n                            var columnSeries = colHeaders + ' | ' + actualText;\n                            var yValue = (this.parent.dataType === 'pivot' ? (this.engineModule.aggregatedValueMatrix[rowIndex] &&\n                                !isNullOrUndefined(this.engineModule.aggregatedValueMatrix[rowIndex][cellIndex])) ?\n                                Number(this.engineModule.aggregatedValueMatrix[rowIndex][cellIndex]) : Number(cell.value) : Number(cell.value));\n                            if (yValue === 0) {\n                                this.accEmptyPoint = true;\n                            }\n                            if (this.columnGroupObject[columnSeries]) {\n                                this.columnGroupObject[columnSeries].push({\n                                    x: this.dataSourceSettings.rows.length === 0 ? firstRowCell.formattedText : rowHeaders,\n                                    y: yValue,\n                                    rIndex: rowIndex,\n                                    cIndex: cellIndex\n                                });\n                            }\n                            else {\n                                this.columnGroupObject[columnSeries] = [{\n                                        x: this.dataSourceSettings.rows.length === 0 ? firstRowCell.formattedText : rowHeaders,\n                                        y: yValue,\n                                        rIndex: rowIndex,\n                                        cIndex: cellIndex\n                                    }];\n                            }\n                        }\n                        prevMemberCell = memberCell;\n                    }\n                }\n            }\n        }\n        this.refreshChart();\n    };\n    /**\n     * Refreshing chart based on the updated chartSettings.\n     * @returns {void}\n     */\n    PivotChart.prototype.refreshChart = function () {\n        this.chartSeries = [];\n        var columnKeys = Object.keys(this.columnGroupObject);\n        this.persistSettings = JSON.parse(this.parent.getPersistData()).chartSettings;\n        var delimiter = this.parent.chartSettings.columnDelimiter ? this.parent.chartSettings.columnDelimiter : '-';\n        var columnHeader = (this.parent.chartSettings.columnHeader && this.parent.chartSettings.columnHeader !== '') ?\n            this.parent.chartSettings.columnHeader.split(delimiter).join(' - ') : '';\n        var chartType = this.chartSettings.chartSeries ? this.chartSettings.chartSeries.type : undefined;\n        var fieldWithCaption = {};\n        for (var i = 0; i < this.parent.dataSourceSettings.values.length; i++) {\n            fieldWithCaption[this.parent.dataSourceSettings.values[i].name] = !isNullOrUndefined(this.parent.dataSourceSettings.values[i].caption) ? this.parent.dataSourceSettings.values[i].caption : undefined;\n        }\n        if (this.accumulationType.indexOf(chartType) > -1 && columnKeys.length > 0) {\n            this.currentColumn = (columnKeys.indexOf(columnHeader + ' | ' + this.currentMeasure) > -1 && columnHeader !== undefined) ? columnHeader + ' | ' + this.currentMeasure : columnKeys[0];\n            var currentSeries = {};\n            currentSeries = this.persistSettings.chartSeries ? this.frameChartSeries(this.persistSettings.chartSeries) : currentSeries;\n            if ((isNullOrUndefined(currentSeries.palettes) || currentSeries.palettes.length == 0) && !isNullOrUndefined(this.persistSettings.palettes) && this.persistSettings.palettes.length > 0) {\n                currentSeries.palettes = this.persistSettings.palettes;\n            }\n            currentSeries.dataSource = this.columnGroupObject[this.currentColumn];\n            currentSeries.xName = 'x';\n            currentSeries.yName = 'y';\n            if (isBlazor()) {\n                if (isNullOrUndefined(this.persistSettings.chartSeries.dataLabel.visible)) {\n                    this.persistSettings.chartSeries.dataLabel.visible = true;\n                    this.persistSettings.chartSeries.dataLabel.position = \"Outside\";\n                }\n            }\n            if (this.persistSettings.chartSeries && this.persistSettings.chartSeries.dataLabel) {\n                currentSeries.dataLabel = this.persistSettings.chartSeries.dataLabel;\n                currentSeries.dataLabel.name = 'x';\n            }\n            else {\n                currentSeries.dataLabel = { visible: true, position: \"Outside\", name: 'x' };\n                this.parent.setProperties({ chartSettings: { chartSeries: { dataLabel: { visible: true, position: \"Outside\" } } } }, true);\n            }\n            if (this.accEmptyPoint && currentSeries.emptyPointSettings) {\n                currentSeries.emptyPointSettings.mode = 'Zero';\n            }\n            else if (this.accEmptyPoint) {\n                currentSeries.emptyPointSettings = { mode: 'Zero' };\n            }\n            currentSeries.name = this.currentColumn;\n            if (chartType === 'Doughnut') {\n                currentSeries.type = 'Pie';\n                currentSeries.innerRadius = this.chartSettings.chartSeries.innerRadius ? this.chartSettings.chartSeries.innerRadius : '40%';\n            }\n            else if (chartType === 'Pie') {\n                currentSeries.innerRadius = this.chartSettings.chartSeries.innerRadius ? this.chartSettings.chartSeries.innerRadius : '0';\n            }\n            this.chartSeries = this.chartSeries.concat(currentSeries);\n        }\n        else {\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                var currentSeries = {};\n                currentSeries = this.persistSettings.chartSeries ? this.frameChartSeries(this.persistSettings.chartSeries) : currentSeries;\n                if (!isNullOrUndefined(currentSeries.palettes) && currentSeries.palettes.length > 0 && (isNullOrUndefined(this.persistSettings.palettes) || this.persistSettings.palettes.length == 0)) {\n                    this.chartSettings.palettes = currentSeries.palettes;\n                }\n                for (var i = 0; i < this.columnGroupObject[key].length; i++) {\n                    this.columnGroupObject[key][i].x = this.columnGroupObject[key][i].x === '' ? this.parent.localeObj.getConstant('blank') : this.columnGroupObject[key][i].x;\n                }\n                currentSeries.dataSource = this.columnGroupObject[key];\n                currentSeries.xName = 'x';\n                currentSeries.yName = 'y';\n                var multiAxisKey = void 0;\n                if (this.chartSettings.enableMultipleAxis) {\n                    var fieldCaptionName = key.split(' | ')[1];\n                    fieldCaptionName = !isNullOrUndefined(fieldWithCaption[fieldCaptionName]) ? fieldWithCaption[fieldCaptionName] : fieldCaptionName;\n                    multiAxisKey = key.split(' | ')[0] + ' | ' + fieldCaptionName;\n                }\n                currentSeries.name = this.chartSettings.enableMultipleAxis ? multiAxisKey : key.split(' | ')[0];\n                if (['Radar', 'Polar'].indexOf(chartType) < 0) {\n                    var measure = key.split(' | ')[1];\n                    currentSeries.yAxisName = this.measuresNames[measure] ? this.measuresNames[measure] : measure;\n                }\n                if (this.persistSettings.chartSeries && this.persistSettings.chartSeries.emptyPointSettings) {\n                    currentSeries.emptyPointSettings = this.persistSettings.chartSeries.emptyPointSettings;\n                }\n                this.chartSeries = this.chartSeries.concat(currentSeries);\n            }\n        }\n        var seriesEvent = { series: this.chartSeries, cancel: false };\n        var pivotChart = this;\n        this.parent.trigger(events.chartSeriesCreated, seriesEvent, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                pivotChart.bindChart();\n            }\n            else {\n                if (pivotChart.element) {\n                    remove(pivotChart.element);\n                }\n                pivotChart.parent.notify(events.contentReady, {});\n            }\n        });\n    };\n    PivotChart.prototype.frameObjectWithKeys = function (series) {\n        var keys = Object.keys(series);\n        var keyPos = 0;\n        var framedSeries = {};\n        while (keyPos < keys.length) {\n            framedSeries[keys[keyPos]] = series[keys[keyPos]];\n            keyPos++;\n        }\n        return framedSeries;\n    };\n    PivotChart.prototype.frameChartSeries = function (series) {\n        var keys = Object.keys(series);\n        var keyPos = 0;\n        var framedSeries = {};\n        while (keyPos < keys.length) {\n            if ((this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type) > -1 && ['fill', 'dashArray', 'width', 'segmentAxis',\n                'drawType', 'isClosed', 'segments', 'stackingGroup', 'marker', 'errorBar', 'trendlines', 'minRadius',\n                'splineType', 'maxRadius', 'cardinalSplineTension', 'columnWidth', 'columnSpacing', 'cornerRadius'].indexOf(keys[keyPos]) > -1) ||\n                (this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type) < 0 && ['endAngle', 'explode', 'explodeAll', 'explodeIndex',\n                    'explodeOffset', 'gapRatio', 'groupMode', 'groupTo', 'neckHeight', 'neckWidth', 'pyramidMode', 'startAngle',\n                    'dataLabel', 'innerRadius'].indexOf(keys[keyPos]) > -1)) {\n                keyPos++;\n                continue;\n            }\n            framedSeries[keys[keyPos]] = series[keys[keyPos]];\n            keyPos++;\n        }\n        return framedSeries;\n    };\n    PivotChart.prototype.bindChart = function () {\n        this.parent.showWaitingPopup();\n        var currentXAxis = this.configXAxis();\n        var currentTooltipSettings = this.configTooltipSettings();\n        var currentLegendSettings = this.configLegendSettings();\n        var currentZoomSettings = this.configZoomSettings();\n        var axesWithRows = this.frameAxesWithRows();\n        var type = this.chartSettings.chartSeries.type;\n        if (this.parent.displayOption.view === 'Both') {\n            this.element = this.parent.displayOption.primary === 'Chart' ?\n                (this.parent.element.insertBefore((!this.element ?\n                    (createElement('div', {\n                        className: cls.PIVOTCHART, id: this.parent.element.id + '_chart'\n                    }))\n                    : this.element), this.parent.element.querySelector('.' + cls.GRID_CLASS))) :\n                (this.parent.element.appendChild(!this.element ? (createElement('div', {\n                    className: cls.PIVOTCHART, id: this.parent.element.id + '_chart'\n                })) : this.element));\n        }\n        else if (!this.element) {\n            this.element = this.parent.element.appendChild(createElement('div', {\n                className: cls.PIVOTCHART, id: this.parent.element.id + '_chart'\n            }));\n        }\n        if (!this.chartElement && this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n            this.parent.element.querySelector('.' + cls.PIVOTCHART).innerHTML = '';\n            this.chartElement = this.parent.element.querySelector('.' + cls.PIVOTCHART).appendChild(createElement('div', {\n                className: cls.PIVOTCHART_INNER, id: this.parent.element.id + '_chartInner',\n            }));\n        }\n        if (this.parent.element.querySelector('.' + cls.PIVOTCHART_INNER)) {\n            this.parent.element.querySelector('.' + cls.PIVOTCHART_INNER).innerHTML = '';\n        }\n        if (this.parent.showGroupingBar) {\n            this.element.style.minWidth = '400px !important';\n        }\n        else {\n            this.element.style.minWidth = '310px !important';\n        }\n        var width = this.parent.width.toString();\n        if (this.parent.showToolbar && this.parent.grid) {\n            width = this.parent.getGridWidthAsNumber().toString();\n        }\n        var height = this.getChartHeight();\n        if (this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis &&\n            this.accumulationType.indexOf(type) < 0) {\n            this.parent.element.querySelector('.' + cls.PIVOTCHART).style.height =\n                (height === 'auto' ? this.getChartAutoHeight() : height) + 'px';\n            this.parent.element.querySelector('.' + cls.PIVOTCHART).style.width = width + 'px';\n            if (this.parent.chartSettings.chartSeries.type !== 'Polar' && this.parent.chartSettings.chartSeries.type !== 'Radar') {\n                this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflow = 'auto';\n                this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflowX = 'hidden';\n            }\n        }\n        if (this.parent.chart && ((this.parent.chart.getModuleName() === 'accumulationchart' &&\n            this.accumulationType.indexOf(type) < 0) || (this.parent.chart.getModuleName() === 'chart' &&\n            this.accumulationType.indexOf(type) > -1))) {\n            this.parent.chart.destroy();\n            if (select('#' + this.parent.element.id + '_chart', this.parent.element)) {\n                select('#' + this.parent.element.id + '_chart', this.parent.element).innerHTML = '';\n                select('#' + this.parent.element.id + '_chart', this.parent.element).appendChild(createElement('div', {\n                    className: cls.PIVOTCHART_INNER, id: this.parent.element.id + '_chartInner',\n                }));\n            }\n        }\n        if (!(this.parent.chart && this.parent.chart.element && this.parent.element.querySelector('.e-chart') || this.parent.element.querySelector('.e-accumulationchart')) ||\n            (this.parent.toolbarModule && this.parent.toolbarModule.isMultiAxisChange)) {\n            if (this.parent.toolbarModule && this.parent.toolbarModule.isMultiAxisChange && this.parent.chart) {\n                if (!this.parent.chart.isDestroyed) {\n                    this.parent.chart.destroy();\n                }\n                this.parent.chart = undefined;\n                select('#' + this.parent.element.id + '_chart', this.parent.element).innerHTML = '';\n                select('#' + this.parent.element.id + '_chart', this.parent.element).appendChild(createElement('div', {\n                    className: cls.PIVOTCHART_INNER, id: this.parent.element.id + '_chartInner',\n                }));\n                this.parent.toolbarModule.isMultiAxisChange = false;\n            }\n            Chart.Inject(ColumnSeries, StackingColumnSeries, RangeColumnSeries, BarSeries, StackingBarSeries, ScatterSeries, BubbleSeries, LineSeries, StepLineSeries, SplineSeries, SplineAreaSeries, MultiColoredLineSeries, PolarSeries, RadarSeries, AreaSeries, RangeAreaSeries, StackingAreaSeries, StepAreaSeries, MultiColoredAreaSeries, ParetoSeries, Legend, Tooltip, Category, MultiLevelLabel, ScrollBar, Zoom, Export, Crosshair, Selection, StripLine, DataLabel);\n            AccumulationChart.Inject(PieSeries, FunnelSeries, PyramidSeries, AccumulationDataLabel, AccumulationLegend, AccumulationTooltip, Export);\n            if (this.accumulationType.indexOf(type) > -1) {\n                this.parent.chart = new AccumulationChart({\n                    series: this.chartSeries.length > 0 ? this.chartSeries : [{}],\n                    legendSettings: currentLegendSettings,\n                    tooltip: currentTooltipSettings,\n                    width: width,\n                    height: height.toString(),\n                    title: this.chartSettings.title,\n                    enableSmartLabels: this.chartSettings.enableSmartLabels,\n                    center: this.chartSettings.pieCenter,\n                    enableBorderOnMouseMove: this.chartSettings.enableBorderOnMouseMove,\n                    highLightMode: this.chartSettings.highlightMode,\n                    highlightPattern: this.chartSettings.highlightPattern,\n                    titleStyle: this.chartSettings.titleStyle,\n                    subTitle: this.chartSettings.subTitle,\n                    subTitleStyle: this.chartSettings.subTitleStyle,\n                    margin: this.chartSettings.margin,\n                    border: this.chartSettings.border,\n                    background: this.chartSettings.background,\n                    theme: this.chartSettings.theme,\n                    selectionMode: this.chartSettings.accumulationSelectionMode,\n                    isMultiSelect: this.chartSettings.isMultiSelect,\n                    enableExport: this.chartSettings.enableExport,\n                    selectedDataIndexes: this.chartSettings.selectedDataIndexes,\n                    enableAnimation: this.chartSettings.enableAnimation,\n                    useGroupingSeparator: this.chartSettings.useGroupingSeparator,\n                    locale: this.parent.locale,\n                    enableRtl: this.parent.enableRtl,\n                    beforePrint: this.chartSettings.beforePrint ? this.chartSettings.beforePrint.bind(this) : undefined,\n                    animationComplete: this.chartSettings.animationComplete ? this.chartSettings.animationComplete.bind(this) : undefined,\n                    legendRender: this.chartSettings.legendRender ? this.chartSettings.legendRender.bind(this) : undefined,\n                    textRender: this.chartSettings.textRender ? this.chartSettings.textRender.bind(this) : undefined,\n                    pointRender: this.chartSettings.pointRender ? this.chartSettings.pointRender.bind(this) : undefined,\n                    seriesRender: this.chartSettings.seriesRender ? this.chartSettings.seriesRender.bind(this) : undefined,\n                    chartMouseMove: this.chartSettings.chartMouseMove ? this.chartSettings.chartMouseMove.bind(this) : undefined,\n                    chartMouseClick: this.chartSettings.chartMouseClick ? this.chartSettings.chartMouseClick.bind(this) : undefined,\n                    pointMove: this.chartSettings.pointMove ? this.chartSettings.pointMove.bind(this) : undefined,\n                    pointClick: this.pointClick.bind(this),\n                    chartMouseLeave: this.chartSettings.chartMouseLeave ? this.chartSettings.chartMouseLeave.bind(this) : undefined,\n                    chartMouseDown: this.chartSettings.chartMouseDown ? this.chartSettings.chartMouseDown.bind(this) : undefined,\n                    chartMouseUp: this.chartSettings.chartMouseUp ? this.chartSettings.chartMouseUp.bind(this) : undefined,\n                    tooltipRender: this.tooltipRender.bind(this),\n                    loaded: this.loaded.bind(this),\n                    load: this.load.bind(this),\n                    resized: this.resized.bind(this)\n                });\n            }\n            else {\n                this.parent.chart = new Chart({\n                    series: this.chartSeries.length > 0 ? this.chartSeries : [{}],\n                    legendSettings: currentLegendSettings,\n                    tooltip: currentTooltipSettings,\n                    zoomSettings: currentZoomSettings,\n                    axes: (type === 'Polar' || type === 'Radar') ? [] : axesWithRows.axes,\n                    rows: (type === 'Polar' || type === 'Radar') ? [{}] :\n                        (type === 'Bar' || type === 'StackingBar' || type === 'StackingBar100' &&\n                            this.chartSettings.enableMultipleAxis) ? [{ height: '100%' }] : axesWithRows.rows,\n                    columns: (type === 'Polar' || type === 'Radar') ? [{}] :\n                        (type === 'Bar' || type === 'StackingBar' || type === 'StackingBar100' &&\n                            this.chartSettings.enableMultipleAxis) ? axesWithRows.columns : [{ width: '100%' }],\n                    primaryYAxis: (type === 'Polar' || type === 'Radar') ? axesWithRows.axes[0] : { visible: false },\n                    primaryXAxis: currentXAxis,\n                    width: width,\n                    height: (this.parent.chartSettings.chartSeries.type !== 'Polar' &&\n                        this.parent.chartSettings.chartSeries.type !== 'Radar' && this.parent.chartSettings.enableScrollOnMultiAxis &&\n                        this.parent.chartSettings.enableMultipleAxis && this.parent.dataSourceSettings.values.length > 0) ?\n                        Number(height) > (this.parent.dataSourceSettings.values.length * 235) + 100 ? isNaN(Number(height)) ?\n                            height.toString() : (Number(height) - 5).toString() :\n                            (!isNaN(Number(height)) || this.parent.dataSourceSettings.values.length > 1) ?\n                                ((this.parent.dataSourceSettings.values.length * 235) + 100).toString() :\n                                height.toString() : height.toString(),\n                    title: this.chartSettings.title,\n                    titleStyle: this.chartSettings.titleStyle,\n                    subTitle: this.chartSettings.subTitle,\n                    subTitleStyle: this.chartSettings.subTitleStyle,\n                    margin: this.chartSettings.margin,\n                    border: this.chartSettings.border,\n                    background: this.chartSettings.background,\n                    chartArea: this.chartSettings.chartArea,\n                    palettes: this.chartSettings.palettes,\n                    theme: this.chartSettings.theme,\n                    crosshair: this.chartSettings.crosshair,\n                    selectionMode: this.chartSettings.selectionMode,\n                    isMultiSelect: this.chartSettings.isMultiSelect,\n                    enableExport: this.chartSettings.enableExport,\n                    selectedDataIndexes: this.chartSettings.selectedDataIndexes,\n                    isTransposed: this.chartSettings.isTransposed,\n                    enableAnimation: this.chartSettings.enableAnimation,\n                    enableCanvas: this.chartSettings.enableCanvas,\n                    useGroupingSeparator: this.chartSettings.useGroupingSeparator,\n                    description: this.chartSettings.description,\n                    tabIndex: this.chartSettings.tabIndex,\n                    locale: this.parent.locale,\n                    enableRtl: this.parent.enableRtl,\n                    enableSideBySidePlacement: this.chartSettings.enableSideBySidePlacement,\n                    beforePrint: this.chartSettings.beforePrint ? this.chartSettings.beforePrint.bind(this) : undefined,\n                    animationComplete: this.chartSettings.animationComplete ? this.chartSettings.animationComplete.bind(this) : undefined,\n                    legendRender: this.chartSettings.legendRender ? this.chartSettings.legendRender.bind(this) : undefined,\n                    textRender: this.chartSettings.textRender ? this.chartSettings.textRender.bind(this) : undefined,\n                    pointRender: this.chartSettings.pointRender ? this.chartSettings.pointRender.bind(this) : undefined,\n                    seriesRender: this.chartSettings.seriesRender ? this.chartSettings.seriesRender.bind(this) : undefined,\n                    axisMultiLabelRender: this.chartSettings.multiLevelLabelRender ? this.chartSettings.multiLevelLabelRender.bind(this) : undefined,\n                    chartMouseMove: this.chartSettings.chartMouseMove ? this.chartSettings.chartMouseMove.bind(this) : undefined,\n                    chartMouseClick: this.chartSettings.chartMouseClick ? this.chartSettings.chartMouseClick.bind(this) : undefined,\n                    pointMove: this.chartSettings.pointMove ? this.chartSettings.pointMove.bind(this) : undefined,\n                    pointClick: this.pointClick.bind(this),\n                    chartMouseLeave: this.chartSettings.chartMouseLeave ? this.chartSettings.chartMouseLeave.bind(this) : undefined,\n                    chartMouseDown: this.chartSettings.chartMouseDown ? this.chartSettings.chartMouseDown.bind(this) : undefined,\n                    chartMouseUp: this.chartSettings.chartMouseUp ? this.chartSettings.chartMouseUp.bind(this) : undefined,\n                    dragComplete: this.chartSettings.dragComplete ? this.chartSettings.dragComplete.bind(this) : undefined,\n                    zoomComplete: this.chartSettings.zoomComplete ? this.chartSettings.zoomComplete.bind(this) : undefined,\n                    scrollStart: this.chartSettings.scrollStart ? this.chartSettings.scrollStart.bind(this) : undefined,\n                    scrollEnd: this.chartSettings.scrollEnd ? this.chartSettings.scrollEnd.bind(this) : undefined,\n                    scrollChanged: this.chartSettings.scrollChanged ? this.chartSettings.scrollChanged.bind(this) : undefined,\n                    tooltipRender: this.tooltipRender.bind(this),\n                    loaded: this.loaded.bind(this),\n                    load: this.load.bind(this),\n                    resized: this.resized.bind(this),\n                    axisLabelRender: this.axisLabelRender.bind(this),\n                    multiLevelLabelClick: this.multiLevelLabelClick.bind(this),\n                });\n            }\n            this.parent.chart.isStringTemplate = true;\n        }\n        else {\n            this.parent.chart.series = this.chartSeries;\n            this.parent.chart.title = this.parent.chartSettings.title;\n            this.parent.chart.subTitle = this.parent.chartSettings.subTitle;\n            this.parent.chart.background = this.parent.chartSettings.background;\n            this.parent.chart.theme = this.parent.chartSettings.theme;\n            this.parent.chart.legendSettings = currentLegendSettings;\n            this.parent.chart.selectionMode = this.parent.chartSettings.selectionMode;\n            this.parent.chart.enableExport = this.parent.chartSettings.enableExport;\n            this.parent.chart.isMultiSelect = this.parent.chartSettings.isMultiSelect;\n            this.parent.chart.enableAnimation = this.parent.chartSettings.enableAnimation;\n            this.parent.chart.useGroupingSeparator = this.parent.chartSettings.useGroupingSeparator;\n            this.parent.chart.highlightPattern = this.parent.chartSettings.highlightPattern;\n            if (this.accumulationType.indexOf(type) > -1) {\n                this.parent.chart.enableBorderOnMouseMove = this.parent.chartSettings.enableBorderOnMouseMove;\n                this.parent.chart.highLightMode = this.parent.chartSettings.highlightMode;\n                this.parent.chart.enableSmartLabels = this.parent.chartSettings.enableSmartLabels;\n            }\n            else {\n                this.parent.chart.palettes = this.parent.chartSettings.palettes;\n                this.parent.chart.isTransposed = this.parent.chartSettings.isTransposed;\n                this.parent.chart.enableSideBySidePlacement = this.parent.chartSettings.enableSideBySidePlacement;\n                this.parent.chart.tabIndex = this.parent.chartSettings.tabIndex;\n                this.parent.chart.description = this.parent.chartSettings.description;\n                this.parent.chart.enableCanvas = this.parent.chartSettings.enableCanvas;\n            }\n            if (type === 'Polar' || type === 'Radar') {\n                this.parent.chart.primaryXAxis = currentXAxis;\n                this.parent.chart.primaryYAxis.visible = true;\n                this.parent.chart.primaryYAxis = axesWithRows.axes[0];\n                this.parent.chart.axes = [];\n                this.parent.chart.rows = [{}];\n            }\n            else if ((this.accumulationType.indexOf(type) < 0) && this.parent.chart.getModuleName() === 'chart') {\n                this.parent.chart.primaryYAxis.visible = false;\n                this.parent.chart.primaryXAxis = currentXAxis;\n                this.parent.chart.axes = axesWithRows.axes;\n                if (type === 'Bar' || type === 'StackingBar' || type === 'StackingBar100' &&\n                    this.chartSettings.enableMultipleAxis) {\n                    this.parent.chart.rows = [{ height: '100%' }];\n                    this.parent.chart.columns = axesWithRows.columns;\n                }\n                else {\n                    this.parent.chart.rows = axesWithRows.rows;\n                    this.parent.chart.columns = [{ width: '100%' }];\n                }\n            }\n            this.parent.chart.refresh();\n            if ((this.accumulationType.indexOf(type) > -1) && this.parent.chart.getModuleName() === 'accumulationchart' && (this.parent.dataSourceSettings.rows.length === 0 || this.parent.dataSourceSettings.columns.length === 0)) {\n                this.parent.hideWaitingPopup();\n                if (this.parent.pivotFieldListModule) {\n                    hideSpinner(this.parent.pivotFieldListModule.fieldListSpinnerElement);\n                }\n            }\n        }\n        if (this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n            this.parent.chart.appendTo('#' + this.parent.element.id + '_chartInner');\n        }\n        else {\n            this.parent.chart.appendTo('#' + this.parent.element.id + '_chart');\n        }\n    };\n    PivotChart.prototype.pointClick = function (args) {\n        var dataSource = args.series.dataSource ? args.series.dataSource : this.parent.chart.series[args.seriesIndex].dataSource;\n        if (((['Pie', 'Funnel', 'Doughnut', 'Pyramid', 'Radar', 'Polar'].indexOf(this.parent.chartSettings.chartSeries.type) > -1) || !this.parent.chartSettings.showMultiLevelLabels) && this.parent.dataSourceSettings.rows.length > 1) {\n            this.pivotIndex = {\n                rIndex: dataSource ? dataSource[args.pointIndex].rIndex : undefined,\n                cIndex: dataSource ? dataSource[args.pointIndex].cIndex : undefined,\n            };\n            this.creatMenu();\n            var pos = this.parent.element.getBoundingClientRect();\n            var y = (this.parent.element.querySelector('.e-pivot-toolbar') ?\n                this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 0) +\n                (this.parent.element.querySelector('.e-chart-grouping-bar') ?\n                    this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 0) +\n                (window.scrollY || document.documentElement.scrollTop) + pos.top;\n            this.accumulationMenu.open(y + args.y, args.x + pos.left + (window.scrollX || document.documentElement.scrollLeft));\n        }\n        else if ((this.parent.allowDrillThrough || this.parent.editSettings.allowEditing) && this.parent.drillThroughModule) {\n            var rIndex = dataSource[args.pointIndex].rIndex;\n            var cIndex = dataSource[args.pointIndex].cIndex;\n            this.parent.drillThroughModule.executeDrillThrough(this.parent.pivotValues[rIndex][cIndex], rIndex, cIndex);\n        }\n        this.parent.trigger(events.chartPointClick, args);\n    };\n    /* eslint-enable */\n    PivotChart.prototype.frameAxesWithRows = function () {\n        var axes = [];\n        var rows = [];\n        var columns = [];\n        var percentChart = this.persistSettings.chartSeries && (this.persistSettings.chartSeries.type === 'StackingColumn100' ||\n            this.persistSettings.chartSeries.type === 'StackingBar100' ||\n            this.persistSettings.chartSeries.type === 'StackingArea100');\n        var percentAggregateTypes = ['PercentageOfGrandTotal', 'PercentageOfColumnTotal', 'PercentageOfRowTotal',\n            'PercentageOfDifferenceFrom', 'PercentageOfParentRowTotal', 'PercentageOfParentColumnTotal', 'PercentageOfParentTotal'];\n        if (this.chartSettings.enableMultipleAxis) {\n            var valCnt = 0;\n            var divider = (100 / this.dataSourceSettings.values.length) + '%';\n            for (var _i = 0, _a = this.dataSourceSettings.values; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var measureField = this.engineModule.fieldList[item.name];\n                var measureAggregatedName = (this.parent.dataType === 'olap' ? '' : (this.parent.localeObj.getConstant(measureField.aggregateType) + ' ' +\n                    this.parent.localeObj.getConstant('of') + ' ')) + measureField.caption;\n                // let formatSetting: IFormatSettings = this.dataSourceSettings.formatSettings.filter((itm: IFormatSettings) => {\n                //     return itm.name === item.name;\n                // })[0];\n                var formatSetting = void 0;\n                for (var _b = 0, _c = this.dataSourceSettings.formatSettings; _b < _c.length; _b++) {\n                    var field = _c[_b];\n                    if (field.name === item.name) {\n                        formatSetting = field;\n                        break;\n                    }\n                }\n                var format = PivotUtil.inArray(measureField.aggregateType, percentAggregateTypes) !== -1 ? 'P2' : (formatSetting ?\n                    (formatSetting.format.toLowerCase().match(/n|p|c/) === null ? 'N' : formatSetting.format) :\n                    this.parent.dataType === 'olap' ? this.getFormat(measureField.formatString) : 'N');\n                var resFormat = (this.chartSettings.chartSeries.type === 'Polar' || this.chartSettings.chartSeries.type === 'Radar') ? true : false;\n                var currentYAxis = {};\n                currentYAxis = this.persistSettings.primaryYAxis ?\n                    this.frameObjectWithKeys(this.persistSettings.primaryYAxis) : currentYAxis;\n                currentYAxis.labelFormat = currentYAxis.labelFormat ?\n                    currentYAxis.labelFormat : (percentChart ? '' : (!resFormat ? format : 'N'));\n                currentYAxis.title = currentYAxis.title ? currentYAxis.title : measureAggregatedName;\n                currentYAxis.plotOffsetTop = currentYAxis.plotOffsetTop ? currentYAxis.plotOffsetTop :\n                    this.chartSettings.chartSeries.type === 'Bar' || this.chartSettings.chartSeries.type === 'StackingBar' ||\n                        this.chartSettings.chartSeries.type === 'StackingBar100' ? 50 : 30;\n                if (!resFormat) {\n                    currentYAxis.name = this.measuresNames[item.name] ? this.measuresNames[item.name] : item.name;\n                }\n                axes = axes.concat(currentYAxis);\n                if (this.chartSettings.multipleAxisMode === 'Stacked') {\n                    currentYAxis.rowIndex = valCnt;\n                    currentYAxis.columnIndex = valCnt;\n                    rows.push({ height: divider });\n                    columns.push({ width: divider });\n                }\n                else {\n                    currentYAxis.rowIndex = 0;\n                    currentYAxis.columnIndex = 0;\n                    rows = [{ height: '100%' }];\n                    columns = [{ width: '100%' }];\n                }\n                valCnt++;\n            }\n        }\n        else {\n            var measureField = this.engineModule.fieldList[this.currentMeasure];\n            var measureAggregatedName = (this.parent.dataType === 'olap' ? '' :\n                (this.parent.localeObj.getConstant(measureField.aggregateType) + ' ' +\n                    this.parent.localeObj.getConstant('of') + ' ')) + measureField.caption;\n            // let formatSetting: IFormatSettings = this.dataSourceSettings.formatSettings.filter((item: IFormatSettings) => {\n            //     return item.name === this.currentMeasure;\n            // })[0];\n            var formatSetting = void 0;\n            for (var _d = 0, _e = this.dataSourceSettings.formatSettings; _d < _e.length; _d++) {\n                var item = _e[_d];\n                if (item.name === this.currentMeasure) {\n                    formatSetting = item;\n                    break;\n                }\n            }\n            var lengthofFormat = void 0;\n            if (formatSetting) {\n                lengthofFormat = formatSetting.format.length;\n            }\n            var currentYAxis = {};\n            var format = PivotUtil.inArray(measureField.aggregateType, percentAggregateTypes) !== -1 ? 'P2' : (formatSetting ?\n                (((formatSetting.format.toLowerCase().match(/n[0-10]|p[0-10]|c[0-10]/) === null) || lengthofFormat > 3) ? 'N' : formatSetting.format) :\n                this.parent.dataType === 'olap' ? this.getFormat(measureField.formatString) : 'N');\n            currentYAxis = this.persistSettings.primaryYAxis ? this.frameObjectWithKeys(this.persistSettings.primaryYAxis) : currentYAxis;\n            currentYAxis.rowIndex = 0;\n            currentYAxis.columnIndex = 0;\n            if (!(this.chartSettings.chartSeries.type === 'Polar' || this.chartSettings.chartSeries.type === 'Radar')) {\n                currentYAxis.name = this.measuresNames[this.currentMeasure] ? this.measuresNames[this.currentMeasure] : this.currentMeasure;\n            }\n            currentYAxis.labelFormat = currentYAxis.labelFormat ? currentYAxis.labelFormat : (percentChart ? '' : format);\n            currentYAxis.title = currentYAxis.title ? currentYAxis.title : measureAggregatedName;\n            axes = axes.concat(currentYAxis);\n            rows.push({ height: '100%' });\n            columns.push({ width: '100%' });\n        }\n        return { axes: axes, rows: rows, columns: columns };\n    };\n    PivotChart.prototype.getFormat = function (format) {\n        if (format === 'Currency') {\n            format = 'C';\n        }\n        else if (format === 'Percent') {\n            format = 'P';\n        }\n        else {\n            format = 'N';\n        }\n        return format;\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    PivotChart.prototype.getColumnTotalIndex = function (pivotValues) {\n        var colIndexColl = {};\n        var rKeys = Object.keys(pivotValues);\n        for (var _i = 0, rKeys_2 = rKeys; _i < rKeys_2.length; _i++) {\n            var rowIndex = rKeys_2[_i];\n            var rows = pivotValues[Number(rowIndex)];\n            var cKeys = void 0;\n            if (!isNullOrUndefined(rows)) {\n                cKeys = Object.keys(rows);\n                for (var _a = 0, cKeys_2 = cKeys; _a < cKeys_2.length; _a++) {\n                    var cellIndex = cKeys_2[_a];\n                    var cell = rows[Number(cellIndex)];\n                    if (!isNullOrUndefined(cell)) {\n                        if (cell.axis !== 'column') {\n                            return colIndexColl;\n                        }\n                        else if ((cell.type === 'sum' || (this.dataSourceSettings.columns.length === 0 ? false : cell.type === 'grand sum'))\n                            && cell.rowSpan !== -1) {\n                            colIndexColl[cell.colIndex] = cell.colIndex;\n                        }\n                    }\n                }\n            }\n        }\n        return colIndexColl;\n    };\n    PivotChart.prototype.groupHierarchyWithLevels = function (pivotValues) {\n        var _a, _b;\n        this.fieldPosition = [];\n        var group = {};\n        var fieldCount = 0;\n        var levelPos = {};\n        this.measurePos = this.engineModule.tupRowInfo[0].measurePosition;\n        for (var rowPos = 0; rowPos < pivotValues.length; rowPos++) {\n            var cell = pivotValues[rowPos][0];\n            if (cell && cell.axis === 'row' && cell.type !== 'grand sum') {\n                if (isNullOrUndefined(group[cell.hierarchy])) {\n                    if (cell.memberType === 3) {\n                        if (fieldCount === this.measurePos) {\n                            this.fieldPosition[this.measurePos] = cell.hierarchy;\n                            group[cell.hierarchy] = (_a = {}, _a[cell.levelUniqueName] = cell.levelUniqueName, _a);\n                        }\n                        else {\n                            fieldCount--;\n                        }\n                    }\n                    else {\n                        this.fieldPosition[fieldCount] = cell.hierarchy;\n                        group[cell.hierarchy] = (_b = {}, _b[cell.levelUniqueName] = cell.levelUniqueName, _b);\n                    }\n                    fieldCount++;\n                }\n                else {\n                    group[cell.hierarchy][cell.levelUniqueName] = cell.levelUniqueName;\n                }\n            }\n        }\n        var lastEnd = -1;\n        for (var pos = 0; pos < this.fieldPosition.length; pos++) {\n            if (this.measurePos !== pos) {\n                levelPos[this.fieldPosition[pos]] = {\n                    start: (lastEnd + 1),\n                    end: (lastEnd + Object.keys(group[this.fieldPosition[pos]]).length)\n                };\n                lastEnd = levelPos[this.fieldPosition[pos]].end;\n            }\n        }\n        return levelPos;\n    };\n    /* eslint-disable */\n    PivotChart.prototype.frameMultiLevelLabels = function () {\n        var startKeys = Object.keys(this.headerColl);\n        var parentHeaders = this.headerColl[-0.5];\n        for (var _i = 0, startKeys_1 = startKeys; _i < startKeys_1.length; _i++) {\n            var startKey = startKeys_1[_i];\n            var sKey = Number(startKey);\n            var headers = this.headerColl[sKey];\n            var levelPos = 0;\n            var isAvail = false;\n            while (levelPos <= this.maxLevel) {\n                if (!isAvail) {\n                    if (!headers[levelPos]) {\n                        headers[levelPos] = parentHeaders[levelPos];\n                    }\n                    else {\n                        isAvail = true;\n                    }\n                }\n                else if (!headers[levelPos]) {\n                    headers[levelPos] = {\n                        name: headers[levelPos - 1].name,\n                        // text: headers[levelPos - 1].text,\n                        text: '',\n                        hasChild: headers[levelPos - 1].hasChild,\n                        isDrilled: headers[levelPos - 1].isDrilled,\n                        levelName: headers[levelPos - 1].levelName,\n                        level: headers[levelPos - 1].level,\n                        fieldName: headers[levelPos - 1].fieldName,\n                        rowIndex: headers[levelPos - 1].rowIndex,\n                        colIndex: headers[levelPos - 1].colIndex,\n                        span: -1,\n                    };\n                    // headers[levelPos - 1].span = 0;\n                }\n                levelPos++;\n            }\n            parentHeaders = this.headerColl[sKey];\n        }\n        var gRows = {};\n        for (var _a = 0, startKeys_2 = startKeys; _a < startKeys_2.length; _a++) {\n            var startKey = startKeys_2[_a];\n            var sKey = Number(startKey);\n            var headers = this.headerColl[sKey];\n            var lKeys = Object.keys(headers);\n            for (var _b = 0, lKeys_1 = lKeys; _b < lKeys_1.length; _b++) {\n                var levelKey = lKeys_1[_b];\n                var lKey = Number(levelKey);\n                if (gRows[lKey]) {\n                    var len = gRows[lKey].length;\n                    if (headers[lKey].levelName === parentHeaders[lKey].levelName) {\n                        gRows[lKey][len - 1].end = gRows[lKey][len - 1].end + 1;\n                    }\n                    else {\n                        gRows[lKey].push({\n                            start: sKey, end: sKey + 1, text: headers[lKey].text,\n                            type: (headers[lKey].span === -1 ? 'WithoutTopandBottomBorder' : 'WithoutTopBorder'),\n                            customAttributes: headers[lKey]\n                        });\n                    }\n                }\n                else {\n                    gRows[lKey] = [{\n                            start: sKey, end: sKey + 1, text: headers[lKey].text,\n                            type: (headers[lKey].span === -1 ? 'WithoutTopandBottomBorder' : 'WithoutTopBorder'),\n                            customAttributes: headers[lKey]\n                        }];\n                }\n            }\n            parentHeaders = headers;\n        }\n        var levellength = Object.keys(gRows).length;\n        var multiLevelLabels = [];\n        for (var level = levellength - 1; level > -1; level--) {\n            multiLevelLabels.push({ categories: gRows[level], border: { width: 1 }, overflow: 'Trim' });\n        }\n        return multiLevelLabels;\n    };\n    /* eslint-enable */\n    PivotChart.prototype.getZoomFactor = function () {\n        if (!isNaN(Number(this.parent.width))) {\n            this.calculatedWidth = Number(this.parent.width);\n        }\n        else if (this.parent.width.indexOf('%') > -1) {\n            this.calculatedWidth = this.parent.element.clientWidth * (parseFloat(this.parent.width) / 100);\n        }\n        else if (this.parent.width.indexOf('px') > -1) {\n            this.calculatedWidth = Number(this.parent.width.toString().split('px')[0]);\n        }\n        else {\n            this.calculatedWidth = this.parent.element.clientWidth;\n        }\n        var seriesLength = (this.chartSeries.length * 10) > 120 ? (this.chartSeries.length * 10) : 120;\n        var zoomFactor = this.chartSeries.length > 0 ?\n            (this.calculatedWidth / (Object.keys(this.chartSeries[0].dataSource).length * seriesLength)) : 1;\n        zoomFactor = (zoomFactor < 1 && zoomFactor > 0) ? zoomFactor : 1;\n        return zoomFactor;\n    };\n    PivotChart.prototype.configTooltipSettings = function () {\n        var tooltip = this.persistSettings.tooltip ? this.persistSettings.tooltip : this.chartSettings.tooltip;\n        tooltip.enable = tooltip.enable === undefined ? true : tooltip.enable;\n        if (tooltip.enable && tooltip.template) {\n            this.templateFn = this.parent.templateParser(tooltip.template);\n        }\n        if (this.parent.tooltipTemplate) {\n            tooltip.template = tooltip.template ? tooltip.template : this.parent.tooltipTemplate;\n        }\n        if (isBlazor()) {\n            this.parent.allowServerDataBinding = false;\n            this.parent.setProperties({ chartSettings: { tooltip: { header: tooltip.header ? tooltip.header : '' } } }, true);\n            this.parent.allowServerDataBinding = true;\n        }\n        else {\n            tooltip.header = tooltip.header ? tooltip.header : '';\n        }\n        tooltip.enableMarker = tooltip.enableMarker === undefined ? true : tooltip.enableMarker;\n        return tooltip;\n    };\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    PivotChart.prototype.configLegendSettings = function () {\n        var legendSettings = {};\n        if (this.chartSettings.legendSettings) {\n            var keyPos = 0;\n            var keys = Object.keys(this.chartSettings.legendSettings);\n            while (keyPos < keys.length) {\n                legendSettings[keys[keyPos]] = this.chartSettings.legendSettings[keys[keyPos]];\n                keyPos++;\n            }\n        }\n        if (this.accumulationType.indexOf(this.chartSettings.chartSeries.type) > -1 && legendSettings.visible === undefined) {\n            legendSettings.visible = false;\n        }\n        legendSettings.padding = legendSettings.padding ? legendSettings.padding : 25;\n        legendSettings.shapePadding = legendSettings.shapePadding ? legendSettings.shapePadding : 10;\n        return legendSettings;\n    };\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n    PivotChart.prototype.configXAxis = function () {\n        var currentXAxis = {};\n        currentXAxis = this.persistSettings.primaryXAxis ? this.frameObjectWithKeys(this.persistSettings.primaryXAxis) : currentXAxis;\n        currentXAxis.valueType = 'Category';\n        currentXAxis.labelIntersectAction = currentXAxis.labelIntersectAction ? currentXAxis.labelIntersectAction : 'Rotate45';\n        currentXAxis.title = currentXAxis.title ? currentXAxis.title :\n            this.dataSourceSettings.rows.map(function (args) {\n                return args.caption || args.name;\n            }).join(' / ');\n        currentXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? this.getZoomFactor() : this.parent.chartSettings.primaryXAxis.zoomFactor;\n        if (!this.parent.chartSettings.zoomSettings.enableScrollbar) {\n            currentXAxis.zoomFactor = 1;\n        }\n        if (this.chartSettings.showMultiLevelLabels && this.chartSettings.chartSeries.type !== 'Pareto') {\n            currentXAxis.multiLevelLabels = this.frameMultiLevelLabels();\n            currentXAxis.border = { width: 1, type: 'WithoutTopandBottomBorder' };\n            currentXAxis.majorTickLines = { width: 0, height: -10 };\n        }\n        else {\n            currentXAxis.multiLevelLabels = [];\n            currentXAxis.border = { width: 1, type: 'Rectangle' };\n            currentXAxis.majorTickLines = { width: 0, height: 5 };\n        }\n        return currentXAxis;\n    };\n    PivotChart.prototype.configZoomSettings = function () {\n        var zoomSettings = this.chartSettings.zoomSettings;\n        zoomSettings.enableSelectionZooming = zoomSettings.enableSelectionZooming === undefined ? true :\n            zoomSettings.enableSelectionZooming;\n        zoomSettings.enableScrollbar = zoomSettings.enableScrollbar === undefined ? true : zoomSettings.enableScrollbar;\n        return zoomSettings;\n    };\n    PivotChart.prototype.tooltipRender = function (args) {\n        var measure = args.series.yAxisName ? (args.series.yAxisName.split('_CumulativeAxis')[0]) :\n            ((this.chartSettings.enableMultipleAxis && this.accumulationType.indexOf(this.chartSettings.chartSeries.type) < 0) ?\n                args.series.name ? args.series.name.split(' | ')[1] : args.data.seriesName ?\n                    args.data.seriesName.split(' | ')[1] : this.currentMeasure : this.measuresNames[this.currentMeasure] ?\n                this.measuresNames[this.currentMeasure] : this.currentMeasure);\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        var dataSource = args.series.dataSource ? args.series.dataSource : this.parent.chart.series[args.data.seriesIndex].dataSource;\n        var rowIndex = dataSource ? dataSource[args.data.pointIndex].rIndex : undefined;\n        var colIndex = dataSource ? dataSource[args.data.pointIndex].cIndex : undefined;\n        var measureField = this.engineModule.fieldList[this.measuresNames[measure] ? this.measuresNames[measure] : measure];\n        var aggregateType = this.parent.dataType === 'olap' ? '' : this.parent.localeObj.getConstant(measureField.aggregateType);\n        var measureAggregatedName = (this.parent.dataType === 'olap' ? '' : aggregateType + ' ' +\n            this.parent.localeObj.getConstant('of') + ' ') + measureField.caption;\n        var formattedText = this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type) < 0 ?\n            args.text.split('<b>')[1].split('</b>')[0] : this.engineModule.pivotValues[rowIndex][colIndex].formattedText;\n        var formatField = this.engineModule.formatFields[measureField.id];\n        var formattedValue = ((formatField && formatField.format && formatField.format.toLowerCase().match(/n|p|c/) !== null &&\n            this.chartSettings.useGroupingSeparator) ? this.parent.dataType === 'olap' ?\n            this.engineModule.getFormattedValue(args.point.y, measureField.id, formattedText) :\n            this.parent.engineModule.getFormattedValue(args.point.y, measureField.id).formattedText :\n            formattedText);\n        var columnText = (args.series.name ? args.series.name.split(' | ')[0] : args.data.seriesName.split(' | ')[0]);\n        var rowText = args.point.x;\n        if (this.parent.tooltipTemplate && this.parent.getTooltipTemplate() !== undefined || this.chartSettings.tooltip.template) {\n            var rowFields = dataSource ? this.parent.getHeaderField(rowIndex, colIndex, 'row') : '';\n            var columnFields = dataSource ? this.parent.getHeaderField(rowIndex, colIndex, 'Column') : '';\n            var templateVariable = {\n                rowHeaders: rowText,\n                columnHeaders: columnText,\n                aggregateType: aggregateType,\n                value: formattedValue,\n                valueField: measureField.caption,\n                rowFields: rowFields,\n                columnFields: columnFields\n            };\n            var template = void 0;\n            if (this.parent.chartSettings && this.parent.chartSettings.tooltip &&\n                this.parent.chartSettings.tooltip.enable && this.parent.chartSettings.tooltip.template) {\n                template = this.tooltipTemplateFn()(templateVariable, this, 'tooltipTemplate', this.element.id + '1tooltipTemplate')[0].outerHTML;\n            }\n            else {\n                /* eslint-enable @typescript-eslint/no-explicit-any */\n                template = this.parent.getTooltipTemplate()(templateVariable, this, 'tooltipTemplate', this.element.id + 'tooltipTemplate')[0].outerHTML;\n            }\n            args.template = template;\n        }\n        else {\n            args.text = measureAggregatedName + ': ' + formattedValue +\n                (this.dataSourceSettings.columns.length === 0 ? '' :\n                    (' <br/>' + this.parent.localeObj.getConstant('column') + ': ' + columnText)) +\n                (this.dataSourceSettings.rows.length === 0 ? '' :\n                    (' <br/>' + this.parent.localeObj.getConstant('row') + ': ' + rowText));\n            this.parent.trigger(events.chartTooltipRender, args);\n        }\n    };\n    PivotChart.prototype.tooltipTemplateFn = function () {\n        return this.templateFn;\n    };\n    PivotChart.prototype.loaded = function (args) {\n        this.parent.isChartLoaded = true;\n        if (this.parent.chart && this.parent.showGroupingBar && this.parent.groupingBarModule &&\n            this.parent.showFieldList && this.parent.currentView === 'Chart') {\n            this.parent.groupingBarModule.alignIcon();\n        }\n        if (this.chartSettings.showMultiLevelLabels) {\n            var multilabelAxisName = PivotUtil.inArray(this.chartSettings.chartSeries.type, ['Bar', 'StackingBar', 'StackingBar100']) > -1 ?\n                '_chartYAxisMultiLevelLabel0' : '_chartXAxisMultiLevelLabel0';\n            if (!isNullOrUndefined(select('#' + this.parent.element.id + multilabelAxisName, this.parent.element))) {\n                this.parent.element.querySelector('#' + this.parent.element.id + multilabelAxisName).setAttribute('cursor', 'pointer');\n            }\n        }\n        if ((['Pie', 'Funnel', 'Pyramid', 'Doughnut', 'Radar', 'Polar'].indexOf(this.parent.chartSettings.chartSeries.type) >= 0)\n            && this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n            this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflow = 'visible';\n        }\n        else if (this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis) {\n            this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflow = 'auto';\n            this.parent.element.querySelector('.' + cls.PIVOTCHART).style.overflowX = 'hidden';\n        }\n        this.parent.chart.height = ['Pie', 'Funnel', 'Pyramid', 'Doughnut', 'Radar', 'Polar'].indexOf(this.parent.chartSettings.chartSeries.type) < 0 &&\n            this.parent.chartSettings.enableScrollOnMultiAxis && this.parent.chartSettings.enableMultipleAxis &&\n            this.parent.dataSourceSettings.values.length > 0 ? Number(this.parent.chart.height) > (this.parent.dataSourceSettings.values.length * 235) + 100 ? /* eslint-disable-line */\n            isNaN(Number(this.getChartHeight())) ? this.getChartHeight().toString() : (Number(this.getChartHeight()) - 5).toString() :\n            (!isNaN(Number(this.getChartHeight())) || this.parent.dataSourceSettings.values.length > 1) ?\n                ((this.parent.dataSourceSettings.values.length * 235) + 100).toString() :\n                this.getChartHeight().toString() : this.getChartHeight().toString();\n        this.updateView();\n        this.parent.notify(events.contentReady, {});\n        this.parent.trigger(events.chartLoaded, args);\n        if ((this.parent.dataSourceSettings.mode === 'Server' && this.parent.isServerWaitingPopup) || this.parent.dataSourceSettings.mode === 'Local') {\n            this.parent.hideWaitingPopup();\n        }\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    PivotChart.prototype.updateView = function () {\n        if (this.parent.grid && this.parent.chart && this.parent.showToolbar) {\n            if (this.parent.currentView === 'Table') {\n                this.parent.grid.element.style.display = '';\n                this.parent.chart.element.style.display = 'none';\n                if (this.parent.showGroupingBar && this.parent.groupingBarModule &&\n                    this.parent.element.querySelector('.e-pivot-grouping-bar') &&\n                    this.parent.element.querySelector('.e-chart-grouping-bar')) {\n                    var groupingTable = this.parent.element.querySelector('.e-pivot-grouping-bar');\n                    groupingTable.style.display = '';\n                    if (groupingTable && groupingTable.querySelector('.' + cls.ALL_FIELDS_PANEL_CLASS) && this.parent.groupingBarModule.gridPanel != null &&\n                        !this.parent.groupingBarModule.gridPanel.isDestroyed) {\n                        this.parent.groupingBarModule.gridPanel.refreshOverflow();\n                    }\n                    this.parent.element.querySelector('.e-chart-grouping-bar').style.display = 'none';\n                }\n                if (this.parent.chartSettings.enableMultipleAxis && this.parent.chartSettings.enableScrollOnMultiAxis) {\n                    this.parent.element.querySelector('.e-pivotchart').style.display = 'none';\n                }\n            }\n            else {\n                this.parent.grid.element.style.display = 'none';\n                this.parent.chart.element.style.display = '';\n                if (this.parent.showGroupingBar && this.parent.groupingBarModule &&\n                    this.parent.element.querySelector('.e-pivot-grouping-bar') &&\n                    this.parent.element.querySelector('.e-chart-grouping-bar')) {\n                    this.parent.element.querySelector('.e-pivot-grouping-bar').style.display = 'none';\n                    var groupingChartTable = this.parent.element.querySelector('.e-chart-grouping-bar');\n                    groupingChartTable.style.display = '';\n                    if (groupingChartTable && groupingChartTable.querySelector('.' + cls.ALL_FIELDS_PANEL_CLASS) &&\n                        this.parent.groupingBarModule.chartPanel != null && !this.parent.groupingBarModule.chartPanel.isDestroyed) {\n                        this.parent.groupingBarModule.chartPanel.refreshOverflow();\n                    }\n                }\n                if (this.parent.chartSettings.enableMultipleAxis && this.parent.chartSettings.enableScrollOnMultiAxis) {\n                    this.parent.element.querySelector('.e-pivotchart').style.display = '';\n                }\n            }\n        }\n    };\n    PivotChart.prototype.creatMenu = function () {\n        if (this.accumulationMenu && !this.accumulationMenu.isDestroyed) {\n            this.accumulationMenu.destroy();\n        }\n        var items = ((this.parent.allowDrillThrough || this.parent.editSettings.allowEditing)\n            && this.parent.drillThroughModule) ? ['expand', 'collapse', 'drillThrough', 'exit'] :\n            ['expand', 'collapse', 'exit'];\n        var option = [];\n        for (var i = 0; i < items.length; i++) {\n            option.push({\n                id: this.parent.element.id + '_DrillMenuChart_' + items[i],\n                text: this.parent.localeObj.getConstant(items[i]),\n                items: []\n            });\n        }\n        var getString = this.getMenuItems();\n        var expand = [];\n        var collapse = [];\n        for (var i = 0; i < getString.length; i++) {\n            if (getString[i].type === 'expand') {\n                expand.push({ id: this.element.id + 'drillExpand_' + getString[i].key, text: getString[i].value });\n            }\n            else {\n                collapse.push({ id: this.element.id + 'drillCollapse_' + getString[i].key, text: getString[i].value });\n            }\n        }\n        if (expand.length > 0) {\n            option[0].items = expand;\n        }\n        if (collapse.length > 0) {\n            option[1].items = collapse;\n        }\n        var menuOptions = {\n            cssClass: this.parent.element.id + '_accumulationChart',\n            items: option,\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.drillMenuOpen.bind(this),\n            select: this.drillMenuSelect.bind(this),\n            locale: this.parent.locale\n        };\n        this.accumulationMenu = new ContextMenu(menuOptions);\n        var contextMenu;\n        if (select('#' + this.parent.element.id + '_accumulationChart', this.parent.element)) {\n            contextMenu = select('#' + this.parent.element.id + '_accumulationChart', this.parent.element);\n            contextMenu.innerHTML = '';\n        }\n        else {\n            contextMenu = createElement('ul', {\n                id: this.parent.element.id + '_accumulationChart'\n            });\n            this.parent.element.appendChild(contextMenu);\n        }\n        this.accumulationMenu.isStringTemplate = true;\n        this.accumulationMenu.appendTo(contextMenu);\n    };\n    PivotChart.prototype.drillMenuOpen = function (args) {\n        if (args.items[0] && args.items[0].text === this.parent.localeObj.getConstant('expand') &&\n            args.items[0].items && args.items[0].items.length === 0) {\n            this.accumulationMenu.enableItems([this.parent.localeObj.getConstant('expand')], false);\n        }\n        if (args.items[1] && args.items[1].text === this.parent.localeObj.getConstant('collapse') &&\n            args.items[1].items && args.items[1].items.length === 0) {\n            this.accumulationMenu.enableItems([this.parent.localeObj.getConstant('collapse')], false);\n        }\n    };\n    PivotChart.prototype.getMenuItems = function () {\n        var rowIndex = this.pivotIndex.rIndex;\n        var menuItem = [];\n        var pivotValues = this.engineModule.pivotValues;\n        var levelCol = [];\n        var pivotValue = pivotValues[rowIndex][this.pivotIndex.cIndex];\n        // let hierarchy: string = pivotValues[rowIndex][0].hierarchy;\n        var level = (!pivotValues[rowIndex][0].isNamedSet && pivotValues[rowIndex][0].hasChild) ?\n            pivotValues[rowIndex][0].level : undefined;\n        var levels = this.parent.dataType === 'olap' ? pivotValue.rowHeaders.toString().split(/~~|::/)\n            : pivotValue.rowHeaders.toString().split(this.engineModule.valueSortSettings.headerDelimiter);\n        while (pivotValues[rowIndex][0]) {\n            pivotValue = pivotValues[rowIndex][0];\n            if ((levels.length !== 0) && (levels.indexOf(pivotValue.formattedText.toString()) === (levels.length - 1))) {\n                if (pivotValue.hasChild && !pivotValue.isNamedSet && levelCol.indexOf(pivotValue.level) < 0 &&\n                    (level ? level >= pivotValue.level : (level === 0 ? (pivotValue.level === 0) : true))) {\n                    if (!(pivotValue.isDrilled && pivotValue.hasChild)) {\n                        menuItem.push({\n                            key: rowIndex,\n                            type: 'expand',\n                            value: pivotValue.formattedText\n                        });\n                    }\n                    else {\n                        menuItem.push({\n                            key: rowIndex,\n                            type: 'collapse',\n                            value: pivotValue.formattedText\n                        });\n                    }\n                    levelCol.push(pivotValue.level);\n                    level = level ? (level - 1) : (pivotValue.level - 1);\n                }\n                var index = levels.indexOf(pivotValue.formattedText.toString());\n                levels.splice(index, 1);\n            }\n            if (pivotValue.level === 0 && pivotValue.hasChild && !pivotValue.isNamedSet) {\n                level = undefined;\n                levelCol = [];\n            }\n            rowIndex--;\n        }\n        return menuItem;\n    };\n    PivotChart.prototype.drillMenuSelect = function (args) {\n        var pivotValues = (this.parent.dataType === 'olap' ?\n            this.parent.olapEngineModule.pivotValues : this.parent.engineModule.pivotValues);\n        var option = (args.element.id).split('_DrillMenuChart_')[1];\n        if (args.element.id.indexOf(this.element.id + 'drill') === 0) {\n            var type = args.element.id.split(this.element.id + 'drill')[1].indexOf('Expand') >= 0 ? 'drillExpand' : 'drillCollapse';\n            var rowIndex = Number(args.element.id.split(this.element.id + type + '_')[1]);\n            var pivotValue = pivotValues[rowIndex][0];\n            var name_2 = this.parent.dataType === 'olap' ? pivotValue.formattedText :\n                (pivotValue.actualText ? pivotValue.actualText.toString() : pivotValue.formattedText.toString());\n            var text = pivotValue.formattedText ? pivotValue.formattedText.toString() : name_2;\n            var caption = (pivotValue.hasChild && !pivotValue.isNamedSet) ?\n                ((pivotValue.isDrilled ? ' - ' : ' + ') + text) : text;\n            var tupInfo = this.parent.dataType === 'olap' ?\n                this.engineModule.tupRowInfo[pivotValue.ordinal] : undefined;\n            var levelName = tupInfo ? tupInfo.uNameCollection : pivotValue.valueSort.levelName.toString();\n            var customAttributes = {\n                fieldName: pivotValue.valueSort.axis,\n                level: pivotValue.level,\n                hasChild: pivotValue.hasChild,\n                levelName: levelName,\n                name: name_2,\n                text: caption,\n                rowIndex: rowIndex,\n                colIndex: 0,\n                isDrilled: pivotValue.isDrilled,\n                cell: pivotValue\n            };\n            if (this.parent.dataType === 'olap') {\n                this.parent.onDrill(undefined, customAttributes);\n            }\n            else {\n                this.onDrill({ customAttributes: customAttributes });\n            }\n        }\n        else if (option === 'drillThrough') {\n            this.parent.drillThroughModule.executeDrillThrough(pivotValues[this.pivotIndex.rIndex][this.pivotIndex.cIndex], this.pivotIndex.rIndex, this.pivotIndex.rIndex); /* eslint-disable-line */\n        }\n        else if (option === 'exit') {\n            this.accumulationMenu.close();\n        }\n    };\n    PivotChart.prototype.getChartHeight = function () {\n        var height;\n        var offSetHeight;\n        if (isNullOrUndefined(this.parent.getHeightAsNumber())) {\n            height = 'auto';\n        }\n        else {\n            var offSetVal = this.parent.showToolbar ? 6 : 5;\n            height = (this.parent.getHeightAsNumber() - offSetVal).toString();\n            offSetHeight = this.parent.getHeightAsNumber() - offSetVal;\n        }\n        if (!isNullOrUndefined(this.parent.getHeightAsNumber())) {\n            if (this.parent.showToolbar && this.parent.showGroupingBar) {\n                height = (offSetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ?\n                    this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42) -\n                    (this.parent.element.querySelector('.e-chart-grouping-bar') ?\n                        this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62)).toString();\n            }\n            else if (this.parent.showToolbar) {\n                height = (offSetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ?\n                    this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42)).toString();\n            }\n            else if (this.parent.showGroupingBar) {\n                height = (offSetHeight - (this.parent.element.querySelector('.e-chart-grouping-bar') ?\n                    this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62)).toString();\n            }\n            else if ((this.parent.chart && parseInt(this.parent.chart.height, 10) < 200) || offSetHeight < 200) {\n                height = '200';\n            }\n        }\n        else {\n            height = 'auto';\n        }\n        return height;\n    };\n    PivotChart.prototype.getChartAutoHeight = function () {\n        var height = this.parent.element.offsetHeight;\n        if (this.parent.showToolbar && this.parent.showGroupingBar) {\n            height = this.parent.element.offsetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ?\n                this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42) -\n                (this.parent.element.querySelector('.e-chart-grouping-bar') ?\n                    this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62);\n        }\n        else if (this.parent.showToolbar) {\n            height = this.parent.element.offsetHeight - (this.parent.element.querySelector('.e-pivot-toolbar') ?\n                this.parent.element.querySelector('.e-pivot-toolbar').clientHeight : 42);\n        }\n        else if (this.parent.showGroupingBar) {\n            height = this.parent.element.offsetHeight - (this.parent.element.querySelector('.e-chart-grouping-bar') ?\n                this.parent.element.querySelector('.e-chart-grouping-bar').clientHeight : 62);\n        }\n        return height;\n    };\n    PivotChart.prototype.axisLabelRender = function (args) {\n        if (this.chartSettings.showMultiLevelLabels && this.chartSettings.chartSeries.type !== 'Pareto') {\n            if (args.axis.name === 'primaryXAxis') {\n                args.text = '';\n            }\n        }\n        this.parent.trigger(events.chartAxisLabelRender, args);\n    };\n    PivotChart.prototype.multiLevelLabelClick = function (args) {\n        var eventArgs = {\n            axis: args.axis,\n            text: args.text,\n            cell: !isNullOrUndefined(args.customAttributes) ? args.customAttributes.cell : undefined,\n            cancel: false\n        };\n        this.parent.trigger(events.multiLevelLabelClick, eventArgs);\n        if (!eventArgs.cancel && args.customAttributes && args.customAttributes.hasChild && !args.customAttributes.cell.isNamedSet) { /* eslint-disable-line */\n            if (this.parent.dataType === 'olap') {\n                this.parent.onDrill(undefined, args.customAttributes);\n            }\n            else {\n                this.onDrill(args);\n            }\n        }\n    };\n    /* eslint-disable */\n    /** @hidden */\n    PivotChart.prototype.onDrill = function (args) {\n        var labelInfo = args.customAttributes;\n        /* eslint-enable */\n        var delimiter = (this.dataSourceSettings.drilledMembers[0] && this.dataSourceSettings.drilledMembers[0].delimiter) ?\n            this.dataSourceSettings.drilledMembers[0].delimiter : '**';\n        var fieldName = labelInfo.fieldName;\n        var currentCell = this.engineModule.pivotValues[labelInfo.rowIndex][labelInfo.colIndex];\n        var memberUqName = currentCell.valueSort.levelName.\n            split(this.engineModule.valueSortSettings.headerDelimiter).join(delimiter);\n        var fieldAvail = false;\n        if (this.dataSourceSettings.drilledMembers.length === 0) {\n            this.parent.setProperties({\n                dataSourceSettings: { drilledMembers: [{ name: fieldName, items: [memberUqName], delimiter: delimiter }] }\n            }, true);\n        }\n        else {\n            for (var fCnt = 0; fCnt < this.dataSourceSettings.drilledMembers.length; fCnt++) {\n                var field = this.dataSourceSettings.drilledMembers[fCnt];\n                memberUqName = memberUqName.split(delimiter).join(field.delimiter ? field.delimiter : delimiter);\n                delimiter = field.delimiter = field.delimiter ? field.delimiter : delimiter;\n                if (field.name === fieldName) {\n                    fieldAvail = true;\n                    var memIndex = field.items.indexOf(memberUqName);\n                    if (memIndex > -1) {\n                        field.items.splice(memIndex, 1);\n                    }\n                    else {\n                        field.items.push(memberUqName);\n                    }\n                }\n                else {\n                    continue;\n                }\n            }\n            if (!fieldAvail) {\n                this.dataSourceSettings.drilledMembers.push({ name: fieldName, items: [memberUqName], delimiter: delimiter });\n            }\n        }\n        this.parent.showWaitingPopup();\n        var pivot = this; /* eslint-disable-line */\n        //setTimeout(() => {\n        var drilledItem = {\n            fieldName: fieldName, memberName: memberUqName, delimiter: delimiter,\n            axis: 'row',\n            action: labelInfo.isDrilled ? 'up' : 'down',\n            currentCell: currentCell\n        };\n        var drillArgs = {\n            drillInfo: drilledItem,\n            pivotview: isBlazor() ? undefined : pivot.parent\n        };\n        pivot.parent.trigger(events.drill, drillArgs);\n        var enginePopulatingEventArgs = {\n            dataSourceSettings: PivotUtil.getClonedDataSourceSettings(this.parent.dataSourceSettings)\n        };\n        this.parent.trigger(events.enginePopulating, enginePopulatingEventArgs);\n        this.parent.setProperties({ dataSourceSettings: enginePopulatingEventArgs.dataSourceSettings }, true);\n        if (pivot.parent.enableVirtualization) {\n            if (isBlazor()) {\n                /* eslint-disable */\n                var sfBlazor = 'sfBlazor';\n                var dataSourceSettings = window[sfBlazor].copyWithoutCircularReferences([pivot.dataSourceSettings], pivot.dataSourceSettings);\n                var drillItem = window[sfBlazor].copyWithoutCircularReferences([drilledItem], drilledItem);\n                var args_1 = window[sfBlazor].copyWithoutCircularReferences([drillArgs], drillArgs);\n                pivot.parent.interopAdaptor.invokeMethodAsync('PivotInteropMethod', 'onDrill', { 'dataSourceSettings': dataSourceSettings, 'drilledItem': drillItem }).then(function (data) {\n                    pivot.parent.updateBlazorData(data, pivot.parent);\n                    pivot.parent.engineModule.drilledMembers = pivot.dataSourceSettings.drilledMembers;\n                    pivot.parent.allowServerDataBinding = false;\n                    pivot.parent.setProperties({ pivotValues: pivot.engineModule.pivotValues }, true);\n                    delete pivot.parent.bulkChanges.pivotValues;\n                    pivot.parent.allowServerDataBinding = true;\n                    pivot.parent.renderPivotGrid();\n                });\n                /* eslint-enable */\n            }\n            else if (pivot.parent.dataSourceSettings.mode === 'Server') {\n                pivot.parent.getEngine('onDrill', drilledItem, null, null, null, null, null);\n            }\n            else {\n                pivot.engineModule.drilledMembers = pivot.dataSourceSettings.drilledMembers;\n                pivot.engineModule.onDrill(drilledItem);\n            }\n        }\n        else if (pivot.parent.dataSourceSettings.mode === 'Server') {\n            pivot.parent.getEngine('onDrill', drilledItem, null, null, null, null, null);\n        }\n        else {\n            pivot.engineModule.generateGridData(pivot.dataSourceSettings);\n        }\n        pivot.parent.allowServerDataBinding = false;\n        pivot.parent.setProperties({ pivotValues: pivot.engineModule.pivotValues }, true);\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        delete pivot.parent.bulkChanges.pivotValues;\n        pivot.parent.allowServerDataBinding = true;\n        var eventArgs = {\n            dataSourceSettings: PivotUtil.getClonedDataSourceSettings(this.parent.dataSourceSettings),\n            pivotValues: this.parent.pivotValues\n        };\n        this.parent.trigger(events.enginePopulated, eventArgs);\n        pivot.engineModule.pivotValues = eventArgs.pivotValues;\n        pivot.parent.renderPivotGrid();\n        //});\n    };\n    PivotChart.prototype.isAttributeDrill = function (hierarchy, drillInfo) {\n        var isDrill = false;\n        for (var i = 0; i < this.dataSourceSettings.drilledMembers.length; i++) {\n            if (this.dataSourceSettings.drilledMembers[i].name === hierarchy) {\n                for (var j = 0; j < this.dataSourceSettings.drilledMembers[i].items.length; j++) {\n                    var drillItems = this.dataSourceSettings.drilledMembers[i].items[j].split(this.dataSourceSettings.drilledMembers[i].delimiter);\n                    var levelName = '';\n                    for (var k = 0; k < drillItems.length; k++) {\n                        if (drillInfo[k] && drillInfo[k].uName) {\n                            levelName = levelName + (levelName === '' ? '' : this.dataSourceSettings.drilledMembers[i].delimiter) + (drillInfo[k].uName.indexOf('[Measures]') > -1 ? '[Measures]' : drillInfo[k].uName);\n                        }\n                    }\n                    if (levelName === this.dataSourceSettings.drilledMembers[i].items[j]) {\n                        isDrill = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return isDrill;\n    };\n    PivotChart.prototype.load = function (args) {\n        if (args.chart.zoomModule) {\n            args.chart.zoomModule.isZoomed = true;\n        }\n        this.parent.trigger(events.chartLoad, args);\n    };\n    PivotChart.prototype.resized = function (args) {\n        if (isBlazor()) {\n            args.chart = this.parent.chart;\n        }\n        if (this.accumulationType.indexOf(this.chartSettings.chartSeries.type) < 0) {\n            args.chart.primaryXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? this.getZoomFactor() : this.parent.chartSettings.primaryXAxis.zoomFactor;\n            if (!this.parent.chartSettings.zoomSettings.enableScrollbar) {\n                args.chart.primaryXAxis.zoomFactor = isNullOrUndefined(this.parent.chartSettings.primaryXAxis.zoomFactor) ? 1 : this.parent.chartSettings.primaryXAxis.zoomFactor;\n            }\n        }\n        this.parent.trigger(events.chartResized, args);\n    };\n    /**\n     * To destroy the chart module\n     * @returns {void}\n     * @hidden\n     */\n    PivotChart.prototype.destroy = function () {\n        if (this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.engineModule) {\n            this.engineModule.fieldList = {};\n            this.engineModule = {};\n        }\n        if (this.chartSeries) {\n            this.chartSeries = null;\n        }\n        if (this.columnGroupObject) {\n            this.columnGroupObject = null;\n        }\n        if (this.chartSettings) {\n            this.chartSettings = null;\n        }\n        if (this.dataSourceSettings) {\n            this.dataSourceSettings = null;\n        }\n        if (this.accumulationMenu && !this.accumulationMenu.isDestroyed) {\n            this.accumulationMenu.destroy();\n            this.accumulationMenu = null;\n        }\n        if (this.parent && this.parent.chart && !this.parent.chart.isDestroyed) {\n            this.parent.chart.destroy();\n            this.parent.chart = null;\n        }\n        else {\n            return;\n        }\n    };\n    return PivotChart;\n}());\nexport { PivotChart };\n"]},"metadata":{},"sourceType":"module"}