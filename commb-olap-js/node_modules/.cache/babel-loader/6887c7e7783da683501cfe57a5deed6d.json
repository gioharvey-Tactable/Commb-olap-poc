{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n\nimport { extend } from '@syncfusion/ej2-base';\nimport { ChartLocation, withInBounds } from '../../common/utils/helper';\nimport { Rect, Size, measureText } from '@syncfusion/ej2-svg-base';\nimport { stopTimer, removeElement } from '../../common/utils/helper';\nimport { ChartData } from '../../chart/utils/get-data';\nimport { Tooltip as SVGTooltip } from '@syncfusion/ej2-svg-base';\n/**\n * Tooltip Module used to render the tooltip for series.\n */\n\nvar BaseTooltip = function (_super) {\n  __extends(BaseTooltip, _super);\n  /**\n   * Constructor for tooltip module.\n   *\n   * @private\n   */\n\n\n  function BaseTooltip(chart) {\n    var _this = _super.call(this, chart) || this;\n\n    _this.element = _this.chart.element;\n    _this.textStyle = chart.tooltip.textStyle;\n    _this.control = chart;\n    return _this;\n  }\n\n  BaseTooltip.prototype.getElement = function (id) {\n    return document.getElementById(id);\n  };\n  /**\n   * Renders the tooltip.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseTooltip.prototype.getTooltipElement = function (isTooltip) {\n    this.inverted = this.chart.requireInvertedAxis;\n    this.header = this.control.tooltip.header === null ? this.control.tooltip.shared ? '<b>${point.x}</b>' : '<b>${series.name}</b>' : this.control.tooltip.header;\n    this.formattedText = [];\n    var tooltipDiv = document.getElementById(this.chart.element.id + '_tooltip');\n    var isStockChart = this.chart.element.id.indexOf('stockChart') > -1;\n\n    if (!isTooltip && !tooltipDiv || isStockChart) {\n      return this.createElement();\n    }\n\n    return null;\n  };\n\n  BaseTooltip.prototype.createElement = function () {\n    var tooltipDiv = document.createElement('div');\n    tooltipDiv.id = this.element.id + '_tooltip';\n    tooltipDiv.className = 'ejSVGTooltip';\n    tooltipDiv.setAttribute('style', 'pointer-events:none; position:absolute;z-index: 1');\n    return tooltipDiv;\n  };\n\n  BaseTooltip.prototype.pushData = function (data, isFirst, tooltipDiv, isChart) {\n    if (data.series.enableTooltip) {\n      if (isChart) {\n        this.currentPoints.push(data);\n      } else {\n        this.currentPoints.push(data);\n      }\n\n      this.stopAnimation();\n\n      if (tooltipDiv && !document.getElementById(tooltipDiv.id)) {\n        if (!this.chart.stockChart) {\n          document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        } else {\n          document.getElementById(this.chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  BaseTooltip.prototype.removeHighlight = function () {\n    var item;\n    var series;\n\n    for (var i = 0, len = this.previousPoints.length; i < len; i++) {\n      item = this.previousPoints[i];\n\n      if (item.series.isRectSeries) {\n        if (item.series.visible) {\n          this.highlightPoint(item.series, item.point.index, false);\n        }\n\n        continue;\n      }\n\n      series = item.series;\n\n      if (!series.marker.visible && item.series.type !== 'Scatter' && item.series.type !== 'Bubble') {\n        this.previousPoints.shift();\n        len -= 1;\n      }\n    }\n  };\n\n  BaseTooltip.prototype.highlightPoint = function (series, pointIndex, highlight) {\n    var element = this.getElement(this.element.id + '_Series_' + series.index + '_Point_' + pointIndex);\n    var selectionModule = this.control.accumulationSelectionModule;\n    var isSelectedElement = selectionModule && selectionModule.selectedDataIndexes.length > 0 ? true : false;\n\n    if (element) {\n      if (!isSelectedElement || isSelectedElement && element.getAttribute('class') && element.getAttribute('class').indexOf('_ej2_chart_selection_series_') === -1) {\n        element.setAttribute('opacity', (highlight ? series.opacity / 2 : series.opacity).toString());\n      } else {\n        element.setAttribute('opacity', series.opacity.toString());\n      }\n    }\n  };\n\n  BaseTooltip.prototype.highlightPoints = function () {\n    for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      if (item.series.isRectSeries && item.series.category === 'Series') {\n        this.highlightPoint(item.series, item.point.index, true);\n      }\n    }\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  BaseTooltip.prototype.createTooltip = function (chart, isFirst, location, clipLocation, point, shapes, offset, bounds, extraPoints, templatePoint, customTemplate) {\n    if (extraPoints === void 0) {\n      extraPoints = null;\n    }\n\n    if (templatePoint === void 0) {\n      templatePoint = null;\n    }\n\n    var series = this.currentPoints[0].series;\n    var module = chart.tooltipModule || chart.accumulationTooltipModule;\n\n    if (!module) {\n      // For the tooltip enable is false.\n      return;\n    }\n\n    var isNegative = series.isRectSeries && series.type !== 'Waterfall' && point && point.y < 0;\n    var inverted = this.chart.requireInvertedAxis && series.isRectSeries;\n    var position = null;\n\n    if (this.text.length <= 1) {\n      var contentSize = void 0;\n      var headerSize = void 0;\n      var tooltipTemplate = !customTemplate ? chart.tooltip.template : customTemplate;\n\n      if (tooltipTemplate && chart.getModuleName() === 'chart' && tooltipTemplate[0] !== '#' && typeof tooltipTemplate === 'string') {\n        var templateDiv = document.createElement('div');\n        templateDiv.id = 'testing_template';\n        templateDiv.className = 'ejSVGTooltip';\n        templateDiv.setAttribute('style', 'pointer-events:none; position:absolute;z-index: 1');\n        document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(templateDiv);\n        var template = tooltipTemplate.replaceAll('${x}', point.x).replaceAll('${y}', point.y);\n        templateDiv.innerHTML = template;\n        contentSize = new Size(templateDiv.firstElementChild.offsetWidth, templateDiv.firstElementChild.offsetHeight);\n        headerSize = new Size(0, 0);\n        templateDiv.remove();\n      } else {\n        contentSize = measureText(this.text[0], chart.tooltip.textStyle);\n        headerSize = !(this.header === '' || this.header === '<b></b>') ? measureText(this.header, this.textStyle) : new Size(0, 0);\n      } // marker size + arrowpadding + 2 * padding + markerpadding\n\n\n      var markerSize = 10 + 12 + 2 * 10 + 5;\n      contentSize.width = Math.max(contentSize.width, headerSize.width) + (shapes.length > 0 ? markerSize : 0);\n      var heightPadding = 12 + 2 * 10 + (headerSize.height > 0 ? 2 * 10 : 0);\n      contentSize.height = contentSize.height + headerSize.height + heightPadding;\n      position = this.getCurrentPosition(isNegative, inverted);\n      position = this.getPositionBySize(contentSize, new Rect(0, 0, bounds.width, bounds.height), location, position);\n      isNegative = position === 'Left' || position === 'Bottom';\n      inverted = position === 'Left' || position === 'Right';\n    } // else if (tooltipPosition !== 'None' && this.text.length <= 1) {\n    //     position = tooltipPosition as TooltipPlacement;\n    //     isNegative = (position === 'Left') || (position === 'Bottom');\n    //     inverted = (position === 'Left') || (position === 'Right');\n    // }\n\n\n    if (isFirst) {\n      this.svgTooltip = new SVGTooltip({\n        opacity: chart.tooltip.opacity,\n        header: this.headerText,\n        content: this.text,\n        fill: chart.tooltip.fill,\n        border: chart.tooltip.border,\n        enableAnimation: chart.tooltip.enableAnimation,\n        location: location,\n        shared: chart.tooltip.shared,\n        shapes: shapes,\n        clipBounds: this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation,\n        areaBounds: bounds,\n        palette: this.findPalette(),\n        template: customTemplate || chart.tooltip.template,\n        data: templatePoint,\n        theme: chart.theme,\n        offset: offset,\n        textStyle: chart.tooltip.textStyle,\n        isNegative: isNegative,\n        inverted: inverted,\n        arrowPadding: this.text.length > 1 || this.chart.stockChart ? 0 : 12,\n        availableSize: chart.availableSize,\n        duration: this.chart.tooltip.duration,\n        isCanvas: this.chart.enableCanvas,\n        isTextWrap: chart.tooltip.enableTextWrap && chart.getModuleName() === 'chart',\n        blazorTemplate: {\n          name: 'Template',\n          parent: this.chart.tooltip\n        },\n        controlInstance: this.chart,\n        tooltipPlacement: position,\n        tooltipRender: function () {\n          module.removeHighlight();\n          module.highlightPoints();\n          module.updatePreviousPoint(extraPoints);\n        },\n        animationComplete: function (args) {\n          if (args.tooltip.fadeOuted) {\n            module.fadeOut(module.previousPoints);\n          }\n        }\n      }, '#' + this.element.id + '_tooltip');\n    } else {\n      if (this.svgTooltip) {\n        this.svgTooltip.location = location;\n        this.svgTooltip.content = this.text;\n        this.svgTooltip.header = this.headerText;\n        this.svgTooltip.offset = offset;\n        this.svgTooltip.palette = this.findPalette();\n        this.svgTooltip.shapes = shapes;\n        this.svgTooltip.data = templatePoint;\n        this.svgTooltip.template = chart.tooltip.template;\n        this.svgTooltip.textStyle = chart.tooltip.textStyle;\n        this.svgTooltip.isNegative = isNegative;\n        this.svgTooltip.inverted = inverted;\n        this.svgTooltip.clipBounds = this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation;\n        this.svgTooltip.arrowPadding = this.text.length > 1 || this.chart.stockChart ? 0 : 12;\n        this.svgTooltip.tooltipPlacement = position;\n        this.svgTooltip.dataBind();\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (this.chart.isReact) {\n      this.chart.renderReactTemplates();\n    }\n  };\n\n  BaseTooltip.prototype.getPositionBySize = function (textSize, bounds, arrowLocation, position) {\n    var isTop = this.isTooltipFitPosition('Top', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var isBottom = this.isTooltipFitPosition('Bottom', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var isRight = this.isTooltipFitPosition('Right', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var isLeft = this.isTooltipFitPosition('Left', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var tooltipPos;\n\n    if (isTop || isBottom || isRight || isLeft) {\n      if (position === 'Top') {\n        tooltipPos = isTop ? 'Top' : isBottom ? 'Bottom' : isRight ? 'Right' : 'Left';\n      } else if (position === 'Bottom') {\n        tooltipPos = isBottom ? 'Bottom' : isTop ? 'Top' : isRight ? 'Right' : 'Left';\n      } else if (position === 'Right') {\n        tooltipPos = isRight ? 'Right' : isLeft ? 'Left' : isTop ? 'Top' : 'Bottom';\n      } else {\n        tooltipPos = isLeft ? 'Left' : isRight ? 'Right' : isTop ? 'Top' : 'Bottom';\n      }\n    } else {\n      var size = [arrowLocation.x - bounds.x, bounds.x + bounds.width - arrowLocation.x, arrowLocation.y - bounds.y, bounds.y + bounds.height - arrowLocation.y];\n      var index = size.indexOf(Math.max.apply(this, size));\n      position = index === 0 ? 'Left' : index === 1 ? 'Right' : index === 2 ? 'Top' : 'Bottom';\n      return position;\n    }\n\n    return tooltipPos;\n  };\n\n  BaseTooltip.prototype.isTooltipFitPosition = function (position, bounds, location, size) {\n    var start = new ChartLocation(0, 0);\n    var end = new ChartLocation(0, 0);\n\n    switch (position) {\n      case 'Top':\n        start.x = location.x - size.width / 2;\n        start.y = location.y - size.height;\n        end.x = location.x + size.width / 2;\n        end.y = location.y;\n        break;\n\n      case 'Bottom':\n        start.x = location.x - size.width / 2;\n        start.y = location.y;\n        end.x = location.x + size.width / 2;\n        end.y = location.y + size.height;\n        break;\n\n      case 'Right':\n        start.x = location.x;\n        start.y = location.y - size.height / 2;\n        end.x = location.x + size.width;\n        end.y = location.y + size.height / 2;\n        break;\n\n      case 'Left':\n        start.x = location.x - size.width;\n        start.y = location.y - size.height / 2;\n        end.x = location.x;\n        end.y = location.y + size.height / 2;\n        break;\n    }\n\n    return withInBounds(start.x, start.y, bounds) && withInBounds(end.x, end.y, bounds);\n  };\n\n  BaseTooltip.prototype.getCurrentPosition = function (isNegative, inverted) {\n    var position;\n\n    if (inverted) {\n      position = isNegative ? 'Left' : 'Right';\n    } else {\n      position = isNegative ? 'Bottom' : 'Top';\n    }\n\n    return position;\n  };\n\n  BaseTooltip.prototype.findPalette = function () {\n    var colors = [];\n\n    for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n      var data = _a[_i];\n      colors.push(this.findColor(data, data.series));\n    }\n\n    return colors;\n  };\n\n  BaseTooltip.prototype.findColor = function (data, series) {\n    if (series.isRectSeries && (series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose')) {\n      return data.point.color;\n    } else {\n      return (data.point.color && data.point.color !== '#ffffff' ? data.point.color : data.point.interior) || series.marker.fill || series.interior;\n    }\n  };\n\n  BaseTooltip.prototype.updatePreviousPoint = function (extraPoints) {\n    if (extraPoints) {\n      this.currentPoints = this.currentPoints.concat(extraPoints);\n    }\n\n    this.previousPoints = extend([], this.currentPoints, null, true);\n  };\n\n  BaseTooltip.prototype.fadeOut = function (data) {\n    var svgElement = this.chart.enableCanvas ? this.getElement(this.element.id + '_tooltip_group') : this.getElement(this.element.id + '_tooltip_svg');\n    var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0;\n\n    if (!isTooltip) {\n      this.valueX = null;\n      this.valueY = null;\n      this.currentPoints = [];\n      this.removeHighlight();\n      this.removeHighlightedMarker(data);\n      this.svgTooltip = null;\n      this.control.trigger('animationComplete', {});\n    }\n  };\n  /*\n  * @hidden\n  */\n\n\n  BaseTooltip.prototype.removeHighlightedMarker = function (data) {\n    if (this.chart.markerRender) {\n      for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n        var item = data_1[_i];\n        removeElement(this.element.id + '_Series_' + item.series.index + '_Point_' + item.point.index + '_Trackball');\n      }\n\n      this.chart.markerRender.removeHighlightedMarker();\n    }\n\n    this.previousPoints = [];\n  }; // public triggerEvent(point: PointData | AccPointData, isFirst: boolean, textCollection: string, firstText: boolean = true): boolean {\n  //     let argsData: ITooltipRenderEventArgs = {\n  //         cancel: false, name: tooltipRender, text: textCollection,\n  //         point: point.point, series: point.series, textStyle: this.textStyle\n  //     };\n  //     this.chart.trigger(tooltipRender, argsData);\n  //     if (!argsData.cancel) {\n  //         if (point.series.type === 'BoxAndWhisker') {\n  //             this.removeText();\n  //             isFirst = true;\n  //         }\n  //         this.formattedText = this.formattedText.concat(argsData.text);\n  //         this.text = this.formattedText;\n  //     }\n  //     return !argsData.cancel;\n  // }\n\n\n  BaseTooltip.prototype.removeText = function () {\n    this.textElements = [];\n    var element = this.getElement(this.element.id + '_tooltip_group');\n\n    if (element && element.childNodes.length > 0) {\n      while (element.lastChild && element.childNodes.length !== 1) {\n        element.removeChild(element.lastChild);\n      }\n    }\n  };\n\n  BaseTooltip.prototype.stopAnimation = function () {\n    stopTimer(this.toolTipInterval);\n  };\n  /**\n   * Removes the tooltip on mouse leave.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseTooltip.prototype.removeTooltip = function (duration) {\n    var _this = this;\n\n    var tooltipElement = this.getElement(this.element.id + '_tooltip');\n    var tooltipTemplate = tooltipElement ? this.getElement(tooltipElement.id + 'parent_template') : null;\n    var isTemplateRendered = tooltipTemplate && tooltipTemplate.innerHTML !== '<div></div>';\n    this.stopAnimation(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.chart.isReact && isTemplateRendered) {\n      this.chart.clearTemplate([tooltipTemplate.id], [0]);\n    }\n\n    if (tooltipElement && this.previousPoints.length > 0) {\n      this.toolTipInterval = +setTimeout(function () {\n        if (_this.svgTooltip) {\n          _this.svgTooltip.fadeOut();\n        }\n      }, duration);\n    }\n  };\n\n  return BaseTooltip;\n}(ChartData);\n\nexport { BaseTooltip };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-charts/src/common/user-interaction/tooltip.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","ChartLocation","withInBounds","Rect","Size","measureText","stopTimer","removeElement","ChartData","Tooltip","SVGTooltip","BaseTooltip","_super","chart","_this","call","element","textStyle","tooltip","control","getElement","id","document","getElementById","getTooltipElement","isTooltip","inverted","requireInvertedAxis","header","shared","formattedText","tooltipDiv","isStockChart","indexOf","createElement","className","setAttribute","pushData","data","isFirst","isChart","series","enableTooltip","currentPoints","push","stopAnimation","stockChart","appendChild","removeHighlight","item","i","len","previousPoints","length","isRectSeries","visible","highlightPoint","point","index","marker","type","shift","pointIndex","highlight","selectionModule","accumulationSelectionModule","isSelectedElement","selectedDataIndexes","getAttribute","opacity","toString","highlightPoints","_i","_a","category","createTooltip","location","clipLocation","shapes","offset","bounds","extraPoints","templatePoint","customTemplate","module","tooltipModule","accumulationTooltipModule","isNegative","y","position","text","contentSize","headerSize","tooltipTemplate","template","getModuleName","templateDiv","replaceAll","x","innerHTML","firstElementChild","offsetWidth","offsetHeight","remove","markerSize","width","Math","max","heightPadding","height","getCurrentPosition","getPositionBySize","svgTooltip","headerText","content","fill","border","enableAnimation","clipBounds","chartAreaType","areaBounds","palette","findPalette","theme","arrowPadding","availableSize","duration","isCanvas","enableCanvas","isTextWrap","enableTextWrap","blazorTemplate","name","parent","controlInstance","tooltipPlacement","tooltipRender","updatePreviousPoint","animationComplete","args","fadeOuted","fadeOut","dataBind","isReact","renderReactTemplates","textSize","arrowLocation","isTop","isTooltipFitPosition","isBottom","isRight","isLeft","tooltipPos","size","apply","start","end","colors","findColor","color","interior","concat","svgElement","parseInt","valueX","valueY","removeHighlightedMarker","trigger","markerRender","data_1","removeText","textElements","childNodes","lastChild","removeChild","toolTipInterval","removeTooltip","tooltipElement","isTemplateRendered","clearTemplate","setTimeout"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { extend } from '@syncfusion/ej2-base';\nimport { ChartLocation, withInBounds } from '../../common/utils/helper';\nimport { Rect, Size, measureText } from '@syncfusion/ej2-svg-base';\nimport { stopTimer, removeElement } from '../../common/utils/helper';\nimport { ChartData } from '../../chart/utils/get-data';\nimport { Tooltip as SVGTooltip } from '@syncfusion/ej2-svg-base';\n/**\n * Tooltip Module used to render the tooltip for series.\n */\nvar BaseTooltip = /** @class */ (function (_super) {\n    __extends(BaseTooltip, _super);\n    /**\n     * Constructor for tooltip module.\n     *\n     * @private\n     */\n    function BaseTooltip(chart) {\n        var _this = _super.call(this, chart) || this;\n        _this.element = _this.chart.element;\n        _this.textStyle = chart.tooltip.textStyle;\n        _this.control = chart;\n        return _this;\n    }\n    BaseTooltip.prototype.getElement = function (id) {\n        return document.getElementById(id);\n    };\n    /**\n     * Renders the tooltip.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseTooltip.prototype.getTooltipElement = function (isTooltip) {\n        this.inverted = this.chart.requireInvertedAxis;\n        this.header = (this.control.tooltip.header === null) ?\n            ((this.control.tooltip.shared) ? '<b>${point.x}</b>' : '<b>${series.name}</b>')\n            : (this.control.tooltip.header);\n        this.formattedText = [];\n        var tooltipDiv = document.getElementById(this.chart.element.id + '_tooltip');\n        var isStockChart = this.chart.element.id.indexOf('stockChart') > -1;\n        if (!isTooltip && !tooltipDiv || isStockChart) {\n            return this.createElement();\n        }\n        return null;\n    };\n    BaseTooltip.prototype.createElement = function () {\n        var tooltipDiv = document.createElement('div');\n        tooltipDiv.id = this.element.id + '_tooltip';\n        tooltipDiv.className = 'ejSVGTooltip';\n        tooltipDiv.setAttribute('style', 'pointer-events:none; position:absolute;z-index: 1');\n        return tooltipDiv;\n    };\n    BaseTooltip.prototype.pushData = function (data, isFirst, tooltipDiv, isChart) {\n        if (data.series.enableTooltip) {\n            if (isChart) {\n                this.currentPoints.push(data);\n            }\n            else {\n                this.currentPoints.push(data);\n            }\n            this.stopAnimation();\n            if (tooltipDiv && !document.getElementById(tooltipDiv.id)) {\n                if (!this.chart.stockChart) {\n                    document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n                }\n                else {\n                    document.getElementById(this.chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseTooltip.prototype.removeHighlight = function () {\n        var item;\n        var series;\n        for (var i = 0, len = this.previousPoints.length; i < len; i++) {\n            item = this.previousPoints[i];\n            if (item.series.isRectSeries) {\n                if (item.series.visible) {\n                    this.highlightPoint(item.series, item.point.index, false);\n                }\n                continue;\n            }\n            series = item.series;\n            if (!series.marker.visible && item.series.type !== 'Scatter' && item.series.type !== 'Bubble') {\n                this.previousPoints.shift();\n                len -= 1;\n            }\n        }\n    };\n    BaseTooltip.prototype.highlightPoint = function (series, pointIndex, highlight) {\n        var element = this.getElement(this.element.id + '_Series_' + series.index + '_Point_' + pointIndex);\n        var selectionModule = this.control.accumulationSelectionModule;\n        var isSelectedElement = selectionModule && selectionModule.selectedDataIndexes.length > 0 ? true : false;\n        if (element) {\n            if ((!isSelectedElement || isSelectedElement && element.getAttribute('class')\n                && element.getAttribute('class').indexOf('_ej2_chart_selection_series_') === -1)) {\n                element.setAttribute('opacity', (highlight ? series.opacity / 2 : series.opacity).toString());\n            }\n            else {\n                element.setAttribute('opacity', series.opacity.toString());\n            }\n        }\n    };\n    BaseTooltip.prototype.highlightPoints = function () {\n        for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.series.isRectSeries && item.series.category === 'Series') {\n                this.highlightPoint(item.series, item.point.index, true);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BaseTooltip.prototype.createTooltip = function (chart, isFirst, location, clipLocation, point, shapes, offset, bounds, extraPoints, templatePoint, customTemplate) {\n        if (extraPoints === void 0) { extraPoints = null; }\n        if (templatePoint === void 0) { templatePoint = null; }\n        var series = this.currentPoints[0].series;\n        var module = chart.tooltipModule || chart.accumulationTooltipModule;\n        if (!module) { // For the tooltip enable is false.\n            return;\n        }\n        var isNegative = (series.isRectSeries && series.type !== 'Waterfall' && point && point.y < 0);\n        var inverted = this.chart.requireInvertedAxis && series.isRectSeries;\n        var position = null;\n        if (this.text.length <= 1) {\n            var contentSize = void 0;\n            var headerSize = void 0;\n            var tooltipTemplate = !customTemplate ? chart.tooltip.template : customTemplate;\n            if (tooltipTemplate && chart.getModuleName() === 'chart' && tooltipTemplate[0] !== '#' && typeof tooltipTemplate === 'string') {\n                var templateDiv = document.createElement('div');\n                templateDiv.id = 'testing_template';\n                templateDiv.className = 'ejSVGTooltip';\n                templateDiv.setAttribute('style', 'pointer-events:none; position:absolute;z-index: 1');\n                document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(templateDiv);\n                var template = tooltipTemplate.replaceAll('${x}', point.x).replaceAll('${y}', point.y);\n                templateDiv.innerHTML = template;\n                contentSize = new Size(templateDiv.firstElementChild.offsetWidth, templateDiv.firstElementChild.offsetHeight);\n                headerSize = new Size(0, 0);\n                templateDiv.remove();\n            }\n            else {\n                contentSize = measureText(this.text[0], chart.tooltip.textStyle);\n                headerSize = (!(this.header === '' || this.header === '<b></b>')) ? measureText(this.header, this.textStyle) :\n                    new Size(0, 0);\n            }\n            // marker size + arrowpadding + 2 * padding + markerpadding\n            var markerSize = 10 + 12 + (2 * 10) + 5;\n            contentSize.width = Math.max(contentSize.width, headerSize.width) + ((shapes.length > 0) ? markerSize : 0);\n            var heightPadding = 12 + (2 * 10) + (headerSize.height > 0 ? (2 * 10) : 0);\n            contentSize.height = contentSize.height + headerSize.height + heightPadding;\n            position = this.getCurrentPosition(isNegative, inverted);\n            position = this.getPositionBySize(contentSize, new Rect(0, 0, bounds.width, bounds.height), location, position);\n            isNegative = (position === 'Left') || (position === 'Bottom');\n            inverted = (position === 'Left') || (position === 'Right');\n        }\n        // else if (tooltipPosition !== 'None' && this.text.length <= 1) {\n        //     position = tooltipPosition as TooltipPlacement;\n        //     isNegative = (position === 'Left') || (position === 'Bottom');\n        //     inverted = (position === 'Left') || (position === 'Right');\n        // }\n        if (isFirst) {\n            this.svgTooltip = new SVGTooltip({\n                opacity: chart.tooltip.opacity,\n                header: this.headerText,\n                content: this.text,\n                fill: chart.tooltip.fill,\n                border: chart.tooltip.border,\n                enableAnimation: chart.tooltip.enableAnimation,\n                location: location,\n                shared: chart.tooltip.shared,\n                shapes: shapes,\n                clipBounds: this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation,\n                areaBounds: bounds,\n                palette: this.findPalette(),\n                template: customTemplate || chart.tooltip.template,\n                data: templatePoint,\n                theme: chart.theme,\n                offset: offset,\n                textStyle: chart.tooltip.textStyle,\n                isNegative: isNegative,\n                inverted: inverted,\n                arrowPadding: this.text.length > 1 || this.chart.stockChart ? 0 : 12,\n                availableSize: chart.availableSize,\n                duration: this.chart.tooltip.duration,\n                isCanvas: this.chart.enableCanvas,\n                isTextWrap: chart.tooltip.enableTextWrap && chart.getModuleName() === 'chart',\n                blazorTemplate: { name: 'Template', parent: this.chart.tooltip },\n                controlInstance: this.chart,\n                tooltipPlacement: position,\n                tooltipRender: function () {\n                    module.removeHighlight();\n                    module.highlightPoints();\n                    module.updatePreviousPoint(extraPoints);\n                },\n                animationComplete: function (args) {\n                    if (args.tooltip.fadeOuted) {\n                        module.fadeOut(module.previousPoints);\n                    }\n                }\n            }, '#' + this.element.id + '_tooltip');\n        }\n        else {\n            if (this.svgTooltip) {\n                this.svgTooltip.location = location;\n                this.svgTooltip.content = this.text;\n                this.svgTooltip.header = this.headerText;\n                this.svgTooltip.offset = offset;\n                this.svgTooltip.palette = this.findPalette();\n                this.svgTooltip.shapes = shapes;\n                this.svgTooltip.data = templatePoint;\n                this.svgTooltip.template = chart.tooltip.template;\n                this.svgTooltip.textStyle = chart.tooltip.textStyle;\n                this.svgTooltip.isNegative = isNegative;\n                this.svgTooltip.inverted = inverted;\n                this.svgTooltip.clipBounds = this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation;\n                this.svgTooltip.arrowPadding = this.text.length > 1 || this.chart.stockChart ? 0 : 12;\n                this.svgTooltip.tooltipPlacement = position;\n                this.svgTooltip.dataBind();\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.chart.isReact) {\n            this.chart.renderReactTemplates();\n        }\n    };\n    BaseTooltip.prototype.getPositionBySize = function (textSize, bounds, arrowLocation, position) {\n        var isTop = this.isTooltipFitPosition('Top', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var isBottom = this.isTooltipFitPosition('Bottom', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var isRight = this.isTooltipFitPosition('Right', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var isLeft = this.isTooltipFitPosition('Left', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var tooltipPos;\n        if (isTop || isBottom || isRight || isLeft) {\n            if (position === 'Top') {\n                tooltipPos = isTop ? 'Top' : (isBottom ? 'Bottom' : (isRight ? 'Right' : 'Left'));\n            }\n            else if (position === 'Bottom') {\n                tooltipPos = isBottom ? 'Bottom' : (isTop ? 'Top' : (isRight ? 'Right' : 'Left'));\n            }\n            else if (position === 'Right') {\n                tooltipPos = isRight ? 'Right' : (isLeft ? 'Left' : (isTop ? 'Top' : 'Bottom'));\n            }\n            else {\n                tooltipPos = isLeft ? 'Left' : (isRight ? 'Right' : (isTop ? 'Top' : 'Bottom'));\n            }\n        }\n        else {\n            var size = [(arrowLocation.x - bounds.x), ((bounds.x + bounds.width) - arrowLocation.x),\n                (arrowLocation.y - bounds.y), ((bounds.y + bounds.height) - arrowLocation.y)];\n            var index = size.indexOf(Math.max.apply(this, size));\n            position = (index === 0) ? 'Left' : (index === 1) ? 'Right' : (index === 2) ? 'Top' : 'Bottom';\n            return position;\n        }\n        return tooltipPos;\n    };\n    BaseTooltip.prototype.isTooltipFitPosition = function (position, bounds, location, size) {\n        var start = new ChartLocation(0, 0);\n        var end = new ChartLocation(0, 0);\n        switch (position) {\n            case 'Top':\n                start.x = location.x - (size.width / 2);\n                start.y = location.y - size.height;\n                end.x = location.x + (size.width / 2);\n                end.y = location.y;\n                break;\n            case 'Bottom':\n                start.x = location.x - (size.width / 2);\n                start.y = location.y;\n                end.x = location.x + (size.width / 2);\n                end.y = location.y + size.height;\n                break;\n            case 'Right':\n                start.x = location.x;\n                start.y = location.y - (size.height / 2);\n                end.x = location.x + size.width;\n                end.y = location.y + (size.height / 2);\n                break;\n            case 'Left':\n                start.x = location.x - size.width;\n                start.y = location.y - (size.height / 2);\n                end.x = location.x;\n                end.y = location.y + (size.height / 2);\n                break;\n        }\n        return (withInBounds(start.x, start.y, bounds) && withInBounds(end.x, end.y, bounds));\n    };\n    BaseTooltip.prototype.getCurrentPosition = function (isNegative, inverted) {\n        var position;\n        if (inverted) {\n            position = isNegative ? 'Left' : 'Right';\n        }\n        else {\n            position = isNegative ? 'Bottom' : 'Top';\n        }\n        return position;\n    };\n    BaseTooltip.prototype.findPalette = function () {\n        var colors = [];\n        for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n            var data = _a[_i];\n            colors.push(this.findColor(data, data.series));\n        }\n        return colors;\n    };\n    BaseTooltip.prototype.findColor = function (data, series) {\n        if (series.isRectSeries && (series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose')) {\n            return data.point.color;\n        }\n        else {\n            return (data.point.color && data.point.color !== '#ffffff' ? data.point.color\n                : data.point.interior) ||\n                series.marker.fill || series.interior;\n        }\n    };\n    BaseTooltip.prototype.updatePreviousPoint = function (extraPoints) {\n        if (extraPoints) {\n            this.currentPoints = this.currentPoints.concat(extraPoints);\n        }\n        this.previousPoints = extend([], this.currentPoints, null, true);\n    };\n    BaseTooltip.prototype.fadeOut = function (data) {\n        var svgElement = this.chart.enableCanvas ? this.getElement(this.element.id + '_tooltip_group') :\n            this.getElement(this.element.id + '_tooltip_svg');\n        var isTooltip = (svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0);\n        if (!isTooltip) {\n            this.valueX = null;\n            this.valueY = null;\n            this.currentPoints = [];\n            this.removeHighlight();\n            this.removeHighlightedMarker(data);\n            this.svgTooltip = null;\n            this.control.trigger('animationComplete', {});\n        }\n    };\n    /*\n    * @hidden\n    */\n    BaseTooltip.prototype.removeHighlightedMarker = function (data) {\n        if (this.chart.markerRender) {\n            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n                var item = data_1[_i];\n                removeElement(this.element.id + '_Series_' + item.series.index +\n                    '_Point_' + item.point.index + '_Trackball');\n            }\n            this.chart.markerRender.removeHighlightedMarker();\n        }\n        this.previousPoints = [];\n    };\n    // public triggerEvent(point: PointData | AccPointData, isFirst: boolean, textCollection: string, firstText: boolean = true): boolean {\n    //     let argsData: ITooltipRenderEventArgs = {\n    //         cancel: false, name: tooltipRender, text: textCollection,\n    //         point: point.point, series: point.series, textStyle: this.textStyle\n    //     };\n    //     this.chart.trigger(tooltipRender, argsData);\n    //     if (!argsData.cancel) {\n    //         if (point.series.type === 'BoxAndWhisker') {\n    //             this.removeText();\n    //             isFirst = true;\n    //         }\n    //         this.formattedText = this.formattedText.concat(argsData.text);\n    //         this.text = this.formattedText;\n    //     }\n    //     return !argsData.cancel;\n    // }\n    BaseTooltip.prototype.removeText = function () {\n        this.textElements = [];\n        var element = this.getElement(this.element.id + '_tooltip_group');\n        if (element && element.childNodes.length > 0) {\n            while (element.lastChild && element.childNodes.length !== 1) {\n                element.removeChild(element.lastChild);\n            }\n        }\n    };\n    BaseTooltip.prototype.stopAnimation = function () {\n        stopTimer(this.toolTipInterval);\n    };\n    /**\n     * Removes the tooltip on mouse leave.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseTooltip.prototype.removeTooltip = function (duration) {\n        var _this = this;\n        var tooltipElement = this.getElement(this.element.id + '_tooltip');\n        var tooltipTemplate = tooltipElement ? this.getElement(tooltipElement.id + 'parent_template') : null;\n        var isTemplateRendered = tooltipTemplate && tooltipTemplate.innerHTML !== '<div></div>';\n        this.stopAnimation();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.chart.isReact && isTemplateRendered) {\n            this.chart.clearTemplate([tooltipTemplate.id], [0]);\n        }\n        if (tooltipElement && this.previousPoints.length > 0) {\n            this.toolTipInterval = +setTimeout(function () {\n                if (_this.svgTooltip) {\n                    _this.svgTooltip.fadeOut();\n                }\n            }, duration);\n        }\n    };\n    return BaseTooltip;\n}(ChartData));\nexport { BaseTooltip };\n"]},"metadata":{},"sourceType":"module"}