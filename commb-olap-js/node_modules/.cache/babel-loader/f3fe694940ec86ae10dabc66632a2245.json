{"ast":null,"code":"import { EventHandler, setStyleAttribute, isBlazor } from '@syncfusion/ej2-base';\nimport { contentReady } from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\n/**\n * `VirtualScroll` module is used to handle scrolling behavior.\n */\n\nvar VirtualScroll = function () {\n  /**\n   * Constructor for PivotView scrolling.\n   * @param {PivotView} parent - Instance of pivot table.\n   * @hidden\n   */\n  function VirtualScroll(parent) {\n    this.previousValues = {\n      top: 0,\n      left: 0\n    };\n    this.frozenPreviousValues = {\n      top: 0,\n      left: 0\n    };\n    this.eventType = '';\n    this.parent = parent;\n    this.engineModule = this.parent.dataType === 'pivot' ? this.parent.engineModule : this.parent.olapEngineModule;\n    this.addInternalEvents();\n  }\n  /**\n   * It returns the Module name.\n   * @returns {string} - string.\n   * @hidden\n   */\n\n\n  VirtualScroll.prototype.getModuleName = function () {\n    return 'virtualscroll';\n  };\n\n  VirtualScroll.prototype.addInternalEvents = function () {\n    this.parent.on(contentReady, this.wireEvents, this);\n  };\n\n  VirtualScroll.prototype.wireEvents = function () {\n    if (this.parent.displayOption.view !== 'Chart') {\n      var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n      var fCont = this.parent.element.querySelector('.' + cls.FROZENCONTENT_DIV);\n      var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n      var mScrollBar = mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n      EventHandler.clearEvents(mCont);\n      EventHandler.clearEvents(fCont);\n\n      if (this.engineModule) {\n        var ele = this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n        EventHandler.add(ele, 'scroll touchmove pointermove', this.onHorizondalScroll(mHdr, mCont, fCont), this);\n        EventHandler.add(mCont.parentElement, 'scroll wheel touchmove pointermove keyup keydown', this.onVerticalScroll(fCont, mCont), this);\n        EventHandler.add(mCont.parentElement.parentElement, 'mouseup touchend', this.common(mHdr, mCont, fCont), this);\n        EventHandler.add(mScrollBar, 'scroll', this.onCustomScrollbarScroll(mCont, mHdr), this);\n        EventHandler.add(mCont, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mHdr), this);\n        EventHandler.add(mHdr, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mCont), this); // EventHandler.add(fCont.parentElement, 'wheel', this.onWheelScroll(mCont, fCont), this);\n        // EventHandler.add(fCont.parentElement, 'touchstart pointerdown', this.setPageXY(), this);\n        // EventHandler.add(fCont.parentElement, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n\n        EventHandler.add(mHdr, 'touchstart pointerdown', this.setPageXY(), this);\n        EventHandler.add(mHdr, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n        EventHandler.add(mCont, 'touchstart pointerdown', this.setPageXY(), this);\n        EventHandler.add(mCont, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n      }\n\n      this.parent.grid.on('check-scroll-reset', function (args) {\n        args.cancel = true;\n      });\n      this.parent.grid.on('prevent-frozen-scroll-refresh', function (args) {\n        args.cancel = true;\n      });\n      this.parent.grid.isPreventScrollEvent = true;\n    }\n  };\n\n  VirtualScroll.prototype.onWheelScroll = function (mCont, fCont) {\n    var _this = this;\n\n    var element = mCont;\n    return function (e) {\n      var top = element.parentElement.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n\n      if (_this.frozenPreviousValues.top === top) {\n        return;\n      }\n\n      e.preventDefault();\n      _this.frozenPreviousValues.top = top;\n      _this.eventType = e.type;\n    };\n  };\n\n  VirtualScroll.prototype.getPointXY = function (e) {\n    var pageXY = {\n      x: 0,\n      y: 0\n    };\n\n    if (!(e.touches && e.touches.length)) {\n      pageXY.x = e.pageX;\n      pageXY.y = e.pageY;\n    } else {\n      pageXY.x = e.touches[0].pageX;\n      pageXY.y = e.touches[0].pageY;\n    }\n\n    return pageXY;\n  };\n\n  VirtualScroll.prototype.onCustomScrollbarScroll = function (mCont, mHdr) {\n    var _this = this;\n\n    var content = mCont;\n    var header = mHdr;\n    return function (e) {\n      var eContent = _this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).parentElement;\n\n      if (eContent.querySelector('tbody') === null) {\n        return;\n      }\n\n      var target = e.target;\n      var left = target.scrollLeft;\n\n      if (_this.previousValues.left === left) {\n        return;\n      }\n\n      content.scrollLeft = left;\n      header.scrollLeft = left;\n      _this.previousValues.left = left;\n\n      if (_this.parent.isDestroyed) {\n        return;\n      }\n    };\n  };\n\n  VirtualScroll.prototype.onTouchScroll = function (mHdr, mCont, fCont) {\n    var _this = this;\n\n    var element = mCont;\n    return function (e) {\n      if (e.pointerType === 'mouse') {\n        return;\n      }\n\n      var pageXY = _this.getPointXY(e);\n\n      var top = element.parentElement.scrollTop + (_this.pageXY.y - pageXY.y);\n      var ele = _this.parent.isAdaptive ? mCont : element.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n      var left = ele.scrollLeft + (_this.pageXY.x - pageXY.x);\n\n      if (_this.frozenPreviousValues.left === left || left < 0) {\n        return;\n      }\n\n      mHdr.scrollLeft = left;\n      ele.scrollLeft = left;\n      _this.pageXY.x = pageXY.x;\n      _this.frozenPreviousValues.left = left;\n\n      if (_this.frozenPreviousValues.top === top || top < 0) {\n        return;\n      }\n\n      _this.pageXY.y = pageXY.y;\n      _this.frozenPreviousValues.top = top;\n      _this.eventType = e.type;\n    };\n  };\n\n  VirtualScroll.prototype.update = function (mHdr, mCont, top, left, e) {\n    var _this = this;\n\n    this.parent.isScrolling = true;\n    var engine = this.parent.dataType === 'pivot' ? this.parent.engineModule : this.parent.olapEngineModule;\n\n    if (isBlazor() || this.parent.dataSourceSettings.mode === 'Server') {\n      engine.pageSettings = this.parent.pageSettings;\n    }\n\n    if (this.parent.pageSettings && engine.pageSettings) {\n      if (this.direction === 'vertical') {\n        var rowValues_1 = this.parent.dataType === 'pivot' ? this.parent.dataSourceSettings.valueAxis === 'row' ? this.parent.dataSourceSettings.values.length : 1 : 1;\n        var exactSize_1 = this.parent.pageSettings.rowSize * rowValues_1 * this.parent.gridSettings.rowHeight;\n        var section = Math.ceil(top / exactSize_1);\n\n        if (this.parent.scrollPosObject.vertical === section || engine.pageSettings.rowSize >= engine.rowCount) {\n          // this.parent.hideWaitingPopup();\n          return;\n        }\n\n        this.parent.showWaitingPopup();\n        this.parent.scrollPosObject.vertical = section;\n        engine.pageSettings.rowCurrentPage = section > 1 ? section : 1;\n        var rowStartPos_1 = 0;\n\n        if (this.parent.dataType === 'pivot') {\n          if (isBlazor()) {\n            var pivot_1 = this.parent;\n            var sfBlazor = 'sfBlazor';\n            /* eslint-disable-next-line */\n\n            var dataSourceSettings = window[sfBlazor].copyWithoutCircularReferences([pivot_1.dataSourceSettings], pivot_1.dataSourceSettings);\n            /* eslint-disable-next-line */\n\n            var pageSettings = window[sfBlazor].copyWithoutCircularReferences([engine.pageSettings], engine.pageSettings);\n            /* eslint-disable-next-line */\n\n            pivot_1.interopAdaptor.invokeMethodAsync('PivotInteropMethod', 'generateGridData', {\n              'dataSourceSettings': dataSourceSettings,\n              'pageSettings': pageSettings,\n              'isScrolling': true\n            }).then(\n            /* eslint-disable-next-line */\n            function (data) {\n              pivot_1.updateBlazorData(data, pivot_1);\n              pivot_1.pivotValues = engine.pivotValues;\n              rowStartPos_1 = _this.parent.engineModule.rowStartPos;\n              var exactPage = Math.ceil(rowStartPos_1 / (pivot_1.pageSettings.rowSize * rowValues_1));\n              var pos = exactSize_1 * exactPage - engine.rowFirstLvl * rowValues_1 * pivot_1.gridSettings.rowHeight;\n              pivot_1.scrollPosObject.verticalSection = pos;\n            });\n          } else if (this.parent.dataSourceSettings.mode === 'Server') {\n            this.parent.getEngine('onScroll', null, null, null, null, null, null);\n          } else {\n            this.parent.engineModule.generateGridData(this.parent.dataSourceSettings, this.parent.engineModule.headerCollection);\n            rowStartPos_1 = this.parent.engineModule.rowStartPos;\n          }\n        } else {\n          this.parent.olapEngineModule.scrollPage('scroll');\n          rowStartPos_1 = this.parent.olapEngineModule.pageRowStartPos;\n        }\n\n        if (!(isBlazor() && this.parent.dataType === 'pivot')) {\n          this.parent.pivotValues = engine.pivotValues;\n          var exactPage = Math.ceil(rowStartPos_1 / (this.parent.pageSettings.rowSize * rowValues_1));\n          var pos = exactSize_1 * exactPage - engine.rowFirstLvl * rowValues_1 * this.parent.gridSettings.rowHeight;\n          this.parent.scrollPosObject.verticalSection = pos;\n        }\n      } else {\n        var colValues_1 = this.parent.dataType === 'pivot' ? this.parent.dataSourceSettings.valueAxis === 'column' ? this.parent.dataSourceSettings.values.length : 1 : 1;\n        var exactSize_2 = this.parent.pageSettings.columnSize * colValues_1 * this.parent.gridSettings.columnWidth;\n        var section = Math.ceil(left / exactSize_2);\n\n        if (this.parent.scrollPosObject.horizontal === section) {\n          // this.parent.hideWaitingPopup();\n          return;\n        }\n\n        this.parent.showWaitingPopup();\n        var pivot = this.parent;\n        pivot.scrollPosObject.horizontal = section;\n        engine.pageSettings.columnCurrentPage = section > 1 ? section : 1;\n        var colStartPos_1 = 0;\n\n        if (pivot.dataType === 'pivot') {\n          if (isBlazor()) {\n            var sfBlazor = 'sfBlazor';\n            var pivot_2 = this.parent;\n            /* eslint-disable-next-line */\n\n            var pageSettings = window[sfBlazor].copyWithoutCircularReferences([engine.pageSettings], engine.pageSettings);\n            /* eslint-disable-next-line */\n\n            var dataSourceSettings = window[sfBlazor].copyWithoutCircularReferences([pivot_2.dataSourceSettings], pivot_2.dataSourceSettings);\n            /* eslint-disable-next-line */\n\n            pivot_2.interopAdaptor.invokeMethodAsync('PivotInteropMethod', 'generateGridData', {\n              'dataSourceSettings': dataSourceSettings,\n              'pageSettings': pageSettings,\n              'isScrolling': true\n            }).then(\n            /* eslint-disable-next-line */\n            function (data) {\n              pivot_2.updateBlazorData(data, pivot_2);\n              colStartPos_1 = pivot_2.engineModule.colStartPos;\n              pivot_2.pivotValues = engine.pivotValues;\n              var exactPage = Math.ceil(colStartPos_1 / (pivot_2.pageSettings.columnSize * colValues_1));\n              var pos = exactSize_2 * exactPage - engine.colFirstLvl * colValues_1 * pivot_2.gridSettings.columnWidth;\n              pivot_2.scrollPosObject.horizontalSection = pos;\n            });\n          } else if (this.parent.dataSourceSettings.mode === 'Server') {\n            this.parent.getEngine('onScroll', null, null, null, null, null, null);\n          } else {\n            pivot.engineModule.generateGridData(pivot.dataSourceSettings, pivot.engineModule.headerCollection);\n            colStartPos_1 = pivot.engineModule.colStartPos;\n          }\n        } else {\n          pivot.olapEngineModule.scrollPage('scroll');\n          colStartPos_1 = pivot.olapEngineModule.pageColStartPos;\n        }\n\n        if (!(isBlazor() && pivot.dataType === 'pivot')) {\n          pivot.pivotValues = engine.pivotValues;\n          var exactPage = Math.ceil(colStartPos_1 / (pivot.pageSettings.columnSize * colValues_1));\n          var pos = exactSize_2 * exactPage - engine.colFirstLvl * colValues_1 * pivot.gridSettings.columnWidth;\n          pivot.scrollPosObject.horizontalSection = pos;\n        }\n      }\n    }\n  };\n\n  VirtualScroll.prototype.setPageXY = function () {\n    var _this = this;\n\n    return function (e) {\n      if (e.pointerType === 'mouse') {\n        return;\n      }\n\n      _this.pageXY = _this.getPointXY(e);\n    };\n  };\n\n  VirtualScroll.prototype.common = function (mHdr, mCont, fCont) {\n    var _this = this;\n\n    return function (e) {\n      var ele = _this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n\n      _this.update(mHdr, mCont, mCont.parentElement.scrollTop * _this.parent.verticalScrollScale, ele.scrollLeft * _this.parent.horizontalScrollScale, e);\n    };\n  };\n\n  VirtualScroll.prototype.onHorizondalScroll = function (mHdr, mCont, fCont) {\n    var _this = this;\n    /* eslint-disable-next-line */\n\n\n    var timeOutObj;\n    return function (e) {\n      var ele = _this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n      var left = ele.scrollLeft * _this.parent.horizontalScrollScale;\n\n      if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove') {\n        clearTimeout(timeOutObj);\n        /* eslint-disable */\n\n        timeOutObj = setTimeout(function () {\n          left = e.type === 'touchmove' ? ele.scrollLeft : left;\n\n          _this.update(mHdr, mCont, mCont.parentElement.scrollTop * _this.parent.verticalScrollScale, left, e);\n        }, 300);\n      }\n\n      if (_this.previousValues.left === left) {\n        return;\n      }\n\n      _this.parent.scrollDirection = _this.direction = 'horizondal';\n      var horiOffset = -(left - _this.parent.scrollPosObject.horizontalSection - ele.scrollLeft);\n      var vertiOffset = mCont.querySelector('.' + cls.TABLE).style.transform.split(',').length > 1 ? mCont.querySelector('.' + cls.TABLE).style.transform.split(',')[1].trim() : \"0px)\";\n\n      if (ele.scrollLeft < _this.parent.scrollerBrowserLimit) {\n        setStyleAttribute(mCont.querySelector('.e-table'), {\n          transform: 'translate(' + horiOffset + 'px,' + vertiOffset\n        });\n        setStyleAttribute(mHdr.querySelector('.e-table'), {\n          transform: 'translate(' + horiOffset + 'px,' + 0 + 'px)'\n        });\n      }\n\n      var excessMove = _this.parent.scrollPosObject.horizontalSection > left ? -(_this.parent.scrollPosObject.horizontalSection - left) : left + mHdr.offsetWidth - (_this.parent.scrollPosObject.horizontalSection + mCont.querySelector('.e-table').offsetWidth);\n\n      var notLastPage = Math.ceil(_this.parent.scrollPosObject.horizontalSection / _this.parent.horizontalScrollScale) < _this.parent.scrollerBrowserLimit;\n\n      if (_this.parent.scrollPosObject.horizontalSection > left ? true : excessMove > 1 && notLastPage) {\n        //  showSpinner(this.parent.element);\n        if (left > mHdr.clientWidth) {\n          if (_this.parent.scrollPosObject.left < 1) {\n            _this.parent.scrollPosObject.left = mHdr.clientWidth;\n          }\n\n          _this.parent.scrollPosObject.left = _this.parent.scrollPosObject.left - 50;\n          excessMove = _this.parent.scrollPosObject.horizontalSection > left ? excessMove - _this.parent.scrollPosObject.left : excessMove + _this.parent.scrollPosObject.left;\n        } else {\n          excessMove = -_this.parent.scrollPosObject.horizontalSection;\n        }\n\n        horiOffset = -(left - (_this.parent.scrollPosObject.horizontalSection + excessMove) - mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV).scrollLeft);\n        var vWidth = _this.parent.gridSettings.columnWidth * _this.engineModule.columnCount;\n\n        if (vWidth > _this.parent.scrollerBrowserLimit) {\n          _this.parent.horizontalScrollScale = vWidth / _this.parent.scrollerBrowserLimit;\n          vWidth = _this.parent.scrollerBrowserLimit;\n        }\n\n        if (horiOffset > vWidth && horiOffset > left) {\n          horiOffset = left;\n          excessMove = 0;\n        }\n\n        setStyleAttribute(mCont.querySelector('.e-table'), {\n          transform: 'translate(' + horiOffset + 'px,' + vertiOffset\n        });\n        setStyleAttribute(mHdr.querySelector('.e-table'), {\n          transform: 'translate(' + horiOffset + 'px,' + 0 + 'px)'\n        });\n        _this.parent.scrollPosObject.horizontalSection = _this.parent.scrollPosObject.horizontalSection + excessMove;\n      }\n\n      var hScrollPos = ele.scrollWidth - (ele.scrollLeft + ele.offsetWidth);\n\n      if (hScrollPos <= 0) {\n        var virtualDiv = mCont.querySelector('.' + cls.VIRTUALTRACK_DIV);\n        virtualDiv.style.display = 'none';\n        var mCntScrollPos = mCont.scrollWidth - (mCont.scrollLeft + mCont.offsetWidth);\n        virtualDiv.style.display = '';\n        var mCntVScrollPos = mCont.scrollWidth - (mCont.scrollLeft + mCont.offsetWidth);\n        _this.parent.scrollPosObject.horizontalSection -= mCntScrollPos > hScrollPos ? mCntScrollPos : -mCntVScrollPos;\n        horiOffset = ele.scrollLeft > _this.parent.scrollerBrowserLimit ? Number(mCont.querySelector('.' + cls.TABLE).style.transform.split(',')[0].split('px')[0].trim()) : -(ele.scrollLeft * _this.parent.horizontalScrollScale - _this.parent.scrollPosObject.horizontalSection - ele.scrollLeft);\n        setStyleAttribute(mCont.querySelector('.e-table'), {\n          transform: 'translate(' + horiOffset + 'px,' + vertiOffset\n        });\n        setStyleAttribute(mHdr.querySelector('.e-table'), {\n          transform: 'translate(' + horiOffset + 'px,' + 0 + 'px)'\n        });\n      }\n\n      _this.previousValues.left = left;\n      _this.frozenPreviousValues.left = left;\n      _this.eventType = '';\n      mHdr.scrollLeft = ele.scrollLeft;\n    };\n  };\n\n  VirtualScroll.prototype.onVerticalScroll = function (fCont, mCont) {\n    var _this = this;\n\n    var timeOutObj;\n    return function (e) {\n      var top = mCont.parentElement.scrollTop * _this.parent.verticalScrollScale;\n\n      if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove' || e.type === 'keyup' || e.type === 'keydown') {\n        var ele_1 = _this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n        clearTimeout(timeOutObj);\n        timeOutObj = setTimeout(function () {\n          _this.update(null, mCont, mCont.parentElement.scrollTop * _this.parent.verticalScrollScale, ele_1.scrollLeft * _this.parent.horizontalScrollScale, e);\n        }, 300);\n      }\n      /* eslint-enable */\n\n\n      if (_this.previousValues.top === top) {\n        return;\n      }\n\n      _this.parent.scrollDirection = _this.direction = 'vertical';\n      var vertiOffset = -(top - _this.parent.scrollPosObject.verticalSection - mCont.parentElement.scrollTop);\n      var horiOffset = mCont.querySelector('.' + cls.TABLE).style.transform.split(',')[0].trim();\n\n      if (vertiOffset > _this.parent.virtualDiv.clientHeight) {\n        vertiOffset = _this.parent.virtualDiv.clientHeight;\n      }\n\n      if (mCont.parentElement.scrollTop < _this.parent.scrollerBrowserLimit) {\n        setStyleAttribute(fCont.querySelector('.e-table'), {\n          transform: 'translate(' + 0 + 'px,' + vertiOffset + 'px)'\n        });\n        setStyleAttribute(mCont.querySelector('.e-table'), {\n          transform: horiOffset + ',' + vertiOffset + 'px)'\n        });\n      }\n\n      var excessMove = _this.parent.scrollPosObject.verticalSection > top ? -(_this.parent.scrollPosObject.verticalSection - top) : top + fCont.parentElement.clientHeight - (_this.parent.scrollPosObject.verticalSection + fCont.querySelector('.e-table').offsetHeight);\n\n      var notLastPage = Math.ceil(_this.parent.scrollPosObject.verticalSection / _this.parent.verticalScrollScale) < _this.parent.scrollerBrowserLimit;\n\n      if (_this.parent.scrollPosObject.verticalSection > top ? true : excessMove > 1 && notLastPage) {\n        //  showSpinner(this.parent.element);\n        if (top > fCont.parentElement.clientHeight) {\n          if (_this.parent.scrollPosObject.top < 1) {\n            _this.parent.scrollPosObject.top = fCont.parentElement.clientHeight;\n          }\n\n          _this.parent.scrollPosObject.top = _this.parent.scrollPosObject.top - 50;\n          excessMove = _this.parent.scrollPosObject.verticalSection > top ? excessMove - _this.parent.scrollPosObject.top : excessMove + _this.parent.scrollPosObject.top;\n        } else {\n          excessMove = -_this.parent.scrollPosObject.verticalSection;\n        }\n\n        var movableTable = _this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).querySelector('.e-table');\n\n        vertiOffset = -(top - (_this.parent.scrollPosObject.verticalSection + excessMove) - mCont.parentElement.scrollTop);\n        var vHeight = _this.parent.gridSettings.rowHeight * _this.engineModule.rowCount + 0.1 - movableTable.clientHeight;\n\n        if (vHeight > _this.parent.scrollerBrowserLimit) {\n          _this.parent.verticalScrollScale = vHeight / _this.parent.scrollerBrowserLimit;\n          vHeight = _this.parent.scrollerBrowserLimit;\n        }\n\n        if (vertiOffset > vHeight && vertiOffset > top) {\n          vertiOffset = top;\n          excessMove = 0;\n        }\n\n        if (vertiOffset > _this.parent.virtualDiv.clientHeight) {\n          vertiOffset = _this.parent.virtualDiv.clientHeight;\n        }\n\n        setStyleAttribute(fCont.querySelector('.e-table'), {\n          transform: 'translate(' + 0 + 'px,' + vertiOffset + 'px)'\n        });\n        setStyleAttribute(mCont.querySelector('.e-table'), {\n          transform: horiOffset + ',' + vertiOffset + 'px)'\n        });\n        _this.parent.scrollPosObject.verticalSection = _this.parent.scrollPosObject.verticalSection + excessMove;\n      }\n\n      _this.previousValues.top = top;\n      _this.frozenPreviousValues.top = top;\n      _this.eventType = '';\n    };\n  };\n  /* eslint-disable-next-line */\n\n  /**\n   * @hidden\n   */\n\n\n  VirtualScroll.prototype.removeInternalEvents = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(contentReady, this.wireEvents);\n  };\n  /**\n   * To destroy the virtualscrolling event listener\n   * @returns {void}\n   * @hidden\n   */\n\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeInternalEvents();\n  };\n\n  return VirtualScroll;\n}();\n\nexport { VirtualScroll };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-pivotview/src/pivotview/actions/virtualscroll.js"],"names":["EventHandler","setStyleAttribute","isBlazor","contentReady","cls","VirtualScroll","parent","previousValues","top","left","frozenPreviousValues","eventType","engineModule","dataType","olapEngineModule","addInternalEvents","prototype","getModuleName","on","wireEvents","displayOption","view","mCont","element","querySelector","MOVABLECONTENT_DIV","fCont","FROZENCONTENT_DIV","mHdr","MOVABLEHEADER_DIV","mScrollBar","parentElement","MOVABLESCROLL_DIV","clearEvents","ele","isAdaptive","add","onHorizondalScroll","onVerticalScroll","common","onCustomScrollbarScroll","setPageXY","onTouchScroll","grid","args","cancel","isPreventScrollEvent","onWheelScroll","_this","e","scrollTop","deltaMode","deltaY","preventDefault","type","getPointXY","pageXY","x","y","touches","length","pageX","pageY","content","header","eContent","target","scrollLeft","isDestroyed","pointerType","update","isScrolling","engine","dataSourceSettings","mode","pageSettings","direction","rowValues_1","valueAxis","values","exactSize_1","rowSize","gridSettings","rowHeight","section","Math","ceil","scrollPosObject","vertical","rowCount","showWaitingPopup","rowCurrentPage","rowStartPos_1","pivot_1","sfBlazor","window","copyWithoutCircularReferences","interopAdaptor","invokeMethodAsync","then","data","updateBlazorData","pivotValues","rowStartPos","exactPage","pos","rowFirstLvl","verticalSection","getEngine","generateGridData","headerCollection","scrollPage","pageRowStartPos","colValues_1","exactSize_2","columnSize","columnWidth","horizontal","pivot","columnCurrentPage","colStartPos_1","pivot_2","colStartPos","colFirstLvl","horizontalSection","pageColStartPos","verticalScrollScale","horizontalScrollScale","timeOutObj","clearTimeout","setTimeout","scrollDirection","horiOffset","vertiOffset","TABLE","style","transform","split","trim","scrollerBrowserLimit","excessMove","offsetWidth","notLastPage","clientWidth","vWidth","columnCount","hScrollPos","scrollWidth","virtualDiv","VIRTUALTRACK_DIV","display","mCntScrollPos","mCntVScrollPos","Number","ele_1","clientHeight","offsetHeight","movableTable","vHeight","removeInternalEvents","off","destroy"],"mappings":"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","sourcesContent":["import { EventHandler, setStyleAttribute, isBlazor } from '@syncfusion/ej2-base';\nimport { contentReady } from '../../common/base/constant';\nimport * as cls from '../../common/base/css-constant';\n/**\n * `VirtualScroll` module is used to handle scrolling behavior.\n */\nvar VirtualScroll = /** @class */ (function () {\n    /**\n     * Constructor for PivotView scrolling.\n     * @param {PivotView} parent - Instance of pivot table.\n     * @hidden\n     */\n    function VirtualScroll(parent) {\n        this.previousValues = { top: 0, left: 0 };\n        this.frozenPreviousValues = { top: 0, left: 0 };\n        this.eventType = '';\n        this.parent = parent;\n        this.engineModule = this.parent.dataType === 'pivot' ? this.parent.engineModule : this.parent.olapEngineModule;\n        this.addInternalEvents();\n    }\n    /**\n     * It returns the Module name.\n     * @returns {string} - string.\n     * @hidden\n     */\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.addInternalEvents = function () {\n        this.parent.on(contentReady, this.wireEvents, this);\n    };\n    VirtualScroll.prototype.wireEvents = function () {\n        if (this.parent.displayOption.view !== 'Chart') {\n            var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n            var fCont = this.parent.element.querySelector('.' + cls.FROZENCONTENT_DIV);\n            var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n            var mScrollBar = mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n            EventHandler.clearEvents(mCont);\n            EventHandler.clearEvents(fCont);\n            if (this.engineModule) {\n                var ele = this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n                EventHandler.add(ele, 'scroll touchmove pointermove', this.onHorizondalScroll(mHdr, mCont, fCont), this);\n                EventHandler.add(mCont.parentElement, 'scroll wheel touchmove pointermove keyup keydown', this.onVerticalScroll(fCont, mCont), this);\n                EventHandler.add(mCont.parentElement.parentElement, 'mouseup touchend', this.common(mHdr, mCont, fCont), this);\n                EventHandler.add(mScrollBar, 'scroll', this.onCustomScrollbarScroll(mCont, mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mHdr), this);\n                EventHandler.add(mHdr, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mCont), this);\n                // EventHandler.add(fCont.parentElement, 'wheel', this.onWheelScroll(mCont, fCont), this);\n                // EventHandler.add(fCont.parentElement, 'touchstart pointerdown', this.setPageXY(), this);\n                // EventHandler.add(fCont.parentElement, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n                EventHandler.add(mHdr, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(mHdr, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n                EventHandler.add(mCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(mCont, 'touchmove pointermove', this.onTouchScroll(mHdr, mCont, fCont), this);\n            }\n            this.parent.grid.on('check-scroll-reset', function (args) {\n                args.cancel = true;\n            });\n            this.parent.grid.on('prevent-frozen-scroll-refresh', function (args) {\n                args.cancel = true;\n            });\n            this.parent.grid.isPreventScrollEvent = true;\n        }\n    };\n    VirtualScroll.prototype.onWheelScroll = function (mCont, fCont) {\n        var _this = this;\n        var element = mCont;\n        return function (e) {\n            var top = element.parentElement.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.frozenPreviousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = e.type;\n        };\n    };\n    VirtualScroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (!(e.touches && e.touches.length)) {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        else {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        return pageXY;\n    };\n    VirtualScroll.prototype.onCustomScrollbarScroll = function (mCont, mHdr) {\n        var _this = this;\n        var content = mCont;\n        var header = mHdr;\n        return function (e) {\n            var eContent = _this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).parentElement;\n            if (eContent.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            if (_this.previousValues.left === left) {\n                return;\n            }\n            content.scrollLeft = left;\n            header.scrollLeft = left;\n            _this.previousValues.left = left;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    VirtualScroll.prototype.onTouchScroll = function (mHdr, mCont, fCont) {\n        var _this = this;\n        var element = mCont;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var pageXY = _this.getPointXY(e);\n            var top = element.parentElement.scrollTop + (_this.pageXY.y - pageXY.y);\n            var ele = _this.parent.isAdaptive ? mCont : element.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n            var left = ele.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.frozenPreviousValues.left === left || left < 0) {\n                return;\n            }\n            mHdr.scrollLeft = left;\n            ele.scrollLeft = left;\n            _this.pageXY.x = pageXY.x;\n            _this.frozenPreviousValues.left = left;\n            if (_this.frozenPreviousValues.top === top || top < 0) {\n                return;\n            }\n            _this.pageXY.y = pageXY.y;\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = e.type;\n        };\n    };\n    VirtualScroll.prototype.update = function (mHdr, mCont, top, left, e) {\n        var _this = this;\n        this.parent.isScrolling = true;\n        var engine = this.parent.dataType === 'pivot' ? this.parent.engineModule : this.parent.olapEngineModule;\n        if (isBlazor() || this.parent.dataSourceSettings.mode === 'Server') {\n            engine.pageSettings = this.parent.pageSettings;\n        }\n        if (this.parent.pageSettings && engine.pageSettings) {\n            if (this.direction === 'vertical') {\n                var rowValues_1 = this.parent.dataType === 'pivot' ?\n                    (this.parent.dataSourceSettings.valueAxis === 'row' ? this.parent.dataSourceSettings.values.length : 1) : 1;\n                var exactSize_1 = (this.parent.pageSettings.rowSize * rowValues_1 * this.parent.gridSettings.rowHeight);\n                var section = Math.ceil(top / exactSize_1);\n                if ((this.parent.scrollPosObject.vertical === section ||\n                    engine.pageSettings.rowSize >= engine.rowCount)) {\n                    // this.parent.hideWaitingPopup();\n                    return;\n                }\n                this.parent.showWaitingPopup();\n                this.parent.scrollPosObject.vertical = section;\n                engine.pageSettings.rowCurrentPage = section > 1 ? section : 1;\n                var rowStartPos_1 = 0;\n                if (this.parent.dataType === 'pivot') {\n                    if (isBlazor()) {\n                        var pivot_1 = this.parent;\n                        var sfBlazor = 'sfBlazor';\n                        /* eslint-disable-next-line */\n                        var dataSourceSettings = window[sfBlazor].\n                            copyWithoutCircularReferences([pivot_1.dataSourceSettings], pivot_1.dataSourceSettings);\n                        /* eslint-disable-next-line */\n                        var pageSettings = window[sfBlazor].\n                            copyWithoutCircularReferences([engine.pageSettings], engine.pageSettings);\n                        /* eslint-disable-next-line */\n                        pivot_1.interopAdaptor.invokeMethodAsync('PivotInteropMethod', 'generateGridData', {\n                            'dataSourceSettings': dataSourceSettings,\n                            'pageSettings': pageSettings, 'isScrolling': true\n                        }).then(\n                        /* eslint-disable-next-line */\n                        function (data) {\n                            pivot_1.updateBlazorData(data, pivot_1);\n                            pivot_1.pivotValues = engine.pivotValues;\n                            rowStartPos_1 = _this.parent.engineModule.rowStartPos;\n                            var exactPage = Math.ceil(rowStartPos_1 / (pivot_1.pageSettings.rowSize * rowValues_1));\n                            var pos = exactSize_1 * exactPage -\n                                (engine.rowFirstLvl * rowValues_1 * pivot_1.gridSettings.rowHeight);\n                            pivot_1.scrollPosObject.verticalSection = pos;\n                        });\n                    }\n                    else if (this.parent.dataSourceSettings.mode === 'Server') {\n                        this.parent.getEngine('onScroll', null, null, null, null, null, null);\n                    }\n                    else {\n                        this.parent.engineModule.generateGridData(this.parent.dataSourceSettings, this.parent.engineModule.headerCollection);\n                        rowStartPos_1 = this.parent.engineModule.rowStartPos;\n                    }\n                }\n                else {\n                    this.parent.olapEngineModule.scrollPage('scroll');\n                    rowStartPos_1 = this.parent.olapEngineModule.pageRowStartPos;\n                }\n                if (!(isBlazor() && this.parent.dataType === 'pivot')) {\n                    this.parent.pivotValues = engine.pivotValues;\n                    var exactPage = Math.ceil(rowStartPos_1 / (this.parent.pageSettings.rowSize * rowValues_1));\n                    var pos = exactSize_1 * exactPage -\n                        (engine.rowFirstLvl * rowValues_1 * this.parent.gridSettings.rowHeight);\n                    this.parent.scrollPosObject.verticalSection = pos;\n                }\n            }\n            else {\n                var colValues_1 = this.parent.dataType === 'pivot' ?\n                    (this.parent.dataSourceSettings.valueAxis === 'column' ? this.parent.dataSourceSettings.values.length : 1) : 1;\n                var exactSize_2 = (this.parent.pageSettings.columnSize *\n                    colValues_1 * this.parent.gridSettings.columnWidth);\n                var section = Math.ceil(left / exactSize_2);\n                if (this.parent.scrollPosObject.horizontal === section) {\n                    // this.parent.hideWaitingPopup();\n                    return;\n                }\n                this.parent.showWaitingPopup();\n                var pivot = this.parent;\n                pivot.scrollPosObject.horizontal = section;\n                engine.pageSettings.columnCurrentPage = section > 1 ? section : 1;\n                var colStartPos_1 = 0;\n                if (pivot.dataType === 'pivot') {\n                    if (isBlazor()) {\n                        var sfBlazor = 'sfBlazor';\n                        var pivot_2 = this.parent;\n                        /* eslint-disable-next-line */\n                        var pageSettings = window[sfBlazor].\n                            copyWithoutCircularReferences([engine.pageSettings], engine.pageSettings);\n                        /* eslint-disable-next-line */\n                        var dataSourceSettings = window[sfBlazor].\n                            copyWithoutCircularReferences([pivot_2.dataSourceSettings], pivot_2.dataSourceSettings);\n                        /* eslint-disable-next-line */\n                        pivot_2.interopAdaptor.invokeMethodAsync('PivotInteropMethod', 'generateGridData', {\n                            'dataSourceSettings': dataSourceSettings,\n                            'pageSettings': pageSettings, 'isScrolling': true\n                        }).then(\n                        /* eslint-disable-next-line */\n                        function (data) {\n                            pivot_2.updateBlazorData(data, pivot_2);\n                            colStartPos_1 = pivot_2.engineModule.colStartPos;\n                            pivot_2.pivotValues = engine.pivotValues;\n                            var exactPage = Math.ceil(colStartPos_1 / (pivot_2.pageSettings.columnSize * colValues_1));\n                            var pos = exactSize_2 * exactPage - (engine.colFirstLvl *\n                                colValues_1 * pivot_2.gridSettings.columnWidth);\n                            pivot_2.scrollPosObject.horizontalSection = pos;\n                        });\n                    }\n                    else if (this.parent.dataSourceSettings.mode === 'Server') {\n                        this.parent.getEngine('onScroll', null, null, null, null, null, null);\n                    }\n                    else {\n                        pivot.engineModule.generateGridData(pivot.dataSourceSettings, pivot.engineModule.headerCollection);\n                        colStartPos_1 = pivot.engineModule.colStartPos;\n                    }\n                }\n                else {\n                    pivot.olapEngineModule.scrollPage('scroll');\n                    colStartPos_1 = pivot.olapEngineModule.pageColStartPos;\n                }\n                if (!(isBlazor() && pivot.dataType === 'pivot')) {\n                    pivot.pivotValues = engine.pivotValues;\n                    var exactPage = Math.ceil(colStartPos_1 / (pivot.pageSettings.columnSize * colValues_1));\n                    var pos = exactSize_2 * exactPage - (engine.colFirstLvl *\n                        colValues_1 * pivot.gridSettings.columnWidth);\n                    pivot.scrollPosObject.horizontalSection = pos;\n                }\n            }\n        }\n    };\n    VirtualScroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    VirtualScroll.prototype.common = function (mHdr, mCont, fCont) {\n        var _this = this;\n        return function (e) {\n            var ele = _this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n            _this.update(mHdr, mCont, mCont.parentElement.scrollTop * _this.parent.verticalScrollScale, ele.scrollLeft * _this.parent.horizontalScrollScale, e);\n        };\n    };\n    VirtualScroll.prototype.onHorizondalScroll = function (mHdr, mCont, fCont) {\n        var _this = this;\n        /* eslint-disable-next-line */\n        var timeOutObj;\n        return function (e) {\n            var ele = _this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n            var left = ele.scrollLeft * _this.parent.horizontalScrollScale;\n            if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove') {\n                clearTimeout(timeOutObj);\n                /* eslint-disable */\n                timeOutObj = setTimeout(function () {\n                    left = e.type === 'touchmove' ? ele.scrollLeft : left;\n                    _this.update(mHdr, mCont, mCont.parentElement.scrollTop * _this.parent.verticalScrollScale, left, e);\n                }, 300);\n            }\n            if (_this.previousValues.left === left) {\n                return;\n            }\n            _this.parent.scrollDirection = _this.direction = 'horizondal';\n            var horiOffset = -((left - _this.parent.scrollPosObject.horizontalSection - ele.scrollLeft));\n            var vertiOffset = mCont.querySelector('.' + cls.TABLE).style.transform.split(',').length > 1 ?\n                mCont.querySelector('.' + cls.TABLE).style.transform.split(',')[1].trim() : \"0px)\";\n            if (ele.scrollLeft < _this.parent.scrollerBrowserLimit) {\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + horiOffset + 'px,' + vertiOffset\n                });\n                setStyleAttribute(mHdr.querySelector('.e-table'), {\n                    transform: 'translate(' + horiOffset + 'px,' + 0 + 'px)'\n                });\n            }\n            var excessMove = _this.parent.scrollPosObject.horizontalSection > left ?\n                -(_this.parent.scrollPosObject.horizontalSection - left) : ((left + mHdr.offsetWidth) -\n                (_this.parent.scrollPosObject.horizontalSection + mCont.querySelector('.e-table').offsetWidth));\n            var notLastPage = Math.ceil(_this.parent.scrollPosObject.horizontalSection / _this.parent.horizontalScrollScale) <\n                _this.parent.scrollerBrowserLimit;\n            if (_this.parent.scrollPosObject.horizontalSection > left ? true : (excessMove > 1 && notLastPage)) {\n                //  showSpinner(this.parent.element);\n                if (left > mHdr.clientWidth) {\n                    if (_this.parent.scrollPosObject.left < 1) {\n                        _this.parent.scrollPosObject.left = mHdr.clientWidth;\n                    }\n                    _this.parent.scrollPosObject.left = _this.parent.scrollPosObject.left - 50;\n                    excessMove = _this.parent.scrollPosObject.horizontalSection > left ?\n                        (excessMove - _this.parent.scrollPosObject.left) : (excessMove + _this.parent.scrollPosObject.left);\n                }\n                else {\n                    excessMove = -_this.parent.scrollPosObject.horizontalSection;\n                }\n                horiOffset = -((left - (_this.parent.scrollPosObject.horizontalSection + excessMove) - mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV).scrollLeft));\n                var vWidth = (_this.parent.gridSettings.columnWidth * _this.engineModule.columnCount);\n                if (vWidth > _this.parent.scrollerBrowserLimit) {\n                    _this.parent.horizontalScrollScale = vWidth / _this.parent.scrollerBrowserLimit;\n                    vWidth = _this.parent.scrollerBrowserLimit;\n                }\n                if (horiOffset > vWidth && horiOffset > left) {\n                    horiOffset = left;\n                    excessMove = 0;\n                }\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + horiOffset + 'px,' + vertiOffset\n                });\n                setStyleAttribute(mHdr.querySelector('.e-table'), {\n                    transform: 'translate(' + horiOffset + 'px,' + 0 + 'px)'\n                });\n                _this.parent.scrollPosObject.horizontalSection = _this.parent.scrollPosObject.horizontalSection + excessMove;\n            }\n            var hScrollPos = (ele.scrollWidth - (ele.scrollLeft + ele.offsetWidth));\n            if (hScrollPos <= 0) {\n                var virtualDiv = mCont.querySelector('.' + cls.VIRTUALTRACK_DIV);\n                virtualDiv.style.display = 'none';\n                var mCntScrollPos = (mCont.scrollWidth - (mCont.scrollLeft + mCont.offsetWidth));\n                virtualDiv.style.display = '';\n                var mCntVScrollPos = (mCont.scrollWidth - (mCont.scrollLeft + mCont.offsetWidth));\n                _this.parent.scrollPosObject.horizontalSection -= mCntScrollPos > hScrollPos ? mCntScrollPos : -mCntVScrollPos;\n                horiOffset = (ele.scrollLeft > _this.parent.scrollerBrowserLimit) ?\n                    Number(mCont.querySelector('.' + cls.TABLE).style.transform.split(',')[0].split('px')[0].trim()) :\n                    -(((ele.scrollLeft * _this.parent.horizontalScrollScale) -\n                        _this.parent.scrollPosObject.horizontalSection - ele.scrollLeft));\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: 'translate(' + horiOffset + 'px,' + vertiOffset\n                });\n                setStyleAttribute(mHdr.querySelector('.e-table'), {\n                    transform: 'translate(' + horiOffset + 'px,' + 0 + 'px)'\n                });\n            }\n            _this.previousValues.left = left;\n            _this.frozenPreviousValues.left = left;\n            _this.eventType = '';\n            mHdr.scrollLeft = ele.scrollLeft;\n        };\n    };\n    VirtualScroll.prototype.onVerticalScroll = function (fCont, mCont) {\n        var _this = this;\n        var timeOutObj;\n        return function (e) {\n            var top = mCont.parentElement.scrollTop * _this.parent.verticalScrollScale;\n            if (e.type === 'wheel' || e.type === 'touchmove' || _this.eventType === 'wheel' || _this.eventType === 'touchmove' || e.type === 'keyup' || e.type === 'keydown') {\n                var ele_1 = _this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n                clearTimeout(timeOutObj);\n                timeOutObj = setTimeout(function () {\n                    _this.update(null, mCont, mCont.parentElement.scrollTop * _this.parent.verticalScrollScale, ele_1.scrollLeft * _this.parent.horizontalScrollScale, e);\n                }, 300);\n            }\n            /* eslint-enable */\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            _this.parent.scrollDirection = _this.direction = 'vertical';\n            var vertiOffset = -((top - _this.parent.scrollPosObject.verticalSection - mCont.parentElement.scrollTop));\n            var horiOffset = mCont.querySelector('.' + cls.TABLE).style.transform.split(',')[0].trim();\n            if (vertiOffset > _this.parent.virtualDiv.clientHeight) {\n                vertiOffset = _this.parent.virtualDiv.clientHeight;\n            }\n            if (mCont.parentElement.scrollTop < _this.parent.scrollerBrowserLimit) {\n                setStyleAttribute(fCont.querySelector('.e-table'), {\n                    transform: 'translate(' + 0 + 'px,' + vertiOffset + 'px)'\n                });\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: horiOffset + ',' + vertiOffset + 'px)'\n                });\n            }\n            var excessMove = _this.parent.scrollPosObject.verticalSection > top ?\n                -(_this.parent.scrollPosObject.verticalSection - top) : ((top + fCont.parentElement.clientHeight) -\n                (_this.parent.scrollPosObject.verticalSection + fCont.querySelector('.e-table').offsetHeight));\n            var notLastPage = Math.ceil(_this.parent.scrollPosObject.verticalSection / _this.parent.verticalScrollScale) <\n                _this.parent.scrollerBrowserLimit;\n            if (_this.parent.scrollPosObject.verticalSection > top ? true : (excessMove > 1 && notLastPage)) {\n                //  showSpinner(this.parent.element);\n                if (top > fCont.parentElement.clientHeight) {\n                    if (_this.parent.scrollPosObject.top < 1) {\n                        _this.parent.scrollPosObject.top = fCont.parentElement.clientHeight;\n                    }\n                    _this.parent.scrollPosObject.top = _this.parent.scrollPosObject.top - 50;\n                    excessMove = _this.parent.scrollPosObject.verticalSection > top ?\n                        (excessMove - _this.parent.scrollPosObject.top) : (excessMove + _this.parent.scrollPosObject.top);\n                }\n                else {\n                    excessMove = -_this.parent.scrollPosObject.verticalSection;\n                }\n                var movableTable = _this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).querySelector('.e-table');\n                vertiOffset = -((top - (_this.parent.scrollPosObject.verticalSection + excessMove) - mCont.parentElement.scrollTop));\n                var vHeight = (_this.parent.gridSettings.rowHeight * _this.engineModule.rowCount + 0.1\n                    - movableTable.clientHeight);\n                if (vHeight > _this.parent.scrollerBrowserLimit) {\n                    _this.parent.verticalScrollScale = vHeight / _this.parent.scrollerBrowserLimit;\n                    vHeight = _this.parent.scrollerBrowserLimit;\n                }\n                if (vertiOffset > vHeight && vertiOffset > top) {\n                    vertiOffset = top;\n                    excessMove = 0;\n                }\n                if (vertiOffset > _this.parent.virtualDiv.clientHeight) {\n                    vertiOffset = _this.parent.virtualDiv.clientHeight;\n                }\n                setStyleAttribute(fCont.querySelector('.e-table'), {\n                    transform: 'translate(' + 0 + 'px,' + vertiOffset + 'px)'\n                });\n                setStyleAttribute(mCont.querySelector('.e-table'), {\n                    transform: horiOffset + ',' + vertiOffset + 'px)'\n                });\n                _this.parent.scrollPosObject.verticalSection = _this.parent.scrollPosObject.verticalSection + excessMove;\n            }\n            _this.previousValues.top = top;\n            _this.frozenPreviousValues.top = top;\n            _this.eventType = '';\n        };\n    };\n    /* eslint-disable-next-line */\n    /**\n     * @hidden\n     */\n    VirtualScroll.prototype.removeInternalEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(contentReady, this.wireEvents);\n    };\n    /**\n     * To destroy the virtualscrolling event listener\n     * @returns {void}\n     * @hidden\n     */\n    VirtualScroll.prototype.destroy = function () {\n        this.removeInternalEvents();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"]},"metadata":{},"sourceType":"module"}