{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable jsdoc/require-returns */\n\n/* eslint-disable @typescript-eslint/ban-types */\n\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n/* eslint-disable valid-jsdoc */\n\n/* eslint-disable jsdoc/require-param */\n\n\nimport { sum, getPoint, templateAnimate } from '../../common/utils/helper';\nimport { PathOption } from '@syncfusion/ej2-svg-base';\nimport { ColumnSeries } from './column-series';\n/**\n * `HistogramSeries` Module used to render the histogram series.\n */\n\nvar HistogramSeries = function (_super) {\n  __extends(HistogramSeries, _super);\n\n  function HistogramSeries() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * Render Histogram series.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  HistogramSeries.prototype.render = function (series) {\n    _super.prototype.render.call(this, series);\n\n    if (series.showNormalDistribution) {\n      this.renderNormalDistribution(series);\n    }\n  };\n  /**\n   * To calculate bin interval for Histogram series.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  HistogramSeries.prototype.calculateBinInterval = function (yValues, series) {\n    var mean = sum(yValues) / yValues.length;\n    var sumValue = 0;\n\n    for (var _i = 0, yValues_1 = yValues; _i < yValues_1.length; _i++) {\n      var value = yValues_1[_i];\n      sumValue += (value - mean) * (value - mean);\n    }\n\n    series.histogramValues.mean = mean;\n    series.histogramValues.sDValue = Math.round(Math.sqrt(sumValue / yValues.length - 1));\n    series.histogramValues.binWidth = series.binInterval || Math.round(3.5 * series.histogramValues.sDValue / Math.pow(yValues.length, 1 / 3)) || 1;\n  };\n  /**\n   * Add data points for Histogram series.\n   *\n   * @returns {object[]} data\n   * @private\n   */\n\n\n  HistogramSeries.prototype.processInternalData = function (data, series) {\n    var _a;\n\n    var updatedData = [];\n    var yValues = [];\n    var keys = Object.keys(data);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      yValues.push(data[key][series.yName]);\n    }\n\n    series.histogramValues = {\n      yValues: yValues\n    };\n    var min = Math.min.apply(Math, series.histogramValues.yValues);\n    var max = Math.max.apply(Math, series.histogramValues.yValues);\n    this.calculateBinInterval(series.histogramValues.yValues, series);\n    var binWidth = series.histogramValues.binWidth;\n    var yCount;\n\n    for (var j = 0; j < data.length;) {\n      yCount = yValues.filter(function (y) {\n        return y >= min && y < min + binWidth;\n      }).length;\n\n      if (min + binWidth === max) {\n        yCount += yValues.filter(function (y) {\n          return y >= max;\n        }).length;\n      }\n\n      updatedData.push((_a = {\n        'x': min + binWidth / 2\n      }, _a[series.yName] = yCount, _a));\n      min = min + binWidth;\n      j += yCount;\n    }\n\n    return updatedData;\n  };\n  /**\n   * Calculates bin values.\n   *\n   * @returns null\n   * @private\n   */\n\n\n  HistogramSeries.prototype.calculateBinValues = function (series) {\n    var yValuesCount = series.histogramValues.yValues.length;\n    var binWidth = series.histogramValues.binWidth;\n    var mean = series.histogramValues.mean;\n    var sDValue = series.histogramValues.sDValue;\n    var pointsCount = 500;\n    var min = series.xAxis.minimum ? parseInt(series.xAxis.minimum.toString()) : series.xMin;\n    var max = series.xAxis.maximum ? parseInt(series.xAxis.maximum.toString()) : series.xMax;\n    var points = series.points.length;\n    var xValue;\n    var yValue;\n    var del = (max - min) / (pointsCount - 1);\n\n    if (points) {\n      for (var i = 0; i < pointsCount; i++) {\n        xValue = min + i * del;\n        yValue = Math.exp(-(xValue - mean) * (xValue - mean) / (2 * sDValue * sDValue)) / (sDValue * Math.sqrt(2 * Math.PI)) * binWidth * yValuesCount;\n        series.yMin = series.yMin > yValue ? yValue : series.yMin;\n        series.yMax = series.yMax < yValue ? yValue : series.yMax;\n      }\n    }\n  };\n  /**\n   * Render Normal Distribution for Histogram series.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  HistogramSeries.prototype.renderNormalDistribution = function (series) {\n    var min = series.xAxis.actualRange.min;\n    var max = series.xAxis.actualRange.max;\n    var xValue;\n    var pointLocation;\n    var yValue;\n    var direction = '';\n    var startPoint = 'M';\n    var yValuesCount = series.histogramValues.yValues.length;\n    var binWidth = series.histogramValues.binWidth;\n    var mean = series.histogramValues.mean;\n    var sDValue = series.histogramValues.sDValue;\n    var pointsCount = 500;\n    var del = (max - min) / (pointsCount - 1);\n    var points = series.points.length;\n\n    if (points) {\n      for (var i = 0; i < pointsCount; i++) {\n        xValue = min + i * del;\n        yValue = Math.exp(-(xValue - mean) * (xValue - mean) / (2 * sDValue * sDValue)) / (sDValue * Math.sqrt(2 * Math.PI));\n        pointLocation = getPoint(xValue, yValue * binWidth * yValuesCount, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n        direction += startPoint + ' ' + pointLocation.x + ' ' + pointLocation.y + ' ';\n        startPoint = 'L';\n      }\n    }\n\n    var distributionLine = series.chart.renderer.drawPath(new PathOption(series.chart.element.id + '_Series_' + series.index + '_NDLine', 'transparent', 2, series.chart.themeStyle.errorBar, series.opacity, series.dashArray, direction), new Int32Array([series.clipRect.x, series.clipRect.y]));\n    distributionLine.style.visibility = !series.chart.enableCanvas ? series.animation.enable && series.chart.animateSeries ? 'hidden' : 'visible' : null;\n\n    if (!series.chart.enableCanvas) {\n      series.seriesElement.appendChild(distributionLine);\n    }\n  };\n  /**\n   * Animates the series.\n   *\n   * @param  {Series} series - Defines the series to animate.\n   * @returns {void}\n   */\n\n\n  HistogramSeries.prototype.doAnimation = function (series) {\n    _super.prototype.doAnimation.call(this, series);\n\n    if (series.showNormalDistribution) {\n      templateAnimate(series.seriesElement.lastElementChild, series.animation.duration, 500, 'FadeIn');\n    }\n  };\n  /**\n   * Get module name.\n   */\n\n\n  HistogramSeries.prototype.getModuleName = function () {\n    return 'HistogramSeries';\n    /**\n     * return the module name\n     */\n  };\n  /**\n   * To destroy the histogram series.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  HistogramSeries.prototype.destroy = function () {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return HistogramSeries;\n}(ColumnSeries);\n\nexport { HistogramSeries };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-charts/src/chart/series/histogram-series.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","sum","getPoint","templateAnimate","PathOption","ColumnSeries","HistogramSeries","_super","apply","arguments","render","series","call","showNormalDistribution","renderNormalDistribution","calculateBinInterval","yValues","mean","length","sumValue","_i","yValues_1","value","histogramValues","sDValue","Math","round","sqrt","binWidth","binInterval","pow","processInternalData","data","_a","updatedData","keys","i","key","push","yName","min","max","yCount","j","filter","y","calculateBinValues","yValuesCount","pointsCount","xAxis","minimum","parseInt","toString","xMin","maximum","xMax","points","xValue","yValue","del","exp","PI","yMin","yMax","actualRange","pointLocation","direction","startPoint","yAxis","chart","requireInvertedAxis","x","distributionLine","renderer","drawPath","element","id","index","themeStyle","errorBar","opacity","dashArray","Int32Array","clipRect","style","visibility","enableCanvas","animation","enable","animateSeries","seriesElement","appendChild","doAnimation","lastElementChild","duration","getModuleName","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable jsdoc/require-returns */\n/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\nimport { sum, getPoint, templateAnimate } from '../../common/utils/helper';\nimport { PathOption } from '@syncfusion/ej2-svg-base';\nimport { ColumnSeries } from './column-series';\n/**\n * `HistogramSeries` Module used to render the histogram series.\n */\nvar HistogramSeries = /** @class */ (function (_super) {\n    __extends(HistogramSeries, _super);\n    function HistogramSeries() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Render Histogram series.\n     *\n     * @returns {void}\n     * @private\n     */\n    HistogramSeries.prototype.render = function (series) {\n        _super.prototype.render.call(this, series);\n        if (series.showNormalDistribution) {\n            this.renderNormalDistribution(series);\n        }\n    };\n    /**\n     * To calculate bin interval for Histogram series.\n     *\n     * @returns {void}\n     * @private\n     */\n    HistogramSeries.prototype.calculateBinInterval = function (yValues, series) {\n        var mean = sum(yValues) / yValues.length;\n        var sumValue = 0;\n        for (var _i = 0, yValues_1 = yValues; _i < yValues_1.length; _i++) {\n            var value = yValues_1[_i];\n            sumValue += (value - mean) * (value - mean);\n        }\n        series.histogramValues.mean = mean;\n        series.histogramValues.sDValue = Math.round(Math.sqrt(sumValue / yValues.length - 1));\n        series.histogramValues.binWidth = series.binInterval ||\n            Math.round((3.5 * series.histogramValues.sDValue) / Math.pow(yValues.length, 1 / 3)) || 1;\n    };\n    /**\n     * Add data points for Histogram series.\n     *\n     * @returns {object[]} data\n     * @private\n     */\n    HistogramSeries.prototype.processInternalData = function (data, series) {\n        var _a;\n        var updatedData = [];\n        var yValues = [];\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            yValues.push(data[key][series.yName]);\n        }\n        series.histogramValues = {\n            yValues: yValues\n        };\n        var min = Math.min.apply(Math, series.histogramValues.yValues);\n        var max = Math.max.apply(Math, series.histogramValues.yValues);\n        this.calculateBinInterval(series.histogramValues.yValues, series);\n        var binWidth = series.histogramValues.binWidth;\n        var yCount;\n        for (var j = 0; j < data.length;) {\n            yCount = yValues.filter(function (y) { return y >= min && y < (min + (binWidth)); }).length;\n            if ((min + binWidth) === max) {\n                yCount += yValues.filter(function (y) { return y >= max; }).length;\n            }\n            updatedData.push((_a = {\n                    'x': min + binWidth / 2\n                },\n                _a[series.yName] = yCount,\n                _a));\n            min = min + binWidth;\n            j += yCount;\n        }\n        return updatedData;\n    };\n    /**\n     * Calculates bin values.\n     *\n     * @returns null\n     * @private\n     */\n    HistogramSeries.prototype.calculateBinValues = function (series) {\n        var yValuesCount = series.histogramValues.yValues.length;\n        var binWidth = series.histogramValues.binWidth;\n        var mean = series.histogramValues.mean;\n        var sDValue = series.histogramValues.sDValue;\n        var pointsCount = 500;\n        var min = series.xAxis.minimum ? parseInt(series.xAxis.minimum.toString()) : series.xMin;\n        var max = series.xAxis.maximum ? parseInt(series.xAxis.maximum.toString()) : series.xMax;\n        var points = series.points.length;\n        var xValue;\n        var yValue;\n        var del = (max - min) / (pointsCount - 1);\n        if (points) {\n            for (var i = 0; i < pointsCount; i++) {\n                xValue = min + i * del;\n                yValue = (Math.exp(-(xValue - mean) * (xValue - mean) / (2 * sDValue * sDValue)) /\n                    (sDValue * Math.sqrt(2 * Math.PI))) * binWidth * yValuesCount;\n                series.yMin = series.yMin > yValue ? yValue : series.yMin;\n                series.yMax = series.yMax < yValue ? yValue : series.yMax;\n            }\n        }\n    };\n    /**\n     * Render Normal Distribution for Histogram series.\n     *\n     * @returns {void}\n     * @private\n     */\n    HistogramSeries.prototype.renderNormalDistribution = function (series) {\n        var min = series.xAxis.actualRange.min;\n        var max = series.xAxis.actualRange.max;\n        var xValue;\n        var pointLocation;\n        var yValue;\n        var direction = '';\n        var startPoint = 'M';\n        var yValuesCount = series.histogramValues.yValues.length;\n        var binWidth = series.histogramValues.binWidth;\n        var mean = series.histogramValues.mean;\n        var sDValue = series.histogramValues.sDValue;\n        var pointsCount = 500;\n        var del = (max - min) / (pointsCount - 1);\n        var points = series.points.length;\n        if (points) {\n            for (var i = 0; i < pointsCount; i++) {\n                xValue = min + i * del;\n                yValue = Math.exp(-(xValue - mean) * (xValue - mean) / (2 * sDValue * sDValue)) /\n                    (sDValue * Math.sqrt(2 * Math.PI));\n                pointLocation = getPoint(xValue, yValue * binWidth * yValuesCount, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n                direction += startPoint + ' ' + (pointLocation.x) + ' ' + (pointLocation.y) + ' ';\n                startPoint = 'L';\n            }\n        }\n        var distributionLine = series.chart.renderer.drawPath(new PathOption(series.chart.element.id + '_Series_' + series.index + '_NDLine', 'transparent', 2, series.chart.themeStyle.errorBar, series.opacity, series.dashArray, direction), new Int32Array([series.clipRect.x, series.clipRect.y]));\n        distributionLine.style.visibility = (!series.chart.enableCanvas) ? ((series.animation.enable &&\n            series.chart.animateSeries) ? 'hidden' : 'visible') : null;\n        if (!series.chart.enableCanvas) {\n            series.seriesElement.appendChild(distributionLine);\n        }\n    };\n    /**\n     * Animates the series.\n     *\n     * @param  {Series} series - Defines the series to animate.\n     * @returns {void}\n     */\n    HistogramSeries.prototype.doAnimation = function (series) {\n        _super.prototype.doAnimation.call(this, series);\n        if (series.showNormalDistribution) {\n            templateAnimate(series.seriesElement.lastElementChild, series.animation.duration, 500, 'FadeIn');\n        }\n    };\n    /**\n     * Get module name.\n     */\n    HistogramSeries.prototype.getModuleName = function () {\n        return 'HistogramSeries';\n        /**\n         * return the module name\n         */\n    };\n    /**\n     * To destroy the histogram series.\n     *\n     * @returns {void}\n     * @private\n     */\n    HistogramSeries.prototype.destroy = function () {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return HistogramSeries;\n}(ColumnSeries));\nexport { HistogramSeries };\n"]},"metadata":{},"sourceType":"module"}