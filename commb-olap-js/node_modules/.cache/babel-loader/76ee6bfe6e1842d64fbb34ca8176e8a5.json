{"ast":null,"code":"import { createElement, isNullOrUndefined, addClass, removeClass, closest, isBlazor, select, remove } from '@syncfusion/ej2-base';\nimport { EventHandler, setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport * as events from '../../common/base/constant';\nimport { PivotUtil } from '../../base/util';\n/**\n * Module to render Pivot Field List Dialog\n */\n\n/** @hidden */\n\nvar DialogRenderer = function () {\n  /** Constructor for render module\n   * @param {PivotFieldList} parent - Instance of field list.\n   */\n  function DialogRenderer(parent) {\n    this.parent = parent;\n  }\n  /**\n   * Initialize the field list layout rendering\n   * @returns {void}\n   * @private\n   */\n\n\n  DialogRenderer.prototype.render = function () {\n    var fieldListWrappper = createElement('div', {\n      id: this.parent.element.id + '_Wrapper',\n      className: cls.WRAPPER_CLASS + ' ' + (this.parent.dataType === 'olap' ? cls.OLAP_WRAPPER_CLASS : ''),\n      styles: 'width:' + this.parent.element.style.width\n    });\n\n    if (this.parent.isAdaptive) {\n      addClass([fieldListWrappper], cls.DEVICE);\n    } else {\n      removeClass([fieldListWrappper], cls.DEVICE);\n    }\n\n    if (this.parent.enableRtl) {\n      addClass([fieldListWrappper], cls.RTL);\n    } else {\n      removeClass([fieldListWrappper], cls.RTL);\n    }\n\n    if (this.parent.cssClass) {\n      addClass([fieldListWrappper], this.parent.cssClass);\n    }\n\n    this.parentElement = createElement('div', {\n      className: cls.CONTAINER_CLASS\n    });\n    this.parent.element.appendChild(fieldListWrappper);\n\n    if (this.parent.isAdaptive) {\n      fieldListWrappper.removeAttribute('style');\n      this.parentElement = createElement('div', {\n        className: cls.ADAPTIVE_CONTAINER_CLASS\n      });\n      this.renderAdaptiveLayout(fieldListWrappper);\n    }\n\n    if (this.parent.renderMode === 'Popup') {\n      this.renderFieldListDialog(fieldListWrappper);\n      this.unWireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n      this.wireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n    } else {\n      this.renderStaticLayout(fieldListWrappper);\n    }\n  };\n\n  DialogRenderer.prototype.renderStaticLayout = function (fieldListWrappper) {\n    if (!this.parent.isAdaptive) {\n      var layoutHeader = createElement('div', {\n        className: cls.FIELD_LIST_TITLE_CLASS\n      });\n      var headerContent = createElement('div', {\n        className: cls.FIELD_LIST_TITLE_CONTENT_CLASS,\n        innerHTML: this.parent.localeObj.getConstant('staticFieldList')\n      });\n      layoutHeader.appendChild(headerContent);\n      layoutHeader.appendChild(this.createCalculatedButton());\n      addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n      fieldListWrappper.appendChild(layoutHeader);\n      fieldListWrappper.appendChild(this.parentElement);\n      addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n\n      if (this.parent.allowDeferLayoutUpdate) {\n        fieldListWrappper.appendChild(this.createDeferUpdateButtons());\n        this.renderDeferUpdateButtons();\n      }\n    }\n  };\n\n  DialogRenderer.prototype.renderDeferUpdateButtons = function () {\n    if (this.parent.allowDeferLayoutUpdate) {\n      this.deferUpdateCheckBox = new CheckBox({\n        label: this.parent.localeObj.getConstant('deferLayoutUpdate'),\n        checked: true,\n        enableRtl: this.parent.enableRtl,\n        locale: this.parent.locale,\n        change: this.onCheckChange.bind(this)\n      });\n      this.deferUpdateCheckBox.isStringTemplate = true;\n      this.deferUpdateCheckBox.appendTo('#' + this.parent.element.id + 'DeferUpdateCheckBox');\n      this.deferUpdateApplyButton = new Button({\n        cssClass: cls.DEFER_APPLY_BUTTON + ' ' + cls.DEFER_UPDATE_BUTTON + (this.parent.renderMode === 'Popup' ? ' ' + cls.BUTTON_FLAT_CLASS : ''),\n        content: this.parent.localeObj.getConstant('apply'),\n        enableRtl: this.parent.enableRtl,\n        locale: this.parent.locale,\n        isPrimary: true\n      });\n      this.deferUpdateApplyButton.isStringTemplate = true;\n      this.deferUpdateApplyButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton1');\n      this.deferUpdateApplyButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.applyButtonClick.bind(this) : this.onDeferUpdateClick.bind(this);\n    }\n\n    this.deferUpdateCancelButton = new Button({\n      cssClass: cls.DEFER_CANCEL_BUTTON + ' ' + cls.CANCEL_BUTTON_CLASS + (this.parent.renderMode === 'Popup' ? ' ' + cls.BUTTON_FLAT_CLASS : ''),\n      content: this.parent.allowDeferLayoutUpdate ? this.parent.localeObj.getConstant('cancel') : this.parent.localeObj.getConstant('close'),\n      enableRtl: this.parent.enableRtl,\n      isPrimary: !this.parent.allowDeferLayoutUpdate,\n      locale: this.parent.locale\n    });\n    this.deferUpdateCancelButton.isStringTemplate = true;\n    this.deferUpdateCancelButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton2');\n    this.deferUpdateCancelButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.cancelButtonClick.bind(this) : this.onCloseFieldList.bind(this);\n  };\n\n  DialogRenderer.prototype.createDeferUpdateButtons = function () {\n    var layoutFooter = createElement('div', {\n      className: cls.LAYOUT_FOOTER\n    });\n\n    if (this.parent.allowDeferLayoutUpdate) {\n      var checkBoxLayout = createElement('div', {\n        className: cls.CHECKBOX_LAYOUT,\n        attrs: {\n          'title': this.parent.localeObj.getConstant('deferLayoutUpdate')\n        }\n      });\n      var deferUpdateCheckBox = createElement('input', {\n        id: this.parent.element.id + 'DeferUpdateCheckBox'\n      });\n      checkBoxLayout.appendChild(deferUpdateCheckBox);\n      layoutFooter.appendChild(checkBoxLayout);\n    }\n\n    var buttonLayout = createElement('div', {\n      className: cls.BUTTON_LAYOUT\n    });\n\n    if (this.parent.allowDeferLayoutUpdate) {\n      var deferUpdateButton1 = createElement('button', {\n        id: this.parent.element.id + '_DeferUpdateButton1',\n        attrs: {\n          'type': 'button',\n          'title': this.parent.localeObj.getConstant('apply')\n        }\n      });\n      buttonLayout.appendChild(deferUpdateButton1);\n    }\n\n    var deferUpdateButton2 = createElement('button', {\n      id: this.parent.element.id + '_DeferUpdateButton2',\n      attrs: {\n        'type': 'button',\n        'title': this.parent.localeObj.getConstant('cancel')\n      }\n    });\n    buttonLayout.appendChild(deferUpdateButton2);\n    layoutFooter.appendChild(buttonLayout);\n    return layoutFooter;\n  };\n\n  DialogRenderer.prototype.onCheckChange = function (args) {\n    if (args.checked) {\n      this.parent.clonedDataSource = extend({}, this.parent.dataSourceSettings, null, true);\n      this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n    }\n\n    this.parent.allowDeferLayoutUpdate = !this.parent.allowDeferLayoutUpdate;\n\n    if (this.parent.renderMode === 'Fixed') {\n      this.deferUpdateApplyButton.setProperties({\n        disabled: !this.parent.allowDeferLayoutUpdate\n      });\n      this.deferUpdateCancelButton.setProperties({\n        disabled: !this.parent.allowDeferLayoutUpdate\n      });\n    } else {\n      if (this.parent.allowDeferLayoutUpdate) {\n        this.deferUpdateApplyButton.element.style.display = '';\n        this.deferUpdateCancelButton.setProperties({\n          content: this.parent.localeObj.getConstant('cancel')\n        });\n        this.deferUpdateCancelButton.isPrimary = false;\n      } else {\n        this.deferUpdateApplyButton.element.style.display = 'none';\n        this.deferUpdateCancelButton.setProperties({\n          content: this.parent.localeObj.getConstant('close')\n        });\n        this.deferUpdateCancelButton.isPrimary = true;\n      }\n    }\n\n    this.cancelButtonClick();\n  };\n\n  DialogRenderer.prototype.applyButtonClick = function () {\n    if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.allowDeferLayoutUpdate) {\n      this.parent.pivotChange = false;\n    }\n\n    this.parent.updateDataSource(false);\n    var parent = this.parent;\n    parent.axisFieldModule.render();\n    parent.clonedDataSource = extend({}, parent.dataSourceSettings, null, true);\n    parent.clonedFieldList = extend({}, parent.pivotFieldList, null, true);\n  };\n\n  DialogRenderer.prototype.cancelButtonClick = function () {\n    if (isBlazor() && !this.parent.isPopupView) {\n      PivotUtil.updateDataSourceSettings(this.parent, PivotUtil.getClonedDataSourceSettings(this.parent.clonedDataSource.properties));\n      /* eslint-disable-line */\n    } else {\n      this.parent.setProperties({\n        dataSourceSettings: this.parent.clonedDataSource.properties\n        /* eslint-disable-line */\n\n      }, true);\n    }\n    /* eslint-enable @typescript-eslint/indent */\n\n\n    if (this.parent.dataType === 'olap') {\n      this.parent.olapEngineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n\n      for (var _i = 0, _a = Object.keys(this.parent.clonedFieldList); _i < _a.length; _i++) {\n        var name_1 = _a[_i];\n        var item = this.parent.clonedFieldList[name_1];\n        this.parent.olapEngineModule.updateFieldlistData(item.id, item.isSelected);\n      }\n    } else {\n      this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n    }\n\n    this.parent.updateDataSource(false, true);\n  };\n\n  DialogRenderer.prototype.renderFieldListDialog = function (fieldListWrappper) {\n    var toggleFieldList = createElement('div', {\n      className: cls.TOGGLE_FIELD_LIST_CLASS + ' ' + cls.ICON + ' ' + cls.TOGGLE_SELECT_CLASS,\n      attrs: {\n        'tabindex': '0',\n        title: this.parent.localeObj.getConstant('fieldList'),\n        'aria-disabled': 'false',\n        'aria-label': this.parent.localeObj.getConstant('fieldList')\n      }\n    });\n    this.parent.element.appendChild(toggleFieldList);\n\n    if (this.parent.isAdaptive) {\n      var headerTemplate = '<div class=' + cls.TITLE_MOBILE_HEADER + '><span class=\"' + cls.ICON + ' ' + cls.BACK_ICON + '\"></span><div class=' + cls.TITLE_MOBILE_CONTENT + '>' + this.parent.localeObj.getConstant('fieldList') + '</div></div>';\n      var buttons = [{\n        click: this.showFieldListDialog.bind(this),\n        buttonModel: {\n          cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n          iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n          isPrimary: true\n        }\n      }, {\n        click: this.showCalculatedField.bind(this),\n        buttonModel: {\n          cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n          iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n          enableRtl: this.parent.enableRtl,\n          isPrimary: true\n        }\n      }];\n      this.fieldListDialog = new Dialog({\n        animationSettings: {\n          effect: this.parent.enableRtl ? 'SlideRight' : 'SlideLeft'\n        },\n        header: headerTemplate,\n        content: this.parentElement,\n        isModal: true,\n        showCloseIcon: false,\n        visible: false,\n        allowDragging: false,\n        closeOnEscape: false,\n        enableRtl: this.parent.enableRtl,\n        locale: this.parent.locale,\n        width: '100%',\n        height: '100%',\n        position: {\n          X: 'center',\n          Y: 'center'\n        },\n        buttons: buttons,\n        target: document.body,\n        close: this.removeFieldListIcon.bind(this),\n        open: this.dialogOpen.bind(this)\n      });\n      this.fieldListDialog.isStringTemplate = true;\n      this.fieldListDialog.appendTo(fieldListWrappper); // this.fieldListDialog.element.querySelector('.e-dlg-header').innerHTML = headerTemplate;\n\n      setStyleAttribute(select('#' + fieldListWrappper.id + '_dialog-content', fieldListWrappper), {\n        'padding': '0'\n      });\n      var footer = fieldListWrappper.querySelector('.' + cls.FOOTER_CONTENT_CLASS);\n      addClass([footer], cls.FIELD_LIST_FOOTER_CLASS);\n      removeClass([footer.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n      removeClass([footer.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n      this.fieldListDialog.element.querySelector('.' + cls.BACK_ICON).onclick = this.parent.allowDeferLayoutUpdate ? this.onDeferUpdateClick.bind(this) : this.onCloseFieldList.bind(this);\n    } else {\n      var template = this.createDeferUpdateButtons().outerHTML;\n      var headerTemplate = '<div class=' + cls.TITLE_HEADER_CLASS + '><div class=' + cls.TITLE_CONTENT_CLASS + '>' + this.parent.localeObj.getConstant('fieldList') + '</div></div>';\n      this.fieldListDialog = new Dialog({\n        animationSettings: {\n          effect: 'Zoom'\n        },\n        header: headerTemplate,\n        content: this.parentElement,\n        isModal: false,\n        showCloseIcon: false,\n        visible: false,\n        allowDragging: true,\n        enableRtl: this.parent.enableRtl,\n        locale: this.parent.locale,\n        width: this.parent.element.style.width,\n        position: {\n          X: 'center',\n          Y: this.parent.element.offsetTop\n        },\n        footerTemplate: template,\n        closeOnEscape: false,\n        target: !isNullOrUndefined(this.parent.target) ? typeof this.parent.target === 'string' ? document.querySelector(this.parent.target) : this.parent.target : document.body,\n        close: this.removeFieldListIcon.bind(this)\n      });\n      this.fieldListDialog.isStringTemplate = true;\n      this.fieldListDialog.appendTo(fieldListWrappper); // this.fieldListDialog.element.querySelector('.e-dlg-header').innerHTML = headerTemplate;\n      // this.fieldListDialog.element.querySelector('.e-footer-content').innerHTML = template;\n\n      this.renderDeferUpdateButtons();\n      setStyleAttribute(select('#' + fieldListWrappper.id + '_title', fieldListWrappper), {\n        'width': '100%'\n      });\n      fieldListWrappper.querySelector('.' + cls.TITLE_HEADER_CLASS).appendChild(this.createCalculatedButton());\n    }\n  };\n\n  DialogRenderer.prototype.dialogOpen = function () {\n    this.adaptiveElement.refresh();\n  };\n  /**\n   * Called internally if any of the field added to axis.\n   * @param {string[]} selectedNodes - selectedNodes\n   * @returns {void}\n   * @hidden\n   */\n\n\n  DialogRenderer.prototype.updateDataSource = function (selectedNodes) {\n    var axis = ['filters', 'columns', 'rows', 'values'];\n\n    for (var _i = 0, selectedNodes_1 = selectedNodes; _i < selectedNodes_1.length; _i++) {\n      var field = selectedNodes_1[_i];\n      var fieldName = field;\n      var droppedClass = axis[this.adaptiveElement.selectedItem];\n      this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent : this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent;\n      this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, droppedClass, -1);\n    }\n\n    this.parent.axisFieldModule.render();\n\n    if (!this.parent.allowDeferLayoutUpdate) {\n      this.parent.updateDataSource(true);\n    } else {\n      this.parent.triggerPopulateEvent();\n    }\n  };\n\n  DialogRenderer.prototype.onDeferUpdateClick = function () {\n    this.parent.updateDataSource();\n    this.parent.dialogRenderer.fieldListDialog.hide();\n  };\n\n  DialogRenderer.prototype.renderAdaptiveLayout = function (fieldListWrappper) {\n    var layoutFooter = createElement('div', {\n      className: cls.FIELD_LIST_FOOTER_CLASS\n    });\n    fieldListWrappper.appendChild(this.parentElement);\n    var items = [{\n      header: {\n        'text': this.parent.localeObj.getConstant('filters')\n      },\n      content: this.createAxisTable('filters')\n    }, {\n      header: {\n        'text': this.parent.localeObj.getConstant('columns')\n      },\n      content: this.createAxisTable('columns')\n    }, {\n      header: {\n        'text': this.parent.localeObj.getConstant('rows')\n      },\n      content: this.createAxisTable('rows')\n    }, {\n      header: {\n        'text': this.parent.localeObj.getConstant('values')\n      },\n      content: this.createAxisTable('values')\n    }, {\n      header: {\n        'text': this.parent.localeObj.getConstant('createCalculatedField')\n      },\n      content: 'Calculated Field Related UI'\n    }];\n\n    if (!this.parent.allowCalculatedField) {\n      items.pop();\n    }\n\n    this.adaptiveElement = new Tab({\n      heightAdjustMode: 'Auto',\n      items: items,\n      height: '100%',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      selected: this.tabSelect.bind(this)\n    });\n\n    if (this.parent.renderMode === 'Fixed') {\n      layoutFooter.appendChild(this.createAddButton());\n      addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n      this.adaptiveElement.isStringTemplate = true;\n      this.adaptiveElement.appendTo(this.parentElement);\n      this.parentElement.appendChild(layoutFooter);\n    } else {\n      this.adaptiveElement.isStringTemplate = true;\n      this.adaptiveElement.appendTo(this.parentElement);\n    }\n  };\n\n  DialogRenderer.prototype.tabSelect = function (e) {\n    var fieldWrapper = closest(this.parentElement, '.' + cls.WRAPPER_CLASS);\n\n    if (fieldWrapper && fieldWrapper.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)) {\n      if (e.selectedIndex !== 4) {\n        addClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n        removeClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n      } else {\n        removeClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n        addClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n      }\n    }\n\n    if (e.selectedIndex === 4) {\n      this.adaptiveElement.items[4].content = '';\n      this.adaptiveElement.dataBind();\n      this.parent.notify(events.initCalculatedField, {});\n    } else {\n      this.parent.axisFieldModule.render();\n    }\n  };\n\n  DialogRenderer.prototype.createCalculatedButton = function () {\n    var calculatedButton = createElement('button', {\n      id: this.parent.element.id + '_CalculatedField',\n      attrs: {\n        'type': 'button',\n        'tabindex': '0',\n        'aria-disabled': 'false',\n        'aria-label': this.parent.localeObj.getConstant('CalculatedField')\n      }\n    });\n    var calculateField = new Button({\n      cssClass: cls.CALCULATED_FIELD_CLASS + ' ' + cls.ICON_DISABLE,\n      content: this.parent.localeObj.getConstant('CalculatedField'),\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    calculateField.isStringTemplate = true;\n    calculateField.appendTo(calculatedButton);\n\n    if (this.parent.calculatedFieldModule) {\n      removeClass([calculatedButton], cls.ICON_DISABLE);\n    }\n\n    calculateField.element.onclick = this.showCalculatedField.bind(this);\n    return calculatedButton;\n  };\n\n  DialogRenderer.prototype.createAddButton = function () {\n    var footerContainer = createElement('div', {\n      className: cls.FIELD_LIST_FOOTER_CLASS + '-content'\n    });\n    var fieldListButton = createElement('div', {});\n    var calculatedButton = createElement('div', {});\n    var calculateField = new Button({\n      cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n      iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    var fieldList = new Button({\n      cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n      iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    fieldList.isStringTemplate = true;\n    fieldList.appendTo(fieldListButton);\n    calculateField.isStringTemplate = true;\n    calculateField.appendTo(calculatedButton);\n    footerContainer.appendChild(fieldListButton);\n    footerContainer.appendChild(calculatedButton);\n    calculateField.element.onclick = this.showCalculatedField.bind(this);\n    fieldList.element.onclick = this.showFieldListDialog.bind(this);\n    return footerContainer;\n  };\n\n  DialogRenderer.prototype.createAxisTable = function (axis) {\n    var axisWrapper = createElement('div', {\n      className: cls.FIELD_LIST_CLASS + '-' + axis\n    });\n    var axisContent = createElement('div', {\n      className: cls.AXIS_CONTENT_CLASS + ' ' + 'e-' + axis\n    });\n    var axisPrompt = createElement('span', {\n      className: cls.AXIS_PROMPT_CLASS,\n      innerHTML: this.parent.localeObj.getConstant('addPrompt')\n    });\n    axisWrapper.appendChild(axisContent);\n    axisWrapper.appendChild(axisPrompt);\n    return axisWrapper;\n  };\n\n  DialogRenderer.prototype.showCalculatedField = function (event) {\n    if (!this.parent.isAdaptive) {\n      if (this.parent.dialogRenderer.fieldListDialog) {\n        this.parent.dialogRenderer.fieldListDialog.hide();\n        addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n      }\n    }\n\n    this.parent.notify(events.initCalculatedField, {});\n  };\n\n  DialogRenderer.prototype.showFieldListDialog = function (event) {\n    var activeindex = this.adaptiveElement.selectedItem;\n    this.parent.treeViewModule.render(activeindex);\n  };\n\n  DialogRenderer.prototype.onShowFieldList = function () {\n    if (this.parent.allowDeferLayoutUpdate) {\n      if (this.parent.isAdaptive) {\n        this.parent.axisFieldModule.render();\n      }\n\n      this.parent.clonedDataSource = extend({}, this.parent.dataSourceSettings, null, true);\n      this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n    }\n\n    addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n    this.parent.dialogRenderer.fieldListDialog.show();\n    this.parent.dialogRenderer.fieldListDialog.element.style.top = parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top, 10) < 0 ? '0px' : this.parent.dialogRenderer.fieldListDialog.element.style.top;\n  };\n\n  DialogRenderer.prototype.onCloseFieldList = function () {\n    if (this.parent.allowDeferLayoutUpdate) {\n      this.parent.dataSourceSettings = extend({}, this.parent.clonedDataSource.properties, null, true);\n      /* eslint-disable-line */\n\n      if (this.parent.isPopupView && this.parent.pivotGridModule) {\n        this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n        this.parent.pivotGridModule.olapEngineModule = this.parent.olapEngineModule;\n        this.parent.pivotGridModule.setProperties({\n          dataSourceSettings: this.parent.clonedDataSource.properties\n          /* eslint-disable-line */\n\n        }, true);\n      }\n\n      if (Object.keys(this.parent.clonedFieldList).length > 0) {\n        this.parent.dataType === 'olap' ? this.parent.olapEngineModule.fieldList =\n        /* eslint-disable-line */\n        extend({}, this.parent.clonedFieldList, null, true) : this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n      }\n\n      if (this.parent.isPopupView && this.parent.pivotGridModule) {\n        this.parent.pivotGridModule.notify(events.uiUpdate, this);\n        this.parent.pivotGridModule.notify(events.contentReady, this);\n      } else {\n        this.cancelButtonClick();\n      }\n    }\n\n    this.parent.dialogRenderer.fieldListDialog.hide();\n  };\n\n  DialogRenderer.prototype.removeFieldListIcon = function () {\n    if (this.parent.isAdaptive && this.parent.allowCalculatedField && this.parent.calculatedFieldModule) {\n      if (this.adaptiveElement && this.adaptiveElement.selectedItem === 4) {\n        if (select('#' + this.parent.element.id + 'droppable', this.adaptiveElement.element)) {\n          /* eslint-disable */\n          this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(false);\n          /* eslint-enable */\n        } else {\n          this.parent.notify(events.initCalculatedField, {\n            edit: false\n          });\n        }\n      }\n    }\n\n    if (!document.getElementById(this.parent.element.id + 'calculateddialog')) {\n      removeClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n    }\n  };\n\n  DialogRenderer.prototype.keyPress = function (e) {\n    if (e.keyCode === 13 && e.target) {\n      e.target.click();\n      e.preventDefault();\n      return;\n    }\n  };\n\n  DialogRenderer.prototype.wireDialogEvent = function (element) {\n    EventHandler.add(element, 'keydown', this.keyPress, this);\n    EventHandler.add(element, 'click', this.onShowFieldList, this);\n  };\n\n  DialogRenderer.prototype.unWireDialogEvent = function (element) {\n    EventHandler.remove(element, 'keydown', this.keyPress);\n    EventHandler.remove(element, 'click', this.onShowFieldList);\n  };\n  /**\n   * Destroys the Field Table component.\n   * @function destroy\n   * @returns {void}\n   */\n\n\n  DialogRenderer.prototype.destroy = function () {\n    if (this.parent.renderMode === 'Popup') {\n      this.unWireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n    }\n\n    if (this.deferUpdateCheckBox && !this.deferUpdateCheckBox.isDestroyed) {\n      this.deferUpdateCheckBox.destroy();\n      this.deferUpdateCheckBox = null;\n    }\n\n    if (this.deferUpdateApplyButton && !this.deferUpdateApplyButton.isDestroyed) {\n      this.deferUpdateApplyButton.destroy();\n      this.deferUpdateApplyButton = null;\n    }\n\n    if (this.deferUpdateCancelButton && !this.deferUpdateCancelButton.isDestroyed) {\n      this.deferUpdateCancelButton.destroy();\n      this.deferUpdateCancelButton = null;\n    }\n\n    if (this.parent.renderMode === 'Popup') {\n      if (this.fieldListDialog && !this.fieldListDialog.isDestroyed) {\n        this.fieldListDialog.destroy();\n        this.fieldListDialog = null;\n      }\n\n      if (document.getElementById(this.parent.element.id + '_Wrapper')) {\n        remove(document.getElementById(this.parent.element.id + '_Wrapper'));\n      }\n    }\n  };\n\n  return DialogRenderer;\n}();\n\nexport { DialogRenderer };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-pivotview/src/pivotfieldlist/renderer/dialog-renderer.js"],"names":["createElement","isNullOrUndefined","addClass","removeClass","closest","isBlazor","select","remove","EventHandler","setStyleAttribute","extend","cls","Dialog","Button","CheckBox","Tab","events","PivotUtil","DialogRenderer","parent","prototype","render","fieldListWrappper","id","element","className","WRAPPER_CLASS","dataType","OLAP_WRAPPER_CLASS","styles","style","width","isAdaptive","DEVICE","enableRtl","RTL","cssClass","parentElement","CONTAINER_CLASS","appendChild","removeAttribute","ADAPTIVE_CONTAINER_CLASS","renderAdaptiveLayout","renderMode","renderFieldListDialog","unWireDialogEvent","querySelector","TOGGLE_FIELD_LIST_CLASS","wireDialogEvent","renderStaticLayout","layoutHeader","FIELD_LIST_TITLE_CLASS","headerContent","FIELD_LIST_TITLE_CONTENT_CLASS","innerHTML","localeObj","getConstant","createCalculatedButton","STATIC_FIELD_LIST_CLASS","allowDeferLayoutUpdate","createDeferUpdateButtons","renderDeferUpdateButtons","deferUpdateCheckBox","label","checked","locale","change","onCheckChange","bind","isStringTemplate","appendTo","deferUpdateApplyButton","DEFER_APPLY_BUTTON","DEFER_UPDATE_BUTTON","BUTTON_FLAT_CLASS","content","isPrimary","onclick","applyButtonClick","onDeferUpdateClick","deferUpdateCancelButton","DEFER_CANCEL_BUTTON","CANCEL_BUTTON_CLASS","cancelButtonClick","onCloseFieldList","layoutFooter","LAYOUT_FOOTER","checkBoxLayout","CHECKBOX_LAYOUT","attrs","buttonLayout","BUTTON_LAYOUT","deferUpdateButton1","deferUpdateButton2","args","clonedDataSource","dataSourceSettings","clonedFieldList","pivotFieldList","setProperties","disabled","display","getModuleName","pivotChange","updateDataSource","axisFieldModule","isPopupView","updateDataSourceSettings","getClonedDataSourceSettings","properties","olapEngineModule","fieldList","_i","_a","Object","keys","length","name_1","item","updateFieldlistData","isSelected","engineModule","toggleFieldList","ICON","TOGGLE_SELECT_CLASS","title","headerTemplate","TITLE_MOBILE_HEADER","BACK_ICON","TITLE_MOBILE_CONTENT","buttons","click","showFieldListDialog","buttonModel","ADAPTIVE_FIELD_LIST_BUTTON_CLASS","BUTTON_SMALL_CLASS","BUTTON_ROUND_CLASS","iconCss","ADD_ICON_CLASS","showCalculatedField","ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS","ICON_DISABLE","fieldListDialog","animationSettings","effect","header","isModal","showCloseIcon","visible","allowDragging","closeOnEscape","height","position","X","Y","target","document","body","close","removeFieldListIcon","open","dialogOpen","footer","FOOTER_CONTENT_CLASS","FIELD_LIST_FOOTER_CLASS","template","outerHTML","TITLE_HEADER_CLASS","TITLE_CONTENT_CLASS","offsetTop","footerTemplate","adaptiveElement","refresh","selectedNodes","axis","selectedNodes_1","field","fieldName","droppedClass","selectedItem","pivotCommon","dataSourceUpdate","control","pivotGridModule","triggerPopulateEvent","dialogRenderer","hide","items","createAxisTable","allowCalculatedField","pop","heightAdjustMode","selected","tabSelect","createAddButton","e","fieldWrapper","selectedIndex","dataBind","notify","initCalculatedField","calculatedButton","calculateField","CALCULATED_FIELD_CLASS","calculatedFieldModule","footerContainer","fieldListButton","axisWrapper","FIELD_LIST_CLASS","axisContent","AXIS_CONTENT_CLASS","axisPrompt","AXIS_PROMPT_CLASS","event","ICON_HIDDEN","activeindex","treeViewModule","onShowFieldList","show","top","parseInt","uiUpdate","contentReady","updateAdaptiveCalculatedField","edit","getElementById","keyPress","keyCode","preventDefault","add","destroy","isDestroyed"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,iBAAxB,EAA2CC,QAA3C,EAAqDC,WAArD,EAAkEC,OAAlE,EAA2EC,QAA3E,EAAqFC,MAArF,EAA6FC,MAA7F,QAA2G,sBAA3G;AACA,SAASC,YAAT,EAAuBC,iBAAvB,EAA0CC,MAA1C,QAAwD,sBAAxD;AACA,OAAO,KAAKC,GAAZ,MAAqB,gCAArB;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,yBAAjC;AACA,SAASC,GAAT,QAAoB,6BAApB;AACA,OAAO,KAAKC,MAAZ,MAAwB,4BAAxB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA;AACA;AACA;;AACA;;AACA,IAAIC,cAAc,GAAkB,YAAY;AAC5C;AACJ;AACA;AACI,WAASA,cAAT,CAAwBC,MAAxB,EAAgC;AAC5B,SAAKA,MAAL,GAAcA,MAAd;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACID,EAAAA,cAAc,CAACE,SAAf,CAAyBC,MAAzB,GAAkC,YAAY;AAC1C,QAAIC,iBAAiB,GAAGtB,aAAa,CAAC,KAAD,EAAQ;AACzCuB,MAAAA,EAAE,EAAE,KAAKJ,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,UADY;AAEzCE,MAAAA,SAAS,EAAEd,GAAG,CAACe,aAAJ,GAAoB,GAApB,IAA2B,KAAKP,MAAL,CAAYQ,QAAZ,KAAyB,MAAzB,GAAkChB,GAAG,CAACiB,kBAAtC,GAA2D,EAAtF,CAF8B;AAGzCC,MAAAA,MAAM,EAAE,WAAW,KAAKV,MAAL,CAAYK,OAAZ,CAAoBM,KAApB,CAA0BC;AAHJ,KAAR,CAArC;;AAKA,QAAI,KAAKZ,MAAL,CAAYa,UAAhB,EAA4B;AACxB9B,MAAAA,QAAQ,CAAC,CAACoB,iBAAD,CAAD,EAAsBX,GAAG,CAACsB,MAA1B,CAAR;AACH,KAFD,MAGK;AACD9B,MAAAA,WAAW,CAAC,CAACmB,iBAAD,CAAD,EAAsBX,GAAG,CAACsB,MAA1B,CAAX;AACH;;AACD,QAAI,KAAKd,MAAL,CAAYe,SAAhB,EAA2B;AACvBhC,MAAAA,QAAQ,CAAC,CAACoB,iBAAD,CAAD,EAAsBX,GAAG,CAACwB,GAA1B,CAAR;AACH,KAFD,MAGK;AACDhC,MAAAA,WAAW,CAAC,CAACmB,iBAAD,CAAD,EAAsBX,GAAG,CAACwB,GAA1B,CAAX;AACH;;AACD,QAAI,KAAKhB,MAAL,CAAYiB,QAAhB,EAA0B;AACtBlC,MAAAA,QAAQ,CAAC,CAACoB,iBAAD,CAAD,EAAsB,KAAKH,MAAL,CAAYiB,QAAlC,CAAR;AACH;;AACD,SAAKC,aAAL,GAAqBrC,aAAa,CAAC,KAAD,EAAQ;AAAEyB,MAAAA,SAAS,EAAEd,GAAG,CAAC2B;AAAjB,KAAR,CAAlC;AACA,SAAKnB,MAAL,CAAYK,OAAZ,CAAoBe,WAApB,CAAgCjB,iBAAhC;;AACA,QAAI,KAAKH,MAAL,CAAYa,UAAhB,EAA4B;AACxBV,MAAAA,iBAAiB,CAACkB,eAAlB,CAAkC,OAAlC;AACA,WAAKH,aAAL,GAAqBrC,aAAa,CAAC,KAAD,EAAQ;AAAEyB,QAAAA,SAAS,EAAEd,GAAG,CAAC8B;AAAjB,OAAR,CAAlC;AACA,WAAKC,oBAAL,CAA0BpB,iBAA1B;AACH;;AACD,QAAI,KAAKH,MAAL,CAAYwB,UAAZ,KAA2B,OAA/B,EAAwC;AACpC,WAAKC,qBAAL,CAA2BtB,iBAA3B;AACA,WAAKuB,iBAAL,CAAuB,KAAK1B,MAAL,CAAYK,OAAZ,CAAoBsB,aAApB,CAAkC,MAAMnC,GAAG,CAACoC,uBAA5C,CAAvB;AACA,WAAKC,eAAL,CAAqB,KAAK7B,MAAL,CAAYK,OAAZ,CAAoBsB,aAApB,CAAkC,MAAMnC,GAAG,CAACoC,uBAA5C,CAArB;AACH,KAJD,MAKK;AACD,WAAKE,kBAAL,CAAwB3B,iBAAxB;AACH;AACJ,GApCD;;AAqCAJ,EAAAA,cAAc,CAACE,SAAf,CAAyB6B,kBAAzB,GAA8C,UAAU3B,iBAAV,EAA6B;AACvE,QAAI,CAAC,KAAKH,MAAL,CAAYa,UAAjB,EAA6B;AACzB,UAAIkB,YAAY,GAAGlD,aAAa,CAAC,KAAD,EAAQ;AACpCyB,QAAAA,SAAS,EAAEd,GAAG,CAACwC;AADqB,OAAR,CAAhC;AAGA,UAAIC,aAAa,GAAGpD,aAAa,CAAC,KAAD,EAAQ;AACrCyB,QAAAA,SAAS,EAAEd,GAAG,CAAC0C,8BADsB;AAErCC,QAAAA,SAAS,EAAE,KAAKnC,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,iBAAlC;AAF0B,OAAR,CAAjC;AAIAN,MAAAA,YAAY,CAACX,WAAb,CAAyBa,aAAzB;AACAF,MAAAA,YAAY,CAACX,WAAb,CAAyB,KAAKkB,sBAAL,EAAzB;AACAvD,MAAAA,QAAQ,CAAC,CAACoB,iBAAD,CAAD,EAAsBX,GAAG,CAAC+C,uBAA1B,CAAR;AACApC,MAAAA,iBAAiB,CAACiB,WAAlB,CAA8BW,YAA9B;AACA5B,MAAAA,iBAAiB,CAACiB,WAAlB,CAA8B,KAAKF,aAAnC;AACAnC,MAAAA,QAAQ,CAAC,CAACoB,iBAAD,CAAD,EAAsBX,GAAG,CAAC+C,uBAA1B,CAAR;;AACA,UAAI,KAAKvC,MAAL,CAAYwC,sBAAhB,EAAwC;AACpCrC,QAAAA,iBAAiB,CAACiB,WAAlB,CAA8B,KAAKqB,wBAAL,EAA9B;AACA,aAAKC,wBAAL;AACH;AACJ;AACJ,GApBD;;AAqBA3C,EAAAA,cAAc,CAACE,SAAf,CAAyByC,wBAAzB,GAAoD,YAAY;AAC5D,QAAI,KAAK1C,MAAL,CAAYwC,sBAAhB,EAAwC;AACpC,WAAKG,mBAAL,GAA2B,IAAIhD,QAAJ,CAAa;AACpCiD,QAAAA,KAAK,EAAE,KAAK5C,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,mBAAlC,CAD6B;AAEpCQ,QAAAA,OAAO,EAAE,IAF2B;AAGpC9B,QAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAHa;AAIpC+B,QAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C,MAJgB;AAKpCC,QAAAA,MAAM,EAAE,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB;AAL4B,OAAb,CAA3B;AAOA,WAAKN,mBAAL,CAAyBO,gBAAzB,GAA4C,IAA5C;AACA,WAAKP,mBAAL,CAAyBQ,QAAzB,CAAkC,MAAM,KAAKnD,MAAL,CAAYK,OAAZ,CAAoBD,EAA1B,GAA+B,qBAAjE;AACA,WAAKgD,sBAAL,GAA8B,IAAI1D,MAAJ,CAAW;AACrCuB,QAAAA,QAAQ,EAAEzB,GAAG,CAAC6D,kBAAJ,GAAyB,GAAzB,GAA+B7D,GAAG,CAAC8D,mBAAnC,IAA0D,KAAKtD,MAAL,CAAYwB,UAAZ,KAA2B,OAA3B,GAC/D,MAAMhC,GAAG,CAAC+D,iBADqD,GAChC,EAD1B,CAD2B;AAGrCC,QAAAA,OAAO,EAAE,KAAKxD,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,OAAlC,CAH4B;AAIrCtB,QAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAJc;AAKrC+B,QAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C,MALiB;AAMrCW,QAAAA,SAAS,EAAE;AAN0B,OAAX,CAA9B;AAQA,WAAKL,sBAAL,CAA4BF,gBAA5B,GAA+C,IAA/C;AACA,WAAKE,sBAAL,CAA4BD,QAA5B,CAAqC,MAAM,KAAKnD,MAAL,CAAYK,OAAZ,CAAoBD,EAA1B,GAA+B,qBAApE;AACA,WAAKgD,sBAAL,CAA4B/C,OAA5B,CAAoCqD,OAApC,GAA8C,KAAK1D,MAAL,CAAYwB,UAAZ,KAA2B,OAA3B,GAAqC,KAAKmC,gBAAL,CAAsBV,IAAtB,CAA2B,IAA3B,CAArC,GAC1C,KAAKW,kBAAL,CAAwBX,IAAxB,CAA6B,IAA7B,CADJ;AAEH;;AACD,SAAKY,uBAAL,GAA+B,IAAInE,MAAJ,CAAW;AACtCuB,MAAAA,QAAQ,EAAEzB,GAAG,CAACsE,mBAAJ,GAA0B,GAA1B,GAAgCtE,GAAG,CAACuE,mBAApC,IAA2D,KAAK/D,MAAL,CAAYwB,UAAZ,KAA2B,OAA3B,GAChE,MAAMhC,GAAG,CAAC+D,iBADsD,GACjC,EAD1B,CAD4B;AAGtCC,MAAAA,OAAO,EAAE,KAAKxD,MAAL,CAAYwC,sBAAZ,GAAqC,KAAKxC,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,QAAlC,CAArC,GACL,KAAKrC,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,OAAlC,CAJkC;AAKtCtB,MAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SALe;AAKJ0C,MAAAA,SAAS,EAAE,CAAC,KAAKzD,MAAL,CAAYwC,sBALpB;AAK4CM,MAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C;AALhE,KAAX,CAA/B;AAOA,SAAKe,uBAAL,CAA6BX,gBAA7B,GAAgD,IAAhD;AACA,SAAKW,uBAAL,CAA6BV,QAA7B,CAAsC,MAAM,KAAKnD,MAAL,CAAYK,OAAZ,CAAoBD,EAA1B,GAA+B,qBAArE;AACA,SAAKyD,uBAAL,CAA6BxD,OAA7B,CAAqCqD,OAArC,GAA+C,KAAK1D,MAAL,CAAYwB,UAAZ,KAA2B,OAA3B,GAAqC,KAAKwC,iBAAL,CAAuBf,IAAvB,CAA4B,IAA5B,CAArC,GAC3C,KAAKgB,gBAAL,CAAsBhB,IAAtB,CAA2B,IAA3B,CADJ;AAEH,GAnCD;;AAoCAlD,EAAAA,cAAc,CAACE,SAAf,CAAyBwC,wBAAzB,GAAoD,YAAY;AAC5D,QAAIyB,YAAY,GAAGrF,aAAa,CAAC,KAAD,EAAQ;AACpCyB,MAAAA,SAAS,EAAEd,GAAG,CAAC2E;AADqB,KAAR,CAAhC;;AAGA,QAAI,KAAKnE,MAAL,CAAYwC,sBAAhB,EAAwC;AACpC,UAAI4B,cAAc,GAAGvF,aAAa,CAAC,KAAD,EAAQ;AACtCyB,QAAAA,SAAS,EAAEd,GAAG,CAAC6E,eADuB;AAEtCC,QAAAA,KAAK,EAAE;AAAE,mBAAS,KAAKtE,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,mBAAlC;AAAX;AAF+B,OAAR,CAAlC;AAIA,UAAIM,mBAAmB,GAAG9D,aAAa,CAAC,OAAD,EAAU;AAC7CuB,QAAAA,EAAE,EAAE,KAAKJ,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB;AADgB,OAAV,CAAvC;AAGAgE,MAAAA,cAAc,CAAChD,WAAf,CAA2BuB,mBAA3B;AACAuB,MAAAA,YAAY,CAAC9C,WAAb,CAAyBgD,cAAzB;AACH;;AACD,QAAIG,YAAY,GAAG1F,aAAa,CAAC,KAAD,EAAQ;AACpCyB,MAAAA,SAAS,EAAEd,GAAG,CAACgF;AADqB,KAAR,CAAhC;;AAGA,QAAI,KAAKxE,MAAL,CAAYwC,sBAAhB,EAAwC;AACpC,UAAIiC,kBAAkB,GAAG5F,aAAa,CAAC,QAAD,EAAW;AAC7CuB,QAAAA,EAAE,EAAE,KAAKJ,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,qBADgB;AACOkE,QAAAA,KAAK,EAAE;AAAE,kBAAQ,QAAV;AAAoB,mBAAS,KAAKtE,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,OAAlC;AAA7B;AADd,OAAX,CAAtC;AAGAkC,MAAAA,YAAY,CAACnD,WAAb,CAAyBqD,kBAAzB;AACH;;AACD,QAAIC,kBAAkB,GAAG7F,aAAa,CAAC,QAAD,EAAW;AAC7CuB,MAAAA,EAAE,EAAE,KAAKJ,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,qBADgB;AACOkE,MAAAA,KAAK,EAAE;AAAE,gBAAQ,QAAV;AAAoB,iBAAS,KAAKtE,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,QAAlC;AAA7B;AADd,KAAX,CAAtC;AAGAkC,IAAAA,YAAY,CAACnD,WAAb,CAAyBsD,kBAAzB;AACAR,IAAAA,YAAY,CAAC9C,WAAb,CAAyBmD,YAAzB;AACA,WAAOL,YAAP;AACH,GA9BD;;AA+BAnE,EAAAA,cAAc,CAACE,SAAf,CAAyB+C,aAAzB,GAAyC,UAAU2B,IAAV,EAAgB;AACrD,QAAIA,IAAI,CAAC9B,OAAT,EAAkB;AACd,WAAK7C,MAAL,CAAY4E,gBAAZ,GAA+BrF,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY6E,kBAAjB,EAAqC,IAArC,EAA2C,IAA3C,CAArC;AACA,WAAK7E,MAAL,CAAY8E,eAAZ,GAA8BvF,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY+E,cAAjB,EAAiC,IAAjC,EAAuC,IAAvC,CAApC;AACH;;AACD,SAAK/E,MAAL,CAAYwC,sBAAZ,GAAqC,CAAC,KAAKxC,MAAL,CAAYwC,sBAAlD;;AACA,QAAI,KAAKxC,MAAL,CAAYwB,UAAZ,KAA2B,OAA/B,EAAwC;AACpC,WAAK4B,sBAAL,CAA4B4B,aAA5B,CAA0C;AAAEC,QAAAA,QAAQ,EAAE,CAAC,KAAKjF,MAAL,CAAYwC;AAAzB,OAA1C;AACA,WAAKqB,uBAAL,CAA6BmB,aAA7B,CAA2C;AAAEC,QAAAA,QAAQ,EAAE,CAAC,KAAKjF,MAAL,CAAYwC;AAAzB,OAA3C;AACH,KAHD,MAIK;AACD,UAAI,KAAKxC,MAAL,CAAYwC,sBAAhB,EAAwC;AACpC,aAAKY,sBAAL,CAA4B/C,OAA5B,CAAoCM,KAApC,CAA0CuE,OAA1C,GAAoD,EAApD;AACA,aAAKrB,uBAAL,CAA6BmB,aAA7B,CAA2C;AAAExB,UAAAA,OAAO,EAAE,KAAKxD,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,QAAlC;AAAX,SAA3C;AACA,aAAKwB,uBAAL,CAA6BJ,SAA7B,GAAyC,KAAzC;AACH,OAJD,MAKK;AACD,aAAKL,sBAAL,CAA4B/C,OAA5B,CAAoCM,KAApC,CAA0CuE,OAA1C,GAAoD,MAApD;AACA,aAAKrB,uBAAL,CAA6BmB,aAA7B,CAA2C;AAAExB,UAAAA,OAAO,EAAE,KAAKxD,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,OAAlC;AAAX,SAA3C;AACA,aAAKwB,uBAAL,CAA6BJ,SAA7B,GAAyC,IAAzC;AACH;AACJ;;AACD,SAAKO,iBAAL;AACH,GAvBD;;AAwBAjE,EAAAA,cAAc,CAACE,SAAf,CAAyB0D,gBAAzB,GAA4C,YAAY;AACpD,QAAI,KAAK3D,MAAL,CAAYmF,aAAZ,OAAgC,gBAAhC,IAAoD,KAAKnF,MAAL,CAAYwC,sBAApE,EAA4F;AACxF,WAAKxC,MAAL,CAAYoF,WAAZ,GAA0B,KAA1B;AACH;;AACD,SAAKpF,MAAL,CAAYqF,gBAAZ,CAA6B,KAA7B;AACA,QAAIrF,MAAM,GAAG,KAAKA,MAAlB;AACAA,IAAAA,MAAM,CAACsF,eAAP,CAAuBpF,MAAvB;AACAF,IAAAA,MAAM,CAAC4E,gBAAP,GAA0BrF,MAAM,CAAC,EAAD,EAAKS,MAAM,CAAC6E,kBAAZ,EAAgC,IAAhC,EAAsC,IAAtC,CAAhC;AACA7E,IAAAA,MAAM,CAAC8E,eAAP,GAAyBvF,MAAM,CAAC,EAAD,EAAKS,MAAM,CAAC+E,cAAZ,EAA4B,IAA5B,EAAkC,IAAlC,CAA/B;AACH,GATD;;AAUAhF,EAAAA,cAAc,CAACE,SAAf,CAAyB+D,iBAAzB,GAA6C,YAAY;AACrD,QAAI9E,QAAQ,MAAM,CAAC,KAAKc,MAAL,CAAYuF,WAA/B,EAA4C;AACxCzF,MAAAA,SAAS,CAAC0F,wBAAV,CAAmC,KAAKxF,MAAxC,EAAgDF,SAAS,CAAC2F,2BAAV,CAAsC,KAAKzF,MAAL,CAAY4E,gBAAZ,CAA6Bc,UAAnE,CAAhD;AAAiI;AACpI,KAFD,MAGK;AACD,WAAK1F,MAAL,CACIgF,aADJ,CACkB;AACdH,QAAAA,kBAAkB,EAAE,KAAK7E,MAAL,CAAY4E,gBAAZ,CAA6Bc;AAAW;;AAD9C,OADlB,EAGG,IAHH;AAIH;AACD;;;AACA,QAAI,KAAK1F,MAAL,CAAYQ,QAAZ,KAAyB,MAA7B,EAAqC;AACjC,WAAKR,MAAL,CAAY2F,gBAAZ,CAA6BC,SAA7B,GAAyCrG,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY8E,eAAjB,EAAkC,IAAlC,EAAwC,IAAxC,CAA/C;;AACA,WAAK,IAAIe,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGC,MAAM,CAACC,IAAP,CAAY,KAAKhG,MAAL,CAAY8E,eAAxB,CAAtB,EAAgEe,EAAE,GAAGC,EAAE,CAACG,MAAxE,EAAgFJ,EAAE,EAAlF,EAAsF;AAClF,YAAIK,MAAM,GAAGJ,EAAE,CAACD,EAAD,CAAf;AACA,YAAIM,IAAI,GAAG,KAAKnG,MAAL,CAAY8E,eAAZ,CAA4BoB,MAA5B,CAAX;AACA,aAAKlG,MAAL,CAAY2F,gBAAZ,CAA6BS,mBAA7B,CAAiDD,IAAI,CAAC/F,EAAtD,EAA0D+F,IAAI,CAACE,UAA/D;AACH;AACJ,KAPD,MAQK;AACD,WAAKrG,MAAL,CAAYsG,YAAZ,CAAyBV,SAAzB,GAAqCrG,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY8E,eAAjB,EAAkC,IAAlC,EAAwC,IAAxC,CAA3C;AACH;;AACD,SAAK9E,MAAL,CAAYqF,gBAAZ,CAA6B,KAA7B,EAAoC,IAApC;AACH,GAvBD;;AAwBAtF,EAAAA,cAAc,CAACE,SAAf,CAAyBwB,qBAAzB,GAAiD,UAAUtB,iBAAV,EAA6B;AAC1E,QAAIoG,eAAe,GAAG1H,aAAa,CAAC,KAAD,EAAQ;AACvCyB,MAAAA,SAAS,EAAEd,GAAG,CAACoC,uBAAJ,GAA8B,GAA9B,GAAoCpC,GAAG,CAACgH,IAAxC,GAA+C,GAA/C,GAAqDhH,GAAG,CAACiH,mBAD7B;AAEvCnC,MAAAA,KAAK,EAAE;AACH,oBAAY,GADT;AAEHoC,QAAAA,KAAK,EAAE,KAAK1G,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,WAAlC,CAFJ;AAGH,yBAAiB,OAHd;AAIH,sBAAc,KAAKrC,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,WAAlC;AAJX;AAFgC,KAAR,CAAnC;AASA,SAAKrC,MAAL,CAAYK,OAAZ,CAAoBe,WAApB,CAAgCmF,eAAhC;;AACA,QAAI,KAAKvG,MAAL,CAAYa,UAAhB,EAA4B;AACxB,UAAI8F,cAAc,GAAG,gBAAgBnH,GAAG,CAACoH,mBAApB,GAA0C,gBAA1C,GAA6DpH,GAAG,CAACgH,IAAjE,GAAwE,GAAxE,GACjBhH,GAAG,CAACqH,SADa,GACD,sBADC,GACwBrH,GAAG,CAACsH,oBAD5B,GACmD,GADnD,GACyD,KAAK9G,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,WAAlC,CADzD,GAEjB,cAFJ;AAGA,UAAI0E,OAAO,GAAG,CAAC;AACPC,QAAAA,KAAK,EAAE,KAAKC,mBAAL,CAAyBhE,IAAzB,CAA8B,IAA9B,CADA;AAEPiE,QAAAA,WAAW,EAAE;AACTjG,UAAAA,QAAQ,EAAEzB,GAAG,CAAC2H,gCAAJ,GAAuC,GAAvC,GAA6C3H,GAAG,CAAC4H,kBAAjD,GAAsE,GAAtE,GAA4E5H,GAAG,CAAC6H,kBADjF;AAETC,UAAAA,OAAO,EAAE9H,GAAG,CAACgH,IAAJ,GAAW,GAAX,GAAiBhH,GAAG,CAAC+H,cAFrB;AAGT9D,UAAAA,SAAS,EAAE;AAHF;AAFN,OAAD,EAOP;AACCuD,QAAAA,KAAK,EAAE,KAAKQ,mBAAL,CAAyBvE,IAAzB,CAA8B,IAA9B,CADR;AAECiE,QAAAA,WAAW,EAAE;AACTjG,UAAAA,QAAQ,EAAEzB,GAAG,CAACiI,sCAAJ,GACN,GADM,GACAjI,GAAG,CAAC4H,kBADJ,GACyB,GADzB,GAC+B5H,GAAG,CAAC6H,kBADnC,GACwD,GADxD,GAC8D7H,GAAG,CAACkI,YAFnE;AAGTJ,UAAAA,OAAO,EAAE9H,GAAG,CAACgH,IAAJ,GAAW,GAAX,GAAiBhH,GAAG,CAAC+H,cAHrB;AAGqCxG,UAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAH5D;AAIT0C,UAAAA,SAAS,EAAE;AAJF;AAFd,OAPO,CAAd;AAgBA,WAAKkE,eAAL,GAAuB,IAAIlI,MAAJ,CAAW;AAC9BmI,QAAAA,iBAAiB,EAAE;AAAEC,UAAAA,MAAM,EAAE,KAAK7H,MAAL,CAAYe,SAAZ,GAAwB,YAAxB,GAAuC;AAAjD,SADW;AAE9B+G,QAAAA,MAAM,EAAEnB,cAFsB;AAG9BnD,QAAAA,OAAO,EAAE,KAAKtC,aAHgB;AAI9B6G,QAAAA,OAAO,EAAE,IAJqB;AAK9BC,QAAAA,aAAa,EAAE,KALe;AAM9BC,QAAAA,OAAO,EAAE,KANqB;AAO9BC,QAAAA,aAAa,EAAE,KAPe;AAQ9BC,QAAAA,aAAa,EAAE,KARe;AAS9BpH,QAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SATO;AAU9B+B,QAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C,MAVU;AAW9BlC,QAAAA,KAAK,EAAE,MAXuB;AAY9BwH,QAAAA,MAAM,EAAE,MAZsB;AAa9BC,QAAAA,QAAQ,EAAE;AAAEC,UAAAA,CAAC,EAAE,QAAL;AAAeC,UAAAA,CAAC,EAAE;AAAlB,SAboB;AAc9BxB,QAAAA,OAAO,EAAEA,OAdqB;AAe9ByB,QAAAA,MAAM,EAAEC,QAAQ,CAACC,IAfa;AAgB9BC,QAAAA,KAAK,EAAE,KAAKC,mBAAL,CAAyB3F,IAAzB,CAA8B,IAA9B,CAhBuB;AAiB9B4F,QAAAA,IAAI,EAAE,KAAKC,UAAL,CAAgB7F,IAAhB,CAAqB,IAArB;AAjBwB,OAAX,CAAvB;AAmBA,WAAK0E,eAAL,CAAqBzE,gBAArB,GAAwC,IAAxC;AACA,WAAKyE,eAAL,CAAqBxE,QAArB,CAA8BhD,iBAA9B,EAxCwB,CAyCxB;;AACAb,MAAAA,iBAAiB,CAACH,MAAM,CAAC,MAAMgB,iBAAiB,CAACC,EAAxB,GAA6B,iBAA9B,EAAiDD,iBAAjD,CAAP,EAA4E;AACzF,mBAAW;AAD8E,OAA5E,CAAjB;AAGA,UAAI4I,MAAM,GAAG5I,iBAAiB,CAACwB,aAAlB,CAAgC,MAAMnC,GAAG,CAACwJ,oBAA1C,CAAb;AACAjK,MAAAA,QAAQ,CAAC,CAACgK,MAAD,CAAD,EAAWvJ,GAAG,CAACyJ,uBAAf,CAAR;AACAjK,MAAAA,WAAW,CAAC,CAAC+J,MAAM,CAACpH,aAAP,CAAqB,MAAMnC,GAAG,CAACiI,sCAA/B,CAAD,CAAD,EAA2EjI,GAAG,CAAC+D,iBAA/E,CAAX;AACAvE,MAAAA,WAAW,CAAC,CAAC+J,MAAM,CAACpH,aAAP,CAAqB,MAAMnC,GAAG,CAAC2H,gCAA/B,CAAD,CAAD,EAAqE3H,GAAG,CAAC+D,iBAAzE,CAAX;AACA,WAAKoE,eAAL,CAAqBtH,OAArB,CAA6BsB,aAA7B,CAA2C,MAAMnC,GAAG,CAACqH,SAArD,EAAgEnD,OAAhE,GACI,KAAK1D,MAAL,CAAYwC,sBAAZ,GAAqC,KAAKoB,kBAAL,CAAwBX,IAAxB,CAA6B,IAA7B,CAArC,GAA0E,KAAKgB,gBAAL,CAAsBhB,IAAtB,CAA2B,IAA3B,CAD9E;AAEH,KAnDD,MAoDK;AACD,UAAIiG,QAAQ,GAAG,KAAKzG,wBAAL,GAAgC0G,SAA/C;AACA,UAAIxC,cAAc,GAAG,gBAAgBnH,GAAG,CAAC4J,kBAApB,GAAyC,cAAzC,GACjB5J,GAAG,CAAC6J,mBADa,GACS,GADT,GACe,KAAKrJ,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,WAAlC,CADf,GACgE,cADrF;AAEA,WAAKsF,eAAL,GAAuB,IAAIlI,MAAJ,CAAW;AAC9BmI,QAAAA,iBAAiB,EAAE;AAAEC,UAAAA,MAAM,EAAE;AAAV,SADW;AAE9BC,QAAAA,MAAM,EAAEnB,cAFsB;AAG9BnD,QAAAA,OAAO,EAAE,KAAKtC,aAHgB;AAI9B6G,QAAAA,OAAO,EAAE,KAJqB;AAK9BC,QAAAA,aAAa,EAAE,KALe;AAM9BC,QAAAA,OAAO,EAAE,KANqB;AAO9BC,QAAAA,aAAa,EAAE,IAPe;AAQ9BnH,QAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SARO;AAS9B+B,QAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C,MATU;AAU9BlC,QAAAA,KAAK,EAAE,KAAKZ,MAAL,CAAYK,OAAZ,CAAoBM,KAApB,CAA0BC,KAVH;AAW9ByH,QAAAA,QAAQ,EAAE;AAAEC,UAAAA,CAAC,EAAE,QAAL;AAAeC,UAAAA,CAAC,EAAE,KAAKvI,MAAL,CAAYK,OAAZ,CAAoBiJ;AAAtC,SAXoB;AAY9BC,QAAAA,cAAc,EAAEL,QAZc;AAa9Bf,QAAAA,aAAa,EAAE,KAbe;AAc9BK,QAAAA,MAAM,EAAE,CAAC1J,iBAAiB,CAAC,KAAKkB,MAAL,CAAYwI,MAAb,CAAlB,GAA2C,OAAO,KAAKxI,MAAL,CAAYwI,MAApB,KAAgC,QAAjC,GAC7CC,QAAQ,CAAC9G,aAAT,CAAuB,KAAK3B,MAAL,CAAYwI,MAAnC,CAD6C,GACA,KAAKxI,MAAL,CAAYwI,MADrD,GAC8DC,QAAQ,CAACC,IAfjD;AAgB9BC,QAAAA,KAAK,EAAE,KAAKC,mBAAL,CAAyB3F,IAAzB,CAA8B,IAA9B;AAhBuB,OAAX,CAAvB;AAkBA,WAAK0E,eAAL,CAAqBzE,gBAArB,GAAwC,IAAxC;AACA,WAAKyE,eAAL,CAAqBxE,QAArB,CAA8BhD,iBAA9B,EAvBC,CAwBD;AACA;;AACA,WAAKuC,wBAAL;AACApD,MAAAA,iBAAiB,CAACH,MAAM,CAAC,MAAMgB,iBAAiB,CAACC,EAAxB,GAA6B,QAA9B,EAAwCD,iBAAxC,CAAP,EAAmE;AAAE,iBAAS;AAAX,OAAnE,CAAjB;AACAA,MAAAA,iBAAiB,CAACwB,aAAlB,CAAgC,MAAMnC,GAAG,CAAC4J,kBAA1C,EAA8DhI,WAA9D,CAA0E,KAAKkB,sBAAL,EAA1E;AACH;AACJ,GA7FD;;AA8FAvC,EAAAA,cAAc,CAACE,SAAf,CAAyB6I,UAAzB,GAAsC,YAAY;AAC9C,SAAKU,eAAL,CAAqBC,OAArB;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AACI1J,EAAAA,cAAc,CAACE,SAAf,CAAyBoF,gBAAzB,GAA4C,UAAUqE,aAAV,EAAyB;AACjE,QAAIC,IAAI,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,MAAvB,EAA+B,QAA/B,CAAX;;AACA,SAAK,IAAI9D,EAAE,GAAG,CAAT,EAAY+D,eAAe,GAAGF,aAAnC,EAAkD7D,EAAE,GAAG+D,eAAe,CAAC3D,MAAvE,EAA+EJ,EAAE,EAAjF,EAAqF;AACjF,UAAIgE,KAAK,GAAGD,eAAe,CAAC/D,EAAD,CAA3B;AACA,UAAIiE,SAAS,GAAGD,KAAhB;AACA,UAAIE,YAAY,GAAGJ,IAAI,CAAC,KAAKH,eAAL,CAAqBQ,YAAtB,CAAvB;AACA,WAAKhK,MAAL,CAAYiK,WAAZ,CAAwBC,gBAAxB,CAAyCC,OAAzC,GAAmD,KAAKnK,MAAL,CAAYmF,aAAZ,OAAgC,WAAhC,GAC/C,KAAKnF,MAD0C,GAChC,KAAKA,MAAL,CAAYoK,eAAZ,GACf,KAAKpK,MAAL,CAAYoK,eADG,GACe,KAAKpK,MAFvC;AAGA,WAAKA,MAAL,CAAYiK,WAAZ,CAAwBC,gBAAxB,CAAyC7E,gBAAzC,CAA0DyE,SAA1D,EAAqEC,YAArE,EAAmF,CAAC,CAApF;AACH;;AACD,SAAK/J,MAAL,CAAYsF,eAAZ,CAA4BpF,MAA5B;;AACA,QAAI,CAAC,KAAKF,MAAL,CAAYwC,sBAAjB,EAAyC;AACrC,WAAKxC,MAAL,CAAYqF,gBAAZ,CAA6B,IAA7B;AACH,KAFD,MAGK;AACD,WAAKrF,MAAL,CAAYqK,oBAAZ;AACH;AACJ,GAlBD;;AAmBAtK,EAAAA,cAAc,CAACE,SAAf,CAAyB2D,kBAAzB,GAA8C,YAAY;AACtD,SAAK5D,MAAL,CAAYqF,gBAAZ;AACA,SAAKrF,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2C4C,IAA3C;AACH,GAHD;;AAIAxK,EAAAA,cAAc,CAACE,SAAf,CAAyBsB,oBAAzB,GAAgD,UAAUpB,iBAAV,EAA6B;AACzE,QAAI+D,YAAY,GAAGrF,aAAa,CAAC,KAAD,EAAQ;AACpCyB,MAAAA,SAAS,EAAEd,GAAG,CAACyJ;AADqB,KAAR,CAAhC;AAGA9I,IAAAA,iBAAiB,CAACiB,WAAlB,CAA8B,KAAKF,aAAnC;AACA,QAAIsJ,KAAK,GAAG,CACR;AACI1C,MAAAA,MAAM,EAAE;AAAE,gBAAQ,KAAK9H,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,SAAlC;AAAV,OADZ;AAEImB,MAAAA,OAAO,EAAE,KAAKiH,eAAL,CAAqB,SAArB;AAFb,KADQ,EAKR;AACI3C,MAAAA,MAAM,EAAE;AAAE,gBAAQ,KAAK9H,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,SAAlC;AAAV,OADZ;AAEImB,MAAAA,OAAO,EAAE,KAAKiH,eAAL,CAAqB,SAArB;AAFb,KALQ,EASR;AACI3C,MAAAA,MAAM,EAAE;AAAE,gBAAQ,KAAK9H,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,MAAlC;AAAV,OADZ;AAEImB,MAAAA,OAAO,EAAE,KAAKiH,eAAL,CAAqB,MAArB;AAFb,KATQ,EAaR;AACI3C,MAAAA,MAAM,EAAE;AAAE,gBAAQ,KAAK9H,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,QAAlC;AAAV,OADZ;AAEImB,MAAAA,OAAO,EAAE,KAAKiH,eAAL,CAAqB,QAArB;AAFb,KAbQ,EAiBR;AACI3C,MAAAA,MAAM,EAAE;AAAE,gBAAQ,KAAK9H,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,uBAAlC;AAAV,OADZ;AAEImB,MAAAA,OAAO,EAAE;AAFb,KAjBQ,CAAZ;;AAsBA,QAAI,CAAC,KAAKxD,MAAL,CAAY0K,oBAAjB,EAAuC;AACnCF,MAAAA,KAAK,CAACG,GAAN;AACH;;AACD,SAAKnB,eAAL,GAAuB,IAAI5J,GAAJ,CAAQ;AAC3BgL,MAAAA,gBAAgB,EAAE,MADS;AAE3BJ,MAAAA,KAAK,EAAEA,KAFoB;AAG3BpC,MAAAA,MAAM,EAAE,MAHmB;AAI3BrH,MAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAJI;AAK3B+B,MAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C,MALO;AAM3B+H,MAAAA,QAAQ,EAAE,KAAKC,SAAL,CAAe7H,IAAf,CAAoB,IAApB;AANiB,KAAR,CAAvB;;AAQA,QAAI,KAAKjD,MAAL,CAAYwB,UAAZ,KAA2B,OAA/B,EAAwC;AACpC0C,MAAAA,YAAY,CAAC9C,WAAb,CAAyB,KAAK2J,eAAL,EAAzB;AACAhM,MAAAA,QAAQ,CAAC,CAACoB,iBAAD,CAAD,EAAsBX,GAAG,CAAC+C,uBAA1B,CAAR;AACA,WAAKiH,eAAL,CAAqBtG,gBAArB,GAAwC,IAAxC;AACA,WAAKsG,eAAL,CAAqBrG,QAArB,CAA8B,KAAKjC,aAAnC;AACA,WAAKA,aAAL,CAAmBE,WAAnB,CAA+B8C,YAA/B;AACH,KAND,MAOK;AACD,WAAKsF,eAAL,CAAqBtG,gBAArB,GAAwC,IAAxC;AACA,WAAKsG,eAAL,CAAqBrG,QAArB,CAA8B,KAAKjC,aAAnC;AACH;AACJ,GAjDD;;AAkDAnB,EAAAA,cAAc,CAACE,SAAf,CAAyB6K,SAAzB,GAAqC,UAAUE,CAAV,EAAa;AAC9C,QAAIC,YAAY,GAAGhM,OAAO,CAAC,KAAKiC,aAAN,EAAqB,MAAM1B,GAAG,CAACe,aAA/B,CAA1B;;AACA,QAAI0K,YAAY,IAAIA,YAAY,CAACtJ,aAAb,CAA2B,MAAMnC,GAAG,CAAC2H,gCAArC,CAApB,EAA4F;AACxF,UAAI6D,CAAC,CAACE,aAAF,KAAoB,CAAxB,EAA2B;AACvBnM,QAAAA,QAAQ,CAAC,CAACkM,YAAY,CAACtJ,aAAb,CAA2B,MAAMnC,GAAG,CAACiI,sCAArC,CAAD,CAAD,EAAiFjI,GAAG,CAACkI,YAArF,CAAR;AACA1I,QAAAA,WAAW,CAAC,CAACiM,YAAY,CAACtJ,aAAb,CAA2B,MAAMnC,GAAG,CAAC2H,gCAArC,CAAD,CAAD,EAA2E3H,GAAG,CAACkI,YAA/E,CAAX;AACH,OAHD,MAIK;AACD1I,QAAAA,WAAW,CAAC,CAACiM,YAAY,CAACtJ,aAAb,CAA2B,MAAMnC,GAAG,CAACiI,sCAArC,CAAD,CAAD,EAAiFjI,GAAG,CAACkI,YAArF,CAAX;AACA3I,QAAAA,QAAQ,CAAC,CAACkM,YAAY,CAACtJ,aAAb,CAA2B,MAAMnC,GAAG,CAAC2H,gCAArC,CAAD,CAAD,EAA2E3H,GAAG,CAACkI,YAA/E,CAAR;AACH;AACJ;;AACD,QAAIsD,CAAC,CAACE,aAAF,KAAoB,CAAxB,EAA2B;AACvB,WAAK1B,eAAL,CAAqBgB,KAArB,CAA2B,CAA3B,EAA8BhH,OAA9B,GAAwC,EAAxC;AACA,WAAKgG,eAAL,CAAqB2B,QAArB;AACA,WAAKnL,MAAL,CAAYoL,MAAZ,CAAmBvL,MAAM,CAACwL,mBAA1B,EAA+C,EAA/C;AACH,KAJD,MAKK;AACD,WAAKrL,MAAL,CAAYsF,eAAZ,CAA4BpF,MAA5B;AACH;AACJ,GApBD;;AAqBAH,EAAAA,cAAc,CAACE,SAAf,CAAyBqC,sBAAzB,GAAkD,YAAY;AAC1D,QAAIgJ,gBAAgB,GAAGzM,aAAa,CAAC,QAAD,EAAW;AAC3CuB,MAAAA,EAAE,EAAE,KAAKJ,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,kBADc;AAE3CkE,MAAAA,KAAK,EAAE;AACH,gBAAQ,QADL;AAEH,oBAAY,GAFT;AAGH,yBAAiB,OAHd;AAIH,sBAAc,KAAKtE,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,iBAAlC;AAJX;AAFoC,KAAX,CAApC;AASA,QAAIkJ,cAAc,GAAG,IAAI7L,MAAJ,CAAW;AAC5BuB,MAAAA,QAAQ,EAAEzB,GAAG,CAACgM,sBAAJ,GAA6B,GAA7B,GAAmChM,GAAG,CAACkI,YADrB;AAE5BlE,MAAAA,OAAO,EAAE,KAAKxD,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,iBAAlC,CAFmB;AAG5BtB,MAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAHK;AAGM+B,MAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C;AAH1B,KAAX,CAArB;AAKAyI,IAAAA,cAAc,CAACrI,gBAAf,GAAkC,IAAlC;AACAqI,IAAAA,cAAc,CAACpI,QAAf,CAAwBmI,gBAAxB;;AACA,QAAI,KAAKtL,MAAL,CAAYyL,qBAAhB,EAAuC;AACnCzM,MAAAA,WAAW,CAAC,CAACsM,gBAAD,CAAD,EAAqB9L,GAAG,CAACkI,YAAzB,CAAX;AACH;;AACD6D,IAAAA,cAAc,CAAClL,OAAf,CAAuBqD,OAAvB,GAAiC,KAAK8D,mBAAL,CAAyBvE,IAAzB,CAA8B,IAA9B,CAAjC;AACA,WAAOqI,gBAAP;AACH,GAtBD;;AAuBAvL,EAAAA,cAAc,CAACE,SAAf,CAAyB8K,eAAzB,GAA2C,YAAY;AACnD,QAAIW,eAAe,GAAG7M,aAAa,CAAC,KAAD,EAAQ;AACvCyB,MAAAA,SAAS,EAAEd,GAAG,CAACyJ,uBAAJ,GAA8B;AADF,KAAR,CAAnC;AAGA,QAAI0C,eAAe,GAAG9M,aAAa,CAAC,KAAD,EAAQ,EAAR,CAAnC;AACA,QAAIyM,gBAAgB,GAAGzM,aAAa,CAAC,KAAD,EAAQ,EAAR,CAApC;AACA,QAAI0M,cAAc,GAAG,IAAI7L,MAAJ,CAAW;AAC5BuB,MAAAA,QAAQ,EAAEzB,GAAG,CAACiI,sCAAJ,GACN,GADM,GACAjI,GAAG,CAAC4H,kBADJ,GACyB,GADzB,GAC+B5H,GAAG,CAAC6H,kBADnC,GACwD,GADxD,GAC8D7H,GAAG,CAACkI,YAFhD;AAG5BJ,MAAAA,OAAO,EAAE9H,GAAG,CAACgH,IAAJ,GAAW,GAAX,GAAiBhH,GAAG,CAAC+H,cAHF;AAI5BxG,MAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAJK;AAIM+B,MAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C;AAJ1B,KAAX,CAArB;AAMA,QAAI8C,SAAS,GAAG,IAAIlG,MAAJ,CAAW;AACvBuB,MAAAA,QAAQ,EAAEzB,GAAG,CAAC2H,gCAAJ,GAAuC,GAAvC,GAA6C3H,GAAG,CAAC4H,kBAAjD,GAAsE,GAAtE,GAA4E5H,GAAG,CAAC6H,kBADnE;AAEvBC,MAAAA,OAAO,EAAE9H,GAAG,CAACgH,IAAJ,GAAW,GAAX,GAAiBhH,GAAG,CAAC+H,cAFP;AAGvBxG,MAAAA,SAAS,EAAE,KAAKf,MAAL,CAAYe,SAHA;AAGW+B,MAAAA,MAAM,EAAE,KAAK9C,MAAL,CAAY8C;AAH/B,KAAX,CAAhB;AAKA8C,IAAAA,SAAS,CAAC1C,gBAAV,GAA6B,IAA7B;AACA0C,IAAAA,SAAS,CAACzC,QAAV,CAAmBwI,eAAnB;AACAJ,IAAAA,cAAc,CAACrI,gBAAf,GAAkC,IAAlC;AACAqI,IAAAA,cAAc,CAACpI,QAAf,CAAwBmI,gBAAxB;AACAI,IAAAA,eAAe,CAACtK,WAAhB,CAA4BuK,eAA5B;AACAD,IAAAA,eAAe,CAACtK,WAAhB,CAA4BkK,gBAA5B;AACAC,IAAAA,cAAc,CAAClL,OAAf,CAAuBqD,OAAvB,GAAiC,KAAK8D,mBAAL,CAAyBvE,IAAzB,CAA8B,IAA9B,CAAjC;AACA2C,IAAAA,SAAS,CAACvF,OAAV,CAAkBqD,OAAlB,GAA4B,KAAKuD,mBAAL,CAAyBhE,IAAzB,CAA8B,IAA9B,CAA5B;AACA,WAAOyI,eAAP;AACH,GA1BD;;AA2BA3L,EAAAA,cAAc,CAACE,SAAf,CAAyBwK,eAAzB,GAA2C,UAAUd,IAAV,EAAgB;AACvD,QAAIiC,WAAW,GAAG/M,aAAa,CAAC,KAAD,EAAQ;AACnCyB,MAAAA,SAAS,EAAEd,GAAG,CAACqM,gBAAJ,GAAuB,GAAvB,GAA6BlC;AADL,KAAR,CAA/B;AAGA,QAAImC,WAAW,GAAGjN,aAAa,CAAC,KAAD,EAAQ;AAAEyB,MAAAA,SAAS,EAAEd,GAAG,CAACuM,kBAAJ,GAAyB,GAAzB,GAA+B,IAA/B,GAAsCpC;AAAnD,KAAR,CAA/B;AACA,QAAIqC,UAAU,GAAGnN,aAAa,CAAC,MAAD,EAAS;AACnCyB,MAAAA,SAAS,EAAEd,GAAG,CAACyM,iBADoB;AAEnC9J,MAAAA,SAAS,EAAE,KAAKnC,MAAL,CAAYoC,SAAZ,CAAsBC,WAAtB,CAAkC,WAAlC;AAFwB,KAAT,CAA9B;AAIAuJ,IAAAA,WAAW,CAACxK,WAAZ,CAAwB0K,WAAxB;AACAF,IAAAA,WAAW,CAACxK,WAAZ,CAAwB4K,UAAxB;AACA,WAAOJ,WAAP;AACH,GAZD;;AAaA7L,EAAAA,cAAc,CAACE,SAAf,CAAyBuH,mBAAzB,GAA+C,UAAU0E,KAAV,EAAiB;AAC5D,QAAI,CAAC,KAAKlM,MAAL,CAAYa,UAAjB,EAA6B;AACzB,UAAI,KAAKb,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA/B,EAAgD;AAC5C,aAAK3H,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2C4C,IAA3C;AACAxL,QAAAA,QAAQ,CAAC,CAAC,KAAKiB,MAAL,CAAYK,OAAZ,CAAoBsB,aAApB,CAAkC,MAAMnC,GAAG,CAACoC,uBAA5C,CAAD,CAAD,EAAyEpC,GAAG,CAAC2M,WAA7E,CAAR;AACH;AACJ;;AACD,SAAKnM,MAAL,CAAYoL,MAAZ,CAAmBvL,MAAM,CAACwL,mBAA1B,EAA+C,EAA/C;AACH,GARD;;AASAtL,EAAAA,cAAc,CAACE,SAAf,CAAyBgH,mBAAzB,GAA+C,UAAUiF,KAAV,EAAiB;AAC5D,QAAIE,WAAW,GAAG,KAAK5C,eAAL,CAAqBQ,YAAvC;AACA,SAAKhK,MAAL,CAAYqM,cAAZ,CAA2BnM,MAA3B,CAAkCkM,WAAlC;AACH,GAHD;;AAIArM,EAAAA,cAAc,CAACE,SAAf,CAAyBqM,eAAzB,GAA2C,YAAY;AACnD,QAAI,KAAKtM,MAAL,CAAYwC,sBAAhB,EAAwC;AACpC,UAAI,KAAKxC,MAAL,CAAYa,UAAhB,EAA4B;AACxB,aAAKb,MAAL,CAAYsF,eAAZ,CAA4BpF,MAA5B;AACH;;AACD,WAAKF,MAAL,CAAY4E,gBAAZ,GAA+BrF,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY6E,kBAAjB,EAAqC,IAArC,EAA2C,IAA3C,CAArC;AACA,WAAK7E,MAAL,CAAY8E,eAAZ,GAA8BvF,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY+E,cAAjB,EAAiC,IAAjC,EAAuC,IAAvC,CAApC;AACH;;AACDhG,IAAAA,QAAQ,CAAC,CAAC,KAAKiB,MAAL,CAAYK,OAAZ,CAAoBsB,aAApB,CAAkC,MAAMnC,GAAG,CAACoC,uBAA5C,CAAD,CAAD,EAAyEpC,GAAG,CAAC2M,WAA7E,CAAR;AACA,SAAKnM,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2C4E,IAA3C;AACA,SAAKvM,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2CtH,OAA3C,CAAmDM,KAAnD,CAAyD6L,GAAzD,GACIC,QAAQ,CAAC,KAAKzM,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2CtH,OAA3C,CAAmDM,KAAnD,CAAyD6L,GAA1D,EAA+D,EAA/D,CAAR,GAA6E,CAA7E,GACI,KADJ,GACY,KAAKxM,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2CtH,OAA3C,CAAmDM,KAAnD,CAAyD6L,GAFzE;AAGH,GAbD;;AAcAzM,EAAAA,cAAc,CAACE,SAAf,CAAyBgE,gBAAzB,GAA4C,YAAY;AACpD,QAAI,KAAKjE,MAAL,CAAYwC,sBAAhB,EAAwC;AACpC,WAAKxC,MAAL,CAAY6E,kBAAZ,GACItF,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY4E,gBAAZ,CAA6Bc,UAAlC,EAA8C,IAA9C,EAAoD,IAApD,CADV;AACqE;;AACrE,UAAI,KAAK1F,MAAL,CAAYuF,WAAZ,IAA2B,KAAKvF,MAAL,CAAYoK,eAA3C,EAA4D;AACxD,aAAKpK,MAAL,CAAYoK,eAAZ,CAA4B9D,YAA5B,GAA2C,KAAKtG,MAAL,CAAYsG,YAAvD;AACA,aAAKtG,MAAL,CAAYoK,eAAZ,CAA4BzE,gBAA5B,GAA+C,KAAK3F,MAAL,CAAY2F,gBAA3D;AACA,aAAK3F,MAAL,CAAYoK,eAAZ,CACIpF,aADJ,CACkB;AACdH,UAAAA,kBAAkB,EAAE,KAAK7E,MAAL,CAAY4E,gBAAZ,CAA6Bc;AAAW;;AAD9C,SADlB,EAGG,IAHH;AAIH;;AACD,UAAIK,MAAM,CAACC,IAAP,CAAY,KAAKhG,MAAL,CAAY8E,eAAxB,EAAyCmB,MAAzC,GAAkD,CAAtD,EAAyD;AACrD,aAAKjG,MAAL,CAAYQ,QAAZ,KAAyB,MAAzB,GAAkC,KAAKR,MAAL,CAAY2F,gBAAZ,CAA6BC,SAA7B;AAAyC;AACvErG,QAAAA,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY8E,eAAjB,EAAkC,IAAlC,EAAwC,IAAxC,CADV,GAEI,KAAK9E,MAAL,CAAYsG,YAAZ,CAAyBV,SAAzB,GAAqCrG,MAAM,CAAC,EAAD,EAAK,KAAKS,MAAL,CAAY8E,eAAjB,EAAkC,IAAlC,EAAwC,IAAxC,CAF/C;AAGH;;AACD,UAAI,KAAK9E,MAAL,CAAYuF,WAAZ,IAA2B,KAAKvF,MAAL,CAAYoK,eAA3C,EAA4D;AACxD,aAAKpK,MAAL,CAAYoK,eAAZ,CAA4BgB,MAA5B,CAAmCvL,MAAM,CAAC6M,QAA1C,EAAoD,IAApD;AACA,aAAK1M,MAAL,CAAYoK,eAAZ,CAA4BgB,MAA5B,CAAmCvL,MAAM,CAAC8M,YAA1C,EAAwD,IAAxD;AACH,OAHD,MAIK;AACD,aAAK3I,iBAAL;AACH;AACJ;;AACD,SAAKhE,MAAL,CAAYsK,cAAZ,CAA2B3C,eAA3B,CAA2C4C,IAA3C;AACH,GA1BD;;AA2BAxK,EAAAA,cAAc,CAACE,SAAf,CAAyB2I,mBAAzB,GAA+C,YAAY;AACvD,QAAI,KAAK5I,MAAL,CAAYa,UAAZ,IAA0B,KAAKb,MAAL,CAAY0K,oBAAtC,IAA8D,KAAK1K,MAAL,CAAYyL,qBAA9E,EAAqG;AACjG,UAAI,KAAKjC,eAAL,IAAwB,KAAKA,eAAL,CAAqBQ,YAArB,KAAsC,CAAlE,EAAqE;AACjE,YAAI7K,MAAM,CAAC,MAAM,KAAKa,MAAL,CAAYK,OAAZ,CAAoBD,EAA1B,GAA+B,WAAhC,EAA6C,KAAKoJ,eAAL,CAAqBnJ,OAAlE,CAAV,EAAsF;AAClF;AACA,eAAKL,MAAL,CAAYyL,qBAAZ,CACKmB,6BADL,CACmC,KADnC;AAEA;AACH,SALD,MAMK;AACD,eAAK5M,MAAL,CAAYoL,MAAZ,CAAmBvL,MAAM,CAACwL,mBAA1B,EAA+C;AAAEwB,YAAAA,IAAI,EAAE;AAAR,WAA/C;AACH;AACJ;AACJ;;AACD,QAAI,CAACpE,QAAQ,CAACqE,cAAT,CAAwB,KAAK9M,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,kBAAjD,CAAL,EAA2E;AACvEpB,MAAAA,WAAW,CAAC,CAAC,KAAKgB,MAAL,CAAYK,OAAZ,CAAoBsB,aAApB,CAAkC,MAAMnC,GAAG,CAACoC,uBAA5C,CAAD,CAAD,EAAyEpC,GAAG,CAAC2M,WAA7E,CAAX;AACH;AACJ,GAjBD;;AAkBApM,EAAAA,cAAc,CAACE,SAAf,CAAyB8M,QAAzB,GAAoC,UAAU/B,CAAV,EAAa;AAC7C,QAAIA,CAAC,CAACgC,OAAF,KAAc,EAAd,IAAoBhC,CAAC,CAACxC,MAA1B,EAAkC;AAC9BwC,MAAAA,CAAC,CAACxC,MAAF,CAASxB,KAAT;AACAgE,MAAAA,CAAC,CAACiC,cAAF;AACA;AACH;AACJ,GAND;;AAOAlN,EAAAA,cAAc,CAACE,SAAf,CAAyB4B,eAAzB,GAA2C,UAAUxB,OAAV,EAAmB;AAC1DhB,IAAAA,YAAY,CAAC6N,GAAb,CAAiB7M,OAAjB,EAA0B,SAA1B,EAAqC,KAAK0M,QAA1C,EAAoD,IAApD;AACA1N,IAAAA,YAAY,CAAC6N,GAAb,CAAiB7M,OAAjB,EAA0B,OAA1B,EAAmC,KAAKiM,eAAxC,EAAyD,IAAzD;AACH,GAHD;;AAIAvM,EAAAA,cAAc,CAACE,SAAf,CAAyByB,iBAAzB,GAA6C,UAAUrB,OAAV,EAAmB;AAC5DhB,IAAAA,YAAY,CAACD,MAAb,CAAoBiB,OAApB,EAA6B,SAA7B,EAAwC,KAAK0M,QAA7C;AACA1N,IAAAA,YAAY,CAACD,MAAb,CAAoBiB,OAApB,EAA6B,OAA7B,EAAsC,KAAKiM,eAA3C;AACH,GAHD;AAIA;AACJ;AACA;AACA;AACA;;;AACIvM,EAAAA,cAAc,CAACE,SAAf,CAAyBkN,OAAzB,GAAmC,YAAY;AAC3C,QAAI,KAAKnN,MAAL,CAAYwB,UAAZ,KAA2B,OAA/B,EAAwC;AACpC,WAAKE,iBAAL,CAAuB,KAAK1B,MAAL,CAAYK,OAAZ,CAAoBsB,aAApB,CAAkC,MAAMnC,GAAG,CAACoC,uBAA5C,CAAvB;AACH;;AACD,QAAI,KAAKe,mBAAL,IAA4B,CAAC,KAAKA,mBAAL,CAAyByK,WAA1D,EAAuE;AACnE,WAAKzK,mBAAL,CAAyBwK,OAAzB;AACA,WAAKxK,mBAAL,GAA2B,IAA3B;AACH;;AACD,QAAI,KAAKS,sBAAL,IAA+B,CAAC,KAAKA,sBAAL,CAA4BgK,WAAhE,EAA6E;AACzE,WAAKhK,sBAAL,CAA4B+J,OAA5B;AACA,WAAK/J,sBAAL,GAA8B,IAA9B;AACH;;AACD,QAAI,KAAKS,uBAAL,IAAgC,CAAC,KAAKA,uBAAL,CAA6BuJ,WAAlE,EAA+E;AAC3E,WAAKvJ,uBAAL,CAA6BsJ,OAA7B;AACA,WAAKtJ,uBAAL,GAA+B,IAA/B;AACH;;AACD,QAAI,KAAK7D,MAAL,CAAYwB,UAAZ,KAA2B,OAA/B,EAAwC;AACpC,UAAI,KAAKmG,eAAL,IAAwB,CAAC,KAAKA,eAAL,CAAqByF,WAAlD,EAA+D;AAC3D,aAAKzF,eAAL,CAAqBwF,OAArB;AACA,aAAKxF,eAAL,GAAuB,IAAvB;AACH;;AACD,UAAIc,QAAQ,CAACqE,cAAT,CAAwB,KAAK9M,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,UAAjD,CAAJ,EAAkE;AAC9DhB,QAAAA,MAAM,CAACqJ,QAAQ,CAACqE,cAAT,CAAwB,KAAK9M,MAAL,CAAYK,OAAZ,CAAoBD,EAApB,GAAyB,UAAjD,CAAD,CAAN;AACH;AACJ;AACJ,GAzBD;;AA0BA,SAAOL,cAAP;AACH,CA9jBmC,EAApC;;AA+jBA,SAASA,cAAT","sourcesContent":["import { createElement, isNullOrUndefined, addClass, removeClass, closest, isBlazor, select, remove } from '@syncfusion/ej2-base';\nimport { EventHandler, setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Button, CheckBox } from '@syncfusion/ej2-buttons';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport * as events from '../../common/base/constant';\nimport { PivotUtil } from '../../base/util';\n/**\n * Module to render Pivot Field List Dialog\n */\n/** @hidden */\nvar DialogRenderer = /** @class */ (function () {\n    /** Constructor for render module\n     * @param {PivotFieldList} parent - Instance of field list.\n     */\n    function DialogRenderer(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Initialize the field list layout rendering\n     * @returns {void}\n     * @private\n     */\n    DialogRenderer.prototype.render = function () {\n        var fieldListWrappper = createElement('div', {\n            id: this.parent.element.id + '_Wrapper',\n            className: cls.WRAPPER_CLASS + ' ' + (this.parent.dataType === 'olap' ? cls.OLAP_WRAPPER_CLASS : ''),\n            styles: 'width:' + this.parent.element.style.width\n        });\n        if (this.parent.isAdaptive) {\n            addClass([fieldListWrappper], cls.DEVICE);\n        }\n        else {\n            removeClass([fieldListWrappper], cls.DEVICE);\n        }\n        if (this.parent.enableRtl) {\n            addClass([fieldListWrappper], cls.RTL);\n        }\n        else {\n            removeClass([fieldListWrappper], cls.RTL);\n        }\n        if (this.parent.cssClass) {\n            addClass([fieldListWrappper], this.parent.cssClass);\n        }\n        this.parentElement = createElement('div', { className: cls.CONTAINER_CLASS });\n        this.parent.element.appendChild(fieldListWrappper);\n        if (this.parent.isAdaptive) {\n            fieldListWrappper.removeAttribute('style');\n            this.parentElement = createElement('div', { className: cls.ADAPTIVE_CONTAINER_CLASS });\n            this.renderAdaptiveLayout(fieldListWrappper);\n        }\n        if (this.parent.renderMode === 'Popup') {\n            this.renderFieldListDialog(fieldListWrappper);\n            this.unWireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n            this.wireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n        }\n        else {\n            this.renderStaticLayout(fieldListWrappper);\n        }\n    };\n    DialogRenderer.prototype.renderStaticLayout = function (fieldListWrappper) {\n        if (!this.parent.isAdaptive) {\n            var layoutHeader = createElement('div', {\n                className: cls.FIELD_LIST_TITLE_CLASS\n            });\n            var headerContent = createElement('div', {\n                className: cls.FIELD_LIST_TITLE_CONTENT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('staticFieldList')\n            });\n            layoutHeader.appendChild(headerContent);\n            layoutHeader.appendChild(this.createCalculatedButton());\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            fieldListWrappper.appendChild(layoutHeader);\n            fieldListWrappper.appendChild(this.parentElement);\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            if (this.parent.allowDeferLayoutUpdate) {\n                fieldListWrappper.appendChild(this.createDeferUpdateButtons());\n                this.renderDeferUpdateButtons();\n            }\n        }\n    };\n    DialogRenderer.prototype.renderDeferUpdateButtons = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            this.deferUpdateCheckBox = new CheckBox({\n                label: this.parent.localeObj.getConstant('deferLayoutUpdate'),\n                checked: true,\n                enableRtl: this.parent.enableRtl,\n                locale: this.parent.locale,\n                change: this.onCheckChange.bind(this)\n            });\n            this.deferUpdateCheckBox.isStringTemplate = true;\n            this.deferUpdateCheckBox.appendTo('#' + this.parent.element.id + 'DeferUpdateCheckBox');\n            this.deferUpdateApplyButton = new Button({\n                cssClass: cls.DEFER_APPLY_BUTTON + ' ' + cls.DEFER_UPDATE_BUTTON + (this.parent.renderMode === 'Popup' ?\n                    (' ' + cls.BUTTON_FLAT_CLASS) : ''),\n                content: this.parent.localeObj.getConstant('apply'),\n                enableRtl: this.parent.enableRtl,\n                locale: this.parent.locale,\n                isPrimary: true\n            });\n            this.deferUpdateApplyButton.isStringTemplate = true;\n            this.deferUpdateApplyButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton1');\n            this.deferUpdateApplyButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.applyButtonClick.bind(this) :\n                this.onDeferUpdateClick.bind(this);\n        }\n        this.deferUpdateCancelButton = new Button({\n            cssClass: cls.DEFER_CANCEL_BUTTON + ' ' + cls.CANCEL_BUTTON_CLASS + (this.parent.renderMode === 'Popup' ?\n                (' ' + cls.BUTTON_FLAT_CLASS) : ''),\n            content: this.parent.allowDeferLayoutUpdate ? this.parent.localeObj.getConstant('cancel') :\n                this.parent.localeObj.getConstant('close'),\n            enableRtl: this.parent.enableRtl, isPrimary: !this.parent.allowDeferLayoutUpdate, locale: this.parent.locale\n        });\n        this.deferUpdateCancelButton.isStringTemplate = true;\n        this.deferUpdateCancelButton.appendTo('#' + this.parent.element.id + '_DeferUpdateButton2');\n        this.deferUpdateCancelButton.element.onclick = this.parent.renderMode === 'Fixed' ? this.cancelButtonClick.bind(this) :\n            this.onCloseFieldList.bind(this);\n    };\n    DialogRenderer.prototype.createDeferUpdateButtons = function () {\n        var layoutFooter = createElement('div', {\n            className: cls.LAYOUT_FOOTER\n        });\n        if (this.parent.allowDeferLayoutUpdate) {\n            var checkBoxLayout = createElement('div', {\n                className: cls.CHECKBOX_LAYOUT,\n                attrs: { 'title': this.parent.localeObj.getConstant('deferLayoutUpdate') }\n            });\n            var deferUpdateCheckBox = createElement('input', {\n                id: this.parent.element.id + 'DeferUpdateCheckBox'\n            });\n            checkBoxLayout.appendChild(deferUpdateCheckBox);\n            layoutFooter.appendChild(checkBoxLayout);\n        }\n        var buttonLayout = createElement('div', {\n            className: cls.BUTTON_LAYOUT\n        });\n        if (this.parent.allowDeferLayoutUpdate) {\n            var deferUpdateButton1 = createElement('button', {\n                id: this.parent.element.id + '_DeferUpdateButton1', attrs: { 'type': 'button', 'title': this.parent.localeObj.getConstant('apply') }\n            });\n            buttonLayout.appendChild(deferUpdateButton1);\n        }\n        var deferUpdateButton2 = createElement('button', {\n            id: this.parent.element.id + '_DeferUpdateButton2', attrs: { 'type': 'button', 'title': this.parent.localeObj.getConstant('cancel') }\n        });\n        buttonLayout.appendChild(deferUpdateButton2);\n        layoutFooter.appendChild(buttonLayout);\n        return layoutFooter;\n    };\n    DialogRenderer.prototype.onCheckChange = function (args) {\n        if (args.checked) {\n            this.parent.clonedDataSource = extend({}, this.parent.dataSourceSettings, null, true);\n            this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n        }\n        this.parent.allowDeferLayoutUpdate = !this.parent.allowDeferLayoutUpdate;\n        if (this.parent.renderMode === 'Fixed') {\n            this.deferUpdateApplyButton.setProperties({ disabled: !this.parent.allowDeferLayoutUpdate });\n            this.deferUpdateCancelButton.setProperties({ disabled: !this.parent.allowDeferLayoutUpdate });\n        }\n        else {\n            if (this.parent.allowDeferLayoutUpdate) {\n                this.deferUpdateApplyButton.element.style.display = '';\n                this.deferUpdateCancelButton.setProperties({ content: this.parent.localeObj.getConstant('cancel') });\n                this.deferUpdateCancelButton.isPrimary = false;\n            }\n            else {\n                this.deferUpdateApplyButton.element.style.display = 'none';\n                this.deferUpdateCancelButton.setProperties({ content: this.parent.localeObj.getConstant('close') });\n                this.deferUpdateCancelButton.isPrimary = true;\n            }\n        }\n        this.cancelButtonClick();\n    };\n    DialogRenderer.prototype.applyButtonClick = function () {\n        if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.allowDeferLayoutUpdate) {\n            this.parent.pivotChange = false;\n        }\n        this.parent.updateDataSource(false);\n        var parent = this.parent;\n        parent.axisFieldModule.render();\n        parent.clonedDataSource = extend({}, parent.dataSourceSettings, null, true);\n        parent.clonedFieldList = extend({}, parent.pivotFieldList, null, true);\n    };\n    DialogRenderer.prototype.cancelButtonClick = function () {\n        if (isBlazor() && !this.parent.isPopupView) {\n            PivotUtil.updateDataSourceSettings(this.parent, PivotUtil.getClonedDataSourceSettings(this.parent.clonedDataSource.properties)); /* eslint-disable-line */\n        }\n        else {\n            this.parent.\n                setProperties({\n                dataSourceSettings: this.parent.clonedDataSource.properties /* eslint-disable-line */\n            }, true);\n        }\n        /* eslint-enable @typescript-eslint/indent */\n        if (this.parent.dataType === 'olap') {\n            this.parent.olapEngineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n            for (var _i = 0, _a = Object.keys(this.parent.clonedFieldList); _i < _a.length; _i++) {\n                var name_1 = _a[_i];\n                var item = this.parent.clonedFieldList[name_1];\n                this.parent.olapEngineModule.updateFieldlistData(item.id, item.isSelected);\n            }\n        }\n        else {\n            this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n        }\n        this.parent.updateDataSource(false, true);\n    };\n    DialogRenderer.prototype.renderFieldListDialog = function (fieldListWrappper) {\n        var toggleFieldList = createElement('div', {\n            className: cls.TOGGLE_FIELD_LIST_CLASS + ' ' + cls.ICON + ' ' + cls.TOGGLE_SELECT_CLASS,\n            attrs: {\n                'tabindex': '0',\n                title: this.parent.localeObj.getConstant('fieldList'),\n                'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('fieldList')\n            }\n        });\n        this.parent.element.appendChild(toggleFieldList);\n        if (this.parent.isAdaptive) {\n            var headerTemplate = '<div class=' + cls.TITLE_MOBILE_HEADER + '><span class=\"' + cls.ICON + ' ' +\n                cls.BACK_ICON + '\"></span><div class=' + cls.TITLE_MOBILE_CONTENT + '>' + this.parent.localeObj.getConstant('fieldList') +\n                '</div></div>';\n            var buttons = [{\n                    click: this.showFieldListDialog.bind(this),\n                    buttonModel: {\n                        cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n                        iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n                        isPrimary: true\n                    }\n                }, {\n                    click: this.showCalculatedField.bind(this),\n                    buttonModel: {\n                        cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS +\n                            ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n                        iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS, enableRtl: this.parent.enableRtl,\n                        isPrimary: true\n                    }\n                }];\n            this.fieldListDialog = new Dialog({\n                animationSettings: { effect: this.parent.enableRtl ? 'SlideRight' : 'SlideLeft' },\n                header: headerTemplate,\n                content: this.parentElement,\n                isModal: true,\n                showCloseIcon: false,\n                visible: false,\n                allowDragging: false,\n                closeOnEscape: false,\n                enableRtl: this.parent.enableRtl,\n                locale: this.parent.locale,\n                width: '100%',\n                height: '100%',\n                position: { X: 'center', Y: 'center' },\n                buttons: buttons,\n                target: document.body,\n                close: this.removeFieldListIcon.bind(this),\n                open: this.dialogOpen.bind(this)\n            });\n            this.fieldListDialog.isStringTemplate = true;\n            this.fieldListDialog.appendTo(fieldListWrappper);\n            // this.fieldListDialog.element.querySelector('.e-dlg-header').innerHTML = headerTemplate;\n            setStyleAttribute(select('#' + fieldListWrappper.id + '_dialog-content', fieldListWrappper), {\n                'padding': '0'\n            });\n            var footer = fieldListWrappper.querySelector('.' + cls.FOOTER_CONTENT_CLASS);\n            addClass([footer], cls.FIELD_LIST_FOOTER_CLASS);\n            removeClass([footer.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n            removeClass([footer.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.BUTTON_FLAT_CLASS);\n            this.fieldListDialog.element.querySelector('.' + cls.BACK_ICON).onclick =\n                this.parent.allowDeferLayoutUpdate ? this.onDeferUpdateClick.bind(this) : this.onCloseFieldList.bind(this);\n        }\n        else {\n            var template = this.createDeferUpdateButtons().outerHTML;\n            var headerTemplate = '<div class=' + cls.TITLE_HEADER_CLASS + '><div class=' +\n                cls.TITLE_CONTENT_CLASS + '>' + this.parent.localeObj.getConstant('fieldList') + '</div></div>';\n            this.fieldListDialog = new Dialog({\n                animationSettings: { effect: 'Zoom' },\n                header: headerTemplate,\n                content: this.parentElement,\n                isModal: false,\n                showCloseIcon: false,\n                visible: false,\n                allowDragging: true,\n                enableRtl: this.parent.enableRtl,\n                locale: this.parent.locale,\n                width: this.parent.element.style.width,\n                position: { X: 'center', Y: this.parent.element.offsetTop },\n                footerTemplate: template,\n                closeOnEscape: false,\n                target: !isNullOrUndefined(this.parent.target) ? ((typeof this.parent.target) === 'string') ?\n                    document.querySelector(this.parent.target) : this.parent.target : document.body,\n                close: this.removeFieldListIcon.bind(this)\n            });\n            this.fieldListDialog.isStringTemplate = true;\n            this.fieldListDialog.appendTo(fieldListWrappper);\n            // this.fieldListDialog.element.querySelector('.e-dlg-header').innerHTML = headerTemplate;\n            // this.fieldListDialog.element.querySelector('.e-footer-content').innerHTML = template;\n            this.renderDeferUpdateButtons();\n            setStyleAttribute(select('#' + fieldListWrappper.id + '_title', fieldListWrappper), { 'width': '100%' });\n            fieldListWrappper.querySelector('.' + cls.TITLE_HEADER_CLASS).appendChild(this.createCalculatedButton());\n        }\n    };\n    DialogRenderer.prototype.dialogOpen = function () {\n        this.adaptiveElement.refresh();\n    };\n    /**\n     * Called internally if any of the field added to axis.\n     * @param {string[]} selectedNodes - selectedNodes\n     * @returns {void}\n     * @hidden\n     */\n    DialogRenderer.prototype.updateDataSource = function (selectedNodes) {\n        var axis = ['filters', 'columns', 'rows', 'values'];\n        for (var _i = 0, selectedNodes_1 = selectedNodes; _i < selectedNodes_1.length; _i++) {\n            var field = selectedNodes_1[_i];\n            var fieldName = field;\n            var droppedClass = axis[this.adaptiveElement.selectedItem];\n            this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ?\n                this.parent : (this.parent.pivotGridModule ?\n                this.parent.pivotGridModule : this.parent);\n            this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, droppedClass, -1);\n        }\n        this.parent.axisFieldModule.render();\n        if (!this.parent.allowDeferLayoutUpdate) {\n            this.parent.updateDataSource(true);\n        }\n        else {\n            this.parent.triggerPopulateEvent();\n        }\n    };\n    DialogRenderer.prototype.onDeferUpdateClick = function () {\n        this.parent.updateDataSource();\n        this.parent.dialogRenderer.fieldListDialog.hide();\n    };\n    DialogRenderer.prototype.renderAdaptiveLayout = function (fieldListWrappper) {\n        var layoutFooter = createElement('div', {\n            className: cls.FIELD_LIST_FOOTER_CLASS\n        });\n        fieldListWrappper.appendChild(this.parentElement);\n        var items = [\n            {\n                header: { 'text': this.parent.localeObj.getConstant('filters') },\n                content: this.createAxisTable('filters')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('columns') },\n                content: this.createAxisTable('columns')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('rows') },\n                content: this.createAxisTable('rows')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('values') },\n                content: this.createAxisTable('values')\n            },\n            {\n                header: { 'text': this.parent.localeObj.getConstant('createCalculatedField') },\n                content: 'Calculated Field Related UI'\n            }\n        ];\n        if (!this.parent.allowCalculatedField) {\n            items.pop();\n        }\n        this.adaptiveElement = new Tab({\n            heightAdjustMode: 'Auto',\n            items: items,\n            height: '100%',\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            selected: this.tabSelect.bind(this)\n        });\n        if (this.parent.renderMode === 'Fixed') {\n            layoutFooter.appendChild(this.createAddButton());\n            addClass([fieldListWrappper], cls.STATIC_FIELD_LIST_CLASS);\n            this.adaptiveElement.isStringTemplate = true;\n            this.adaptiveElement.appendTo(this.parentElement);\n            this.parentElement.appendChild(layoutFooter);\n        }\n        else {\n            this.adaptiveElement.isStringTemplate = true;\n            this.adaptiveElement.appendTo(this.parentElement);\n        }\n    };\n    DialogRenderer.prototype.tabSelect = function (e) {\n        var fieldWrapper = closest(this.parentElement, '.' + cls.WRAPPER_CLASS);\n        if (fieldWrapper && fieldWrapper.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)) {\n            if (e.selectedIndex !== 4) {\n                addClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n                removeClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n            }\n            else {\n                removeClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS)], cls.ICON_DISABLE);\n                addClass([fieldWrapper.querySelector('.' + cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS)], cls.ICON_DISABLE);\n            }\n        }\n        if (e.selectedIndex === 4) {\n            this.adaptiveElement.items[4].content = '';\n            this.adaptiveElement.dataBind();\n            this.parent.notify(events.initCalculatedField, {});\n        }\n        else {\n            this.parent.axisFieldModule.render();\n        }\n    };\n    DialogRenderer.prototype.createCalculatedButton = function () {\n        var calculatedButton = createElement('button', {\n            id: this.parent.element.id + '_CalculatedField',\n            attrs: {\n                'type': 'button',\n                'tabindex': '0',\n                'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('CalculatedField')\n            }\n        });\n        var calculateField = new Button({\n            cssClass: cls.CALCULATED_FIELD_CLASS + ' ' + cls.ICON_DISABLE,\n            content: this.parent.localeObj.getConstant('CalculatedField'),\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        calculateField.isStringTemplate = true;\n        calculateField.appendTo(calculatedButton);\n        if (this.parent.calculatedFieldModule) {\n            removeClass([calculatedButton], cls.ICON_DISABLE);\n        }\n        calculateField.element.onclick = this.showCalculatedField.bind(this);\n        return calculatedButton;\n    };\n    DialogRenderer.prototype.createAddButton = function () {\n        var footerContainer = createElement('div', {\n            className: cls.FIELD_LIST_FOOTER_CLASS + '-content'\n        });\n        var fieldListButton = createElement('div', {});\n        var calculatedButton = createElement('div', {});\n        var calculateField = new Button({\n            cssClass: cls.ADAPTIVE_CALCULATED_FIELD_BUTTON_CLASS +\n                ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS + ' ' + cls.ICON_DISABLE,\n            iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        var fieldList = new Button({\n            cssClass: cls.ADAPTIVE_FIELD_LIST_BUTTON_CLASS + ' ' + cls.BUTTON_SMALL_CLASS + ' ' + cls.BUTTON_ROUND_CLASS,\n            iconCss: cls.ICON + ' ' + cls.ADD_ICON_CLASS,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        fieldList.isStringTemplate = true;\n        fieldList.appendTo(fieldListButton);\n        calculateField.isStringTemplate = true;\n        calculateField.appendTo(calculatedButton);\n        footerContainer.appendChild(fieldListButton);\n        footerContainer.appendChild(calculatedButton);\n        calculateField.element.onclick = this.showCalculatedField.bind(this);\n        fieldList.element.onclick = this.showFieldListDialog.bind(this);\n        return footerContainer;\n    };\n    DialogRenderer.prototype.createAxisTable = function (axis) {\n        var axisWrapper = createElement('div', {\n            className: cls.FIELD_LIST_CLASS + '-' + axis\n        });\n        var axisContent = createElement('div', { className: cls.AXIS_CONTENT_CLASS + ' ' + 'e-' + axis });\n        var axisPrompt = createElement('span', {\n            className: cls.AXIS_PROMPT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('addPrompt')\n        });\n        axisWrapper.appendChild(axisContent);\n        axisWrapper.appendChild(axisPrompt);\n        return axisWrapper;\n    };\n    DialogRenderer.prototype.showCalculatedField = function (event) {\n        if (!this.parent.isAdaptive) {\n            if (this.parent.dialogRenderer.fieldListDialog) {\n                this.parent.dialogRenderer.fieldListDialog.hide();\n                addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n            }\n        }\n        this.parent.notify(events.initCalculatedField, {});\n    };\n    DialogRenderer.prototype.showFieldListDialog = function (event) {\n        var activeindex = this.adaptiveElement.selectedItem;\n        this.parent.treeViewModule.render(activeindex);\n    };\n    DialogRenderer.prototype.onShowFieldList = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            if (this.parent.isAdaptive) {\n                this.parent.axisFieldModule.render();\n            }\n            this.parent.clonedDataSource = extend({}, this.parent.dataSourceSettings, null, true);\n            this.parent.clonedFieldList = extend({}, this.parent.pivotFieldList, null, true);\n        }\n        addClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n        this.parent.dialogRenderer.fieldListDialog.show();\n        this.parent.dialogRenderer.fieldListDialog.element.style.top =\n            parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top, 10) < 0 ?\n                '0px' : this.parent.dialogRenderer.fieldListDialog.element.style.top;\n    };\n    DialogRenderer.prototype.onCloseFieldList = function () {\n        if (this.parent.allowDeferLayoutUpdate) {\n            this.parent.dataSourceSettings =\n                extend({}, this.parent.clonedDataSource.properties, null, true); /* eslint-disable-line */\n            if (this.parent.isPopupView && this.parent.pivotGridModule) {\n                this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n                this.parent.pivotGridModule.olapEngineModule = this.parent.olapEngineModule;\n                this.parent.pivotGridModule.\n                    setProperties({\n                    dataSourceSettings: this.parent.clonedDataSource.properties /* eslint-disable-line */\n                }, true);\n            }\n            if (Object.keys(this.parent.clonedFieldList).length > 0) {\n                this.parent.dataType === 'olap' ? this.parent.olapEngineModule.fieldList = /* eslint-disable-line */\n                    extend({}, this.parent.clonedFieldList, null, true) :\n                    this.parent.engineModule.fieldList = extend({}, this.parent.clonedFieldList, null, true);\n            }\n            if (this.parent.isPopupView && this.parent.pivotGridModule) {\n                this.parent.pivotGridModule.notify(events.uiUpdate, this);\n                this.parent.pivotGridModule.notify(events.contentReady, this);\n            }\n            else {\n                this.cancelButtonClick();\n            }\n        }\n        this.parent.dialogRenderer.fieldListDialog.hide();\n    };\n    DialogRenderer.prototype.removeFieldListIcon = function () {\n        if (this.parent.isAdaptive && this.parent.allowCalculatedField && this.parent.calculatedFieldModule) {\n            if (this.adaptiveElement && this.adaptiveElement.selectedItem === 4) {\n                if (select('#' + this.parent.element.id + 'droppable', this.adaptiveElement.element)) {\n                    /* eslint-disable */\n                    this.parent.calculatedFieldModule\n                        .updateAdaptiveCalculatedField(false);\n                    /* eslint-enable */\n                }\n                else {\n                    this.parent.notify(events.initCalculatedField, { edit: false });\n                }\n            }\n        }\n        if (!document.getElementById(this.parent.element.id + 'calculateddialog')) {\n            removeClass([this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS)], cls.ICON_HIDDEN);\n        }\n    };\n    DialogRenderer.prototype.keyPress = function (e) {\n        if (e.keyCode === 13 && e.target) {\n            e.target.click();\n            e.preventDefault();\n            return;\n        }\n    };\n    DialogRenderer.prototype.wireDialogEvent = function (element) {\n        EventHandler.add(element, 'keydown', this.keyPress, this);\n        EventHandler.add(element, 'click', this.onShowFieldList, this);\n    };\n    DialogRenderer.prototype.unWireDialogEvent = function (element) {\n        EventHandler.remove(element, 'keydown', this.keyPress);\n        EventHandler.remove(element, 'click', this.onShowFieldList);\n    };\n    /**\n     * Destroys the Field Table component.\n     * @function destroy\n     * @returns {void}\n     */\n    DialogRenderer.prototype.destroy = function () {\n        if (this.parent.renderMode === 'Popup') {\n            this.unWireDialogEvent(this.parent.element.querySelector('.' + cls.TOGGLE_FIELD_LIST_CLASS));\n        }\n        if (this.deferUpdateCheckBox && !this.deferUpdateCheckBox.isDestroyed) {\n            this.deferUpdateCheckBox.destroy();\n            this.deferUpdateCheckBox = null;\n        }\n        if (this.deferUpdateApplyButton && !this.deferUpdateApplyButton.isDestroyed) {\n            this.deferUpdateApplyButton.destroy();\n            this.deferUpdateApplyButton = null;\n        }\n        if (this.deferUpdateCancelButton && !this.deferUpdateCancelButton.isDestroyed) {\n            this.deferUpdateCancelButton.destroy();\n            this.deferUpdateCancelButton = null;\n        }\n        if (this.parent.renderMode === 'Popup') {\n            if (this.fieldListDialog && !this.fieldListDialog.isDestroyed) {\n                this.fieldListDialog.destroy();\n                this.fieldListDialog = null;\n            }\n            if (document.getElementById(this.parent.element.id + '_Wrapper')) {\n                remove(document.getElementById(this.parent.element.id + '_Wrapper'));\n            }\n        }\n    };\n    return DialogRenderer;\n}());\nexport { DialogRenderer };\n"]},"metadata":{},"sourceType":"module"}