{"ast":null,"code":"import { createElement, remove, select } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\n/**\n * Module to render Pivot button\n */\n\n/** @hidden */\n\nvar PivotContextMenu = function () {\n  /* eslint-disable */\n\n  /** Constructor for render module */\n  function PivotContextMenu(parent) {\n    /* eslint-enable */\n    this.parent = parent;\n    this.parent.contextMenuModule = this;\n  }\n  /**\n   * Initialize the pivot table rendering\n   * @returns {void}\n   * @private\n   */\n\n\n  PivotContextMenu.prototype.render = function () {\n    this.renderContextMenu();\n  };\n\n  PivotContextMenu.prototype.renderContextMenu = function () {\n    var menuItems = [{\n      text: this.parent.localeObj.getConstant('addToFilter'),\n      id: this.parent.element.id + '_Filters'\n    }, {\n      text: this.parent.localeObj.getConstant('addToRow'),\n      id: this.parent.element.id + '_Rows'\n    }, {\n      text: this.parent.localeObj.getConstant('addToColumn'),\n      id: this.parent.element.id + '_Columns'\n    }, {\n      text: this.parent.localeObj.getConstant('addToValue'),\n      id: this.parent.element.id + '_Values'\n    }];\n    var menuOptions = {\n      cssClass: cls.PIVOT_CONTEXT_MENU_CLASS,\n      items: menuItems,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      beforeOpen: this.onBeforeMenuOpen.bind(this),\n      select: this.onSelectContextMenu.bind(this)\n    };\n    var cMenu = createElement('ul', {\n      id: this.parent.element.id + '_PivotContextMenu'\n    });\n    this.parent.element.appendChild(cMenu);\n    this.menuObj = new ContextMenu(menuOptions);\n    this.menuObj.isStringTemplate = true;\n    this.menuObj.appendTo(cMenu);\n  };\n\n  PivotContextMenu.prototype.onBeforeMenuOpen = function (args) {\n    var items = [].slice.call(args.element.querySelectorAll('li'));\n    var fieldType = this.parent.dataType === 'olap' ? this.fieldElement.getAttribute('data-type') : this.fieldElement.querySelector('.' + cls.PIVOT_BUTTON_CONTENT_CLASS).getAttribute('data-type');\n    removeClass(items, cls.MENU_DISABLE);\n\n    if (fieldType === 'CalculatedField' || fieldType === 'isMeasureFieldsAvail') {\n      for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n        var item = items_1[_i];\n\n        if (item.textContent !== this.parent.localeObj.getConstant('addToValue')) {\n          addClass([item], cls.MENU_DISABLE);\n        }\n      }\n    } else if (fieldType === 'isMeasureAvail') {\n      for (var _a = 0, items_2 = items; _a < items_2.length; _a++) {\n        var item = items_2[_a];\n\n        if (item.textContent !== this.parent.localeObj.getConstant('addToRow') && item.textContent !== this.parent.localeObj.getConstant('addToColumn')) {\n          addClass([item], cls.MENU_DISABLE);\n        }\n      }\n    } else if (this.parent.dataType === 'olap') {\n      for (var _b = 0, items_3 = items; _b < items_3.length; _b++) {\n        var item = items_3[_b];\n\n        if (item.textContent === this.parent.localeObj.getConstant('addToValue')) {\n          addClass([item], cls.MENU_DISABLE);\n          break;\n        }\n      }\n    }\n  };\n\n  PivotContextMenu.prototype.onSelectContextMenu = function (menu) {\n    if (menu.element.textContent !== null) {\n      var fieldName = this.fieldElement.getAttribute('data-uid');\n      var dropClass = menu.item.id.replace(this.parent.element.id + '_', '').toLowerCase();\n      this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent : this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent;\n      this.parent.pivotCommon.dataSourceUpdate.btnElement = this.fieldElement;\n      this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, dropClass, -1);\n      this.parent.updateDataSource(true);\n      this.fieldElement = undefined;\n    }\n  };\n  /**\n   * To destroy the pivot button event listener\n   * @returns {void}\n   * @hidden\n   */\n\n\n  PivotContextMenu.prototype.destroy = function () {\n    if (!this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.menuObj && !this.menuObj.isDestroyed) {\n      this.menuObj.destroy();\n\n      if (select('#' + this.parent.element.id + '_PivotContextMenu', document)) {\n        remove(select('#' + this.parent.element.id + '_PivotContextMenu', document));\n      }\n    } else {\n      return;\n    }\n  };\n\n  return PivotContextMenu;\n}();\n\nexport { PivotContextMenu };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-pivotview/src/common/popups/context-menu.js"],"names":["createElement","remove","select","addClass","removeClass","cls","ContextMenu","PivotContextMenu","parent","contextMenuModule","prototype","render","renderContextMenu","menuItems","text","localeObj","getConstant","id","element","menuOptions","cssClass","PIVOT_CONTEXT_MENU_CLASS","items","enableRtl","locale","beforeOpen","onBeforeMenuOpen","bind","onSelectContextMenu","cMenu","appendChild","menuObj","isStringTemplate","appendTo","args","slice","call","querySelectorAll","fieldType","dataType","fieldElement","getAttribute","querySelector","PIVOT_BUTTON_CONTENT_CLASS","MENU_DISABLE","_i","items_1","length","item","textContent","_a","items_2","_b","items_3","menu","fieldName","dropClass","replace","toLowerCase","pivotCommon","dataSourceUpdate","control","getModuleName","pivotGridModule","btnElement","updateDataSource","undefined","destroy","isDestroyed","document"],"mappings":"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","sourcesContent":["import { createElement, remove, select } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\n/**\n * Module to render Pivot button\n */\n/** @hidden */\nvar PivotContextMenu = /** @class */ (function () {\n    /* eslint-disable */\n    /** Constructor for render module */\n    function PivotContextMenu(parent) {\n        /* eslint-enable */\n        this.parent = parent;\n        this.parent.contextMenuModule = this;\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns {void}\n     * @private\n     */\n    PivotContextMenu.prototype.render = function () {\n        this.renderContextMenu();\n    };\n    PivotContextMenu.prototype.renderContextMenu = function () {\n        var menuItems = [\n            { text: this.parent.localeObj.getConstant('addToFilter'), id: this.parent.element.id + '_Filters' },\n            { text: this.parent.localeObj.getConstant('addToRow'), id: this.parent.element.id + '_Rows' },\n            { text: this.parent.localeObj.getConstant('addToColumn'), id: this.parent.element.id + '_Columns' },\n            { text: this.parent.localeObj.getConstant('addToValue'), id: this.parent.element.id + '_Values' }\n        ];\n        var menuOptions = {\n            cssClass: cls.PIVOT_CONTEXT_MENU_CLASS,\n            items: menuItems,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            beforeOpen: this.onBeforeMenuOpen.bind(this),\n            select: this.onSelectContextMenu.bind(this)\n        };\n        var cMenu = createElement('ul', {\n            id: this.parent.element.id + '_PivotContextMenu'\n        });\n        this.parent.element.appendChild(cMenu);\n        this.menuObj = new ContextMenu(menuOptions);\n        this.menuObj.isStringTemplate = true;\n        this.menuObj.appendTo(cMenu);\n    };\n    PivotContextMenu.prototype.onBeforeMenuOpen = function (args) {\n        var items = [].slice.call(args.element.querySelectorAll('li'));\n        var fieldType = this.parent.dataType === 'olap' ? this.fieldElement.getAttribute('data-type') :\n            this.fieldElement.querySelector('.' + cls.PIVOT_BUTTON_CONTENT_CLASS).getAttribute('data-type');\n        removeClass(items, cls.MENU_DISABLE);\n        if (fieldType === 'CalculatedField' || fieldType === 'isMeasureFieldsAvail') {\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var item = items_1[_i];\n                if (item.textContent !== this.parent.localeObj.getConstant('addToValue')) {\n                    addClass([item], cls.MENU_DISABLE);\n                }\n            }\n        }\n        else if (fieldType === 'isMeasureAvail') {\n            for (var _a = 0, items_2 = items; _a < items_2.length; _a++) {\n                var item = items_2[_a];\n                if (item.textContent !== this.parent.localeObj.getConstant('addToRow') &&\n                    item.textContent !== this.parent.localeObj.getConstant('addToColumn')) {\n                    addClass([item], cls.MENU_DISABLE);\n                }\n            }\n        }\n        else if (this.parent.dataType === 'olap') {\n            for (var _b = 0, items_3 = items; _b < items_3.length; _b++) {\n                var item = items_3[_b];\n                if (item.textContent === this.parent.localeObj.getConstant('addToValue')) {\n                    addClass([item], cls.MENU_DISABLE);\n                    break;\n                }\n            }\n        }\n    };\n    PivotContextMenu.prototype.onSelectContextMenu = function (menu) {\n        if (menu.element.textContent !== null) {\n            var fieldName = this.fieldElement.getAttribute('data-uid');\n            var dropClass = menu.item.id.replace(this.parent.element.id + '_', '').toLowerCase();\n            this.parent.pivotCommon.dataSourceUpdate.control = this.parent.getModuleName() === 'pivotview' ? this.parent :\n                (this.parent.pivotGridModule ? this.parent.pivotGridModule : this.parent);\n            this.parent.pivotCommon.dataSourceUpdate.btnElement = this.fieldElement;\n            this.parent.pivotCommon.dataSourceUpdate.updateDataSource(fieldName, dropClass, -1);\n            this.parent.updateDataSource(true);\n            this.fieldElement = undefined;\n        }\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @returns {void}\n     * @hidden\n     */\n    PivotContextMenu.prototype.destroy = function () {\n        if (!this.parent.isDestroyed) {\n            return;\n        }\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            if (select('#' + this.parent.element.id + '_PivotContextMenu', document)) {\n                remove(select('#' + this.parent.element.id + '_PivotContextMenu', document));\n            }\n        }\n        else {\n            return;\n        }\n    };\n    return PivotContextMenu;\n}());\nexport { PivotContextMenu };\n"]},"metadata":{},"sourceType":"module"}