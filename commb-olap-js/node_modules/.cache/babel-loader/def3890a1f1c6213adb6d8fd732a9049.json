{"ast":null,"code":"import { createElement, remove, extend, getInstance, select } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../../common/base/constant';\nimport { PivotUtil } from '../../base/util';\n/**\n * `AggregateMenu` module to create aggregate type popup.\n */\n\n/** @hidden */\n\nvar AggregateMenu = function () {\n  /* eslint-disable */\n\n  /**\n   * Constructor for the rener action.\n   * @hidden\n   */\n  function AggregateMenu(parent) {\n    this.menuInfo = [];\n    this.stringAggregateTypes = ['Count', 'DistinctCount'];\n    this.parent = parent;\n  }\n  /**\n   * Initialize the pivot table rendering\n   * @returns {void}\n   * @private\n   */\n\n\n  AggregateMenu.prototype.render = function (args, parentElement) {\n    /* eslint-enable */\n    this.parentElement = parentElement;\n    this.openContextMenu(args);\n  };\n\n  AggregateMenu.prototype.openContextMenu = function (args) {\n    var _this = this;\n\n    var fieldName = args.target.parentElement.id;\n    this.buttonElement = args.target.parentElement;\n    var isStringField = this.parent.engineModule.fieldList[fieldName].type !== 'number' ? 1 : 0;\n    this.summaryTypes = this.getMenuItem(isStringField).slice();\n    var eventArgs = {\n      cancel: false,\n      fieldName: fieldName,\n      aggregateTypes: this.summaryTypes,\n      displayMenuCount: 7\n    };\n    var control = this.parent.getModuleName() === 'pivotfieldlist' && this.parent.isPopupView ? this.parent.pivotGridModule : this.parent;\n    control.trigger(events.aggregateMenuOpen, eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        _this.summaryTypes = observedArgs.aggregateTypes;\n\n        _this.createContextMenu(isStringField, observedArgs.displayMenuCount);\n\n        _this.currentMenu = args.target;\n\n        var pos = _this.currentMenu.getBoundingClientRect();\n\n        if (_this.parent.enableRtl) {\n          _this.menuInfo[isStringField].open(pos.top + (window.scrollY || document.documentElement.scrollTop), pos.left - 105);\n        } else {\n          _this.menuInfo[isStringField].open(pos.top + (window.scrollY || document.documentElement.scrollTop), pos.left);\n        }\n      }\n    });\n  };\n\n  AggregateMenu.prototype.createContextMenu = function (isStringField, displayMenuCount) {\n    var _this = this;\n\n    var menuItems = [];\n    menuItems[isStringField] = [];\n\n    if (this.menuInfo[isStringField] && !this.menuInfo[isStringField].isDestroyed) {\n      this.menuInfo[isStringField].destroy();\n    }\n\n    var checkDuplicates = [];\n\n    for (var i = 0; i < this.summaryTypes.length; i++) {\n      var key = this.summaryTypes[i];\n\n      if (isStringField) {\n        if (this.stringAggregateTypes.indexOf(key) > -1 && checkDuplicates.indexOf(key) < 0) {\n          menuItems[isStringField].push({\n            text: this.parent.localeObj.getConstant(key),\n            id: this.parent.element.id + 'StringMenu_' + key\n          });\n          checkDuplicates.push(key);\n        }\n      } else {\n        if (this.parent.getAllSummaryType().indexOf(key) > -1 && checkDuplicates.indexOf(key) < 0) {\n          menuItems[isStringField].push({\n            text: this.parent.localeObj.getConstant(key),\n            id: this.parent.element.id + '_' + key\n          });\n          checkDuplicates.push(key);\n        }\n      }\n    }\n\n    if (menuItems[isStringField].length > displayMenuCount) {\n      menuItems[isStringField].splice(displayMenuCount);\n      menuItems[isStringField].push({\n        text: this.parent.localeObj.getConstant('MoreOption'),\n        id: this.parent.element.id + '_' + 'MoreOption'\n      });\n    }\n\n    var menuOptions;\n    menuOptions = {\n      items: menuItems[isStringField],\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      beforeOpen: this.beforeMenuOpen.bind(this, isStringField),\n      onClose: function (args) {\n        select('#' + _this.buttonElement.id, _this.parentElement).focus();\n      },\n      select: this.selectOptionInContextMenu.bind(this)\n    };\n    var contextMenu = document.getElementById(this.parent.element.id + (isStringField ? 'valueFieldStringContextMenu' : 'valueFieldContextMenu'));\n\n    if (contextMenu !== null) {\n      contextMenu.innerHTML = '';\n    } else {\n      contextMenu = createElement('ul', {\n        id: this.parent.element.id + (isStringField ? 'valueFieldStringContextMenu' : 'valueFieldContextMenu')\n      });\n    }\n\n    this.parent.element.appendChild(contextMenu);\n    this.menuInfo[isStringField] = new Menu(menuOptions);\n    this.menuInfo[isStringField].isStringTemplate = true;\n    this.menuInfo[isStringField].appendTo(contextMenu);\n  };\n\n  AggregateMenu.prototype.getMenuItem = function (isStringField) {\n    var menuItems = [];\n\n    for (var i = 0; i < this.parent.aggregateTypes.length; i++) {\n      var key = this.parent.aggregateTypes[i];\n\n      if (isStringField) {\n        if (this.stringAggregateTypes.indexOf(key) > -1 && menuItems.indexOf(key) === -1) {\n          menuItems.push(key);\n        }\n      } else {\n        if (this.parent.getAllSummaryType().indexOf(key) > -1 && menuItems.indexOf(key) === -1) {\n          menuItems.push(key);\n        }\n      }\n    }\n\n    return menuItems;\n  };\n\n  AggregateMenu.prototype.beforeMenuOpen = function (isString, args) {\n    args.element.style.zIndex = (this.menuInfo[isString].element.style.zIndex + 3).toString();\n    args.element.style.display = 'inline';\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  AggregateMenu.prototype.createValueSettingsDialog = function (target, parentElement, type) {\n    var _this = this;\n\n    this.parentElement = parentElement;\n    var valueDialog = createElement('div', {\n      id: this.parentElement.id + '_ValueDialog',\n      className: 'e-value-field-settings',\n      attrs: {\n        'data-field': target.id\n      }\n    });\n    this.parentElement.appendChild(valueDialog);\n    this.valueDialog = new Dialog({\n      animationSettings: {\n        effect: 'Fade'\n      },\n      allowDragging: true,\n      header: this.parent.localeObj.getConstant('valueFieldSettings'),\n      content: this.createFieldOptions(target, type),\n      isModal: true,\n      visible: true,\n      showCloseIcon: true,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      width: 'auto',\n      height: 'auto',\n      position: {\n        X: 'center',\n        Y: 'center'\n      },\n      buttons: [{\n        click: this.updateValueSettings.bind(this),\n        buttonModel: {\n          cssClass: cls.OK_BUTTON_CLASS,\n          content: this.parent.localeObj.getConstant('ok'),\n          isPrimary: true\n        }\n      }, {\n        click: function () {\n          _this.valueDialog.hide();\n        },\n        buttonModel: {\n          cssClass: cls.CANCEL_BUTTON_CLASS,\n          content: this.parent.localeObj.getConstant('cancel')\n        }\n      }],\n      closeOnEscape: this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup' ? false : true,\n      target: this.parentElement,\n      overlayClick: function () {\n        _this.removeDialog();\n      },\n      close: this.removeDialog.bind(this)\n    });\n    this.valueDialog.isStringTemplate = true;\n    this.valueDialog.appendTo(valueDialog); // this.valueDialog.element.querySelector('.e-dlg-header').innerHTML = this.parent.localeObj.getConstant('valueFieldSettings');\n  };\n  /* eslint-disable  */\n\n\n  AggregateMenu.prototype.createFieldOptions = function (buttonElement, type) {\n    var fieldCaption = buttonElement.getAttribute('data-caption');\n    var summaryType = type && type !== 'MoreOption' ? type : buttonElement.getAttribute('data-type');\n    var baseField = buttonElement.getAttribute('data-basefield');\n    var baseItem = buttonElement.getAttribute('data-baseitem');\n    summaryType = summaryType.toString() !== 'undefined' ? summaryType : 'Sum';\n    var summaryDataSource = [];\n    var summaryItems = this.summaryTypes;\n    var checkDuplicates = [];\n\n    for (var i = 0; i < summaryItems.length; i++) {\n      if (this.parent.getAllSummaryType().indexOf(summaryItems[i]) > -1 && checkDuplicates.indexOf(summaryItems[i]) < 0) {\n        summaryDataSource.push({\n          value: summaryItems[i],\n          text: this.parent.localeObj.getConstant(summaryItems[i])\n        });\n        checkDuplicates.push(summaryItems[i]);\n      }\n    }\n\n    var baseItemTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom'];\n    var baseFieldTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom', 'PercentageOfParentTotal'];\n    var dataFields = extend([], this.parent.dataSourceSettings.rows, null, true);\n    dataFields = dataFields.concat(this.parent.dataSourceSettings.columns);\n    var fieldDataSource = [];\n    var fieldItemDataSource = []; // let summaryDataSource: { [key: string]: Object }[] = [];\n    // for (let type of summaryTypes) {\n    //     summaryDataSource.push({ value: type, text: type });\n    // }\n\n    for (var _i = 0, dataFields_1 = dataFields; _i < dataFields_1.length; _i++) {\n      var field = dataFields_1[_i];\n      var value = field.name;\n      var text = field.caption ? field.caption : field.name;\n      fieldDataSource.push({\n        value: value,\n        text: text\n      });\n    }\n\n    if (Object.keys(fieldDataSource).length === 0) {\n      fieldDataSource.push({\n        value: '',\n        text: ''\n      });\n      baseField = '';\n      fieldItemDataSource = [];\n    } else {\n      baseField = baseField && baseField.toString() !== 'undefined' && baseField.toString() !== 'null' ? baseField : fieldDataSource[0].value;\n      fieldItemDataSource = Object.keys(this.parent.engineModule.fieldList[baseField.toString() !== 'undefined' ? baseField : fieldDataSource[0].value].formattedMembers);\n    }\n\n    baseItem = baseItem.toString() !== 'undefined' ? baseItem : fieldItemDataSource[0];\n    var mainDiv = createElement('div', {\n      className: 'e-value-field-div-content',\n      id: this.parentElement.id + '_field_div_content',\n      attrs: {\n        'data-type': summaryType,\n        'data-caption': fieldCaption,\n        'data-basefield': baseField,\n        'data-baseitem': baseItem\n      }\n    });\n    var textWrappper = createElement('div', {\n      className: 'e-field-name-text-wrapper'\n    });\n    var filterWrapperDiv1 = createElement('div', {\n      className: 'e-field-option-wrapper'\n    });\n    var optionWrapperDiv1 = createElement('div', {\n      className: 'e-type-option-wrapper'\n    });\n    var optionWrapperDiv2 = createElement('div', {\n      className: 'e-base-field-option-wrapper'\n    });\n    var optionWrapperDiv3 = createElement('div', {\n      className: 'e-base-item-option-wrapper'\n    });\n    var texttitle = createElement('div', {\n      className: 'e-field-name-title',\n      innerHTML: this.parent.localeObj.getConstant('sourceName') + '&nbsp;'\n    });\n    var textContent = createElement('div', {\n      className: 'e-field-name-content',\n      innerHTML: buttonElement.id.toString()\n    });\n    var inputTextDiv1 = createElement('div', {\n      className: 'e-type-option-text',\n      innerHTML: this.parent.localeObj.getConstant('sourceCaption')\n    });\n    var optionTextDiv1 = createElement('div', {\n      className: 'e-base-field-option-text',\n      innerHTML: this.parent.localeObj.getConstant('summarizeValuesBy')\n    });\n    var optionTextDiv2 = createElement('div', {\n      className: 'e-base-item-option-text',\n      innerHTML: this.parent.localeObj.getConstant('baseField')\n    });\n    var optionTextDiv3 = createElement('div', {\n      className: 'e-type-option-text',\n      innerHTML: this.parent.localeObj.getConstant('baseItem')\n    });\n    var inputDiv1 = createElement('div', {\n      className: 'e-caption-input-wrapper'\n    });\n    var dropOptionDiv1 = createElement('div', {\n      id: this.parentElement.id + '_type_option'\n    });\n    var dropOptionDiv2 = createElement('div', {\n      id: this.parentElement.id + '_base_field_option'\n    });\n    var dropOptionDiv3 = createElement('div', {\n      id: this.parentElement.id + '_base_item_option'\n    });\n    var inputField1 = createElement('input', {\n      id: this.parentElement.id + 'type_input_option',\n      className: 'e-caption-input-text',\n      attrs: {\n        'type': 'text'\n      }\n    });\n    textWrappper.appendChild(texttitle);\n    textWrappper.appendChild(textContent);\n    inputDiv1.appendChild(inputTextDiv1);\n    inputDiv1.appendChild(inputField1);\n    optionWrapperDiv1.appendChild(optionTextDiv1);\n    optionWrapperDiv2.appendChild(optionTextDiv2);\n    optionWrapperDiv3.appendChild(optionTextDiv3);\n    optionWrapperDiv1.appendChild(dropOptionDiv1);\n    optionWrapperDiv2.appendChild(dropOptionDiv2);\n    optionWrapperDiv3.appendChild(dropOptionDiv3);\n    filterWrapperDiv1.appendChild(textWrappper);\n    filterWrapperDiv1.appendChild(inputDiv1);\n    filterWrapperDiv1.appendChild(optionWrapperDiv1);\n    filterWrapperDiv1.appendChild(optionWrapperDiv2);\n    filterWrapperDiv1.appendChild(optionWrapperDiv3);\n    mainDiv.appendChild(filterWrapperDiv1);\n    var popupInstance = this;\n    var optionWrapper1 = new DropDownList({\n      dataSource: summaryDataSource,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      fields: {\n        value: 'value',\n        text: 'text'\n      },\n      value: summaryType,\n      // popupWidth: 'auto',\n      cssClass: cls.VALUE_OPTIONS_CLASS,\n      width: '100%',\n      change: function (args) {\n        optionWrapper2.enabled = baseFieldTypes.indexOf(args.value) !== -1 ? true : false;\n        optionWrapper3.enabled = baseItemTypes.indexOf(args.value) !== -1 ? true : false;\n\n        if (optionWrapper3.enabled && optionWrapper3.dataSource.length === 1) {\n          optionWrapper3.dataSource = fieldItemDataSource;\n          optionWrapper3.dataBind();\n        }\n      }\n    });\n    optionWrapper1.isStringTemplate = true;\n    optionWrapper1.appendTo(dropOptionDiv1);\n    var optionWrapper2 = new DropDownList({\n      dataSource: fieldDataSource,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      fields: {\n        value: 'value',\n        text: 'text'\n      },\n      value: baseField,\n      // popupWidth: 'auto',\n      enabled: baseFieldTypes.indexOf(summaryType) !== -1 ? true : false,\n      cssClass: cls.VALUE_OPTIONS_CLASS,\n      width: '100%',\n      change: function (args) {\n        fieldItemDataSource = Object.keys(popupInstance.parent.engineModule.fieldList[args.value].formattedMembers);\n        optionWrapper3.dataSource = fieldItemDataSource;\n        optionWrapper3.value = fieldItemDataSource[0];\n        optionWrapper3.filterBarPlaceholder = popupInstance.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0];\n        optionWrapper3.dataBind();\n      }\n    });\n    optionWrapper2.isStringTemplate = true;\n    optionWrapper2.appendTo(dropOptionDiv2);\n    var optionWrapper3 = new DropDownList({\n      dataSource: [fieldItemDataSource[0]],\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      value: baseItem,\n      // popupWidth: 'auto',\n      allowFiltering: true,\n      filterBarPlaceholder: this.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0],\n      enabled: baseItemTypes.indexOf(summaryType) !== -1 ? true : false,\n      cssClass: cls.FILTER_OPERATOR_CLASS,\n      width: '100%'\n    });\n    optionWrapper3.isStringTemplate = true;\n    optionWrapper3.appendTo(dropOptionDiv3);\n    var inputObj1 = new MaskedTextBox({\n      placeholder: 'Enter field caption',\n      // floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      value: fieldCaption,\n      width: '100%'\n    });\n    inputObj1.isStringTemplate = true;\n    inputObj1.appendTo(inputField1);\n    return mainDiv;\n  };\n\n  AggregateMenu.prototype.selectOptionInContextMenu = function (menu) {\n    if (menu.item.text !== null) {\n      var buttonElement = this.currentMenu.parentElement;\n      var type = menu.item.id.split('_').pop();\n\n      if (type === 'MoreOption' || type === 'PercentageOfDifferenceFrom' || type === 'PercentageOfParentTotal' || type === 'DifferenceFrom') {\n        this.createValueSettingsDialog(buttonElement, this.parentElement, type);\n      } else {\n        var field = buttonElement.getAttribute('data-uid');\n        var valuefields = this.parent.dataSourceSettings.values;\n        var contentElement = buttonElement.querySelector('.e-content');\n        var captionName = menu.item.text + ' ' + this.parent.localeObj.getConstant('of') + ' ' + this.parent.engineModule.fieldList[field].caption;\n        contentElement.innerHTML = captionName;\n        contentElement.setAttribute('title', captionName);\n        buttonElement.setAttribute('data-type', type);\n\n        for (var vCnt = 0; vCnt < this.parent.dataSourceSettings.values.length; vCnt++) {\n          if (this.parent.dataSourceSettings.values[vCnt].name === field) {\n            var dataSourceItem = extend({}, valuefields[vCnt].properties ? valuefields[vCnt].properties : valuefields[vCnt], null, true);\n            dataSourceItem.type = type;\n            this.parent.engineModule.fieldList[field].aggregateType = type;\n            valuefields.splice(vCnt, 1, dataSourceItem);\n            this.parent.lastAggregationInfo = dataSourceItem;\n          }\n        }\n\n        this.updateDataSource();\n      }\n    }\n  };\n\n  AggregateMenu.prototype.updateDataSource = function (isRefreshed) {\n    if (!this.parent.allowDeferLayoutUpdate || this.parent.getModuleName() === 'pivotview') {\n      this.parent.updateDataSource(isRefreshed);\n    } else {\n      if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n        this.parent.pivotGridModule.setProperties({\n          dataSourceSettings: this.parent.dataSourceSettings.properties\n        }, true);\n        this.parent.pivotGridModule.notify(events.uiUpdate, this);\n        this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n        /* eslint-enable @typescript-eslint/indent */\n      } else {\n        this.parent.triggerPopulateEvent();\n      }\n    }\n  };\n\n  AggregateMenu.prototype.updateValueSettings = function () {\n    var dialogElement = this.valueDialog.element;\n    var captionInstance = getInstance(select('#' + this.parentElement.id + 'type_input_option'), MaskedTextBox);\n    var summaryInstance = getInstance(select('#' + this.parentElement.id + '_type_option'), DropDownList);\n    var baseFieldInstance = getInstance(select('#' + this.parentElement.id + '_base_field_option'), DropDownList);\n    var baseItemInstance = getInstance(select('#' + this.parentElement.id + '_base_item_option'), DropDownList);\n    var fieldName = dialogElement.getAttribute('data-field');\n    var buttonElement;\n\n    if (this.parentElement.querySelector('.' + cls.PIVOT_BUTTON_CLASS)) {\n      buttonElement = this.parentElement.querySelector('.' + cls.PIVOT_BUTTON_CLASS + '.' + fieldName.replace(/[^A-Z0-9]/ig, ''));\n    }\n\n    if (buttonElement) {\n      var contentElement = buttonElement.querySelector('.e-content');\n      var captionName = this.parent.localeObj.getConstant(summaryInstance.value) + ' ' + this.parent.localeObj.getConstant('of') + ' ' + captionInstance.value;\n      contentElement.innerHTML = captionName;\n      contentElement.setAttribute('title', captionName);\n      buttonElement.setAttribute('data-type', summaryInstance.value);\n      buttonElement.setAttribute('data-caption', captionInstance.value);\n      buttonElement.setAttribute('data-basefield', baseFieldInstance.value);\n      buttonElement.setAttribute('data-baseitem', baseItemInstance.value);\n    }\n\n    var selectedField = PivotUtil.getFieldByName(fieldName, this.parent.dataSourceSettings.values);\n    selectedField = selectedField.properties ? selectedField.properties : selectedField;\n    selectedField.caption = captionInstance.value;\n    selectedField.type = summaryInstance.value;\n    selectedField.baseField = baseFieldInstance.value;\n    selectedField.baseItem = baseItemInstance.value;\n    this.valueDialog.close(); // this.parent.axisFieldModule.render();\n\n    this.parent.lastAggregationInfo = selectedField;\n    this.updateDataSource(true);\n  };\n\n  AggregateMenu.prototype.removeDialog = function () {\n    if (select('#' + this.buttonElement.id, this.parentElement)) {\n      select('#' + this.buttonElement.id, this.parentElement).focus();\n    }\n\n    if (this.valueDialog && !this.valueDialog.isDestroyed) {\n      this.valueDialog.destroy();\n    }\n\n    if (document.getElementById(this.parentElement.id + '_ValueDialog')) {\n      remove(document.getElementById(this.parentElement.id + '_ValueDialog'));\n    }\n  };\n  /**\n   * To destroy the pivot button event listener\n   * @returns {void}\n   * @hidden\n   */\n\n\n  AggregateMenu.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.menuInfo) {\n      if (this.menuInfo[1] !== undefined && !this.menuInfo[1].isDestroyed) {\n        this.menuInfo[1].destroy();\n      }\n\n      if (this.menuInfo[0] !== undefined && !this.menuInfo[0].isDestroyed) {\n        this.menuInfo[0].destroy();\n      }\n    } else {\n      return;\n    }\n  };\n\n  return AggregateMenu;\n}();\n\nexport { AggregateMenu };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-pivotview/src/common/popups/aggregate-menu.js"],"names":["createElement","remove","extend","getInstance","select","cls","ContextMenu","Menu","Dialog","MaskedTextBox","DropDownList","events","PivotUtil","AggregateMenu","parent","menuInfo","stringAggregateTypes","prototype","render","args","parentElement","openContextMenu","_this","fieldName","target","id","buttonElement","isStringField","engineModule","fieldList","type","summaryTypes","getMenuItem","slice","eventArgs","cancel","aggregateTypes","displayMenuCount","control","getModuleName","isPopupView","pivotGridModule","trigger","aggregateMenuOpen","observedArgs","createContextMenu","currentMenu","pos","getBoundingClientRect","enableRtl","open","top","window","scrollY","document","documentElement","scrollTop","left","menuItems","isDestroyed","destroy","checkDuplicates","i","length","key","indexOf","push","text","localeObj","getConstant","element","getAllSummaryType","splice","menuOptions","items","locale","beforeOpen","beforeMenuOpen","bind","onClose","focus","selectOptionInContextMenu","contextMenu","getElementById","innerHTML","appendChild","isStringTemplate","appendTo","isString","style","zIndex","toString","display","createValueSettingsDialog","valueDialog","className","attrs","animationSettings","effect","allowDragging","header","content","createFieldOptions","isModal","visible","showCloseIcon","width","height","position","X","Y","buttons","click","updateValueSettings","buttonModel","cssClass","OK_BUTTON_CLASS","isPrimary","hide","CANCEL_BUTTON_CLASS","closeOnEscape","renderMode","overlayClick","removeDialog","close","fieldCaption","getAttribute","summaryType","baseField","baseItem","summaryDataSource","summaryItems","value","baseItemTypes","baseFieldTypes","dataFields","dataSourceSettings","rows","concat","columns","fieldDataSource","fieldItemDataSource","_i","dataFields_1","field","name","caption","Object","keys","formattedMembers","mainDiv","textWrappper","filterWrapperDiv1","optionWrapperDiv1","optionWrapperDiv2","optionWrapperDiv3","texttitle","textContent","inputTextDiv1","optionTextDiv1","optionTextDiv2","optionTextDiv3","inputDiv1","dropOptionDiv1","dropOptionDiv2","dropOptionDiv3","inputField1","popupInstance","optionWrapper1","dataSource","fields","VALUE_OPTIONS_CLASS","change","optionWrapper2","enabled","optionWrapper3","dataBind","filterBarPlaceholder","allowFiltering","FILTER_OPERATOR_CLASS","inputObj1","placeholder","menu","item","split","pop","valuefields","values","contentElement","querySelector","captionName","setAttribute","vCnt","dataSourceItem","properties","aggregateType","lastAggregationInfo","updateDataSource","isRefreshed","allowDeferLayoutUpdate","setProperties","notify","uiUpdate","triggerPopulateEvent","dialogElement","captionInstance","summaryInstance","baseFieldInstance","baseItemInstance","PIVOT_BUTTON_CLASS","replace","selectedField","getFieldByName","undefined"],"mappings":"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","sourcesContent":["import { createElement, remove, extend, getInstance, select } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../../common/base/constant';\nimport { PivotUtil } from '../../base/util';\n/**\n * `AggregateMenu` module to create aggregate type popup.\n */\n/** @hidden */\nvar AggregateMenu = /** @class */ (function () {\n    /* eslint-disable */\n    /**\n     * Constructor for the rener action.\n     * @hidden\n     */\n    function AggregateMenu(parent) {\n        this.menuInfo = [];\n        this.stringAggregateTypes = ['Count', 'DistinctCount'];\n        this.parent = parent;\n    }\n    /**\n     * Initialize the pivot table rendering\n     * @returns {void}\n     * @private\n     */\n    AggregateMenu.prototype.render = function (args, parentElement) {\n        /* eslint-enable */\n        this.parentElement = parentElement;\n        this.openContextMenu(args);\n    };\n    AggregateMenu.prototype.openContextMenu = function (args) {\n        var _this = this;\n        var fieldName = args.target.parentElement.id;\n        this.buttonElement = args.target.parentElement;\n        var isStringField = this.parent.engineModule.fieldList[fieldName].type !== 'number' ? 1 : 0;\n        this.summaryTypes = this.getMenuItem(isStringField).slice();\n        var eventArgs = {\n            cancel: false, fieldName: fieldName, aggregateTypes: this.summaryTypes, displayMenuCount: 7\n        };\n        var control = this.parent.getModuleName() === 'pivotfieldlist' && this.parent.isPopupView ?\n            this.parent.pivotGridModule : this.parent;\n        control.trigger(events.aggregateMenuOpen, eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                _this.summaryTypes = observedArgs.aggregateTypes;\n                _this.createContextMenu(isStringField, observedArgs.displayMenuCount);\n                _this.currentMenu = args.target;\n                var pos = _this.currentMenu.getBoundingClientRect();\n                if (_this.parent.enableRtl) {\n                    _this.menuInfo[isStringField].open(pos.top + (window.scrollY || document.documentElement.scrollTop), pos.left - 105);\n                }\n                else {\n                    _this.menuInfo[isStringField].open(pos.top + (window.scrollY || document.documentElement.scrollTop), pos.left);\n                }\n            }\n        });\n    };\n    AggregateMenu.prototype.createContextMenu = function (isStringField, displayMenuCount) {\n        var _this = this;\n        var menuItems = [];\n        menuItems[isStringField] = [];\n        if (this.menuInfo[isStringField] && !this.menuInfo[isStringField].isDestroyed) {\n            this.menuInfo[isStringField].destroy();\n        }\n        var checkDuplicates = [];\n        for (var i = 0; i < this.summaryTypes.length; i++) {\n            var key = this.summaryTypes[i];\n            if (isStringField) {\n                if ((this.stringAggregateTypes.indexOf(key) > -1) && (checkDuplicates.indexOf(key) < 0)) {\n                    menuItems[isStringField].push({ text: this.parent.localeObj.getConstant(key), id: this.parent.element.id + 'StringMenu_' + key });\n                    checkDuplicates.push(key);\n                }\n            }\n            else {\n                if ((this.parent.getAllSummaryType().indexOf(key) > -1) && (checkDuplicates.indexOf(key) < 0)) {\n                    menuItems[isStringField].push({ text: this.parent.localeObj.getConstant(key), id: this.parent.element.id + '_' + key });\n                    checkDuplicates.push(key);\n                }\n            }\n        }\n        if (menuItems[isStringField].length > displayMenuCount) {\n            menuItems[isStringField].splice(displayMenuCount);\n            menuItems[isStringField].push({\n                text: this.parent.localeObj.getConstant('MoreOption'),\n                id: this.parent.element.id + '_' + 'MoreOption'\n            });\n        }\n        var menuOptions;\n        menuOptions = {\n            items: menuItems[isStringField],\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            beforeOpen: this.beforeMenuOpen.bind(this, isStringField),\n            onClose: function (args) {\n                select('#' + _this.buttonElement.id, _this.parentElement).focus();\n            },\n            select: this.selectOptionInContextMenu.bind(this)\n        };\n        var contextMenu = document.getElementById(this.parent.element.id + (isStringField ? 'valueFieldStringContextMenu' : 'valueFieldContextMenu'));\n        if (contextMenu !== null) {\n            contextMenu.innerHTML = '';\n        }\n        else {\n            contextMenu = createElement('ul', {\n                id: this.parent.element.id + (isStringField ? 'valueFieldStringContextMenu' : 'valueFieldContextMenu')\n            });\n        }\n        this.parent.element.appendChild(contextMenu);\n        this.menuInfo[isStringField] = new Menu(menuOptions);\n        this.menuInfo[isStringField].isStringTemplate = true;\n        this.menuInfo[isStringField].appendTo(contextMenu);\n    };\n    AggregateMenu.prototype.getMenuItem = function (isStringField) {\n        var menuItems = [];\n        for (var i = 0; i < this.parent.aggregateTypes.length; i++) {\n            var key = this.parent.aggregateTypes[i];\n            if (isStringField) {\n                if ((this.stringAggregateTypes.indexOf(key) > -1) && (menuItems.indexOf(key) === -1)) {\n                    menuItems.push(key);\n                }\n            }\n            else {\n                if ((this.parent.getAllSummaryType().indexOf(key) > -1) && (menuItems.indexOf(key) === -1)) {\n                    menuItems.push(key);\n                }\n            }\n        }\n        return menuItems;\n    };\n    AggregateMenu.prototype.beforeMenuOpen = function (isString, args) {\n        args.element.style.zIndex = (this.menuInfo[isString].element.style.zIndex + 3).toString();\n        args.element.style.display = 'inline';\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    AggregateMenu.prototype.createValueSettingsDialog = function (target, parentElement, type) {\n        var _this = this;\n        this.parentElement = parentElement;\n        var valueDialog = createElement('div', {\n            id: this.parentElement.id + '_ValueDialog',\n            className: 'e-value-field-settings',\n            attrs: { 'data-field': target.id }\n        });\n        this.parentElement.appendChild(valueDialog);\n        this.valueDialog = new Dialog({\n            animationSettings: { effect: 'Fade' },\n            allowDragging: true,\n            header: this.parent.localeObj.getConstant('valueFieldSettings'),\n            content: this.createFieldOptions(target, type),\n            isModal: true,\n            visible: true,\n            showCloseIcon: true,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            width: 'auto',\n            height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: [\n                {\n                    click: this.updateValueSettings.bind(this),\n                    buttonModel: { cssClass: cls.OK_BUTTON_CLASS, content: this.parent.localeObj.getConstant('ok'), isPrimary: true }\n                },\n                {\n                    click: function () {\n                        _this.valueDialog.hide();\n                    },\n                    buttonModel: { cssClass: cls.CANCEL_BUTTON_CLASS, content: this.parent.localeObj.getConstant('cancel') }\n                }\n            ],\n            closeOnEscape: (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') ? false : true,\n            target: this.parentElement,\n            overlayClick: function () {\n                _this.removeDialog();\n            },\n            close: this.removeDialog.bind(this)\n        });\n        this.valueDialog.isStringTemplate = true;\n        this.valueDialog.appendTo(valueDialog);\n        // this.valueDialog.element.querySelector('.e-dlg-header').innerHTML = this.parent.localeObj.getConstant('valueFieldSettings');\n    };\n    /* eslint-disable  */\n    AggregateMenu.prototype.createFieldOptions = function (buttonElement, type) {\n        var fieldCaption = buttonElement.getAttribute('data-caption');\n        var summaryType = (type && type !== 'MoreOption') ? type : buttonElement.getAttribute('data-type');\n        var baseField = buttonElement.getAttribute('data-basefield');\n        var baseItem = buttonElement.getAttribute('data-baseitem');\n        summaryType = (summaryType.toString() !== 'undefined' ? summaryType : 'Sum');\n        var summaryDataSource = [];\n        var summaryItems = this.summaryTypes;\n        var checkDuplicates = [];\n        for (var i = 0; i < summaryItems.length; i++) {\n            if (this.parent.getAllSummaryType().indexOf(summaryItems[i]) > -1 && checkDuplicates.indexOf(summaryItems[i]) < 0) {\n                summaryDataSource.push({ value: summaryItems[i], text: this.parent.localeObj.getConstant(summaryItems[i]) });\n                checkDuplicates.push(summaryItems[i]);\n            }\n        }\n        var baseItemTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom'];\n        var baseFieldTypes = ['DifferenceFrom', 'PercentageOfDifferenceFrom', 'PercentageOfParentTotal'];\n        var dataFields = extend([], this.parent.dataSourceSettings.rows, null, true);\n        dataFields = dataFields.concat(this.parent.dataSourceSettings.columns);\n        var fieldDataSource = [];\n        var fieldItemDataSource = [];\n        // let summaryDataSource: { [key: string]: Object }[] = [];\n        // for (let type of summaryTypes) {\n        //     summaryDataSource.push({ value: type, text: type });\n        // }\n        for (var _i = 0, dataFields_1 = dataFields; _i < dataFields_1.length; _i++) {\n            var field = dataFields_1[_i];\n            var value = field.name;\n            var text = (field.caption ? field.caption : field.name);\n            fieldDataSource.push({ value: value, text: text });\n        }\n        if (Object.keys(fieldDataSource).length === 0) {\n            fieldDataSource.push({ value: '', text: '' });\n            baseField = '';\n            fieldItemDataSource = [];\n        }\n        else {\n            baseField = (baseField && (baseField.toString() !== 'undefined' && baseField.toString() !== 'null') ? baseField : fieldDataSource[0].value);\n            fieldItemDataSource = Object.keys(this.parent.engineModule.fieldList[(baseField.toString() !== 'undefined' ?\n                baseField : fieldDataSource[0].value)].formattedMembers);\n        }\n        baseItem = (baseItem.toString() !== 'undefined' ? baseItem : fieldItemDataSource[0]);\n        var mainDiv = createElement('div', {\n            className: 'e-value-field-div-content', id: this.parentElement.id + '_field_div_content',\n            attrs: { 'data-type': summaryType, 'data-caption': fieldCaption, 'data-basefield': baseField, 'data-baseitem': baseItem }\n        });\n        var textWrappper = createElement('div', { className: 'e-field-name-text-wrapper', });\n        var filterWrapperDiv1 = createElement('div', { className: 'e-field-option-wrapper' });\n        var optionWrapperDiv1 = createElement('div', { className: 'e-type-option-wrapper' });\n        var optionWrapperDiv2 = createElement('div', { className: 'e-base-field-option-wrapper' });\n        var optionWrapperDiv3 = createElement('div', { className: 'e-base-item-option-wrapper' });\n        var texttitle = createElement('div', { className: 'e-field-name-title', innerHTML: this.parent.localeObj.getConstant('sourceName') + '&nbsp;' });\n        var textContent = createElement('div', { className: 'e-field-name-content', innerHTML: buttonElement.id.toString() });\n        var inputTextDiv1 = createElement('div', {\n            className: 'e-type-option-text', innerHTML: this.parent.localeObj.getConstant('sourceCaption')\n        });\n        var optionTextDiv1 = createElement('div', {\n            className: 'e-base-field-option-text', innerHTML: this.parent.localeObj.getConstant('summarizeValuesBy')\n        });\n        var optionTextDiv2 = createElement('div', {\n            className: 'e-base-item-option-text', innerHTML: this.parent.localeObj.getConstant('baseField')\n        });\n        var optionTextDiv3 = createElement('div', {\n            className: 'e-type-option-text', innerHTML: this.parent.localeObj.getConstant('baseItem')\n        });\n        var inputDiv1 = createElement('div', { className: 'e-caption-input-wrapper' });\n        var dropOptionDiv1 = createElement('div', { id: this.parentElement.id + '_type_option' });\n        var dropOptionDiv2 = createElement('div', { id: this.parentElement.id + '_base_field_option' });\n        var dropOptionDiv3 = createElement('div', { id: this.parentElement.id + '_base_item_option' });\n        var inputField1 = createElement('input', {\n            id: this.parentElement.id + 'type_input_option',\n            className: 'e-caption-input-text',\n            attrs: { 'type': 'text' }\n        });\n        textWrappper.appendChild(texttitle);\n        textWrappper.appendChild(textContent);\n        inputDiv1.appendChild(inputTextDiv1);\n        inputDiv1.appendChild(inputField1);\n        optionWrapperDiv1.appendChild(optionTextDiv1);\n        optionWrapperDiv2.appendChild(optionTextDiv2);\n        optionWrapperDiv3.appendChild(optionTextDiv3);\n        optionWrapperDiv1.appendChild(dropOptionDiv1);\n        optionWrapperDiv2.appendChild(dropOptionDiv2);\n        optionWrapperDiv3.appendChild(dropOptionDiv3);\n        filterWrapperDiv1.appendChild(textWrappper);\n        filterWrapperDiv1.appendChild(inputDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv1);\n        filterWrapperDiv1.appendChild(optionWrapperDiv2);\n        filterWrapperDiv1.appendChild(optionWrapperDiv3);\n        mainDiv.appendChild(filterWrapperDiv1);\n        var popupInstance = this;\n        var optionWrapper1 = new DropDownList({\n            dataSource: summaryDataSource, enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            fields: { value: 'value', text: 'text' },\n            value: summaryType,\n            // popupWidth: 'auto',\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                optionWrapper2.enabled = baseFieldTypes.indexOf(args.value) !== -1 ? true : false;\n                optionWrapper3.enabled = baseItemTypes.indexOf(args.value) !== -1 ? true : false;\n                if (optionWrapper3.enabled && optionWrapper3.dataSource.length === 1) {\n                    optionWrapper3.dataSource = fieldItemDataSource;\n                    optionWrapper3.dataBind();\n                }\n            }\n        });\n        optionWrapper1.isStringTemplate = true;\n        optionWrapper1.appendTo(dropOptionDiv1);\n        var optionWrapper2 = new DropDownList({\n            dataSource: fieldDataSource, enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            fields: { value: 'value', text: 'text' },\n            value: baseField,\n            // popupWidth: 'auto',\n            enabled: (baseFieldTypes.indexOf(summaryType) !== -1 ? true : false),\n            cssClass: cls.VALUE_OPTIONS_CLASS, width: '100%',\n            change: function (args) {\n                fieldItemDataSource = Object.keys(popupInstance.parent.engineModule.fieldList[args.value].formattedMembers);\n                optionWrapper3.dataSource = fieldItemDataSource;\n                optionWrapper3.value = fieldItemDataSource[0];\n                optionWrapper3.filterBarPlaceholder = popupInstance.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0];\n                optionWrapper3.dataBind();\n            }\n        });\n        optionWrapper2.isStringTemplate = true;\n        optionWrapper2.appendTo(dropOptionDiv2);\n        var optionWrapper3 = new DropDownList({\n            dataSource: [fieldItemDataSource[0]], enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            value: baseItem,\n            // popupWidth: 'auto',\n            allowFiltering: true,\n            filterBarPlaceholder: this.parent.localeObj.getConstant('example') + ' ' + fieldItemDataSource[0],\n            enabled: (baseItemTypes.indexOf(summaryType) !== -1 ? true : false),\n            cssClass: cls.FILTER_OPERATOR_CLASS, width: '100%',\n        });\n        optionWrapper3.isStringTemplate = true;\n        optionWrapper3.appendTo(dropOptionDiv3);\n        var inputObj1 = new MaskedTextBox({\n            placeholder: 'Enter field caption',\n            // floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            value: fieldCaption, width: '100%'\n        });\n        inputObj1.isStringTemplate = true;\n        inputObj1.appendTo(inputField1);\n        return mainDiv;\n    };\n    AggregateMenu.prototype.selectOptionInContextMenu = function (menu) {\n        if (menu.item.text !== null) {\n            var buttonElement = this.currentMenu.parentElement;\n            var type = menu.item.id.split('_').pop();\n            if (type === 'MoreOption' || type === 'PercentageOfDifferenceFrom'\n                || type === 'PercentageOfParentTotal' || type === 'DifferenceFrom') {\n                this.createValueSettingsDialog(buttonElement, this.parentElement, type);\n            }\n            else {\n                var field = buttonElement.getAttribute('data-uid');\n                var valuefields = this.parent.dataSourceSettings.values;\n                var contentElement = buttonElement.querySelector('.e-content');\n                var captionName = menu.item.text + ' ' + this.parent.localeObj.getConstant('of') + ' ' +\n                    this.parent.engineModule.fieldList[field].caption;\n                contentElement.innerHTML = captionName;\n                contentElement.setAttribute('title', captionName);\n                buttonElement.setAttribute('data-type', type);\n                for (var vCnt = 0; vCnt < this.parent.dataSourceSettings.values.length; vCnt++) {\n                    if (this.parent.dataSourceSettings.values[vCnt].name === field) {\n                        var dataSourceItem = extend({}, valuefields[vCnt].properties ?\n                            valuefields[vCnt].properties : valuefields[vCnt], null, true);\n                        dataSourceItem.type = type;\n                        this.parent.engineModule.fieldList[field].aggregateType = type;\n                        valuefields.splice(vCnt, 1, dataSourceItem);\n                        this.parent.lastAggregationInfo = dataSourceItem;\n                    }\n                }\n                this.updateDataSource();\n            }\n        }\n    };\n    AggregateMenu.prototype.updateDataSource = function (isRefreshed) {\n        if (!this.parent.allowDeferLayoutUpdate || this.parent.getModuleName() === 'pivotview') {\n            this.parent.updateDataSource(isRefreshed);\n        }\n        else {\n            if (this.parent.getModuleName() === 'pivotfieldlist' && this.parent.renderMode === 'Popup') {\n                this.parent.pivotGridModule.setProperties({\n                    dataSourceSettings: this.parent.dataSourceSettings.properties\n                }, true);\n                this.parent.pivotGridModule.notify(events.uiUpdate, this);\n                this.parent.pivotGridModule.engineModule = this.parent.engineModule;\n                /* eslint-enable @typescript-eslint/indent */\n            }\n            else {\n                this.parent.triggerPopulateEvent();\n            }\n        }\n    };\n    AggregateMenu.prototype.updateValueSettings = function () {\n        var dialogElement = this.valueDialog.element;\n        var captionInstance = getInstance(select('#' + this.parentElement.id + 'type_input_option'), MaskedTextBox);\n        var summaryInstance = getInstance(select('#' + this.parentElement.id + '_type_option'), DropDownList);\n        var baseFieldInstance = getInstance(select('#' + this.parentElement.id + '_base_field_option'), DropDownList);\n        var baseItemInstance = getInstance(select('#' + this.parentElement.id + '_base_item_option'), DropDownList);\n        var fieldName = dialogElement.getAttribute('data-field');\n        var buttonElement;\n        if (this.parentElement.querySelector('.' + cls.PIVOT_BUTTON_CLASS)) {\n            buttonElement = this.parentElement.\n                querySelector('.' + cls.PIVOT_BUTTON_CLASS + '.' + fieldName.replace(/[^A-Z0-9]/ig, ''));\n        }\n        if (buttonElement) {\n            var contentElement = buttonElement.querySelector('.e-content');\n            var captionName = this.parent.localeObj.getConstant(summaryInstance.value) + ' ' +\n                this.parent.localeObj.getConstant('of') + ' ' + captionInstance.value;\n            contentElement.innerHTML = captionName;\n            contentElement.setAttribute('title', captionName);\n            buttonElement.setAttribute('data-type', summaryInstance.value);\n            buttonElement.setAttribute('data-caption', captionInstance.value);\n            buttonElement.setAttribute('data-basefield', baseFieldInstance.value);\n            buttonElement.setAttribute('data-baseitem', baseItemInstance.value);\n        }\n        var selectedField = PivotUtil.getFieldByName(fieldName, this.parent.dataSourceSettings.values);\n        selectedField = selectedField.properties ?\n            selectedField.properties : selectedField;\n        selectedField.caption = captionInstance.value;\n        selectedField.type = summaryInstance.value;\n        selectedField.baseField = baseFieldInstance.value;\n        selectedField.baseItem = baseItemInstance.value;\n        this.valueDialog.close();\n        // this.parent.axisFieldModule.render();\n        this.parent.lastAggregationInfo = selectedField;\n        this.updateDataSource(true);\n    };\n    AggregateMenu.prototype.removeDialog = function () {\n        if (select('#' + this.buttonElement.id, this.parentElement)) {\n            select('#' + this.buttonElement.id, this.parentElement).focus();\n        }\n        if (this.valueDialog && !this.valueDialog.isDestroyed) {\n            this.valueDialog.destroy();\n        }\n        if (document.getElementById(this.parentElement.id + '_ValueDialog')) {\n            remove(document.getElementById(this.parentElement.id + '_ValueDialog'));\n        }\n    };\n    /**\n     * To destroy the pivot button event listener\n     * @returns {void}\n     * @hidden\n     */\n    AggregateMenu.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.menuInfo) {\n            if (this.menuInfo[1] !== undefined && !this.menuInfo[1].isDestroyed) {\n                this.menuInfo[1].destroy();\n            }\n            if (this.menuInfo[0] !== undefined && !this.menuInfo[0].isDestroyed) {\n                this.menuInfo[0].destroy();\n            }\n        }\n        else {\n            return;\n        }\n    };\n    return AggregateMenu;\n}());\nexport { AggregateMenu };\n"]},"metadata":{},"sourceType":"module"}