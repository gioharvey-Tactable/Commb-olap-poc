{"ast":null,"code":"import { titlePositionX, textElement, appendChildElement, getElement } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n\n/** @private */\n\nvar ToolBarSelector = function () {\n  function ToolBarSelector(chart) {\n    this.selectedSeries = '';\n    this.selectedIndicator = '';\n    this.selectedTrendLine = '';\n    this.indicators = [];\n    this.secondayIndicators = [];\n    this.stockChart = chart;\n    this.selectedSeries = this.stockChart.series[0].type;\n  }\n\n  ToolBarSelector.prototype.initializePeriodSelector = function () {\n    var periods = this.stockChart.tempPeriods;\n    this.stockChart.periods = periods;\n    this.stockChart.periodSelector.rootControl = this.stockChart;\n    var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n    var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n    var height = this.stockChart.toolbarHeight;\n    this.stockChart.periodSelector.appendSelector({\n      thumbSize: 0,\n      element: htmlElement,\n      width: rect.width,\n      height: height\n    }, rect.x);\n    this.initializeSeriesSelector();\n    this.initializeIndicatorSelector();\n    this.initializeTrendlineSelector();\n    this.exportButton();\n    this.printButton();\n    this.resetButton();\n  };\n  /**\n   * This method returns itemModel for dropdown button\n   */\n\n\n  ToolBarSelector.prototype.getDropDownItems = function (type) {\n    var result = [];\n\n    if (type === this.stockChart.seriesType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n        });\n      }\n\n      for (var i = 0; i < this.stockChart.series.length; i++) {\n        for (var j = 0; j < result.length; j++) {\n          var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n          text = text === 'OHLC' ? 'HiloOpenClose' : text;\n\n          if (text === this.stockChart.series[i].type) {\n            result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n          }\n        }\n      }\n    } else if (type === this.stockChart.exportType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: type[i].toString()\n        });\n      }\n    } else {\n      for (var i = 0; i < type.length; i++) {\n        if (type[i].toString() !== 'Print') {\n          result.push({\n            text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n          });\n        }\n      }\n    }\n\n    return result;\n  };\n  /**\n   * This method changes the type of series while selectind series in dropdown button\n   */\n\n\n  ToolBarSelector.prototype.addedSeries = function (seriesType) {\n    var series = this.stockChart.series;\n\n    for (var i = 0; i < series.length; i++) {\n      if (series[i].yName === 'volume') {\n        continue;\n      }\n\n      series[i].type = seriesType.indexOf('Candle') > -1 ? 'Candle' : seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType;\n      series[i].enableSolidCandles = seriesType === 'Candle';\n\n      for (var index = 0; index < series[i].trendlines.length; index++) {\n        var trendLine = series[i].trendlines[index];\n        trendLine.animation.enable = false;\n        trendLine.enableTooltip = false;\n      }\n    }\n  };\n\n  ToolBarSelector.prototype.initializeSeriesSelector = function () {\n    var _this = this;\n\n    var seriesType = new DropDownButton({\n      items: this.getDropDownItems(this.stockChart.seriesType),\n      select: function (args) {\n        _this.selectedSeries = args.item.text;\n\n        var text = _this.tickMark(args);\n\n        _this.addedSeries(text);\n\n        _this.stockChart.cartesianChart.initializeChart();\n\n        if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length && _this.stockChart.legendSettings.visible) {\n          var bounds = _this.stockChart.stockLegendModule.legendBounds;\n\n          _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n        }\n      }\n    });\n    seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n  };\n\n  ToolBarSelector.prototype.resetButton = function () {\n    var _this = this;\n\n    var isProtect = 'isProtectedOnChange';\n    this.stockChart[isProtect] = true;\n    var reset = new Button();\n    reset.appendTo('#' + this.stockChart.element.id + '_reset');\n\n    document.getElementById(this.stockChart.element.id + '_reset').onclick = function () {\n      var indicatorlength = _this.indicators.length;\n\n      while (indicatorlength) {\n        _this.stockChart.indicators.pop();\n\n        indicatorlength--;\n      }\n\n      _this.indicators = [];\n      _this.secondayIndicators = [];\n\n      if (!_this.stockChart.isSingleAxis) {\n        if (_this.stockChart.rows.length > 2) {\n          _this.stockChart.rows.splice(2, _this.stockChart.rows.length - 1);\n        }\n\n        if (_this.stockChart.axes.length > 2) {\n          _this.stockChart.axes.splice(1, _this.stockChart.axes.length - 1);\n\n          _this.stockChart.axes[0].rowIndex = 1;\n        }\n      } else {\n        _this.stockChart.rows = [{}];\n      }\n\n      for (var i = 0; i < _this.stockChart.series.length; i++) {\n        if (_this.stockChart.series[i].yName === 'volume') {\n          continue;\n        }\n\n        _this.stockChart.series[i].type = _this.stockChart.tempSeriesType[i];\n\n        if (_this.stockChart.series[i].trendlines.length !== 0) {\n          _this.stockChart.series[i].trendlines[0].width = 0;\n        }\n      }\n\n      _this.stockChart.indicatorElements = null;\n      _this.stockChart.resizeTo = null;\n      _this.stockChart.zoomChange = false;\n\n      _this.stockChart.refresh();\n\n      _this.stockChart[isProtect] = true;\n    };\n  };\n\n  ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n    var _this = this;\n\n    this.trendlineDropDown = new DropDownButton({\n      items: this.stockChart.resizeTo ? this.trendlineDropDown.items : this.getDropDownItems(this.stockChart.trendlineType),\n      select: function (args) {\n        var text = _this.tickMark(args);\n\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n\n        if (_this.trendline !== type) {\n          _this.trendline = type;\n\n          for (var i = 0; i < _this.stockChart.series.length; i++) {\n            if (_this.stockChart.series[i].yName === 'volume') {\n              continue;\n            }\n\n            if (_this.stockChart.series[0].trendlines.length === 0) {\n              var trendlines = void 0;\n\n              if (_this.stockChart.trendlinetriggered) {\n                trendlines = [{\n                  type: type,\n                  width: 1,\n                  enableTooltip: false\n                }];\n                _this.stockChart.trendlinetriggered = false;\n              }\n\n              _this.stockChart.series[0].trendlines = trendlines;\n            } else {\n              _this.stockChart.series[0].trendlines[0].width = 1;\n              _this.stockChart.series[0].trendlines[0].type = type;\n              _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n            }\n          }\n\n          _this.stockChart.cartesianChart.initializeChart();\n        } else {\n          args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n          _this.stockChart.series[0].trendlines[0].width = 0;\n          _this.trendline = null;\n\n          _this.stockChart.cartesianChart.initializeChart();\n        }\n      }\n    });\n    this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n  };\n\n  ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n    var _this = this;\n\n    this.indicatorDropDown = new DropDownButton({\n      items: this.stockChart.resizeTo ? this.indicatorDropDown.items : this.getDropDownItems(this.stockChart.indicatorType),\n      select: function (args) {\n        for (var l = 0; l < _this.stockChart.series.length; l++) {\n          if (_this.stockChart.series[l].trendlines.length !== 0) {\n            _this.stockChart.series[l].trendlines[0].animation.enable = false;\n          }\n        }\n\n        args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) : args.item.text;\n        var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type : _this.selectedIndicator.replace(type, '');\n\n        if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n          if (_this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n\n            var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n\n            _this.indicators.push(type);\n\n            _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n\n            _this.stockChart.cartesianChart.initializeChart();\n          } else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n\n            for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n              if (_this.stockChart.indicators[z].type === type) {\n                _this.stockChart.indicators.splice(z, 1);\n              }\n            }\n\n            _this.indicators.splice(_this.indicators.indexOf(type), 1);\n\n            _this.stockChart.cartesianChart.initializeChart();\n          }\n        } else {\n          _this.createIndicatorAxes(type, args);\n        }\n      }\n    });\n    this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n  };\n\n  ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n    var currentSeries = this.stockChart.series[0];\n    var indicator = [{\n      type: type,\n      period: 3,\n      yAxisName: yAxisName,\n      dataSource: currentSeries.localData,\n      xName: currentSeries.xName,\n      open: currentSeries.open,\n      close: currentSeries.close,\n      high: currentSeries.high,\n      low: currentSeries.low,\n      volume: currentSeries.volume,\n      fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n      animation: {\n        enable: false\n      },\n      upperLine: {\n        color: '#FFE200',\n        width: 1\n      },\n      periodLine: {\n        width: 2\n      },\n      lowerLine: {\n        color: '#FAA512',\n        width: 1\n      },\n      fastPeriod: 8,\n      slowPeriod: 5,\n      macdType: 'Both',\n      width: 1,\n      macdPositiveColor: '#6EC992',\n      macdNegativeColor: '#FF817F',\n      bandColor: 'rgba(245, 203, 35, 0.12)'\n    }];\n    return indicator;\n  };\n\n  ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n    if (this.indicators.indexOf(type) === -1) {\n      args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      this.indicators.push(type);\n      var len = this.stockChart.rows.length;\n      this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n      var row = [{\n        height: '' + (100 - len * 15) + 'px'\n      }];\n\n      if (this.stockChart.rows.length === 1) {\n        this.stockChart.isSingleAxis = true;\n      }\n\n      this.stockChart.rows = this.stockChart.rows.concat(row);\n\n      if (!this.stockChart.isSingleAxis) {\n        this.stockChart.axes[0].rowIndex += 1;\n      } else {\n        for (var i = 0; i < this.stockChart.axes.length; i++) {\n          this.stockChart.axes[i].rowIndex += 1;\n        }\n      }\n\n      var axis = [{\n        plotOffset: 10,\n        opposedPosition: true,\n        rowIndex: !this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0,\n        desiredIntervals: 1,\n        labelFormat: 'n2',\n        majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n        lineStyle: this.stockChart.primaryYAxis.lineStyle,\n        labelPosition: this.stockChart.primaryYAxis.labelPosition,\n        majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n        rangePadding: 'None',\n        name: type.toString()\n      }];\n      this.stockChart.axes = this.stockChart.axes.concat(axis);\n      this.stockChart.primaryYAxis.rowIndex = !this.stockChart.isSingleAxis ? 0 : len + 1;\n      var indicator = this.getIndicator(type, type.toString());\n      this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n      this.stockChart.cartesianChart.initializeChart();\n    } else {\n      args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n\n      for (var i = 0; i < this.stockChart.indicators.length; i++) {\n        if (this.stockChart.indicators[i].type === type) {\n          this.stockChart.indicators.splice(i, 1);\n        }\n      }\n\n      this.indicators.splice(this.indicators.indexOf(type), 1);\n      var removedIndex = 0;\n\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].name === type) {\n          removedIndex = this.stockChart.axes[z].rowIndex;\n          this.stockChart.rows.splice(z, 1);\n          this.stockChart.axes.splice(z, 1);\n        }\n      }\n\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n          this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n        }\n      }\n\n      this.stockChart.cartesianChart.initializeChart();\n    }\n  };\n\n  ToolBarSelector.prototype.tickMark = function (args) {\n    var text;\n    var items = args.item['parentObj'].items;\n\n    for (var i = 0; i < items.length; i++) {\n      items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ? items[i].text.substr(items[i].text.indexOf(';') + 1) : items[i].text;\n\n      if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n        items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n      }\n    }\n\n    if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n      text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n    } else {\n      text = args.item.text.replace('&#10004&nbsp;', '');\n    }\n\n    return text;\n  };\n\n  ToolBarSelector.prototype.printButton = function () {\n    var _this = this;\n\n    if (this.stockChart.exportType.indexOf('Print') > -1) {\n      var print_1 = new Button();\n      print_1.appendTo('#' + this.stockChart.element.id + '_print');\n\n      document.getElementById(this.stockChart.element.id + '_print').onclick = function () {\n        _this.stockChart.chart.print(_this.stockChart.element.id);\n      };\n    }\n  };\n\n  ToolBarSelector.prototype.exportButton = function () {\n    var _this = this;\n\n    var exportChart = new DropDownButton({\n      items: this.getDropDownItems(this.stockChart.exportType),\n      select: function (args) {\n        var type = args.item.text;\n        var stockChart = _this.stockChart;\n        var stockID = stockChart.element.id + '_stockChart_';\n        var additionalRect;\n        var svgHeight = stockChart.svgObject.getBoundingClientRect();\n\n        if (stockChart.chart.exportModule) {\n          _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings());\n\n          additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n\n          _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n\n          getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', // eslint-disable-next-line @typescript-eslint/indent\n            'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n          }\n\n          stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n          remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n          getElement(stockID + 'chart').style.transform = 'translateY(0px)';\n\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', // eslint-disable-next-line @typescript-eslint/indent\n            'translate(' + 0 + ',' + stockChart.cartesianChart.cartesianChartSize.height + ')');\n          }\n\n          _this.stockChart.svgObject.setAttribute('height', svgHeight.height.toString());\n        }\n      }\n    });\n    exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n  };\n\n  ToolBarSelector.prototype.calculateAutoPeriods = function () {\n    var defaultPeriods = [];\n    defaultPeriods = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax);\n    defaultPeriods.push({\n      text: 'YTD',\n      selected: true\n    }, {\n      text: 'All'\n    });\n    return defaultPeriods;\n  };\n\n  ToolBarSelector.prototype.findRange = function (min, max) {\n    var defaultPeriods = [];\n\n    if ((max - min) / 3.154e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      }, {\n        text: '1Y',\n        interval: 1,\n        intervalType: 'Years'\n      });\n    } else if ((max - min) / 1.577e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 2.628e+9 >= 1) {\n      defaultPeriods.push({\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      }, {\n        text: '3W',\n        interval: 3,\n        intervalType: 'Weeks'\n      }, {\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 8.64e+7 >= 1) {\n      defaultPeriods.push({\n        text: '1H',\n        interval: 1,\n        intervalType: 'Hours'\n      }, {\n        text: '12H',\n        interval: 12,\n        intervalType: 'Hours'\n      }, {\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      });\n    }\n\n    return defaultPeriods;\n  };\n  /**\n   * Text elements added to while export the chart\n   * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n   */\n\n\n  ToolBarSelector.prototype.addExportSettings = function () {\n    var exportElement = this.stockChart.renderer.createGroup({\n      id: this.stockChart.element.id + '_additionalExport',\n      width: this.stockChart.availableSize.width\n    });\n    var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle).height;\n    var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n    textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color, exportElement);\n    var style = {\n      size: '15px',\n      fontWeight: '500',\n      color: null,\n      fontStyle: 'Normal',\n      fontFamily: 'Segoe UI'\n    };\n    var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n    var y = titleHeight;\n    this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, 'black', exportElement);\n    x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n\n    if (this.selectedIndicator !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, 'black', exportElement);\n      x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n    }\n\n    if (this.selectedTrendLine !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, 'black', exportElement);\n    }\n\n    return exportElement;\n  };\n  /** @private */\n\n\n  ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n    if (isMinus === void 0) {\n      isMinus = false;\n    }\n\n    if (forceAnimate === void 0) {\n      forceAnimate = false;\n    }\n\n    var renderer = new SvgRenderer('');\n    var renderOptions = {};\n    var tspanElement;\n    renderOptions = {\n      'id': options.id,\n      'font-style': font.fontStyle,\n      'font-family': font.fontFamily,\n      'font-weight': font.fontWeight,\n      'text-anchor': options.anchor,\n      'x': options.x,\n      'y': options.y,\n      'fill': color,\n      'font-size': font.size,\n      'transform': options.transform,\n      'opacity': font.opacity,\n      'dominant-baseline': options.baseLine\n    };\n    var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n    var htmlObject = renderer.createText(renderOptions, text);\n\n    if (typeof options.text !== 'string' && options.text.length > 1) {\n      for (var i = 1, len = options.text.length; i < len; i++) {\n        options.text[i] = ' ' + options.text[i];\n        tspanElement = renderer.createTSpan({\n          'x': options.x + measureText(text, font).width + 5,\n          'id': options.id,\n          'y': options.y,\n          opacity: 0.5\n        }, options.text[i]);\n        htmlObject.appendChild(tspanElement);\n      }\n    }\n\n    appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n    return htmlObject;\n  };\n\n  return ToolBarSelector;\n}();\n\nexport { ToolBarSelector };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/toolbar-selector.js"],"names":["titlePositionX","textElement","appendChildElement","getElement","DropDownButton","Button","Rect","TextOption","measureText","SvgRenderer","remove","ToolBarSelector","chart","selectedSeries","selectedIndicator","selectedTrendLine","indicators","secondayIndicators","stockChart","series","type","prototype","initializePeriodSelector","periods","tempPeriods","periodSelector","rootControl","rect","chartAxisLayoutPanel","seriesClipRect","htmlElement","element","id","height","toolbarHeight","appendSelector","thumbSize","width","x","initializeSeriesSelector","initializeIndicatorSelector","initializeTrendlineSelector","exportButton","printButton","resetButton","getDropDownItems","result","seriesType","i","length","push","text","toString","j","replace","exportType","addedSeries","yName","indexOf","enableSolidCandles","index","trendlines","trendLine","animation","enable","enableTooltip","_this","items","select","args","item","tickMark","cartesianChart","initializeChart","stockLegendModule","legendCollections","legendSettings","visible","bounds","legendBounds","renderLegend","appendTo","isProtect","reset","document","getElementById","onclick","indicatorlength","pop","isSingleAxis","rows","splice","axes","rowIndex","tempSeriesType","indicatorElements","resizeTo","zoomChange","refresh","trendlineDropDown","trendlineType","split","toLocaleLowerCase","substr","toUpperCase","trendline","trendlinetriggered","indicatorDropDown","indicatorType","l","indicator","getIndicator","yAxisName","concat","z","createIndicatorAxes","currentSeries","period","dataSource","localData","xName","open","close","high","low","volume","fill","upperLine","color","periodLine","lowerLine","fastPeriod","slowPeriod","macdType","macdPositiveColor","macdNegativeColor","bandColor","len","row","axis","plotOffset","opposedPosition","desiredIntervals","labelFormat","majorGridLines","primaryYAxis","lineStyle","labelPosition","majorTickLines","rangePadding","name","removedIndex","print_1","print","exportChart","stockID","additionalRect","svgHeight","svgObject","getBoundingClientRect","exportModule","insertAdjacentElement","addExportSettings","firstElementChild","setAttribute","style","transform","enableSelector","cartesianChartSize","export","clientHeight","calculateAutoPeriods","defaultPeriods","findRange","seriesXMin","seriesXMax","selected","min","max","interval","intervalType","exportElement","renderer","createGroup","availableSize","titleHeight","title","titleStyle","options","size","fontWeight","fontStyle","fontFamily","y","textElementSpan","font","parent","isMinus","redraw","isAnimate","forceAnimate","animateDuration","renderOptions","tspanElement","anchor","opacity","baseLine","htmlObject","createText","createTSpan","appendChild"],"mappings":"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","sourcesContent":["import { titlePositionX, textElement, appendChildElement, getElement } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n/** @private */\nvar ToolBarSelector = /** @class */ (function () {\n    function ToolBarSelector(chart) {\n        this.selectedSeries = '';\n        this.selectedIndicator = '';\n        this.selectedTrendLine = '';\n        this.indicators = [];\n        this.secondayIndicators = [];\n        this.stockChart = chart;\n        this.selectedSeries = this.stockChart.series[0].type;\n    }\n    ToolBarSelector.prototype.initializePeriodSelector = function () {\n        var periods = this.stockChart.tempPeriods;\n        this.stockChart.periods = periods;\n        this.stockChart.periodSelector.rootControl = this.stockChart;\n        var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n        var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n        var height = this.stockChart.toolbarHeight;\n        this.stockChart.periodSelector.appendSelector({ thumbSize: 0, element: htmlElement, width: rect.width, height: height }, rect.x);\n        this.initializeSeriesSelector();\n        this.initializeIndicatorSelector();\n        this.initializeTrendlineSelector();\n        this.exportButton();\n        this.printButton();\n        this.resetButton();\n    };\n    /**\n     * This method returns itemModel for dropdown button\n     */\n    ToolBarSelector.prototype.getDropDownItems = function (type) {\n        var result = [];\n        if (type === this.stockChart.seriesType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n            }\n            for (var i = 0; i < this.stockChart.series.length; i++) {\n                for (var j = 0; j < result.length; j++) {\n                    var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n                    text = (text === 'OHLC') ? 'HiloOpenClose' : text;\n                    if (text === this.stockChart.series[i].type) {\n                        result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n                    }\n                }\n            }\n        }\n        else if (type === this.stockChart.exportType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: type[i].toString() });\n            }\n        }\n        else {\n            for (var i = 0; i < type.length; i++) {\n                if (type[i].toString() !== 'Print') {\n                    result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * This method changes the type of series while selectind series in dropdown button\n     */\n    ToolBarSelector.prototype.addedSeries = function (seriesType) {\n        var series = this.stockChart.series;\n        for (var i = 0; i < series.length; i++) {\n            if (series[i].yName === 'volume') {\n                continue;\n            }\n            series[i].type = (seriesType.indexOf('Candle') > -1 ? 'Candle' :\n                (seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType));\n            series[i].enableSolidCandles = seriesType === 'Candle';\n            for (var index = 0; index < series[i].trendlines.length; index++) {\n                var trendLine = series[i].trendlines[index];\n                trendLine.animation.enable = false;\n                trendLine.enableTooltip = false;\n            }\n        }\n    };\n    ToolBarSelector.prototype.initializeSeriesSelector = function () {\n        var _this = this;\n        var seriesType = new DropDownButton({\n            items: this.getDropDownItems(this.stockChart.seriesType),\n            select: function (args) {\n                _this.selectedSeries = args.item.text;\n                var text = _this.tickMark(args);\n                _this.addedSeries(text);\n                _this.stockChart.cartesianChart.initializeChart();\n                if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length\n                    && _this.stockChart.legendSettings.visible) {\n                    var bounds = _this.stockChart.stockLegendModule.legendBounds;\n                    _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n                }\n            }\n        });\n        seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n    };\n    ToolBarSelector.prototype.resetButton = function () {\n        var _this = this;\n        var isProtect = 'isProtectedOnChange';\n        this.stockChart[isProtect] = true;\n        var reset = new Button();\n        reset.appendTo('#' + this.stockChart.element.id + '_reset');\n        document.getElementById(this.stockChart.element.id + '_reset').onclick = function () {\n            var indicatorlength = _this.indicators.length;\n            while (indicatorlength) {\n                _this.stockChart.indicators.pop();\n                indicatorlength--;\n            }\n            _this.indicators = [];\n            _this.secondayIndicators = [];\n            if (!_this.stockChart.isSingleAxis) {\n                if (_this.stockChart.rows.length > 2) {\n                    _this.stockChart.rows.splice(2, _this.stockChart.rows.length - 1);\n                }\n                if (_this.stockChart.axes.length > 2) {\n                    _this.stockChart.axes.splice(1, _this.stockChart.axes.length - 1);\n                    _this.stockChart.axes[0].rowIndex = 1;\n                }\n            }\n            else {\n                _this.stockChart.rows = [{}];\n            }\n            for (var i = 0; i < _this.stockChart.series.length; i++) {\n                if (_this.stockChart.series[i].yName === 'volume') {\n                    continue;\n                }\n                _this.stockChart.series[i].type = _this.stockChart.tempSeriesType[i];\n                if (_this.stockChart.series[i].trendlines.length !== 0) {\n                    _this.stockChart.series[i].trendlines[0].width = 0;\n                }\n            }\n            _this.stockChart.indicatorElements = null;\n            _this.stockChart.resizeTo = null;\n            _this.stockChart.zoomChange = false;\n            _this.stockChart.refresh();\n            _this.stockChart[isProtect] = true;\n        };\n    };\n    ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n        var _this = this;\n        this.trendlineDropDown = new DropDownButton({\n            items: this.stockChart.resizeTo ? this.trendlineDropDown.items :\n                this.getDropDownItems(this.stockChart.trendlineType),\n            select: function (args) {\n                var text = _this.tickMark(args);\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n                if (_this.trendline !== type) {\n                    _this.trendline = type;\n                    for (var i = 0; i < _this.stockChart.series.length; i++) {\n                        if (_this.stockChart.series[i].yName === 'volume') {\n                            continue;\n                        }\n                        if (_this.stockChart.series[0].trendlines.length === 0) {\n                            var trendlines = void 0;\n                            if (_this.stockChart.trendlinetriggered) {\n                                trendlines = [{ type: type, width: 1, enableTooltip: false }];\n                                _this.stockChart.trendlinetriggered = false;\n                            }\n                            _this.stockChart.series[0].trendlines = trendlines;\n                        }\n                        else {\n                            _this.stockChart.series[0].trendlines[0].width = 1;\n                            _this.stockChart.series[0].trendlines[0].type = type;\n                            _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n                        }\n                    }\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n                else {\n                    args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n                    _this.stockChart.series[0].trendlines[0].width = 0;\n                    _this.trendline = null;\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n            }\n        });\n        this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n    };\n    ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n        var _this = this;\n        this.indicatorDropDown = new DropDownButton({\n            items: this.stockChart.resizeTo ? this.indicatorDropDown.items :\n                this.getDropDownItems(this.stockChart.indicatorType),\n            select: function (args) {\n                for (var l = 0; l < _this.stockChart.series.length; l++) {\n                    if (_this.stockChart.series[l].trendlines.length !== 0) {\n                        _this.stockChart.series[l].trendlines[0].animation.enable = false;\n                    }\n                }\n                args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) :\n                    args.item.text;\n                var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type :\n                    _this.selectedIndicator.replace(type, '');\n                if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n                    if (_this.indicators.indexOf(type) === -1) {\n                        args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                        var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n                        _this.indicators.push(type);\n                        _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                    else {\n                        args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n                        for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n                            if (_this.stockChart.indicators[z].type === type) {\n                                _this.stockChart.indicators.splice(z, 1);\n                            }\n                        }\n                        _this.indicators.splice(_this.indicators.indexOf(type), 1);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                }\n                else {\n                    _this.createIndicatorAxes(type, args);\n                }\n            }\n        });\n        this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n    };\n    ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n        var currentSeries = this.stockChart.series[0];\n        var indicator = [{\n                type: type, period: 3, yAxisName: yAxisName,\n                dataSource: currentSeries.localData,\n                xName: currentSeries.xName,\n                open: currentSeries.open,\n                close: currentSeries.close,\n                high: currentSeries.high,\n                low: currentSeries.low,\n                volume: currentSeries.volume,\n                fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n                animation: { enable: false }, upperLine: { color: '#FFE200', width: 1 },\n                periodLine: { width: 2 }, lowerLine: { color: '#FAA512', width: 1 },\n                fastPeriod: 8, slowPeriod: 5, macdType: 'Both', width: 1,\n                macdPositiveColor: '#6EC992', macdNegativeColor: '#FF817F',\n                bandColor: 'rgba(245, 203, 35, 0.12)'\n            }];\n        return indicator;\n    };\n    ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n        if (this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            this.indicators.push(type);\n            var len = this.stockChart.rows.length;\n            this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n            var row = [{ height: '' + (100 - len * 15) + 'px' }];\n            if (this.stockChart.rows.length === 1) {\n                this.stockChart.isSingleAxis = true;\n            }\n            this.stockChart.rows = this.stockChart.rows.concat(row);\n            if (!this.stockChart.isSingleAxis) {\n                this.stockChart.axes[0].rowIndex += 1;\n            }\n            else {\n                for (var i = 0; i < this.stockChart.axes.length; i++) {\n                    this.stockChart.axes[i].rowIndex += 1;\n                }\n            }\n            var axis = [{\n                    plotOffset: 10, opposedPosition: true,\n                    rowIndex: (!this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0),\n                    desiredIntervals: 1,\n                    labelFormat: 'n2',\n                    majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n                    lineStyle: this.stockChart.primaryYAxis.lineStyle,\n                    labelPosition: this.stockChart.primaryYAxis.labelPosition,\n                    majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n                    rangePadding: 'None', name: type.toString()\n                }];\n            this.stockChart.axes = this.stockChart.axes.concat(axis);\n            this.stockChart.primaryYAxis.rowIndex = (!this.stockChart.isSingleAxis ? 0 : len + 1);\n            var indicator = this.getIndicator(type, type.toString());\n            this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n            this.stockChart.cartesianChart.initializeChart();\n        }\n        else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var i = 0; i < this.stockChart.indicators.length; i++) {\n                if (this.stockChart.indicators[i].type === type) {\n                    this.stockChart.indicators.splice(i, 1);\n                }\n            }\n            this.indicators.splice(this.indicators.indexOf(type), 1);\n            var removedIndex = 0;\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].name === type) {\n                    removedIndex = this.stockChart.axes[z].rowIndex;\n                    this.stockChart.rows.splice(z, 1);\n                    this.stockChart.axes.splice(z, 1);\n                }\n            }\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n                    this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n                }\n            }\n            this.stockChart.cartesianChart.initializeChart();\n        }\n    };\n    ToolBarSelector.prototype.tickMark = function (args) {\n        var text;\n        var items = args.item['parentObj'].items;\n        for (var i = 0; i < items.length; i++) {\n            items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ?\n                items[i].text.substr(items[i].text.indexOf(';') + 1) :\n                items[i].text;\n            if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n                items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n            }\n        }\n        if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n            text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n        }\n        else {\n            text = args.item.text.replace('&#10004&nbsp;', '');\n        }\n        return text;\n    };\n    ToolBarSelector.prototype.printButton = function () {\n        var _this = this;\n        if (this.stockChart.exportType.indexOf('Print') > -1) {\n            var print_1 = new Button();\n            print_1.appendTo('#' + this.stockChart.element.id + '_print');\n            document.getElementById(this.stockChart.element.id + '_print').onclick = function () {\n                _this.stockChart.chart.print(_this.stockChart.element.id);\n            };\n        }\n    };\n    ToolBarSelector.prototype.exportButton = function () {\n        var _this = this;\n        var exportChart = new DropDownButton({\n            items: this.getDropDownItems(this.stockChart.exportType),\n            select: function (args) {\n                var type = args.item.text;\n                var stockChart = _this.stockChart;\n                var stockID = stockChart.element.id + '_stockChart_';\n                var additionalRect;\n                var svgHeight = stockChart.svgObject.getBoundingClientRect();\n                if (stockChart.chart.exportModule) {\n                    _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings());\n                    additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n                    getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', \n                        // eslint-disable-next-line @typescript-eslint/indent\n                        'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n                    }\n                    stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n                    remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n                    getElement(stockID + 'chart').style.transform = 'translateY(0px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', \n                        // eslint-disable-next-line @typescript-eslint/indent\n                        'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height) + ')');\n                    }\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height).toString());\n                }\n            }\n        });\n        exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n    };\n    ToolBarSelector.prototype.calculateAutoPeriods = function () {\n        var defaultPeriods = [];\n        defaultPeriods = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax);\n        defaultPeriods.push({ text: 'YTD', selected: true }, { text: 'All' });\n        return defaultPeriods;\n    };\n    ToolBarSelector.prototype.findRange = function (min, max) {\n        var defaultPeriods = [];\n        if (((max - min) / 3.154e+10) >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' }, { text: '1Y', interval: 1, intervalType: 'Years' });\n        }\n        else if ((max - min) / 1.577e+10 >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' });\n        }\n        else if ((max - min) / 2.628e+9 >= 1) {\n            defaultPeriods.push({ text: '1D', interval: 1, intervalType: 'Days' }, { text: '3W', interval: 3, intervalType: 'Weeks' }, { text: '1M', interval: 1, intervalType: 'Months' });\n        }\n        else if ((max - min) / 8.64e+7 >= 1) {\n            defaultPeriods.push({ text: '1H', interval: 1, intervalType: 'Hours' }, { text: '12H', interval: 12, intervalType: 'Hours' }, { text: '1D', interval: 1, intervalType: 'Days' });\n        }\n        return defaultPeriods;\n    };\n    /**\n     * Text elements added to while export the chart\n     * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n     */\n    ToolBarSelector.prototype.addExportSettings = function () {\n        var exportElement = this.stockChart.renderer.createGroup({\n            id: this.stockChart.element.id + '_additionalExport',\n            width: this.stockChart.availableSize.width\n        });\n        var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle).height;\n        var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n        textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color, exportElement);\n        var style = { size: '15px', fontWeight: '500', color: null, fontStyle: 'Normal', fontFamily: 'Segoe UI' };\n        var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n        var y = titleHeight;\n        this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, 'black', exportElement);\n        x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n        if (this.selectedIndicator !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, 'black', exportElement);\n            x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n        }\n        if (this.selectedTrendLine !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, 'black', exportElement);\n        }\n        return exportElement;\n    };\n    /** @private */\n    ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n        if (isMinus === void 0) { isMinus = false; }\n        if (forceAnimate === void 0) { forceAnimate = false; }\n        var renderer = new SvgRenderer('');\n        var renderOptions = {};\n        var tspanElement;\n        renderOptions = {\n            'id': options.id,\n            'font-style': font.fontStyle,\n            'font-family': font.fontFamily,\n            'font-weight': font.fontWeight,\n            'text-anchor': options.anchor,\n            'x': options.x,\n            'y': options.y,\n            'fill': color,\n            'font-size': font.size,\n            'transform': options.transform,\n            'opacity': font.opacity,\n            'dominant-baseline': options.baseLine\n        };\n        var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n        var htmlObject = renderer.createText(renderOptions, text);\n        if (typeof options.text !== 'string' && options.text.length > 1) {\n            for (var i = 1, len = options.text.length; i < len; i++) {\n                options.text[i] = ' ' + options.text[i];\n                tspanElement = renderer.createTSpan({\n                    'x': options.x + measureText(text, font).width + 5, 'id': options.id,\n                    'y': (options.y), opacity: 0.5\n                }, options.text[i]);\n                htmlObject.appendChild(tspanElement);\n            }\n        }\n        appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n        return htmlObject;\n    };\n    return ToolBarSelector;\n}());\nexport { ToolBarSelector };\n"]},"metadata":{},"sourceType":"module"}