{"ast":null,"code":"import { Reorder, headerRefreshed } from '@syncfusion/ej2-grids';\nimport { Grid, Resize, ExcelExport, PdfExport, ContextMenu, Freeze } from '@syncfusion/ej2-grids';\nimport { Selection } from '@syncfusion/ej2-grids';\nimport { createElement, setStyleAttribute, remove, isNullOrUndefined, EventHandler, getElement } from '@syncfusion/ej2-base';\nimport { isBlazor, addClass, removeClass, SanitizeHtmlHelper, select, selectAll } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { AggregateMenu } from '../../common/popups/aggregate-menu';\nimport { PivotUtil } from '../../base/util';\n/**\n * Module to render PivotGrid control\n */\n\n/** @hidden */\n\nvar Render = function () {\n  /** Constructor for render module\n   * @param {PivotView} parent - Instance of pivot table.\n   */\n  function Render(parent) {\n    this.indentCollection = {};\n    this.colPos = 0;\n    this.lastSpan = 0;\n    this.lvlCollection = {};\n    this.hierarchyCollection = {};\n    this.lvlPosCollection = {};\n    this.hierarchyPosCollection = {};\n    this.position = 0;\n    this.measurePos = 0;\n    this.maxMeasurePos = 0;\n    this.hierarchyCount = 0;\n    this.actualText = '';\n    this.parent = parent;\n    this.resColWidth = this.parent.showGroupingBar && this.parent.groupingBarModule ? this.parent.isAdaptive ? 180 : 250 : this.parent.isAdaptive ? 140 : 200;\n    this.engine = this.parent.dataType === 'olap' ? this.parent.olapEngineModule : this.parent.engineModule;\n    this.gridSettings = parent.gridSettings;\n    this.formatList = this.getFormatList();\n    this.aggMenu = new AggregateMenu(this.parent);\n  }\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.render = function () {\n    var parent = this.parent;\n    var engine = this.parent.dataType === 'olap' ? this.parent.olapEngineModule : this.parent.engineModule;\n    this.parent.gridHeaderCellInfo = [];\n    this.parent.gridCellCollection = {};\n    this.injectGridModules(parent);\n    this.rowStartPos = this.getRowStartPos();\n\n    if (this.parent.grid && this.parent.grid.element && this.parent.element.querySelector('.e-grid')) {\n      this.parent.notEmpty = true;\n\n      if (!engine.isEngineUpdated) {\n        engine.headerContent = this.frameDataSource('header');\n        engine.valueContent = this.frameDataSource('value');\n      } else {\n        if (this.parent.enableValueSorting) {\n          engine.valueContent = this.frameDataSource('value');\n        }\n\n        engine.isEngineUpdated = false;\n      }\n\n      this.parent.grid.setProperties({\n        columns: this.frameStackedHeaders(),\n        dataSource: (this.parent.dataType === 'olap' ? true : parent.dataSourceSettings.values.length > 0) && !this.engine.isEmptyData ? engine.valueContent : this.frameDataSource('value')\n      }, true);\n\n      if (this.parent.grid.height === 'auto') {\n        var mCntHeight = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).offsetHeight;\n        /* eslint-disable-line */\n\n        var dataHeight = this.parent.grid.dataSource.length * this.parent.gridSettings.rowHeight;\n\n        if (mCntHeight > 50 && mCntHeight < dataHeight) {\n          this.parent.grid.contentModule.setHeightToContent(dataHeight);\n          /* eslint-disable-line */\n        }\n      }\n\n      this.parent.grid.notify('datasource-modified', {});\n\n      if (this.parent.isScrolling) {\n        this.parent.resizeInfo = {};\n      }\n\n      this.parent.grid.refreshColumns();\n\n      if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n        this.parent.groupingBarModule.setGridRowWidth();\n      }\n\n      var e = this.parent.element.querySelector('.e-movablecontent');\n      e.querySelector('colGroup').innerHTML = this.parent.grid.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n      this.parent.grid.width = this.calculateGridWidth();\n\n      if (!this.gridSettings.allowAutoResizing && this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n        this.parent.groupingBarModule.refreshUI();\n      }\n\n      if (!this.parent.isScrolling) {\n        this.calculateGridHeight(true);\n      } //this.parent.isScrolling = false;\n\n    } else {\n      this.parent.element.innerHTML = '';\n      this.bindGrid(this.parent, this.engine.isEmptyData ? true : false);\n      this.parent.element.appendChild(createElement('div', {\n        id: this.parent.element.id + '_grid'\n      }));\n      this.parent.grid.isStringTemplate = true;\n      this.parent.grid.appendTo('#' + this.parent.element.id + '_grid');\n    }\n\n    this.parent.grid.on(headerRefreshed, this.refreshHeader, this);\n  };\n\n  Render.prototype.refreshHeader = function () {\n    if (this.parent.enableVirtualization) {\n      var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n      var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n      var vtr = mCont.querySelector('.' + cls.VIRTUALTRACK_DIV);\n      this.parent.virtualHeaderDiv = mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV);\n\n      if (mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n        remove(mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV));\n      } else {\n        this.parent.virtualHeaderDiv = createElement('div', {\n          className: cls.VIRTUALTRACK_DIV\n        });\n      }\n\n      mHdr.appendChild(this.parent.virtualHeaderDiv);\n\n      if (vtr) {\n        setStyleAttribute(this.parent.virtualHeaderDiv, {\n          height: 0,\n          width: vtr.style.width\n        });\n      }\n\n      setStyleAttribute(mHdr.querySelector('.e-table'), {\n        transform: mCont.querySelector('.e-table').style.transform.split(',')[0] + ',' + 0 + 'px)'\n      });\n      var ele = this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n      mHdr.scrollLeft = ele.scrollLeft;\n    }\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.bindGrid = function (parent, isEmpty) {\n    this.injectGridModules(parent);\n    this.parent.grid = new Grid({\n      frozenColumns: 1,\n      frozenRows: 0,\n      enableHover: false,\n      dataSource: isEmpty ? this.frameEmptyData() : this.frameDataSource('value'),\n      columns: isEmpty ? this.frameEmptyColumns() : this.frameStackedHeaders(),\n      height: isEmpty ? 'auto' : this.calculateGridHeight(),\n      width: isEmpty ? this.gridSettings.allowAutoResizing ? this.parent.width : 400 : this.calculateGridWidth(),\n      locale: parent.locale,\n      enableRtl: parent.enableRtl,\n      allowExcelExport: parent.allowExcelExport,\n      allowPdfExport: parent.allowPdfExport,\n      allowResizing: this.gridSettings.allowResizing,\n      allowTextWrap: this.gridSettings.allowTextWrap,\n      allowReordering: this.parent.showGroupingBar ? false : this.gridSettings.allowReordering,\n      allowSelection: this.gridSettings.allowSelection,\n\n      /* eslint-disable-next-line */\n      contextMenuItems: this.gridSettings.contextMenuItems,\n      selectedRowIndex: this.gridSettings.selectedRowIndex,\n\n      /* eslint-disable-next-line */\n      selectionSettings: this.gridSettings.selectionSettings,\n      textWrapSettings: this.gridSettings.textWrapSettings,\n      printMode: this.gridSettings.printMode,\n      rowHeight: this.gridSettings.rowHeight,\n      gridLines: this.gridSettings.gridLines,\n      contextMenuClick: this.contextMenuClick.bind(this),\n      contextMenuOpen: this.contextMenuOpen.bind(this),\n      beforeCopy: this.gridSettings.beforeCopy ? this.gridSettings.beforeCopy.bind(this.parent) : undefined,\n      beforePrint: this.gridSettings.beforePrint ? this.gridSettings.beforePrint.bind(this.parent) : undefined,\n      printComplete: this.gridSettings.printComplete ? this.gridSettings.printComplete.bind(this.parent) : undefined,\n      rowSelecting: this.gridSettings.rowSelecting ? this.gridSettings.rowSelecting.bind(this.parent) : undefined,\n      rowSelected: this.rowSelected.bind(this),\n      rowDeselecting: this.gridSettings.rowDeselecting ? this.gridSettings.rowDeselecting.bind(this.parent) : undefined,\n      rowDeselected: this.rowDeselected.bind(this),\n      cellSelecting: this.gridSettings.cellSelecting ? this.gridSettings.cellSelecting.bind(this.parent) : undefined,\n      cellSelected: this.cellSelected.bind(this),\n      cellDeselecting: this.gridSettings.cellDeselecting ? this.gridSettings.cellDeselecting.bind(this.parent) : undefined,\n      cellDeselected: this.cellDeselected.bind(this),\n      resizeStart: this.gridSettings.resizeStart ? this.gridSettings.resizeStart.bind(this.parent) : undefined,\n      columnDragStart: this.gridSettings.columnDragStart ? this.gridSettings.columnDragStart.bind(this) : undefined,\n      columnDrag: this.gridSettings.columnDrag ? this.gridSettings.columnDrag.bind(this) : undefined,\n      columnDrop: this.gridSettings.columnDrop ? this.gridSettings.columnDrop.bind(this) : undefined,\n      beforeExcelExport: this.beforeExcelExport.bind(this),\n      resizing: this.setGroupWidth.bind(this),\n      resizeStop: this.onResizeStop.bind(this),\n      queryCellInfo: this.queryCellInfo.bind(this),\n      dataBound: this.dataBound.bind(this),\n      headerCellInfo: this.headerCellInfo.bind(this),\n      excelHeaderQueryCellInfo: this.excelHeaderQueryCellInfo.bind(this),\n      pdfHeaderQueryCellInfo: this.pdfHeaderQueryCellInfo.bind(this),\n      excelQueryCellInfo: this.excelQueryCellInfo.bind(this),\n      pdfQueryCellInfo: this.pdfQueryCellInfo.bind(this),\n      beforePdfExport: this.gridSettings.beforePdfExport ? this.gridSettings.beforePdfExport.bind(this) : undefined,\n      pdfExportComplete: this.pdfExportComplete.bind(this),\n      excelExportComplete: this.excelExportComplete.bind(this)\n    });\n\n    if (isBlazor()) {\n      var isJsComponent = 'isJsComponent';\n      /* eslint-disable-next-line */\n\n      this.parent.grid[isJsComponent] = true;\n    }\n\n    this.parent.grid.on('header-refreshed', this.headerRefreshed.bind(this));\n    this.parent.grid.on('export-DataBound', this.excelDataBound.bind(this));\n  };\n  /* eslint-disable-next-line */\n\n\n  Render.prototype.headerRefreshed = function (args) {\n    if (this.parent.lastGridSettings && Object.keys(this.parent.lastGridSettings).indexOf('allowResizing') > -1) {\n      this.parent.lastGridSettings = undefined;\n\n      if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n        this.parent.groupingBarModule.setGridRowWidth();\n      }\n    }\n  };\n  /* eslint-disable-next-line */\n\n\n  Render.prototype.beforeExcelExport = function (args) {\n    if (!isNullOrUndefined(args.gridObject.columns) && !isNullOrUndefined(this.parent.pivotColumns)) {\n      args.gridObject.columns[args.gridObject.columns.length - 1].width = this.parent.pivotColumns[this.parent.pivotColumns.length - 1].width;\n    }\n\n    this.parent.trigger(events.beforeExcelExport, args);\n  };\n\n  Render.prototype.rowSelected = function (args) {\n    this.parent.renderModule.selected();\n    this.parent.trigger(events.rowSelected, args);\n  };\n\n  Render.prototype.rowDeselected = function (args) {\n    this.parent.renderModule.selected();\n    this.parent.trigger(events.rowDeselected, args);\n  };\n\n  Render.prototype.cellSelected = function (args) {\n    if (this.parent.rowRangeSelection.enable) {\n      this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex, this.parent.rowRangeSelection.endIndex);\n      this.parent.rowRangeSelection.enable = false;\n    } else {\n      this.parent.renderModule.selected();\n      this.parent.trigger(events.selected, args);\n    }\n  };\n\n  Render.prototype.cellSelecting = function (args) {\n    this.parent.trigger(events.cellSelecting, args);\n  };\n\n  Render.prototype.cellDeselected = function (args) {\n    this.parent.renderModule.selected();\n    this.parent.trigger(events.cellDeselected, args);\n  };\n\n  Render.prototype.queryCellInfo = function (args) {\n    this.parent.renderModule.rowCellBoundEvent(args);\n  };\n\n  Render.prototype.headerCellInfo = function (args) {\n    this.parent.renderModule.columnCellBoundEvent(args);\n  };\n\n  Render.prototype.excelHeaderQueryCellInfo = function (args) {\n    this.parent.renderModule.excelColumnEvent(args);\n  };\n\n  Render.prototype.pdfQueryCellInfo = function (args) {\n    this.parent.renderModule.pdfRowEvent(args);\n  };\n\n  Render.prototype.excelQueryCellInfo = function (args) {\n    this.parent.renderModule.excelRowEvent(args);\n  };\n\n  Render.prototype.pdfHeaderQueryCellInfo = function (args) {\n    this.parent.renderModule.pdfColumnEvent(args);\n  };\n  /* eslint-disable */\n\n\n  Render.prototype.pdfExportComplete = function (args) {\n    if (this.parent.lastColumn !== undefined && this.parent.lastColumn.width !== 'auto') {\n      this.parent.lastColumn.width = 'auto';\n      this.parent.lastColumn = undefined;\n    }\n  };\n\n  Render.prototype.excelExportComplete = function (args) {\n    if (this.parent.lastColumn !== undefined && this.parent.lastColumn.width !== 'auto') {\n      this.parent.lastColumn.width = 'auto';\n      this.parent.lastColumn = undefined;\n    }\n  };\n  /* eslint-enable */\n\n\n  Render.prototype.dataBound = function (args) {\n    if (this.parent.cellTemplate && !isBlazor()) {\n      for (var _i = 0, _a = this.parent.gridHeaderCellInfo; _i < _a.length; _i++) {\n        var cell = _a[_i];\n\n        if (this.parent.cellTemplate) {\n          /* eslint-disable-next-line */\n          var element = this.parent.getCellTemplate()(cell, this.parent, 'cellTemplate', this.parent.element.id + '_cellTemplate', null, null, cell.targetCell);\n\n          if (element && element !== '' && element.length > 0) {\n            if (this.parent.enableHtmlSanitizer) {\n              this.parent.appendHtml(cell.targetCell, SanitizeHtmlHelper.sanitize(element[0].outerHTML));\n            } else {\n              this.parent.appendHtml(cell.targetCell, element[0].outerHTML);\n            }\n          }\n        }\n      }\n\n      this.parent.gridHeaderCellInfo = [];\n    }\n\n    if (this.parent.element.querySelector('.e-firstcell') && !(this.parent.dataSourceSettings.values.length === 1 && this.parent.dataSourceSettings.columns.length > 0)) {\n      if (this.parent.enableRtl) {\n        this.parent.element.querySelector('.e-firstcell').style.borderRight = 'none';\n      } else {\n        this.parent.element.querySelector('.e-firstcell').style.borderLeft = 'none';\n      }\n    }\n\n    if (this.parent.grid && this.parent.grid.widthService) {\n      this.parent.grid.widthService.setWidthToTable();\n    }\n\n    if (this.parent.notEmpty) {\n      this.calculateGridHeight(true);\n    }\n\n    this.parent.isScrolling = false;\n    this.setFocusOnLastCell();\n\n    if (!isNullOrUndefined(this.parent.renderReactTemplates)) {\n      /* eslint-disable-line */\n      this.parent.renderReactTemplates();\n      /* eslint-disable-line */\n    }\n\n    if (this.parent.isInitial) {\n      this.parent.refreshData();\n    }\n\n    this.parent.isInitial = false;\n    this.parent.notify(events.contentReady, {});\n  };\n\n  Render.prototype.setFocusOnLastCell = function () {\n    if (this.parent.keyboardModule && this.parent.keyboardModule.event && this.parent.keyboardModule.event.target.nodeName === 'TD') {\n      var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n      gridFocus.setFocusedElement(this.parent.keyboardModule.event.target);\n      gridFocus.focus(this.parent.keyboardModule.event);\n      addClass([this.parent.keyboardModule.event.target], ['e-focused', 'e-focus']);\n      this.parent.keyboardModule.event.target.setAttribute('tabindex', '0');\n      this.parent.keyboardModule.event = undefined;\n    }\n  };\n  /* eslint-disable */\n\n\n  Render.prototype.contextMenuOpen = function (args) {\n    var _this = this;\n\n    var _loop_1 = function (item) {\n      var cellTarget = this_1.parent.lastCellClicked;\n      var elem = null;\n      var bool = void 0;\n      var isGroupElement = void 0;\n\n      if (cellTarget.classList.contains('e-stackedheadercelldiv') || cellTarget.classList.contains('e-cellvalue') || cellTarget.classList.contains('e-headercelldiv') || cellTarget.classList.contains('e-icons') || cellTarget.classList.contains('e-rhandler')) {\n        elem = cellTarget.parentElement;\n      } else if (cellTarget.classList.contains('e-headercell') || cellTarget.classList.contains('e-rowcell') || cellTarget.classList.contains('e-columnsheader') || cellTarget.classList.contains('e-rowsheader') || cellTarget.classList.contains('e-valuescontent') || cellTarget.classList.contains('e-valuesheader')) {\n        elem = cellTarget;\n      } else if (cellTarget.classList.contains('e-headertext')) {\n        elem = cellTarget.parentElement.parentElement;\n      }\n\n      if (!elem) {\n        args.cancel = true;\n        return {\n          value: void 0\n        };\n      }\n\n      if (elem.classList.contains('e-valuesheader') || elem.classList.contains('e-stot')) {\n        bool = true;\n      }\n\n      if (this_1.parent.allowGrouping && this_1.parent.groupingModule && !this_1.validateField(elem)) {\n        isGroupElement = true;\n      }\n\n      var rowIndex = Number(elem.getAttribute('index'));\n      var colIndex = Number(elem.getAttribute('aria-colindex'));\n      var pivotValue1 = this_1.parent.pivotValues[rowIndex][colIndex];\n      var selectedID = item.id;\n\n      switch (selectedID) {\n        case this_1.parent.element.id + '_expand':\n          if (elem.querySelectorAll('.' + cls.EXPAND).length > 0) {\n            if (selectAll('#' + this_1.parent.element.id + '_expand', args.element)) {\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_DISABLE);\n            }\n\n            if (select('#' + this_1.parent.element.id + '_expand', args.element).classList.contains(cls.MENU_DISABLE)) {\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n\n            if (select('#' + this_1.parent.element.id + '_expand', args.element).classList.contains(cls.MENU_HIDE)) {\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.remove(cls.MENU_HIDE);\n              select('#' + this_1.parent.element.id + '_collapse', args.element).classList.remove(cls.MENU_HIDE);\n            }\n          } else {\n            if (bool) {\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_HIDE);\n            } else {\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_DISABLE);\n            }\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_collapse':\n          if (elem.querySelectorAll('.' + cls.COLLAPSE).length > 0) {\n            if (select('#' + this_1.parent.element.id + '_expand', args.element)) {\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_DISABLE);\n            }\n\n            if (select('#' + this_1.parent.element.id + '_collapse', args.element).classList.contains(cls.MENU_DISABLE)) {\n              select('#' + this_1.parent.element.id + '_collapse', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n\n            if (select('#' + this_1.parent.element.id + '_collapse', args.element).classList.contains(cls.MENU_HIDE)) {\n              select('#' + this_1.parent.element.id + '_collapse', args.element).classList.remove(cls.MENU_HIDE);\n              select('#' + this_1.parent.element.id + '_expand', args.element).classList.remove(cls.MENU_HIDE);\n            }\n          } else {\n            if (bool) {\n              select('#' + this_1.parent.element.id + '_collapse', args.element).classList.add(cls.MENU_HIDE);\n            } else {\n              select('#' + this_1.parent.element.id + '_collapse', args.element).classList.add(cls.MENU_DISABLE);\n            }\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_custom_group':\n          if (!isGroupElement && args.items.length === 2) {\n            args.cancel = true;\n          }\n\n          if (selectAll('#' + this_1.parent.element.id + '_custom_group', args.element)) {\n            addClass([select('#' + this_1.parent.element.id + '_custom_group', args.element)], cls.MENU_HIDE);\n          }\n\n          if (isGroupElement) {\n            if (selectAll('#' + this_1.parent.element.id + '_custom_group', args.element)) {\n              removeClass([select('#' + this_1.parent.element.id + '_custom_group', args.element)], cls.MENU_HIDE);\n            }\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_custom_ungroup':\n          if (selectAll('#' + this_1.parent.element.id + '_custom_ungroup', args.element)) {\n            addClass([select('#' + this_1.parent.element.id + '_custom_ungroup', args.element)], cls.MENU_HIDE);\n          }\n\n          if (isGroupElement) {\n            var isUngroupOption = false;\n            var fieldName = elem.getAttribute('fieldname');\n            var groupField = PivotUtil.getFieldByName(fieldName, this_1.parent.dataSourceSettings.groupSettings);\n\n            if (groupField && groupField.type === 'Custom' || this_1.parent.engineModule.fieldList[fieldName].isCustomField && fieldName.indexOf('_custom_group') > -1) {\n              groupField = PivotUtil.getFieldByName(fieldName.replace('_custom_group', ''), this_1.parent.dataSourceSettings.groupSettings);\n\n              if (groupField) {\n                var cell = this_1.parent.engineModule.pivotValues[Number(elem.getAttribute('index'))][Number(elem.getAttribute('aria-colindex'))];\n                var selectedCellsInfo = this_1.parent.groupingModule.getSelectedCells(cell.axis, fieldName, cell.actualText.toString());\n                selectedCellsInfo.push({\n                  axis: cell.axis,\n                  fieldName: fieldName,\n                  name: cell.actualText.toString(),\n                  cellInfo: cell\n                });\n                var selectedOptions = this_1.parent.groupingModule.getSelectedOptions(selectedCellsInfo);\n\n                for (var _i = 0, _a = groupField.customGroups; _i < _a.length; _i++) {\n                  var customGroup = _a[_i];\n\n                  if (selectedOptions.indexOf(customGroup.groupName) > -1) {\n                    isUngroupOption = true;\n                    break;\n                  }\n                }\n              }\n            } else if (groupField && (groupField.type === 'Date' || groupField.type === 'Number') || this_1.parent.engineModule.fieldList[fieldName].isCustomField && fieldName.indexOf('_date_group') > -1) {\n              isUngroupOption = true;\n            }\n\n            if (selectAll('#' + this_1.parent.element.id + '_custom_ungroup', args.element) && isUngroupOption) {\n              removeClass([select('#' + this_1.parent.element.id + '_custom_ungroup', args.element)], cls.MENU_HIDE);\n            }\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_drillthrough':\n          if (!this_1.parent.allowDrillThrough) {\n            if (select('#' + this_1.parent.element.id + '_drillthrough', args.element)) {\n              select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.add(cls.MENU_DISABLE);\n            }\n          } else if (!elem.classList.contains('e-summary')) {\n            if (elem.innerText === '') {\n              if (select('#' + this_1.parent.element.id + '_drillthrough', args.element)) {\n                select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.add(cls.MENU_DISABLE);\n              }\n            }\n          } else {\n            if (select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.contains(cls.MENU_DISABLE)) {\n              select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_sortasc':\n          if (!this_1.parent.enableValueSorting) {\n            if (select('#' + this_1.parent.element.id + '_sortasc', args.element)) {\n              select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.add(cls.MENU_DISABLE);\n            }\n          } else if (elem.querySelectorAll('.e-icon-descending').length > 0) {\n            if (select('#' + this_1.parent.element.id + '_sortdesc', args.element)) {\n              select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.add(cls.MENU_DISABLE);\n            } else {\n              select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n\n            if (select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.contains(cls.MENU_DISABLE)) {\n              select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n          } else if (select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.contains(cls.MENU_DISABLE)) {\n            select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.remove(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_sortdesc':\n          if (!this_1.parent.enableValueSorting) {\n            if (select('#' + this_1.parent.element.id + '_sortdesc', args.element)) {\n              select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.add(cls.MENU_DISABLE);\n            }\n          } else if (elem.querySelectorAll('.e-icon-ascending').length > 0) {\n            if (select('#' + this_1.parent.element.id + '_sortasc', args.element)) {\n              select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.add(cls.MENU_DISABLE);\n            } else {\n              select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n\n            if (select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.contains(cls.MENU_DISABLE)) {\n              select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.remove(cls.MENU_DISABLE);\n            }\n          } else if (select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.contains(cls.MENU_DISABLE)) {\n            select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.remove(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_CalculatedField':\n          if (!this_1.parent.allowCalculatedField) {\n            select('#' + this_1.parent.element.id + '_CalculatedField', args.element).classList.add(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_pdf':\n          if (!this_1.parent.allowPdfExport) {\n            select('#' + this_1.parent.element.id + '_pdf', args.element).classList.add(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_excel':\n          if (!this_1.parent.allowExcelExport) {\n            select('#' + this_1.parent.element.id + '_excel', args.element).classList.add(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_csv':\n          if (!this_1.parent.allowExcelExport) {\n            select('#' + this_1.parent.element.id + '_csv', args.element).classList.add(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_exporting':\n          if (!this_1.parent.allowExcelExport && !this_1.parent.allowPdfExport) {\n            select('#' + this_1.parent.element.id + '_exporting', args.element).classList.add(cls.MENU_DISABLE);\n          }\n\n          break;\n\n        case this_1.parent.element.id + '_aggregate':\n          if (select('#' + this_1.parent.element.id + '_aggregate', args.element) && !select('#' + this_1.parent.element.id + '_aggregate', args.element).classList.contains(cls.MENU_DISABLE)) {\n            select('#' + this_1.parent.element.id + '_aggregate', args.element).classList.add(cls.MENU_DISABLE);\n          }\n\n          if ((elem.classList.contains('e-valuesheader') || elem.classList.contains('e-valuescontent') || elem.classList.contains('e-stot') && elem.classList.contains('e-rowsheader')) && this_1.parent.dataType !== 'olap') {\n            var fieldType_1;\n\n            if (!(elem.innerText === '')) {\n              fieldType_1 = this_1.parent.engineModule.fieldList[pivotValue1.actualText.toString()].type;\n            }\n\n            var eventArgs = {\n              cancel: false,\n              fieldName: pivotValue1.actualText.toString(),\n              aggregateTypes: this_1.getMenuItem(fieldType_1).slice(),\n              displayMenuCount: 7\n            };\n            this_1.parent.trigger(events.aggregateMenuOpen, eventArgs, function (observedArgs) {\n              if (!observedArgs.cancel && !(elem.innerText === '')) {\n                var menuItem = [];\n                var checkDuplicates = [];\n\n                for (var i = 0; i < observedArgs.aggregateTypes.length; i++) {\n                  var key = observedArgs.aggregateTypes[i];\n\n                  if (fieldType_1 !== 'number') {\n                    if (['Count', 'DistinctCount'].indexOf(key) > -1 && checkDuplicates.indexOf(key) < 0) {\n                      menuItem.push({\n                        text: _this.parent.localeObj.getConstant(key),\n                        id: _this.parent.element.id + '_Agg' + key\n                      });\n                      checkDuplicates.push(key);\n                    }\n                  } else {\n                    if (_this.parent.getAllSummaryType().indexOf(key) > -1 && checkDuplicates.indexOf(key) < 0) {\n                      menuItem.push({\n                        text: _this.parent.localeObj.getConstant(key),\n                        id: _this.parent.element.id + '_Agg' + key\n                      });\n                      checkDuplicates.push(key);\n                    }\n                  }\n                }\n\n                if (menuItem.length > observedArgs.displayMenuCount) {\n                  menuItem.splice(observedArgs.displayMenuCount);\n                  menuItem.push({\n                    text: _this.parent.localeObj.getConstant('MoreOption'),\n                    id: _this.parent.element.id + '_Agg' + 'MoreOption'\n                  });\n                }\n\n                if (menuItem && menuItem.length >= 1) {\n                  item.items = menuItem;\n                  select('#' + _this.parent.element.id + '_aggregate', args.element).classList.remove(cls.MENU_DISABLE);\n                }\n              }\n            });\n          }\n\n          break;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      var state_1 = _loop_1(item);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    this.parent.trigger(events.contextMenuOpen, args);\n  };\n\n  Render.prototype.getMenuItem = function (isStringField) {\n    var menuItems = [];\n\n    for (var i = 0; i < this.parent.aggregateTypes.length; i++) {\n      var key = this.parent.aggregateTypes[i];\n\n      if (isStringField !== 'string') {\n        if (this.parent.getAllSummaryType().indexOf(key) > -1 && menuItems.indexOf(key) === -1) {\n          menuItems.push(key);\n        }\n      } else {\n        if (['Count', 'DistinctCount'].indexOf(key) > -1 && menuItems.indexOf(key) === -1) {\n          menuItems.push(key);\n        }\n      }\n    }\n\n    return menuItems;\n  };\n\n  Render.prototype.contextMenuClick = function (args) {\n    var _this = this; // this.parent.gridSettings.contextMenuClick();\n\n\n    var target = this.parent.lastCellClicked;\n    var selected = args.item.id;\n    var event = new MouseEvent('dblclick', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': true\n    });\n    var exportArgs = {};\n    var ele = null;\n\n    if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-cellvalue') || target.classList.contains('e-headercelldiv') || target.classList.contains('e-icons') || target.classList.contains('e-rhandler')) {\n      ele = target.parentElement;\n    } else if (target.classList.contains('e-headercell') || target.classList.contains('e-rowcell')) {\n      ele = target;\n    } else if (target.classList.contains('e-headertext')) {\n      ele = target.parentElement.parentElement;\n    }\n\n    var rowIndx = Number(ele.getAttribute('index'));\n    var colIndx = Number(ele.getAttribute('aria-colindex'));\n    var pivotValue = this.parent.pivotValues[rowIndx][colIndx];\n    var aggregateType;\n\n    if (args.item.id.indexOf(this.parent.element.id + '_Agg') > -1) {\n      this.field = this.parent.engineModule.fieldList[pivotValue.actualText.toString()].id;\n      this.fieldCaption = this.parent.engineModule.fieldList[pivotValue.actualText.toString()].caption;\n      aggregateType = args.item.id.split('_Agg')[1];\n    }\n\n    switch (selected) {\n      case this.parent.element.id + '_pdf':\n        exportArgs = {\n          pdfDoc: undefined,\n          isBlob: false,\n          isMultipleExport: false,\n          pdfExportProperties: {\n            fileName: 'Export.pdf'\n          }\n        };\n        this.parent.trigger(events.beforeExport, exportArgs, function (observedArgs) {\n          if (isBlazor()) {\n            var pdfProperties = PivotUtil.formatPdfExportProperties(observedArgs.pdfExportProperties);\n\n            _this.parent.pdfExport(pdfProperties, observedArgs.isMultipleExport, observedArgs.pdfDoc, observedArgs.isBlob);\n          } else {\n            _this.parent.pdfExport(observedArgs.pdfExportProperties, observedArgs.isMultipleExport, observedArgs.pdfDoc, observedArgs.isBlob);\n          }\n        });\n        break;\n\n      case this.parent.element.id + '_excel':\n        exportArgs = {\n          isBlob: false,\n          isMultipleExport: false,\n          workbook: undefined,\n          excelExportProperties: {\n            fileName: 'Export.xlsx'\n          }\n        };\n        this.parent.trigger(events.beforeExport, exportArgs, function (observedArgs) {\n          if (isBlazor()) {\n            var excelProperties = PivotUtil.formatExcelExportProperties(observedArgs.excelExportProperties);\n\n            _this.parent.excelExport(excelProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n          } else {\n            _this.parent.excelExport(observedArgs.excelExportProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n          }\n        });\n        break;\n\n      case this.parent.element.id + '_csv':\n        exportArgs = {\n          isBlob: false,\n          workbook: undefined,\n          isMultipleExport: false,\n          excelExportProperties: {\n            fileName: 'Export.csv'\n          }\n        };\n        this.parent.trigger(events.beforeExport, exportArgs, function (observedArgs) {\n          if (isBlazor()) {\n            var excelProperties = PivotUtil.formatExcelExportProperties(observedArgs.excelExportProperties);\n\n            _this.parent.csvExport(excelProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n          } else {\n            _this.parent.csvExport(observedArgs.excelExportProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n          }\n        });\n        break;\n\n      case this.parent.element.id + '_drillthrough_menu':\n        ele.dispatchEvent(event);\n        break;\n\n      case this.parent.element.id + '_sortasc':\n        this.parent.setProperties({\n          dataSourceSettings: {\n            valueSortSettings: {\n              headerText: pivotValue.valueSort.levelName,\n              headerDelimiter: this.parent.dataSourceSettings.valueSortSettings.headerDelimiter\n            }\n          }\n        });\n        this.parent.dataSourceSettings.valueSortSettings.sortOrder = 'Ascending';\n        break;\n\n      case this.parent.element.id + '_sortdesc':\n        this.parent.setProperties({\n          dataSourceSettings: {\n            valueSortSettings: {\n              headerText: pivotValue.valueSort.levelName,\n              headerDelimiter: this.parent.dataSourceSettings.valueSortSettings.headerDelimiter\n            }\n          }\n        });\n        this.parent.dataSourceSettings.valueSortSettings.sortOrder = 'Descending';\n        break;\n\n      case this.parent.element.id + '_expand':\n        if (ele.querySelectorAll('.' + cls.EXPAND)) {\n          var exp = ele.querySelectorAll('.' + cls.EXPAND)[0];\n          this.parent.onDrill(exp);\n        }\n\n        break;\n\n      case this.parent.element.id + '_collapse':\n        if (ele.querySelectorAll('.' + cls.COLLAPSE)) {\n          var colp = ele.querySelectorAll('.' + cls.COLLAPSE)[0];\n          this.parent.onDrill(colp);\n        }\n\n        break;\n\n      case this.parent.element.id + '_CalculatedField':\n        this.parent.calculatedFieldModule.createCalculatedFieldDialog();\n        break;\n\n      case this.parent.element.id + '_AggMoreOption':\n      case this.parent.element.id + '_AggDifferenceFrom':\n      case this.parent.element.id + '_AggPercentageOfDifferenceFrom':\n      case this.parent.element.id + '_AggPercentageOfParentTotal':\n        ele.setAttribute('id', this.field);\n        ele.setAttribute('data-caption', this.fieldCaption);\n        ele.setAttribute('data-field', this.field);\n        ele.setAttribute('data-type', this.engine.fieldList[pivotValue.actualText.toString()].aggregateType);\n        ele.setAttribute('data-basefield', this.engine.fieldList[pivotValue.actualText.toString()].baseField);\n        ele.setAttribute('data-baseItem', this.engine.fieldList[pivotValue.actualText.toString()].baseItem);\n        this.aggMenu.createValueSettingsDialog(ele, this.parent.element, aggregateType);\n        break;\n\n      case this.parent.element.id + '_Agg' + aggregateType:\n        this.updateAggregate(aggregateType);\n        break;\n\n      case this.parent.element.id + '_custom_group':\n      case this.parent.element.id + '_custom_ungroup':\n        if (this.parent.groupingModule) {\n          var args_1 = {\n            target: ele,\n            option: selected,\n            parentElement: this.parent.element\n          };\n          this.parent.notify(events.initGrouping, args_1);\n          this.parent.grid.contextMenuModule.contextMenu.close();\n        }\n\n        break;\n    }\n\n    this.parent.trigger(events.contextMenuClick, args);\n  };\n\n  Render.prototype.validateColumnTotalcell = function (columnIndex) {\n    var headerPosKeys = Object.keys(this.engine.headerContent);\n    var keysLength = headerPosKeys.length;\n    var sumLock = false;\n    var fieldName = \"\";\n\n    for (var pos = keysLength - 1; pos >= 0; pos--) {\n      var cell = this.engine.headerContent[headerPosKeys[pos]][columnIndex];\n\n      if (cell) {\n        sumLock = sumLock && fieldName !== '' ? fieldName === cell.valueSort.axis : false;\n        fieldName = cell.valueSort.axis ? cell.valueSort.axis.toString() : '';\n\n        if (cell.type === 'sum') {\n          sumLock = true;\n        }\n\n        if (sumLock && cell.members && cell.members.length > 0) {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    }\n\n    return false;\n  };\n\n  Render.prototype.validateField = function (target) {\n    var isValueField = false;\n\n    if (target.classList.contains('e-stot') || target.classList.contains('e-gtot') || target.classList.contains('e-valuescontent') || target.classList.contains('e-valuesheader')) {\n      isValueField = true;\n    } else {\n      var fieldName = target.getAttribute('fieldName');\n\n      if (!fieldName || fieldName == '') {\n        var rowIndx = Number(target.getAttribute('index'));\n        var colIndx = Number(target.getAttribute('aria-colindex'));\n        fieldName = this.engine.pivotValues[rowIndx][colIndx].actualText;\n      }\n\n      var valuefields = this.parent.dataSourceSettings.values;\n\n      for (var valueCnt = 0; valueCnt < valuefields.length; valueCnt++) {\n        if (this.parent.dataSourceSettings.values[valueCnt].name === fieldName) {\n          isValueField = true;\n          break;\n        }\n      }\n    }\n\n    return isValueField;\n  };\n  /* eslint-enable */\n\n\n  Render.prototype.updateAggregate = function (aggregate) {\n    if (this.parent.getAllSummaryType().indexOf(aggregate) > -1) {\n      var valuefields = this.parent.dataSourceSettings.values;\n\n      for (var valueCnt = 0; valueCnt < this.parent.dataSourceSettings.values.length; valueCnt++) {\n        if (this.parent.dataSourceSettings.values[valueCnt].name === this.field) {\n          var dataSourceItem = valuefields[valueCnt];\n          dataSourceItem.type = aggregate;\n        }\n      }\n    }\n  };\n\n  Render.prototype.injectGridModules = function (parent) {\n    Grid.Inject(Freeze);\n\n    if (parent.allowExcelExport) {\n      Grid.Inject(ExcelExport);\n    }\n\n    if (parent.allowPdfExport) {\n      Grid.Inject(PdfExport);\n    }\n\n    Grid.Inject(Selection, Reorder, Resize);\n\n    if (this.gridSettings.contextMenuItems) {\n      Grid.Inject(ContextMenu);\n    }\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.updateGridSettings = function () {\n    this.injectGridModules(this.parent);\n    this.parent.grid.allowResizing = this.gridSettings.allowResizing;\n    this.parent.grid.allowTextWrap = this.gridSettings.allowTextWrap;\n    this.parent.grid.allowReordering = this.parent.showGroupingBar ? false : this.gridSettings.allowReordering;\n    this.parent.grid.allowSelection = this.gridSettings.allowSelection;\n    /* eslint-disable-next-line */\n\n    this.parent.grid.contextMenuItems = this.gridSettings.contextMenuItems;\n    this.parent.grid.selectedRowIndex = this.gridSettings.selectedRowIndex;\n    /* eslint-disable-next-line */\n\n    this.parent.grid.selectionSettings = this.gridSettings.selectionSettings;\n    this.parent.grid.textWrapSettings = this.gridSettings.textWrapSettings;\n    this.parent.grid.printMode = this.gridSettings.printMode;\n    this.parent.grid.rowHeight = this.gridSettings.rowHeight;\n    this.parent.grid.gridLines = this.gridSettings.gridLines;\n\n    if (this.parent.lastGridSettings) {\n      var keys = Object.keys(this.parent.lastGridSettings);\n\n      if (keys.indexOf('height') > -1) {\n        this.parent.grid.height = this.gridSettings.height;\n      }\n\n      if (keys.indexOf('width') > -1) {\n        this.parent.grid.width = this.gridSettings.width;\n      }\n\n      this.updatePivotColumns();\n\n      if (keys.indexOf('allowTextWrap') > -1) {\n        this.parent.layoutRefresh();\n      }\n    }\n\n    this.clearColumnSelection();\n  };\n\n  Render.prototype.updatePivotColumns = function () {\n    var keys = Object.keys(this.parent.lastGridSettings);\n\n    for (var colPos = 0; colPos < this.parent.pivotColumns.length; colPos++) {\n      var pivotColumn = this.parent.pivotColumns[colPos];\n\n      for (var keyPos = 0; keyPos < keys.length; keyPos++) {\n        var key = keys[keyPos];\n        /* eslint-disable-next-line */\n\n        if (!isNullOrUndefined(this.parent.pivotColumns[colPos][key])) {\n          /* eslint-disable-next-line */\n          pivotColumn[key] = this.parent.lastGridSettings[key];\n        }\n      }\n    }\n\n    this.parent.fillGridColumns(this.parent.grid.columns);\n  };\n\n  Render.prototype.clearColumnSelection = function () {\n    removeClass(this.parent.element.querySelectorAll('.' + cls.CELL_ACTIVE_BGCOLOR), [cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR]);\n  };\n\n  Render.prototype.appendValueSortIcon = function (cell, tCell, rCnt, cCnt) {\n    if (this.parent.enableValueSorting && this.parent.dataType === 'pivot') {\n      var vSort = this.parent.dataSourceSettings.valueSortSettings;\n      var len = cell.type === 'grand sum' && this.parent.dataSourceSettings.values.length === 1 && !this.parent.dataSourceSettings.alwaysShowValueHeader ? 0 : this.parent.dataSourceSettings.values.length > 1 || this.parent.dataSourceSettings.alwaysShowValueHeader ? this.parent.engineModule.headerContent.length - 1 : this.parent.dataSourceSettings.columns.length === 0 ? 0 : this.parent.engineModule.headerContent.length - 1;\n      var lock = vSort && vSort.headerText ? cell.valueSort.levelName === vSort.headerText : cCnt === vSort.columnIndex;\n\n      if (vSort !== undefined && lock && rCnt === len && this.parent.dataSourceSettings.valueAxis === 'column') {\n        if (tCell.querySelector('.e-sortfilterdiv')) {\n          tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ? 'e-descending' : 'e-ascending');\n          tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ? 'e-icon-descending' : 'e-icon-ascending');\n        } else {\n          tCell.appendChild(createElement('div', {\n            className: vSort.sortOrder === 'Descending' ? 'e-icon-descending e-icons e-descending e-sortfilterdiv' : 'e-icon-ascending e-icons e-ascending e-sortfilterdiv'\n          }));\n        }\n\n        if (!isNullOrUndefined(cell.hasChild) && cell.type !== 'grand sum' && tCell.querySelector('.e-expand') && (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'))) {\n          var element = tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending');\n          setStyleAttribute(element, {\n            'padding-top': '12px'\n          });\n        }\n      } // return tCell;\n\n    }\n\n    return tCell;\n  };\n\n  Render.prototype.onResizeStop = function (args) {\n    /* eslint-disable-next-line */\n    var column = args.column.field === '0.formattedText' ? '0.formattedText' : args.column.customAttributes.cell.valueSort.levelName;\n    this.parent.resizeInfo[column] = Number(args.column.width.toString().split('px')[0]);\n\n    if (this.parent.enableVirtualization && args.column.field === '0.formattedText') {\n      if (this.parent.dataSourceSettings.values.length > 1) {\n        var gridColumns = this.parent.grid.columns[this.parent.grid.columns.length - 1].columns;\n        gridColumns[gridColumns.length - 1].minWidth = this.parent.gridSettings.columnWidth;\n      } else {\n        this.parent.grid.columns[this.parent.grid.columns.length - 1].minWidth = this.parent.gridSettings.columnWidth;\n      }\n\n      this.parent.layoutRefresh();\n    }\n\n    this.setGroupWidth(args);\n    this.calculateGridHeight(true);\n    this.parent.grid.hideScroll();\n  };\n\n  Render.prototype.setGroupWidth = function (args) {\n    if (this.parent.enableVirtualization && args.column.field === '0.formattedText') {\n      if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS) && Number(args.column.width.toString().split('px')[0]) < 250) {\n        args.cancel = true;\n      } else {\n        this.parent.element.querySelector('.e-frozenscrollbar').style.width = args.column.width.toString().split('px')[0] + 'px';\n      }\n    }\n\n    if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n      this.parent.groupingBarModule.refreshUI();\n\n      if (this.parent.element.querySelector('.e-group-row').offsetWidth < 245 && !this.parent.firstColWidth) {\n        args.cancel = true;\n        var gridColumn = this.parent.grid.columns;\n\n        if (gridColumn && gridColumn.length > 0) {\n          gridColumn[0].width = this.resColWidth;\n        }\n\n        this.parent.element.querySelector('.e-frozenheader').querySelector('col').style.width = this.resColWidth + 'px';\n        this.parent.element.querySelector('.e-frozencontent').querySelector('col').style.width = this.resColWidth + 'px';\n      }\n\n      this.parent.element.querySelector('.e-group-rows').style.height = 'auto';\n      this.parent.element.querySelector('.e-group-values').style.width = this.parent.element.querySelector('.e-group-row').offsetWidth + 'px';\n      var firstRowHeight = this.parent.element.querySelector('.e-headercontent').offsetHeight;\n      this.parent.element.querySelector('.e-group-rows').style.height = firstRowHeight + 'px';\n    }\n\n    if (args.cancel) {\n      var column = args.column.field === '0.formattedText' ? '0.formattedText' : args.column.customAttributes.cell.valueSort.levelName;\n      this.parent.resizeInfo[column] = Number(args.column.width.toString().split('px')[0]);\n\n      if (this.parent.enableVirtualization) {\n        this.parent.layoutRefresh();\n      }\n    }\n\n    if (this.parent.enableVirtualization) {\n      this.parent.resizedValue = args.cancel || args.column.field !== '0.formattedText' ? this.parent.resizedValue : Number(args.column.width.toString().split('px')[0]);\n    }\n\n    this.parent.trigger(args.e.type === 'touchend' || args.e.type === 'mouseup' ? events.resizeStop : events.resizing, args);\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.selected = function () {\n    clearTimeout(this.timeOutObj);\n    this.timeOutObj = setTimeout(this.onSelect.bind(this), 300);\n  };\n\n  Render.prototype.onSelect = function () {\n    var pivotArgs = {\n      selectedCellsInfo: [],\n      pivotValues: this.parent.pivotValues,\n      currentCell: null\n    };\n    /* eslint-disable-next-line */\n\n    var selectedElements = this.parent.element.querySelectorAll('.' + cls.CELL_SELECTED_BGCOLOR + ',.' + cls.SELECTED_BGCOLOR);\n\n    for (var _i = 0, selectedElements_1 = selectedElements; _i < selectedElements_1.length; _i++) {\n      var element = selectedElements_1[_i];\n      var colIndex = Number(element.getAttribute('aria-colindex'));\n      var rowIndex = Number(element.getAttribute('index'));\n      var cell = this.engine.pivotValues[rowIndex][colIndex];\n\n      if (cell) {\n        if (cell.axis === 'value') {\n          pivotArgs.selectedCellsInfo.push({\n            currentCell: cell,\n            value: cell.value,\n            columnHeaders: cell.columnHeaders,\n            rowHeaders: cell.rowHeaders,\n            measure: cell.actualText.toString()\n          });\n        } else if (cell.axis === 'column') {\n          pivotArgs.selectedCellsInfo.push({\n            currentCell: cell,\n            value: cell.formattedText,\n            columnHeaders: cell.valueSort.levelName,\n            rowHeaders: '',\n            measure: ''\n          });\n        } else {\n          pivotArgs.selectedCellsInfo.push({\n            currentCell: cell,\n            value: cell.formattedText,\n            columnHeaders: '',\n            rowHeaders: cell.valueSort.levelName,\n            measure: ''\n          });\n        }\n      }\n    }\n\n    this.parent.trigger(events.cellSelected, pivotArgs);\n  };\n\n  Render.prototype.rowCellBoundEvent = function (args) {\n    var tCell = args.cell;\n\n    if (tCell && this.parent.notEmpty && this.engine.headerContent) {\n      var customClass = this.parent.hyperlinkSettings.cssClass;\n      tCell.setAttribute('index', (Number(tCell.getAttribute('index')) + this.engine.headerContent.length).toString());\n      var cell = args.data[0];\n\n      if (tCell.getAttribute('aria-colindex') === '0') {\n        if (this.parent.dataType === 'pivot') {\n          var isValueCell = cell.type && cell.type === 'value';\n          tCell.innerText = '';\n          var level = cell.level ? cell.level : isValueCell ? this.lastSpan + 1 : 0;\n\n          do {\n            if (level > 0) {\n              tCell.appendChild(createElement('span', {\n                className: level === 0 ? '' : cls.NEXTSPAN\n              }));\n            }\n\n            level--;\n          } while (level > -1);\n\n          level = cell.level ? cell.level : 0;\n          this.lastSpan = !isValueCell ? level : this.lastSpan;\n\n          if (!cell.hasChild && level > 0) {\n            tCell.appendChild(createElement('span', {\n              className: cls.LASTSPAN\n            }));\n          }\n\n          var fieldName = void 0;\n\n          if (this.parent.dataSourceSettings.rows.length > 0 && (cell.valueSort ? Object.keys(cell.valueSort).length > 0 : true)) {\n            fieldName = level > -1 ? this.parent.dataSourceSettings.rows[level].name : '';\n            tCell.setAttribute('fieldname', fieldName);\n          }\n        } else {\n          tCell = this.onOlapRowCellBoundEvent(tCell, cell);\n        }\n\n        var localizedText = cell.formattedText;\n\n        if (cell.type) {\n          if (cell.type === 'grand sum') {\n            this.rowGrandPos = cell.rowIndex;\n            tCell.classList.add('e-gtot');\n            localizedText = this.parent.localeObj.getConstant('grandTotal');\n          } else if (cell.valueSort.levelName === this.parent.localeObj.getConstant('grandTotal') + this.parent.dataSourceSettings.valueSortSettings.headerDelimiter + cell.formattedText) {\n            tCell.classList.add('e-gtot');\n          } else {\n            tCell.classList.add('e-stot');\n          }\n        }\n\n        tCell.classList.add(cls.ROWSHEADER);\n\n        if (cell.hasChild === true && !cell.isNamedSet) {\n          tCell.appendChild(createElement('div', {\n            className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n            attrs: {\n              'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') : this.parent.localeObj.getConstant('expand')\n            }\n          }));\n        }\n\n        tCell.appendChild(createElement('span', {\n          className: cls.CELLVALUE,\n          innerHTML: this.parent.isRowCellHyperlink || cell.enableHyperlink ? '<a  data-url=\"' + localizedText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + localizedText + '</a>' : localizedText\n        }));\n        var vSort = this.parent.pivotView.dataSourceSettings.valueSortSettings;\n\n        if (this.parent.enableValueSorting) {\n          if (vSort && vSort.headerText && this.parent.dataSourceSettings.valueAxis === 'row' && this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName) {\n            if (this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName === vSort.headerText) {\n              var style = tCell.querySelector('.e-expand') || tCell.querySelector('.e-collapse') ? 'padding-top: 18px' : 'padding-top: 12px';\n              tCell.appendChild(createElement('div', {\n                className: vSort.sortOrder === 'Descending' ? 'e-icon-descending e-icons e-descending e-sortfilterdiv' : 'e-icon-ascending e-icons e-ascending e-sortfilterdiv',\n                styles: style\n              }));\n            }\n          }\n        }\n      } else {\n        var innerText = tCell.innerText;\n        tCell.innerText = '';\n        tCell.classList.add(cls.VALUESCONTENT);\n        cell = args.data[Number(tCell.getAttribute('aria-colindex'))];\n\n        if (cell.isSum) {\n          tCell.classList.add(cls.SUMMARY);\n        }\n\n        if (cell.isGrandSum || this.colGrandPos === Number(tCell.getAttribute('aria-colindex')) || this.rowGrandPos === Number(tCell.getAttribute('index'))) {\n          tCell.classList.add('e-gtot');\n        } else if (this.parent.dataType === 'olap' ? cell.isSum : this.validateColumnTotalcell(!isNullOrUndefined(cell.value) ? cell.colIndex : cell.colIndex - 1)) {\n          tCell.classList.add('e-colstot');\n        }\n\n        if (cell.cssClass) {\n          tCell.classList.add(cell.cssClass);\n        }\n\n        tCell.appendChild(createElement('span', {\n          className: cls.CELLVALUE,\n          innerHTML: tCell.className.indexOf('e-summary') !== -1 && this.parent.isSummaryCellHyperlink || tCell.className.indexOf('e-summary') === -1 && this.parent.isValueCellHyperlink || cell.enableHyperlink ? '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>' : innerText\n        }));\n\n        if (this.parent.gridSettings.allowReordering && !this.parent.showGroupingBar) {\n          tCell.setAttribute('aria-colindex', args.column.customAttributes.cell.colIndex.toString());\n        }\n      }\n\n      if (this.parent.cellTemplate) {\n        var index = tCell.getAttribute('index');\n        var colindex = tCell.getAttribute('aria-colindex');\n        var templateID = index + '_' + colindex;\n\n        if (!(window && isBlazor())) {\n          /* eslint-disable-next-line */\n          var element = this.parent.getCellTemplate()({\n            targetCell: tCell,\n            cellInfo: cell\n          }, this.parent, 'cellTemplate', this.parent.element.id + '_cellTemplate', null, null, tCell);\n\n          if (element && element !== '' && element.length > 0) {\n            if (this.parent.enableHtmlSanitizer) {\n              this.parent.appendHtml(tCell, SanitizeHtmlHelper.sanitize(element[0].outerHTML));\n            } else {\n              this.parent.appendHtml(tCell, element[0].outerHTML);\n            }\n          }\n        } else if (index && colindex) {\n          this.parent.gridCellCollection[templateID] = tCell;\n        }\n      }\n\n      this.unWireEvents(tCell);\n      this.wireEvents(tCell);\n    }\n\n    args.pivotview = this.parent;\n    this.parent.trigger(events.queryCellInfo, args);\n  };\n  /* eslint-disable */\n\n\n  Render.prototype.onOlapRowCellBoundEvent = function (tCell, cell) {\n    tCell.innerText = '';\n    var rowMeasurePos = this.engine.rowMeasurePos;\n\n    if (this.parent.enableVirtualization) {\n      if (cell.ordinal > -1 && this.parent.olapEngineModule.tupRowInfo.length > 0) {\n        var tupInfo = this.parent.olapEngineModule.tupRowInfo[cell.ordinal];\n        var memberPosition = tupInfo.uNameCollection.indexOf(cell.actualText.toString());\n        var cropUName = tupInfo.uNameCollection.substring(0, memberPosition) + (cell.memberType === 3 ? '' : cell.actualText.toString());\n        var fieldSep = cropUName.split('::[').map(function (item) {\n          return item[0] === '[' ? item : '[' + item;\n        });\n\n        if (cell.memberType === 3 && rowMeasurePos) {\n          fieldSep.push(cell.actualText.toString());\n        }\n\n        var nxtIndextCount = -1;\n        var lastIndextCount = 0;\n        var prevHasChild = false;\n\n        for (var fPos = 0; fPos < fieldSep.length; fPos++) {\n          var fieldMembers = fieldSep[fPos];\n          var membersCount = fieldMembers.split('~~').length;\n          nxtIndextCount += membersCount;\n          var hasChild = tupInfo.typeCollection[fPos] !== '2' ? this.engine.fieldList[tupInfo.members[fPos].getAttribute('Hierarchy')] && this.engine.fieldList[tupInfo.members[fPos].getAttribute('Hierarchy')].isHierarchy && fPos < this.parent.dataSourceSettings.rows.length - 1 && !this.parent.dataSourceSettings.rows[fPos + 1].isNamedSet && this.parent.dataSourceSettings.rows[fPos + 1].name.indexOf('[Measures]') < 0 && this.engine.fieldList[this.parent.dataSourceSettings.rows[fPos + 1].name] && this.engine.fieldList[this.parent.dataSourceSettings.rows[fPos + 1].name].hasAllMember ? true : Number(tupInfo.members[fPos].querySelector('CHILDREN_CARDINALITY').textContent) > 0 : false;\n          lastIndextCount += fPos > 0 && prevHasChild && !hasChild ? 1 : 0;\n          prevHasChild = hasChild;\n        }\n\n        var indent = 0;\n\n        for (var iPos = 0; iPos < nxtIndextCount; iPos++) {\n          tCell.appendChild(createElement('span', {\n            className: cls.NEXTSPAN\n          }));\n          indent++;\n        }\n\n        for (var iPos = 0; iPos < lastIndextCount && nxtIndextCount > 0; iPos++) {\n          tCell.appendChild(createElement('span', {\n            className: cls.LASTSPAN\n          }));\n        }\n\n        this.indentCollection[cell.rowIndex] = indent;\n        this.maxIndent = this.maxIndent > indent ? this.maxIndent : indent;\n      }\n    } else {\n      var hierarchyName = cell.hierarchy;\n      var levelName = cell.memberType === 3 ? this.measurePos + '.' + cell.levelUniqueName : cell.levelUniqueName;\n      var hasChild = cell.hasChild;\n\n      if (!this.lvlCollection[levelName] && levelName) {\n        this.lvlPosCollection[this.position] = levelName;\n        this.lvlCollection[levelName] = {\n          position: this.position,\n          hasChild: hasChild\n        };\n        this.position++;\n      } else if (levelName) {\n        var currPos_1 = this.lvlCollection[levelName].position;\n\n        for (var pos = currPos_1 + 1; pos < this.position; pos++) {\n          delete this.lvlCollection[this.lvlPosCollection[pos]];\n          delete this.lvlPosCollection[pos];\n        }\n\n        this.position = this.position > currPos_1 + 1 ? currPos_1 + 1 : this.position;\n      }\n\n      if (!this.hierarchyCollection[hierarchyName] && hierarchyName) {\n        this.hierarchyPosCollection[this.hierarchyCount] = hierarchyName;\n        this.hierarchyCollection[hierarchyName] = {\n          lvlPosition: this.position - 1,\n          hierarchyPOs: this.hierarchyCount\n        };\n        this.hierarchyCount++;\n      } else if (hierarchyName) {\n        var currPos_2 = this.hierarchyCollection[hierarchyName].hierarchyPOs;\n\n        for (var pos = currPos_2 + 1; pos < this.hierarchyCount; pos++) {\n          delete this.hierarchyCollection[this.hierarchyPosCollection[pos]];\n          delete this.hierarchyPosCollection[pos];\n        }\n\n        this.hierarchyCount = this.hierarchyCount > currPos_2 + 1 ? currPos_2 + 1 : this.hierarchyCount;\n      }\n\n      if (cell.memberType !== 3 && levelName && this.lvlCollection[levelName]) {\n        var currHierarchyPos = this.hierarchyCollection[hierarchyName] ? this.hierarchyCollection[hierarchyName].hierarchyPOs : -1;\n        this.measurePos = rowMeasurePos <= currHierarchyPos && this.hierarchyPosCollection[rowMeasurePos + 1] ? this.measurePos : this.lvlCollection[levelName].position;\n      }\n\n      var currPos = this.lvlCollection[levelName] ? this.lvlCollection[levelName].position : -1;\n      var lvlPos = 0;\n      var indent = 0;\n\n      while (lvlPos <= currPos && currPos > 0 && cell.level > -1) {\n        var hasChild_1 = this.lvlCollection[this.lvlPosCollection[lvlPos]].hasChild;\n        var prevHasChild = lvlPos > 0 ? this.lvlCollection[this.lvlPosCollection[lvlPos - 1]].hasChild : false;\n\n        if (prevHasChild && !hasChild_1) {\n          tCell.appendChild(createElement('span', {\n            className: cls.LASTSPAN\n          }));\n        }\n\n        if (lvlPos !== currPos) {\n          tCell.appendChild(createElement('span', {\n            className: cls.NEXTSPAN\n          }));\n          indent++;\n        }\n\n        lvlPos++;\n      }\n\n      if (cell.memberType === 3 && cell.level === -1 && Object.keys(this.lvlCollection).length > 1) {\n        tCell.appendChild(createElement('span', {\n          className: cls.NEXTSPAN\n        }));\n        indent++;\n      }\n\n      this.indentCollection[cell.rowIndex] = indent;\n      this.maxIndent = this.maxIndent > indent ? this.maxIndent : indent;\n    }\n\n    tCell.setAttribute('fieldname', cell.hierarchy);\n    var grandTotal = this.parent.olapEngineModule.tupRowInfo[cell.ordinal] ? this.parent.olapEngineModule.tupRowInfo[cell.ordinal].measurePosition === 0 ? this.parent.olapEngineModule.tupRowInfo[cell.ordinal].allStartPos === 1 : this.parent.olapEngineModule.tupRowInfo[cell.ordinal].allStartPos === 0 : false;\n\n    if (grandTotal) {\n      tCell.classList.add('e-gtot');\n    }\n\n    return tCell;\n  };\n  /* eslint-enable */\n\n\n  Render.prototype.columnCellBoundEvent = function (args) {\n    if (args.cell.column && args.cell.column.customAttributes) {\n      var cell = args.cell.column.customAttributes.cell;\n      var tCell = args.node;\n\n      if (cell) {\n        var customClass = this.parent.hyperlinkSettings.cssClass;\n        var level = cell.level ? cell.level : 0;\n\n        if (cell.level === -1 && !cell.rowSpan || cell.rowSpan === -1) {\n          args.node.style.display = 'none';\n        } else if (cell.rowSpan > 1) {\n          args.node.setAttribute('rowspan', cell.rowSpan.toString());\n          args.node.setAttribute('aria-rowspan', cell.rowSpan.toString());\n\n          if (cell.rowIndex + cell.rowSpan === this.engine.headerContent.length) {\n            args.node.style.borderBottomWidth = '0px';\n          }\n        }\n\n        args.node.setAttribute('aria-colindex', cell.colIndex.toString());\n        args.node.setAttribute('index', cell.rowIndex.toString());\n        var fieldName = void 0;\n\n        if (this.parent.dataType === 'pivot') {\n          if (!(this.parent.dataSourceSettings.values && this.parent.dataSourceSettings.valueAxis === 'column' && this.parent.dataSourceSettings.values.length > 1 && cell.rowIndex === this.engine.headerContent.length - 1) && this.parent.dataSourceSettings.columns && this.parent.dataSourceSettings.columns.length > 0) {\n            fieldName = level > -1 && this.parent.dataSourceSettings.columns[level] ? this.parent.dataSourceSettings.columns[level].name : '';\n            tCell.setAttribute('fieldname', fieldName);\n          }\n\n          if (this.validateColumnTotalcell(cell.colIndex)) {\n            tCell.classList.add('e-colstot');\n          }\n        } else {\n          tCell = this.onOlapColumnCellBoundEvent(tCell, cell);\n        }\n\n        if (cell.type) {\n          tCell.classList.add(cell.type === 'grand sum' ? 'e-gtot' : 'e-stot');\n\n          if (cell.type === 'grand sum') {\n            this.colGrandPos = cell.colIndex;\n          } else {\n            tCell.classList.add('e-colstot');\n          }\n\n          var localizedText = cell.type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') : cell.formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total');\n\n          if (tCell.querySelector('.e-headertext') !== null) {\n            tCell.querySelector('.e-headertext').innerText = localizedText;\n          } else {\n            tCell.querySelector('.e-stackedheadercelldiv').innerText = localizedText;\n          }\n        }\n\n        tCell.classList.add(cls.COLUMNSHEADER);\n\n        if (this.parent.isColumnCellHyperlink || cell.enableHyperlink) {\n          if (tCell.querySelector('.e-stackedheadercelldiv')) {\n            var innerText = tCell.querySelector('.e-stackedheadercelldiv').innerText;\n            tCell.querySelector('.e-stackedheadercelldiv').innerHTML = '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n          } else if (tCell.querySelector('.e-headertext')) {\n            var innerText = tCell.querySelector('.e-headertext').innerText;\n            tCell.querySelector('.e-headertext').innerHTML = '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n          }\n        }\n\n        if (cell.hasChild === true && !cell.isNamedSet) {\n          var hdrdiv = tCell.querySelector('.e-headercelldiv');\n\n          if (hdrdiv) {\n            hdrdiv.style.height = 'auto';\n            hdrdiv.style.lineHeight = 'normal';\n          }\n\n          var div = createElement('div', {\n            className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n            attrs: {\n              'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') : this.parent.localeObj.getConstant('expand')\n            }\n          });\n          tCell.children[0].classList.add(cls.CELLVALUE);\n\n          if (window.navigator.userAgent.indexOf('Edge') > -1 || window.navigator.userAgent.indexOf('Trident') > -1) {\n            tCell.children[0].style.display = 'table';\n          } else {\n            tCell.children[0].style.display = 'block';\n          }\n\n          tCell.insertBefore(div, tCell.children[0]);\n        }\n\n        tCell = this.appendValueSortIcon(cell, tCell, cell.rowIndex, cell.colIndex);\n\n        if (this.parent.cellTemplate) {\n          var index = tCell.getAttribute('index');\n          var colindex = tCell.getAttribute('aria-colindex');\n          var templateID = index + '_' + colindex;\n\n          if (!(window && isBlazor())) {\n            this.parent.gridHeaderCellInfo.push({\n              targetCell: tCell\n            });\n          } else if (index && colindex) {\n            this.parent.gridCellCollection[templateID] = tCell;\n          }\n        }\n\n        var len = this.parent.dataSourceSettings.values.length;\n\n        for (var vCnt = 0; vCnt < len; vCnt++) {\n          if (this.parent.dataSourceSettings.values[vCnt].name === cell.actualText) {\n            if (this.parent.dataType === 'olap') {\n              var grandTotal = this.parent.olapEngineModule.tupColumnInfo[cell.ordinal] ? this.parent.olapEngineModule.tupColumnInfo[cell.ordinal].measurePosition === 0 ? this.parent.olapEngineModule.tupColumnInfo[cell.ordinal].allStartPos === 1 : this.parent.olapEngineModule.tupColumnInfo[cell.ordinal].allStartPos === 0 : false;\n\n              if (grandTotal) {\n                tCell.classList.add('e-gtot');\n              }\n            }\n\n            if (cell.valueSort.levelName === this.parent.localeObj.getConstant('grandTotal') + this.parent.dataSourceSettings.valueSortSettings.headerDelimiter + cell.formattedText || cell.valueSort.levelName === 'Grand Total' + this.parent.dataSourceSettings.valueSortSettings.headerDelimiter + cell.formattedText) {\n              tCell.classList.add('e-gtot');\n            } else {\n              tCell.classList.add(cls.VALUESHEADER);\n            }\n          }\n        }\n\n        this.unWireEvents(tCell);\n        this.wireEvents(tCell);\n      }\n    }\n\n    this.parent.trigger(events.headerCellInfo, args);\n  };\n\n  Render.prototype.onOlapColumnCellBoundEvent = function (tCell, cell) {\n    tCell.setAttribute('fieldname', cell.memberType === 3 ? cell.actualText.toString() : cell.hierarchy);\n    var prevCell = this.engine.headerContent[cell.rowIndex] ? this.engine.headerContent[cell.rowIndex][cell.colIndex - 1] : undefined;\n\n    if (prevCell && prevCell.actualText === cell.actualText && prevCell.type === cell.type && prevCell.colSpan > 1) {\n      tCell.style.display = 'none';\n    } else {\n      tCell.setAttribute('colspan', cell.colSpan.toString());\n      tCell.setAttribute('aria-colspan', cell.colSpan.toString());\n    }\n\n    if (cell.rowIndex === this.engine.headerContent.length - 1 && cell.memberType === 2) {\n      tCell.style.display = this.isSpannedCell(this.engine.headerContent.length, cell) ? 'none' : tCell.style.display;\n    }\n\n    return tCell;\n  };\n\n  Render.prototype.isSpannedCell = function (colLength, currCell) {\n    var prevCell = this.engine.headerContent[currCell.rowIndex - 1] ? this.engine.headerContent[currCell.rowIndex - 1][currCell.colIndex] : undefined;\n    var parentCellSpan;\n    var parentCellPos;\n\n    while (prevCell && (prevCell.memberType === currCell.memberType || prevCell.type && currCell.type)) {\n      if (prevCell.rowSpan > 0) {\n        parentCellSpan = prevCell.rowSpan;\n        parentCellPos = prevCell.rowIndex;\n      }\n\n      prevCell = this.engine.headerContent[prevCell.rowIndex - 1] ? this.engine.headerContent[prevCell.rowIndex - 1][currCell.colIndex] : undefined;\n    }\n\n    return parentCellPos + parentCellSpan >= colLength;\n  };\n\n  Render.prototype.onHyperCellClick = function (e) {\n    var cell = e.target.parentElement.parentElement;\n    cell = cell.className.indexOf('e-headercelldiv') > -1 ? cell.parentElement : cell;\n    var args = {\n      currentCell: cell,\n      data: this.engine.pivotValues[Number(cell.getAttribute('index'))][Number(cell.getAttribute('aria-colindex'))],\n      cancel: true,\n      nativeEvent: e\n    };\n    this.parent.trigger(events.hyperlinkCellClick, args, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        args.currentCell = getElement(args.currentCell);\n        var url = args.currentCell.getAttribute('data-url') ? args.currentCell.getAttribute('data-url') : args.currentCell.querySelector('a').getAttribute('data-url');\n        window.open(url);\n      }\n    });\n  };\n\n  Render.prototype.getRowStartPos = function () {\n    var pivotValues = this.parent.pivotValues;\n    var rowPos;\n\n    for (var rCnt = 0; rCnt < (pivotValues ? pivotValues.length : 0); rCnt++) {\n      if (pivotValues[rCnt] && pivotValues[rCnt][0] && pivotValues[rCnt][0].axis === 'row') {\n        rowPos = rCnt;\n        break;\n      }\n    }\n\n    return rowPos;\n  };\n\n  Render.prototype.frameDataSource = function (type) {\n    var dataContent = [];\n\n    if (this.parent.dataSourceSettings.values.length > 0 && !this.engine.isEmptyData) {\n      if (this.parent.enableValueSorting || !this.engine.isEngineUpdated) {\n        var rowCnt = 0;\n        var pivotValues = this.parent.pivotValues;\n        var start = type === 'value' ? this.rowStartPos : 0;\n        var end = type === 'value' ? pivotValues ? pivotValues.length : 0 : this.rowStartPos;\n\n        for (var rCnt = start; rCnt < end; rCnt++) {\n          if (pivotValues[rCnt]) {\n            rowCnt = type === 'header' ? rCnt : rowCnt;\n            dataContent[rowCnt] = {};\n\n            for (var cCnt = 0; cCnt < pivotValues[rCnt].length; cCnt++) {\n              if (pivotValues[rCnt][cCnt]) {\n                dataContent[rowCnt][cCnt] = pivotValues[rCnt][cCnt];\n              }\n            }\n\n            rowCnt++;\n          }\n        }\n      } else {\n        dataContent = type === 'value' ? this.engine.valueContent : this.engine.headerContent;\n      }\n    } else {\n      dataContent = this.frameEmptyData();\n    }\n\n    return dataContent;\n  };\n  /** @hidden */\n\n  /* eslint-disable-next-line */\n\n\n  Render.prototype.frameEmptyData = function () {\n    /* eslint-disable-next-line */\n    var dataContent = [{\n      0: {\n        formattedText: this.parent.localeObj.getConstant('grandTotal')\n      },\n      1: {\n        formattedText: this.parent.localeObj.getConstant('emptyData')\n      }\n    }];\n    return dataContent;\n  };\n\n  Render.prototype.calculateColWidth = function (colCount) {\n    if (!isNullOrUndefined(this.parent.resizedValue)) {\n      this.parent.resizedValue = this.parent.showGroupingBar && this.parent.resizedValue < 250 ? 250 : this.parent.resizedValue;\n    }\n\n    this.resColWidth = !isNullOrUndefined(this.parent.resizedValue) ? this.parent.resizedValue : this.resColWidth;\n    var offsetWidth = this.parent.element.offsetWidth ? this.parent.element.offsetWidth : this.parent.element.getBoundingClientRect().width;\n    var parWidth = isNaN(this.parent.width) ? this.parent.width.toString().indexOf('%') > -1 ? parseFloat(this.parent.width.toString()) / 100 * offsetWidth : offsetWidth : Number(this.parent.width);\n    parWidth = parWidth - (this.gridSettings.columnWidth > this.resColWidth ? this.gridSettings.columnWidth : this.resColWidth) - 2;\n    colCount = colCount - 1;\n    this.isOverflows = !(colCount * this.gridSettings.columnWidth < parWidth);\n    var colWidth = colCount * this.gridSettings.columnWidth < parWidth ? parWidth / colCount : this.gridSettings.columnWidth;\n    return !this.isOverflows && !this.gridSettings.allowAutoResizing ? this.gridSettings.columnWidth : Math.floor(colWidth);\n  };\n\n  Render.prototype.resizeColWidth = function (colCount) {\n    if (!isNullOrUndefined(this.parent.resizedValue)) {\n      this.parent.resizedValue = this.parent.showGroupingBar && this.parent.resizedValue < 250 ? 250 : this.parent.resizedValue;\n    }\n\n    this.resColWidth = !isNullOrUndefined(this.parent.resizedValue) ? this.parent.resizedValue : this.resColWidth;\n    var parWidth = isNaN(this.parent.width) ? this.parent.width.toString().indexOf('%') > -1 ? parseFloat(this.parent.width.toString()) / 100 * this.parent.element.offsetWidth : this.parent.element.offsetWidth : Number(this.parent.width);\n    colCount = colCount - 1;\n    parWidth = parWidth - (this.gridSettings.columnWidth > this.resColWidth ? this.gridSettings.columnWidth : this.resColWidth) - 2;\n    this.isOverflows = !(colCount * this.gridSettings.columnWidth < parWidth);\n    var colWidth = colCount * this.gridSettings.columnWidth < parWidth ? parWidth / colCount : this.gridSettings.columnWidth;\n    return !this.isOverflows && !this.gridSettings.allowAutoResizing ? this.gridSettings.columnWidth : Math.floor(colWidth);\n  };\n\n  Render.prototype.calculateGridWidth = function () {\n    var parWidth = this.parent.width;\n    var eleWidth = this.parent.element.getBoundingClientRect().width ? this.parent.element.getBoundingClientRect().width : this.parent.element.offsetWidth;\n\n    if (this.gridSettings.width === 'auto') {\n      if (this.parent.width === 'auto') {\n        parWidth = eleWidth;\n      } else if (this.parent.width.toString().indexOf('%') > -1) {\n        parWidth = parseFloat(this.parent.width.toString()) / 100 * eleWidth;\n      }\n    } else {\n      parWidth = this.gridSettings.width;\n    }\n\n    return !this.gridSettings.allowAutoResizing && parWidth > this.parent.totColWidth ? this.parent.totColWidth : parWidth;\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.calculateGridHeight = function (elementCreated) {\n    var gridHeight = this.parent.height;\n    var parHeight = this.parent.getHeightAsNumber();\n\n    if (isNaN(parHeight)) {\n      parHeight = parHeight > this.parent.minHeight ? parHeight : this.parent.minHeight;\n    }\n\n    if (this.parent.currentView !== 'Chart') {\n      if (this.gridSettings.height === 'auto' && parHeight && this.parent.element.querySelector('.' + cls.GRID_HEADER)) {\n        var rowColHeight = this.parent.element.querySelector('.' + cls.GRID_HEADER).offsetHeight;\n        var gBarHeight = rowColHeight + (this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS) ? this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS).offsetHeight : 0);\n        var toolBarHeight = this.parent.element.querySelector('.' + cls.GRID_TOOLBAR) ? 42 : 0;\n        gridHeight = parHeight - (gBarHeight + toolBarHeight) - 1;\n        gridHeight = gridHeight < 40 ? 40 : gridHeight;\n\n        if (elementCreated) {\n          var tableHeight = this.parent.element.querySelector('.' + cls.FROZENCONTENT_DIV + ' .' + cls.TABLE).offsetHeight;\n          var contentHeight = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).offsetHeight;\n          var tableWidth = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV + ' .' + cls.TABLE).offsetWidth;\n          var contentWidth = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).offsetWidth;\n          var horizontalOverflow = contentWidth < tableWidth; //let verticalOverflow: boolean = contentHeight < tableHeight;\n\n          var commonOverflow = horizontalOverflow && gridHeight - tableHeight < 18 ? true : false;\n\n          if (gridHeight >= tableHeight && (horizontalOverflow ? gridHeight >= contentHeight : true) && !commonOverflow) {\n            this.parent.grid.height = 'auto';\n          } else {\n            this.parent.grid.height = gridHeight;\n            this.parent.grid.dataBind();\n          }\n\n          this.parent.grid.widthService.refreshFrozenScrollbar();\n        } else {\n          if (gridHeight > this.engine.valueContent.length * this.gridSettings.rowHeight) {\n            gridHeight = 'auto';\n          }\n        }\n      } else {\n        gridHeight = this.gridSettings.height;\n      }\n    }\n\n    return gridHeight < this.parent.gridSettings.rowHeight ? this.parent.gridSettings.rowHeight : gridHeight;\n  };\n\n  Render.prototype.frameStackedHeaders = function () {\n    var singleValueFormat = this.parent.dataSourceSettings.values.length === 1 && !this.parent.dataSourceSettings.alwaysShowValueHeader ? this.formatList[this.parent.dataSourceSettings.values[0].name] : undefined;\n    var integrateModel = [];\n\n    if ((this.parent.dataType === 'olap' ? true : this.parent.dataSourceSettings.values.length > 0) && !this.engine.isEmptyData) {\n      var headerCnt = this.engine.headerContent.length;\n      var headerSplit = [];\n      /* eslint-disable-line */\n\n      var splitPos = [];\n      /* eslint-disable-line */\n\n      var colWidth = this.calculateColWidth(this.engine.pivotValues ? this.engine.pivotValues[0].length : 0);\n\n      do {\n        var columnModel = [];\n        var actualCnt = 0;\n        headerCnt--;\n        var colField = this.engine.headerContent[headerCnt];\n\n        if (colField) {\n          for (var cCnt = 0; cCnt < Object.keys(colField).length + (colField[0] ? 0 : 1); cCnt++) {\n            var colSpan = colField[cCnt] && colField[cCnt].colSpan ? colField[cCnt].memberType !== 3 || headerCnt === 0 ? colField[cCnt].colSpan : headerSplit[cCnt] : 1;\n            colSpan = this.parent.dataType === 'olap' ? 1 : colSpan;\n            var formattedText = colField[cCnt] ? colField[cCnt].type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') : colField[cCnt].type === 'sum' ? colField[cCnt].formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total') : colField[cCnt].formattedText : '';\n\n            if (headerCnt === this.engine.headerContent.length - 1) {\n              colSpan = 1;\n              columnModel[actualCnt] = {\n                field: cCnt + '.formattedText',\n                headerText: formattedText,\n                customAttributes: {\n                  'cell': colField[cCnt]\n                },\n\n                /* eslint-disable-next-line */\n                width: colField[cCnt] ? this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : this.resColWidth,\n                minWidth: 30,\n                format: cCnt === 0 ? '' : isNullOrUndefined(singleValueFormat) ? this.formatList[colField[cCnt].actualText] : singleValueFormat,\n                allowReordering: this.parent.showGroupingBar ? false : this.parent.gridSettings.allowReordering,\n                allowResizing: this.parent.gridSettings.allowResizing,\n                visible: true\n              };\n            } else if (headerSplit[cCnt]) {\n              colSpan = colField[cCnt] && colField[cCnt].type === 'grand sum' && colField[cCnt].memberType === 2 ? 1 : colSpan;\n              var tmpSpan = colSpan;\n              var innerModel = [];\n              var innerPos = cCnt;\n\n              while (tmpSpan > 0) {\n                if (columnModel[actualCnt]) {\n                  if (!integrateModel[splitPos[innerPos]]) {\n                    break;\n                  }\n\n                  innerModel.push(integrateModel[splitPos[innerPos]]);\n                } else {\n                  columnModel[actualCnt] = {\n                    headerText: formattedText,\n\n                    /* eslint-disable-next-line */\n                    field: colField[cCnt] ? colField[cCnt].valueSort.levelName : '',\n                    customAttributes: {\n                      'cell': colField[cCnt]\n                    },\n\n                    /* eslint-disable-next-line */\n                    width: colField[cCnt] ? this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : this.resColWidth,\n                    minWidth: 30,\n                    allowReordering: this.parent.showGroupingBar ? false : this.parent.gridSettings.allowReordering,\n                    allowResizing: this.parent.gridSettings.allowResizing,\n                    visible: true\n                  };\n                  innerModel = [integrateModel[splitPos[innerPos]]];\n                }\n\n                tmpSpan = tmpSpan - headerSplit[innerPos];\n                innerPos = innerPos + headerSplit[innerPos];\n              }\n\n              columnModel[actualCnt].columns = innerModel;\n            }\n\n            if (columnModel[actualCnt]) {\n              columnModel[actualCnt].clipMode = this.gridSettings.clipMode;\n            }\n\n            headerSplit[cCnt] = colSpan;\n            splitPos[cCnt] = actualCnt;\n            actualCnt++;\n            cCnt = cCnt + colSpan - 1;\n          }\n        }\n\n        integrateModel = columnModel.length > 0 ? columnModel : integrateModel;\n      } while (headerCnt > 0);\n\n      integrateModel[0] = {\n        field: 0 + '.formattedText',\n        width: this.resColWidth,\n        minWidth: 30,\n        headerText: '',\n        allowReordering: false,\n        allowResizing: this.parent.gridSettings.allowResizing,\n        visible: true\n      };\n    } else {\n      integrateModel = this.frameEmptyColumns();\n    }\n\n    if (integrateModel.length > 1) {\n      var lastColumn = integrateModel[integrateModel.length - 1];\n      lastColumn.minWidth = lastColumn.width;\n      lastColumn.width = 'auto';\n\n      if (lastColumn.columns && lastColumn.columns.length > 0) {\n        this.configLastColumnWidth(lastColumn.columns[lastColumn.columns.length - 1]);\n      }\n    }\n\n    this.parent.triggerColumnRenderEvent(integrateModel);\n    return integrateModel;\n  };\n\n  Render.prototype.configLastColumnWidth = function (column) {\n    column.minWidth = column.width;\n    column.width = 'auto';\n\n    if (column.columns && column.columns.length > 0) {\n      this.configLastColumnWidth(column.columns[column.columns.length - 1]);\n    }\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.setSavedWidth = function (column, width) {\n    if (column === '0.formattedText' && !isNullOrUndefined(this.parent.resizedValue)) {\n      width = this.parent.resizedValue;\n    } else {\n      width = this.parent.resizeInfo[column] ? this.parent.resizeInfo[column] : width;\n    }\n\n    return width;\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.frameEmptyColumns = function () {\n    var columns = [];\n    var colWidth = this.calculateColWidth(2);\n    columns.push({\n      field: '0.formattedText',\n      headerText: '',\n      minWidth: 30,\n      width: this.resColWidth\n    });\n    columns.push({\n      field: '1.formattedText',\n      headerText: this.parent.localeObj.getConstant('grandTotal'),\n      minWidth: 30,\n      width: colWidth\n    });\n    return columns;\n  };\n  /* eslint-disable-next-line */\n\n  /** @hidden */\n\n\n  Render.prototype.getFormatList = function () {\n    var formatArray = {};\n\n    for (var vCnt = 0; vCnt < this.parent.dataSourceSettings.values.length; vCnt++) {\n      var field = this.parent.dataSourceSettings.values[vCnt];\n      var format = 'N';\n\n      if (this.parent.dataType === 'olap') {\n        if (this.parent.olapEngineModule.fieldList[field.name]) {\n          var fString = this.parent.olapEngineModule.fieldList[field.name].formatString;\n          format = fString.indexOf('#') > -1 ? fString : fString[0] + '2';\n        }\n      } else {\n        if (this.parent.dataSourceSettings.formatSettings.length > 0) {\n          for (var fCnt = 0; fCnt < this.parent.dataSourceSettings.formatSettings.length; fCnt++) {\n            var formatSettings = this.parent.dataSourceSettings.formatSettings[fCnt];\n\n            if (field.name === formatSettings.name) {\n              format = formatSettings.format;\n              break;\n            } else {\n              continue;\n            }\n          }\n        }\n      }\n\n      formatArray[field.name] = format;\n    }\n\n    return formatArray;\n  };\n  /* eslint-disable */\n\n\n  Render.prototype.excelColumnEvent = function (args) {\n    if (args.gridCell !== undefined && args.gridCell.column.width === 'auto') {\n      this.parent.lastColumn = args.gridCell.column;\n      args.gridCell.column.width = args.gridCell.column.minWidth;\n    }\n\n    args = this.exportHeaderEvent(args);\n    this.parent.trigger(events.excelHeaderQueryCellInfo, args);\n  };\n\n  Render.prototype.pdfColumnEvent = function (args) {\n    if (args.gridCell !== undefined && args.gridCell.column.width === 'auto') {\n      this.parent.lastColumn = args.gridCell.column;\n      args.gridCell.column.width = args.gridCell.column.minWidth;\n    }\n\n    this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n  };\n  /* eslint-enable */\n\n\n  Render.prototype.excelRowEvent = function (args) {\n    if (args.column.field === '0.formattedText') {\n      var isValueCell = args.data[0].type === 'value';\n      var level = 0;\n\n      if (this.parent.dataType === 'olap') {\n        /* eslint-disable-next-line */\n        level = this.indentCollection[args.data[0].rowIndex];\n      } else {\n        level = isValueCell ? this.lastSpan + 1 : args.data[0].level;\n      }\n\n      this.colPos = 0;\n      args.style = {\n        hAlign: 'Left',\n        indent: level * 2\n      };\n      this.lastSpan = isValueCell ? this.lastSpan : level;\n    } else {\n      this.colPos++;\n      /* eslint-disable-next-line */\n\n      if (isNullOrUndefined(args.data[this.colPos].value) || isNullOrUndefined(args.data[this.colPos].formattedText) || args.data[this.colPos].formattedText === \"\") {\n        args.value = this.parent.exportType === 'Excel' ? null : '';\n      } else {\n        /* eslint-disable-next-line */\n        args.value = !isNullOrUndefined(args.data[this.colPos].value) ? args.data[this.colPos].value : args.data[this.colPos].formattedText;\n      }\n    }\n\n    args = this.exportContentEvent(args);\n    this.parent.trigger(events.excelQueryCellInfo, args);\n  };\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n\n  Render.prototype.pdfRowEvent = function (args) {\n    args = this.exportContentEvent(args);\n\n    if (args.column.field === '0.formattedText') {\n      var level = 0;\n      var isValueCell = args.data[0].type === 'value';\n\n      if (this.parent.dataType === 'olap') {\n        level = this.indentCollection[args.data[0].rowIndex];\n      } else {\n        level = isValueCell ? this.lastSpan + 1 : args.data[0].level !== -1 ? args.data[0].level : 0;\n      }\n\n      args.style = {\n        paragraphIndent: level * 10\n      };\n      this.lastSpan = isValueCell ? this.lastSpan : level;\n    }\n\n    this.parent.trigger(events.pdfQueryCellInfo, args);\n  };\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n\n  Render.prototype.excelDataBound = function (args) {\n    var excelRows = args.excelRows;\n    var rowStartPos = Object.keys(this.engine.headerContent).length;\n\n    for (var i = 0; i < rowStartPos; i++) {\n      var cells = excelRows[i].cells;\n      var tmpCell = [];\n\n      for (var j = 0; j < cells.length; j++) {\n        if (cells[j].rowSpan !== -1) {\n          tmpCell.push(cells[j]);\n        }\n      }\n\n      excelRows[i].cells = tmpCell;\n    }\n  };\n\n  Render.prototype.exportHeaderEvent = function (args) {\n    var rowSpan = 1;\n\n    if (args.gridCell.column.customAttributes) {\n      var cell = args.gridCell.column.customAttributes.cell;\n\n      if (this.actualText !== cell.actualText && cell.colSpan > 1 && cell.level > -1) {\n        args.gridCell.colSpan = args.cell.colSpan = cell.colSpan > -1 ? cell.colSpan : 1;\n      }\n\n      rowSpan = cell.rowSpan > -1 ? cell.rowSpan : 1;\n\n      if (args.name === 'excelHeaderQueryCellInfo') {\n        if (cell.rowSpan > -1) {\n          rowSpan = cell.rowSpan;\n        } else if (!isNullOrUndefined(cell.type) && cell.level !== 0) {\n          rowSpan = -1;\n          args.cell.rowSpan = -1;\n        }\n      }\n\n      this.actualText = cell.actualText;\n    } else {\n      rowSpan = Object.keys(this.engine.headerContent).length;\n    }\n\n    if (args.cell.rowSpan !== rowSpan && rowSpan > -1) {\n      args.cell.rowSpan = rowSpan;\n    }\n\n    return args;\n  };\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n\n  Render.prototype.exportContentEvent = function (args) {\n    args.value = args.data[Number(args.column.field.split('.formattedText')[0])].type === 'grand sum' ?\n    /* eslint-disable-line */\n    this.parent.localeObj.getConstant('grandTotal') : args.value;\n    return args;\n  };\n\n  Render.prototype.unWireEvents = function (cell) {\n    if (cell.querySelector('.e-hyperlinkcell')) {\n      EventHandler.remove(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick);\n    } else {\n      return;\n    }\n  };\n\n  Render.prototype.wireEvents = function (cell) {\n    if (cell.querySelector('.e-hyperlinkcell')) {\n      EventHandler.add(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick, this);\n    } else {\n      return;\n    }\n  };\n\n  return Render;\n}();\n\nexport { Render };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-pivotview/src/pivotview/renderer/render.js"],"names":["Reorder","headerRefreshed","Grid","Resize","ExcelExport","PdfExport","ContextMenu","Freeze","Selection","createElement","setStyleAttribute","remove","isNullOrUndefined","EventHandler","getElement","isBlazor","addClass","removeClass","SanitizeHtmlHelper","select","selectAll","cls","events","AggregateMenu","PivotUtil","Render","parent","indentCollection","colPos","lastSpan","lvlCollection","hierarchyCollection","lvlPosCollection","hierarchyPosCollection","position","measurePos","maxMeasurePos","hierarchyCount","actualText","resColWidth","showGroupingBar","groupingBarModule","isAdaptive","engine","dataType","olapEngineModule","engineModule","gridSettings","formatList","getFormatList","aggMenu","prototype","render","gridHeaderCellInfo","gridCellCollection","injectGridModules","rowStartPos","getRowStartPos","grid","element","querySelector","notEmpty","isEngineUpdated","headerContent","frameDataSource","valueContent","enableValueSorting","setProperties","columns","frameStackedHeaders","dataSource","dataSourceSettings","values","length","isEmptyData","height","mCntHeight","MOVABLECONTENT_DIV","offsetHeight","dataHeight","rowHeight","contentModule","setHeightToContent","notify","isScrolling","resizeInfo","refreshColumns","GROUPING_BAR_CLASS","setGridRowWidth","e","innerHTML","getHeaderContent","width","calculateGridWidth","allowAutoResizing","refreshUI","calculateGridHeight","bindGrid","appendChild","id","isStringTemplate","appendTo","on","refreshHeader","enableVirtualization","mHdr","MOVABLEHEADER_DIV","mCont","vtr","VIRTUALTRACK_DIV","virtualHeaderDiv","className","style","transform","split","ele","parentElement","MOVABLESCROLL_DIV","scrollLeft","isEmpty","frozenColumns","frozenRows","enableHover","frameEmptyData","frameEmptyColumns","locale","enableRtl","allowExcelExport","allowPdfExport","allowResizing","allowTextWrap","allowReordering","allowSelection","contextMenuItems","selectedRowIndex","selectionSettings","textWrapSettings","printMode","gridLines","contextMenuClick","bind","contextMenuOpen","beforeCopy","undefined","beforePrint","printComplete","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","resizeStart","columnDragStart","columnDrag","columnDrop","beforeExcelExport","resizing","setGroupWidth","resizeStop","onResizeStop","queryCellInfo","dataBound","headerCellInfo","excelHeaderQueryCellInfo","pdfHeaderQueryCellInfo","excelQueryCellInfo","pdfQueryCellInfo","beforePdfExport","pdfExportComplete","excelExportComplete","isJsComponent","excelDataBound","args","lastGridSettings","Object","keys","indexOf","gridObject","pivotColumns","trigger","renderModule","selected","rowRangeSelection","enable","selectionModule","selectRowsByRange","startIndex","endIndex","rowCellBoundEvent","columnCellBoundEvent","excelColumnEvent","pdfRowEvent","excelRowEvent","pdfColumnEvent","lastColumn","cellTemplate","_i","_a","cell","getCellTemplate","targetCell","enableHtmlSanitizer","appendHtml","sanitize","outerHTML","borderRight","borderLeft","widthService","setWidthToTable","setFocusOnLastCell","renderReactTemplates","isInitial","refreshData","contentReady","keyboardModule","event","target","nodeName","gridFocus","serviceLocator","getService","setFocusedElement","focus","setAttribute","_this","_loop_1","item","cellTarget","this_1","lastCellClicked","elem","bool","isGroupElement","classList","contains","cancel","value","allowGrouping","groupingModule","validateField","rowIndex","Number","getAttribute","colIndex","pivotValue1","pivotValues","selectedID","querySelectorAll","EXPAND","add","MENU_DISABLE","MENU_HIDE","COLLAPSE","items","isUngroupOption","fieldName","groupField","getFieldByName","groupSettings","type","fieldList","isCustomField","replace","selectedCellsInfo","getSelectedCells","axis","toString","push","name","cellInfo","selectedOptions","getSelectedOptions","customGroups","customGroup","groupName","allowDrillThrough","innerText","allowCalculatedField","fieldType_1","eventArgs","aggregateTypes","getMenuItem","slice","displayMenuCount","aggregateMenuOpen","observedArgs","menuItem","checkDuplicates","i","key","text","localeObj","getConstant","getAllSummaryType","splice","state_1","isStringField","menuItems","MouseEvent","window","exportArgs","rowIndx","colIndx","pivotValue","aggregateType","field","fieldCaption","caption","pdfDoc","isBlob","isMultipleExport","pdfExportProperties","fileName","beforeExport","pdfProperties","formatPdfExportProperties","pdfExport","workbook","excelExportProperties","excelProperties","formatExcelExportProperties","excelExport","csvExport","dispatchEvent","valueSortSettings","headerText","valueSort","levelName","headerDelimiter","sortOrder","exp","onDrill","colp","calculatedFieldModule","createCalculatedFieldDialog","baseField","baseItem","createValueSettingsDialog","updateAggregate","args_1","option","initGrouping","contextMenuModule","contextMenu","close","validateColumnTotalcell","columnIndex","headerPosKeys","keysLength","sumLock","pos","members","isValueField","valuefields","valueCnt","aggregate","dataSourceItem","Inject","updateGridSettings","updatePivotColumns","layoutRefresh","clearColumnSelection","pivotColumn","keyPos","fillGridColumns","CELL_ACTIVE_BGCOLOR","SELECTED_BGCOLOR","appendValueSortIcon","tCell","rCnt","cCnt","vSort","len","alwaysShowValueHeader","lock","valueAxis","hasChild","column","customAttributes","gridColumns","minWidth","columnWidth","hideScroll","offsetWidth","firstColWidth","gridColumn","firstRowHeight","resizedValue","clearTimeout","timeOutObj","setTimeout","onSelect","pivotArgs","currentCell","selectedElements","CELL_SELECTED_BGCOLOR","selectedElements_1","columnHeaders","rowHeaders","measure","formattedText","customClass","hyperlinkSettings","cssClass","data","isValueCell","level","NEXTSPAN","LASTSPAN","rows","onOlapRowCellBoundEvent","localizedText","rowGrandPos","ROWSHEADER","isNamedSet","isDrilled","ICON","attrs","CELLVALUE","isRowCellHyperlink","enableHyperlink","pivotView","styles","VALUESCONTENT","isSum","SUMMARY","isGrandSum","colGrandPos","isSummaryCellHyperlink","isValueCellHyperlink","index","colindex","templateID","unWireEvents","wireEvents","pivotview","rowMeasurePos","ordinal","tupRowInfo","tupInfo","memberPosition","uNameCollection","cropUName","substring","memberType","fieldSep","map","nxtIndextCount","lastIndextCount","prevHasChild","fPos","fieldMembers","membersCount","typeCollection","isHierarchy","hasAllMember","textContent","indent","iPos","maxIndent","hierarchyName","hierarchy","levelUniqueName","currPos_1","lvlPosition","hierarchyPOs","currPos_2","currHierarchyPos","currPos","lvlPos","hasChild_1","grandTotal","measurePosition","allStartPos","node","rowSpan","display","borderBottomWidth","onOlapColumnCellBoundEvent","COLUMNSHEADER","isColumnCellHyperlink","hdrdiv","lineHeight","div","children","navigator","userAgent","insertBefore","vCnt","tupColumnInfo","VALUESHEADER","prevCell","colSpan","isSpannedCell","colLength","currCell","parentCellSpan","parentCellPos","onHyperCellClick","nativeEvent","hyperlinkCellClick","url","open","rowPos","dataContent","rowCnt","start","end","calculateColWidth","colCount","getBoundingClientRect","parWidth","isNaN","parseFloat","isOverflows","colWidth","Math","floor","resizeColWidth","eleWidth","totColWidth","elementCreated","gridHeight","parHeight","getHeightAsNumber","minHeight","currentView","GRID_HEADER","rowColHeight","gBarHeight","toolBarHeight","GRID_TOOLBAR","tableHeight","FROZENCONTENT_DIV","TABLE","contentHeight","tableWidth","contentWidth","horizontalOverflow","commonOverflow","dataBind","refreshFrozenScrollbar","singleValueFormat","integrateModel","headerCnt","headerSplit","splitPos","columnModel","actualCnt","colField","setSavedWidth","format","visible","tmpSpan","innerModel","innerPos","clipMode","configLastColumnWidth","triggerColumnRenderEvent","formatArray","fString","formatString","formatSettings","fCnt","gridCell","exportHeaderEvent","hAlign","exportType","exportContentEvent","paragraphIndent","excelRows","cells","tmpCell","j"],"mappings":"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","sourcesContent":["import { Reorder, headerRefreshed } from '@syncfusion/ej2-grids';\nimport { Grid, Resize, ExcelExport, PdfExport, ContextMenu, Freeze } from '@syncfusion/ej2-grids';\nimport { Selection } from '@syncfusion/ej2-grids';\nimport { createElement, setStyleAttribute, remove, isNullOrUndefined, EventHandler, getElement } from '@syncfusion/ej2-base';\nimport { isBlazor, addClass, removeClass, SanitizeHtmlHelper, select, selectAll } from '@syncfusion/ej2-base';\nimport * as cls from '../../common/base/css-constant';\nimport * as events from '../../common/base/constant';\nimport { AggregateMenu } from '../../common/popups/aggregate-menu';\nimport { PivotUtil } from '../../base/util';\n/**\n * Module to render PivotGrid control\n */\n/** @hidden */\nvar Render = /** @class */ (function () {\n    /** Constructor for render module\n     * @param {PivotView} parent - Instance of pivot table.\n     */\n    function Render(parent) {\n        this.indentCollection = {};\n        this.colPos = 0;\n        this.lastSpan = 0;\n        this.lvlCollection = {};\n        this.hierarchyCollection = {};\n        this.lvlPosCollection = {};\n        this.hierarchyPosCollection = {};\n        this.position = 0;\n        this.measurePos = 0;\n        this.maxMeasurePos = 0;\n        this.hierarchyCount = 0;\n        this.actualText = '';\n        this.parent = parent;\n        this.resColWidth = (this.parent.showGroupingBar && this.parent.groupingBarModule) ? (this.parent.isAdaptive ? 180 : 250) :\n            (this.parent.isAdaptive ? 140 : 200);\n        this.engine = this.parent.dataType === 'olap' ? this.parent.olapEngineModule : this.parent.engineModule;\n        this.gridSettings = parent.gridSettings;\n        this.formatList = this.getFormatList();\n        this.aggMenu = new AggregateMenu(this.parent);\n    }\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.render = function () {\n        var parent = this.parent;\n        var engine = this.parent.dataType === 'olap' ? this.parent.olapEngineModule : this.parent.engineModule;\n        this.parent.gridHeaderCellInfo = [];\n        this.parent.gridCellCollection = {};\n        this.injectGridModules(parent);\n        this.rowStartPos = this.getRowStartPos();\n        if (this.parent.grid && this.parent.grid.element && this.parent.element.querySelector('.e-grid')) {\n            this.parent.notEmpty = true;\n            if (!engine.isEngineUpdated) {\n                engine.headerContent = this.frameDataSource('header');\n                engine.valueContent = this.frameDataSource('value');\n            }\n            else {\n                if (this.parent.enableValueSorting) {\n                    engine.valueContent = this.frameDataSource('value');\n                }\n                engine.isEngineUpdated = false;\n            }\n            this.parent.grid.setProperties({\n                columns: this.frameStackedHeaders(), dataSource: (this.parent.dataType === 'olap' ? true :\n                    parent.dataSourceSettings.values.length > 0) && !this.engine.isEmptyData ? engine.valueContent :\n                    this.frameDataSource('value')\n            }, true);\n            if (this.parent.grid.height === 'auto') {\n                var mCntHeight = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).offsetHeight; /* eslint-disable-line */\n                var dataHeight = this.parent.grid.dataSource.length * this.parent.gridSettings.rowHeight;\n                if (mCntHeight > 50 && mCntHeight < dataHeight) {\n                    this.parent.grid.contentModule.setHeightToContent(dataHeight); /* eslint-disable-line */\n                }\n            }\n            this.parent.grid.notify('datasource-modified', {});\n            if (this.parent.isScrolling) {\n                this.parent.resizeInfo = {};\n            }\n            this.parent.grid.refreshColumns();\n            if (this.parent.showGroupingBar && this.parent.groupingBarModule &&\n                this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n                this.parent.groupingBarModule.setGridRowWidth();\n            }\n            var e = this.parent.element.querySelector('.e-movablecontent');\n            e.querySelector('colGroup').innerHTML =\n                this.parent.grid.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n            this.parent.grid.width = this.calculateGridWidth();\n            if (!this.gridSettings.allowAutoResizing && this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n                this.parent.groupingBarModule.refreshUI();\n            }\n            if (!this.parent.isScrolling) {\n                this.calculateGridHeight(true);\n            }\n            //this.parent.isScrolling = false;\n        }\n        else {\n            this.parent.element.innerHTML = '';\n            this.bindGrid(this.parent, (this.engine.isEmptyData ? true : false));\n            this.parent.element.appendChild(createElement('div', { id: this.parent.element.id + '_grid' }));\n            this.parent.grid.isStringTemplate = true;\n            this.parent.grid.appendTo('#' + this.parent.element.id + '_grid');\n        }\n        this.parent.grid.on(headerRefreshed, this.refreshHeader, this);\n    };\n    Render.prototype.refreshHeader = function () {\n        if (this.parent.enableVirtualization) {\n            var mHdr = this.parent.element.querySelector('.' + cls.MOVABLEHEADER_DIV);\n            var mCont = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV);\n            var vtr = mCont.querySelector('.' + cls.VIRTUALTRACK_DIV);\n            this.parent.virtualHeaderDiv = mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV);\n            if (mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV)) {\n                remove(mHdr.querySelector('.' + cls.VIRTUALTRACK_DIV));\n            }\n            else {\n                this.parent.virtualHeaderDiv = createElement('div', { className: cls.VIRTUALTRACK_DIV });\n            }\n            mHdr.appendChild(this.parent.virtualHeaderDiv);\n            if (vtr) {\n                setStyleAttribute(this.parent.virtualHeaderDiv, { height: 0, width: vtr.style.width });\n            }\n            setStyleAttribute(mHdr.querySelector('.e-table'), {\n                transform: (mCont.querySelector('.e-table').style.transform).split(',')[0] + ',' + 0 + 'px)'\n            });\n            var ele = this.parent.isAdaptive ? mCont : mCont.parentElement.parentElement.querySelector('.' + cls.MOVABLESCROLL_DIV);\n            mHdr.scrollLeft = ele.scrollLeft;\n        }\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.bindGrid = function (parent, isEmpty) {\n        this.injectGridModules(parent);\n        this.parent.grid = new Grid({\n            frozenColumns: 1,\n            frozenRows: 0,\n            enableHover: false,\n            dataSource: isEmpty ? this.frameEmptyData() : this.frameDataSource('value'),\n            columns: isEmpty ? this.frameEmptyColumns() : this.frameStackedHeaders(),\n            height: isEmpty ? 'auto' : this.calculateGridHeight(),\n            width: isEmpty ? (this.gridSettings.allowAutoResizing ? this.parent.width : 400) : this.calculateGridWidth(),\n            locale: parent.locale,\n            enableRtl: parent.enableRtl,\n            allowExcelExport: parent.allowExcelExport,\n            allowPdfExport: parent.allowPdfExport,\n            allowResizing: this.gridSettings.allowResizing,\n            allowTextWrap: this.gridSettings.allowTextWrap,\n            allowReordering: (this.parent.showGroupingBar ? false : this.gridSettings.allowReordering),\n            allowSelection: this.gridSettings.allowSelection,\n            /* eslint-disable-next-line */\n            contextMenuItems: this.gridSettings.contextMenuItems,\n            selectedRowIndex: this.gridSettings.selectedRowIndex,\n            /* eslint-disable-next-line */\n            selectionSettings: this.gridSettings.selectionSettings,\n            textWrapSettings: this.gridSettings.textWrapSettings,\n            printMode: this.gridSettings.printMode,\n            rowHeight: this.gridSettings.rowHeight,\n            gridLines: this.gridSettings.gridLines,\n            contextMenuClick: this.contextMenuClick.bind(this),\n            contextMenuOpen: this.contextMenuOpen.bind(this),\n            beforeCopy: this.gridSettings.beforeCopy ? this.gridSettings.beforeCopy.bind(this.parent) : undefined,\n            beforePrint: this.gridSettings.beforePrint ? this.gridSettings.beforePrint.bind(this.parent) : undefined,\n            printComplete: this.gridSettings.printComplete ? this.gridSettings.printComplete.bind(this.parent) : undefined,\n            rowSelecting: this.gridSettings.rowSelecting ? this.gridSettings.rowSelecting.bind(this.parent) : undefined,\n            rowSelected: this.rowSelected.bind(this),\n            rowDeselecting: this.gridSettings.rowDeselecting ? this.gridSettings.rowDeselecting.bind(this.parent) : undefined,\n            rowDeselected: this.rowDeselected.bind(this),\n            cellSelecting: this.gridSettings.cellSelecting ? this.gridSettings.cellSelecting.bind(this.parent) : undefined,\n            cellSelected: this.cellSelected.bind(this),\n            cellDeselecting: this.gridSettings.cellDeselecting ? this.gridSettings.cellDeselecting.bind(this.parent) : undefined,\n            cellDeselected: this.cellDeselected.bind(this),\n            resizeStart: this.gridSettings.resizeStart ? this.gridSettings.resizeStart.bind(this.parent) : undefined,\n            columnDragStart: this.gridSettings.columnDragStart ? this.gridSettings.columnDragStart.bind(this) : undefined,\n            columnDrag: this.gridSettings.columnDrag ? this.gridSettings.columnDrag.bind(this) : undefined,\n            columnDrop: this.gridSettings.columnDrop ? this.gridSettings.columnDrop.bind(this) : undefined,\n            beforeExcelExport: this.beforeExcelExport.bind(this),\n            resizing: this.setGroupWidth.bind(this),\n            resizeStop: this.onResizeStop.bind(this),\n            queryCellInfo: this.queryCellInfo.bind(this),\n            dataBound: this.dataBound.bind(this),\n            headerCellInfo: this.headerCellInfo.bind(this),\n            excelHeaderQueryCellInfo: this.excelHeaderQueryCellInfo.bind(this),\n            pdfHeaderQueryCellInfo: this.pdfHeaderQueryCellInfo.bind(this),\n            excelQueryCellInfo: this.excelQueryCellInfo.bind(this),\n            pdfQueryCellInfo: this.pdfQueryCellInfo.bind(this),\n            beforePdfExport: this.gridSettings.beforePdfExport ? this.gridSettings.beforePdfExport.bind(this) : undefined,\n            pdfExportComplete: this.pdfExportComplete.bind(this),\n            excelExportComplete: this.excelExportComplete.bind(this)\n        });\n        if (isBlazor()) {\n            var isJsComponent = 'isJsComponent';\n            /* eslint-disable-next-line */\n            this.parent.grid[isJsComponent] = true;\n        }\n        this.parent.grid.on('header-refreshed', this.headerRefreshed.bind(this));\n        this.parent.grid.on('export-DataBound', this.excelDataBound.bind(this));\n    };\n    /* eslint-disable-next-line */\n    Render.prototype.headerRefreshed = function (args) {\n        if (this.parent.lastGridSettings && Object.keys(this.parent.lastGridSettings).indexOf('allowResizing') > -1) {\n            this.parent.lastGridSettings = undefined;\n            if (this.parent.showGroupingBar && this.parent.groupingBarModule &&\n                this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n                this.parent.groupingBarModule.setGridRowWidth();\n            }\n        }\n    };\n    /* eslint-disable-next-line */\n    Render.prototype.beforeExcelExport = function (args) {\n        if (!isNullOrUndefined(args.gridObject.columns) && !isNullOrUndefined(this.parent.pivotColumns)) {\n            args.gridObject.columns[args.gridObject.columns.length - 1].width =\n                this.parent.pivotColumns[this.parent.pivotColumns.length - 1].width;\n        }\n        this.parent.trigger(events.beforeExcelExport, args);\n    };\n    Render.prototype.rowSelected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.rowSelected, args);\n    };\n    Render.prototype.rowDeselected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.rowDeselected, args);\n    };\n    Render.prototype.cellSelected = function (args) {\n        if (this.parent.rowRangeSelection.enable) {\n            this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex, this.parent.rowRangeSelection.endIndex);\n            this.parent.rowRangeSelection.enable = false;\n        }\n        else {\n            this.parent.renderModule.selected();\n            this.parent.trigger(events.selected, args);\n        }\n    };\n    Render.prototype.cellSelecting = function (args) {\n        this.parent.trigger(events.cellSelecting, args);\n    };\n    Render.prototype.cellDeselected = function (args) {\n        this.parent.renderModule.selected();\n        this.parent.trigger(events.cellDeselected, args);\n    };\n    Render.prototype.queryCellInfo = function (args) {\n        this.parent.renderModule.rowCellBoundEvent(args);\n    };\n    Render.prototype.headerCellInfo = function (args) {\n        this.parent.renderModule.columnCellBoundEvent(args);\n    };\n    Render.prototype.excelHeaderQueryCellInfo = function (args) {\n        this.parent.renderModule.excelColumnEvent(args);\n    };\n    Render.prototype.pdfQueryCellInfo = function (args) {\n        this.parent.renderModule.pdfRowEvent(args);\n    };\n    Render.prototype.excelQueryCellInfo = function (args) {\n        this.parent.renderModule.excelRowEvent(args);\n    };\n    Render.prototype.pdfHeaderQueryCellInfo = function (args) {\n        this.parent.renderModule.pdfColumnEvent(args);\n    };\n    /* eslint-disable */\n    Render.prototype.pdfExportComplete = function (args) {\n        if (this.parent.lastColumn !== undefined && this.parent.lastColumn.width !== 'auto') {\n            this.parent.lastColumn.width = 'auto';\n            this.parent.lastColumn = undefined;\n        }\n    };\n    Render.prototype.excelExportComplete = function (args) {\n        if (this.parent.lastColumn !== undefined && this.parent.lastColumn.width !== 'auto') {\n            this.parent.lastColumn.width = 'auto';\n            this.parent.lastColumn = undefined;\n        }\n    };\n    /* eslint-enable */\n    Render.prototype.dataBound = function (args) {\n        if (this.parent.cellTemplate && !isBlazor()) {\n            for (var _i = 0, _a = this.parent.gridHeaderCellInfo; _i < _a.length; _i++) {\n                var cell = _a[_i];\n                if (this.parent.cellTemplate) {\n                    /* eslint-disable-next-line */\n                    var element = this.parent.getCellTemplate()(cell, this.parent, 'cellTemplate', this.parent.element.id + '_cellTemplate', null, null, cell.targetCell);\n                    if (element && element !== '' && element.length > 0) {\n                        if (this.parent.enableHtmlSanitizer) {\n                            this.parent.appendHtml(cell.targetCell, SanitizeHtmlHelper.sanitize(element[0].outerHTML));\n                        }\n                        else {\n                            this.parent.appendHtml(cell.targetCell, element[0].outerHTML);\n                        }\n                    }\n                }\n            }\n            this.parent.gridHeaderCellInfo = [];\n        }\n        if (this.parent.element.querySelector('.e-firstcell') && !(this.parent.dataSourceSettings.values.length === 1 && this.parent.dataSourceSettings.columns.length > 0)) {\n            if (this.parent.enableRtl) {\n                this.parent.element.querySelector('.e-firstcell').style.borderRight = 'none';\n            }\n            else {\n                this.parent.element.querySelector('.e-firstcell').style.borderLeft = 'none';\n            }\n        }\n        if (this.parent.grid && this.parent.grid.widthService) {\n            this.parent.grid.widthService.setWidthToTable();\n        }\n        if (this.parent.notEmpty) {\n            this.calculateGridHeight(true);\n        }\n        this.parent.isScrolling = false;\n        this.setFocusOnLastCell();\n        if (!isNullOrUndefined(this.parent.renderReactTemplates)) { /* eslint-disable-line */\n            this.parent.renderReactTemplates(); /* eslint-disable-line */\n        }\n        if (this.parent.isInitial) {\n            this.parent.refreshData();\n        }\n        this.parent.isInitial = false;\n        this.parent.notify(events.contentReady, {});\n    };\n    Render.prototype.setFocusOnLastCell = function () {\n        if (this.parent.keyboardModule && this.parent.keyboardModule.event &&\n            this.parent.keyboardModule.event.target.nodeName === 'TD') {\n            var gridFocus = this.parent.grid.serviceLocator.getService('focus');\n            gridFocus.setFocusedElement(this.parent.keyboardModule.event.target);\n            gridFocus.focus(this.parent.keyboardModule.event);\n            addClass([this.parent.keyboardModule.event.target], ['e-focused', 'e-focus']);\n            this.parent.keyboardModule.event.target.setAttribute('tabindex', '0');\n            this.parent.keyboardModule.event = undefined;\n        }\n    };\n    /* eslint-disable */\n    Render.prototype.contextMenuOpen = function (args) {\n        var _this = this;\n        var _loop_1 = function (item) {\n            var cellTarget = this_1.parent.lastCellClicked;\n            var elem = null;\n            var bool = void 0;\n            var isGroupElement = void 0;\n            if (cellTarget.classList.contains('e-stackedheadercelldiv') || cellTarget.classList.contains('e-cellvalue') ||\n                cellTarget.classList.contains('e-headercelldiv') || cellTarget.classList.contains('e-icons') || cellTarget.classList.contains('e-rhandler')) {\n                elem = cellTarget.parentElement;\n            }\n            else if (cellTarget.classList.contains('e-headercell') || cellTarget.classList.contains('e-rowcell') || cellTarget.classList.contains('e-columnsheader') ||\n                cellTarget.classList.contains('e-rowsheader') || cellTarget.classList.contains('e-valuescontent') || cellTarget.classList.contains('e-valuesheader')) {\n                elem = cellTarget;\n            }\n            else if (cellTarget.classList.contains('e-headertext')) {\n                elem = cellTarget.parentElement.parentElement;\n            }\n            if (!elem) {\n                args.cancel = true;\n                return { value: void 0 };\n            }\n            if (elem.classList.contains('e-valuesheader') || elem.classList.contains('e-stot')) {\n                bool = true;\n            }\n            if (this_1.parent.allowGrouping && this_1.parent.groupingModule && !this_1.validateField(elem)) {\n                isGroupElement = true;\n            }\n            var rowIndex = Number(elem.getAttribute('index'));\n            var colIndex = Number(elem.getAttribute('aria-colindex'));\n            var pivotValue1 = this_1.parent.pivotValues[rowIndex][colIndex];\n            var selectedID = item.id;\n            switch (selectedID) {\n                case this_1.parent.element.id + '_expand':\n                    if (elem.querySelectorAll('.' + cls.EXPAND).length > 0) {\n                        if (selectAll('#' + this_1.parent.element.id + '_expand', args.element)) {\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                        if (select('#' + this_1.parent.element.id + '_expand', args.element).classList.contains(cls.MENU_DISABLE)) {\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                        if (select('#' + this_1.parent.element.id + '_expand', args.element).classList.contains(cls.MENU_HIDE)) {\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.remove(cls.MENU_HIDE);\n                            select('#' + this_1.parent.element.id + '_collapse', args.element).classList.remove(cls.MENU_HIDE);\n                        }\n                    }\n                    else {\n                        if (bool) {\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_HIDE);\n                        }\n                        else {\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                    }\n                    break;\n                case this_1.parent.element.id + '_collapse':\n                    if (elem.querySelectorAll('.' + cls.COLLAPSE).length > 0) {\n                        if (select('#' + this_1.parent.element.id + '_expand', args.element)) {\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                        if (select('#' + this_1.parent.element.id + '_collapse', args.element).classList.contains(cls.MENU_DISABLE)) {\n                            select('#' + this_1.parent.element.id + '_collapse', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                        if (select('#' + this_1.parent.element.id + '_collapse', args.element).classList.contains(cls.MENU_HIDE)) {\n                            select('#' + this_1.parent.element.id + '_collapse', args.element).classList.remove(cls.MENU_HIDE);\n                            select('#' + this_1.parent.element.id + '_expand', args.element).classList.remove(cls.MENU_HIDE);\n                        }\n                    }\n                    else {\n                        if (bool) {\n                            select('#' + this_1.parent.element.id + '_collapse', args.element).classList.add(cls.MENU_HIDE);\n                        }\n                        else {\n                            select('#' + this_1.parent.element.id + '_collapse', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                    }\n                    break;\n                case this_1.parent.element.id + '_custom_group':\n                    if (!isGroupElement && args.items.length === 2) {\n                        args.cancel = true;\n                    }\n                    if (selectAll('#' + this_1.parent.element.id + '_custom_group', args.element)) {\n                        addClass([select('#' + this_1.parent.element.id + '_custom_group', args.element)], cls.MENU_HIDE);\n                    }\n                    if (isGroupElement) {\n                        if (selectAll('#' + this_1.parent.element.id + '_custom_group', args.element)) {\n                            removeClass([select('#' + this_1.parent.element.id + '_custom_group', args.element)], cls.MENU_HIDE);\n                        }\n                    }\n                    break;\n                case this_1.parent.element.id + '_custom_ungroup':\n                    if (selectAll('#' + this_1.parent.element.id + '_custom_ungroup', args.element)) {\n                        addClass([select('#' + this_1.parent.element.id + '_custom_ungroup', args.element)], cls.MENU_HIDE);\n                    }\n                    if (isGroupElement) {\n                        var isUngroupOption = false;\n                        var fieldName = elem.getAttribute('fieldname');\n                        var groupField = PivotUtil.getFieldByName(fieldName, this_1.parent.dataSourceSettings.groupSettings);\n                        if (groupField && groupField.type === 'Custom' || (this_1.parent.engineModule.fieldList[fieldName].isCustomField && fieldName.indexOf('_custom_group') > -1)) {\n                            groupField = PivotUtil.getFieldByName(fieldName.replace('_custom_group', ''), this_1.parent.dataSourceSettings.groupSettings);\n                            if (groupField) {\n                                var cell = this_1.parent.engineModule.pivotValues[Number(elem.getAttribute('index'))][Number(elem.getAttribute('aria-colindex'))];\n                                var selectedCellsInfo = this_1.parent.groupingModule.getSelectedCells(cell.axis, fieldName, cell.actualText.toString());\n                                selectedCellsInfo.push({ axis: cell.axis, fieldName: fieldName, name: cell.actualText.toString(), cellInfo: cell });\n                                var selectedOptions = this_1.parent.groupingModule.getSelectedOptions(selectedCellsInfo);\n                                for (var _i = 0, _a = groupField.customGroups; _i < _a.length; _i++) {\n                                    var customGroup = _a[_i];\n                                    if (selectedOptions.indexOf(customGroup.groupName) > -1) {\n                                        isUngroupOption = true;\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        else if (groupField && (groupField.type === 'Date' || groupField.type === 'Number') ||\n                            (this_1.parent.engineModule.fieldList[fieldName].isCustomField && fieldName.indexOf('_date_group') > -1)) {\n                            isUngroupOption = true;\n                        }\n                        if (selectAll('#' + this_1.parent.element.id + '_custom_ungroup', args.element) && isUngroupOption) {\n                            removeClass([select('#' + this_1.parent.element.id + '_custom_ungroup', args.element)], cls.MENU_HIDE);\n                        }\n                    }\n                    break;\n                case this_1.parent.element.id + '_drillthrough':\n                    if (!this_1.parent.allowDrillThrough) {\n                        if (select('#' + this_1.parent.element.id + '_drillthrough', args.element)) {\n                            select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                    }\n                    else if (!(elem.classList.contains('e-summary'))) {\n                        if (elem.innerText === '') {\n                            if (select('#' + this_1.parent.element.id + '_drillthrough', args.element)) {\n                                select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.add(cls.MENU_DISABLE);\n                            }\n                        }\n                    }\n                    else {\n                        if (select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.contains(cls.MENU_DISABLE)) {\n                            select('#' + this_1.parent.element.id + '_drillthrough', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                    }\n                    break;\n                case this_1.parent.element.id + '_sortasc':\n                    if (!this_1.parent.enableValueSorting) {\n                        if (select('#' + this_1.parent.element.id + '_sortasc', args.element)) {\n                            select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                    }\n                    else if (elem.querySelectorAll('.e-icon-descending').length > 0) {\n                        if (select('#' + this_1.parent.element.id + '_sortdesc', args.element)) {\n                            select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                        else {\n                            select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                        if (select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.contains(cls.MENU_DISABLE)) {\n                            select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                    }\n                    else if (select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.contains(cls.MENU_DISABLE)) {\n                        select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.remove(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_sortdesc':\n                    if (!this_1.parent.enableValueSorting) {\n                        if (select('#' + this_1.parent.element.id + '_sortdesc', args.element)) {\n                            select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                    }\n                    else if (elem.querySelectorAll('.e-icon-ascending').length > 0) {\n                        if (select('#' + this_1.parent.element.id + '_sortasc', args.element)) {\n                            select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.add(cls.MENU_DISABLE);\n                        }\n                        else {\n                            select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                        if (select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.contains(cls.MENU_DISABLE)) {\n                            select('#' + this_1.parent.element.id + '_sortdesc', args.element).classList.remove(cls.MENU_DISABLE);\n                        }\n                    }\n                    else if (select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.contains(cls.MENU_DISABLE)) {\n                        select('#' + this_1.parent.element.id + '_sortasc', args.element).classList.remove(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_CalculatedField':\n                    if (!this_1.parent.allowCalculatedField) {\n                        select('#' + this_1.parent.element.id + '_CalculatedField', args.element).classList.add(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_pdf':\n                    if (!this_1.parent.allowPdfExport) {\n                        select('#' + this_1.parent.element.id + '_pdf', args.element).classList.add(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_excel':\n                    if (!this_1.parent.allowExcelExport) {\n                        select('#' + this_1.parent.element.id + '_excel', args.element).classList.add(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_csv':\n                    if (!this_1.parent.allowExcelExport) {\n                        select('#' + this_1.parent.element.id + '_csv', args.element).classList.add(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_exporting':\n                    if ((!this_1.parent.allowExcelExport) && (!this_1.parent.allowPdfExport)) {\n                        select('#' + this_1.parent.element.id + '_exporting', args.element).classList.add(cls.MENU_DISABLE);\n                    }\n                    break;\n                case this_1.parent.element.id + '_aggregate':\n                    if ((select('#' + this_1.parent.element.id + '_aggregate', args.element)) &&\n                        (!select('#' + this_1.parent.element.id + '_aggregate', args.element).classList.contains(cls.MENU_DISABLE))) {\n                        select('#' + this_1.parent.element.id + '_aggregate', args.element).classList.add(cls.MENU_DISABLE);\n                    }\n                    if ((elem.classList.contains('e-valuesheader') || elem.classList.contains('e-valuescontent') ||\n                        (elem.classList.contains('e-stot') && elem.classList.contains('e-rowsheader'))) && this_1.parent.dataType !== 'olap') {\n                        var fieldType_1;\n                        if (!(elem.innerText === '')) {\n                            fieldType_1 = this_1.parent.engineModule.fieldList[pivotValue1.actualText.toString()].type;\n                        }\n                        var eventArgs = {\n                            cancel: false, fieldName: pivotValue1.actualText.toString(),\n                            aggregateTypes: this_1.getMenuItem(fieldType_1).slice(),\n                            displayMenuCount: 7\n                        };\n                        this_1.parent.trigger(events.aggregateMenuOpen, eventArgs, function (observedArgs) {\n                            if (!observedArgs.cancel && !(elem.innerText === '')) {\n                                var menuItem = [];\n                                var checkDuplicates = [];\n                                for (var i = 0; i < observedArgs.aggregateTypes.length; i++) {\n                                    var key = observedArgs.aggregateTypes[i];\n                                    if (fieldType_1 !== 'number') {\n                                        if ((['Count', 'DistinctCount'].indexOf(key) > -1) && (checkDuplicates.indexOf(key) < 0)) {\n                                            menuItem.push({ text: _this.parent.localeObj.getConstant(key), id: _this.parent.element.id + '_Agg' + key });\n                                            checkDuplicates.push(key);\n                                        }\n                                    }\n                                    else {\n                                        if ((_this.parent.getAllSummaryType().indexOf(key) > -1) && (checkDuplicates.indexOf(key) < 0)) {\n                                            menuItem.push({ text: _this.parent.localeObj.getConstant(key), id: _this.parent.element.id + '_Agg' + key });\n                                            checkDuplicates.push(key);\n                                        }\n                                    }\n                                }\n                                if (menuItem.length > observedArgs.displayMenuCount) {\n                                    menuItem.splice(observedArgs.displayMenuCount);\n                                    menuItem.push({\n                                        text: _this.parent.localeObj.getConstant('MoreOption'),\n                                        id: _this.parent.element.id + '_Agg' + 'MoreOption'\n                                    });\n                                }\n                                if (menuItem && menuItem.length >= 1) {\n                                    item.items = menuItem;\n                                    select('#' + _this.parent.element.id + '_aggregate', args.element).classList.remove(cls.MENU_DISABLE);\n                                }\n                            }\n                        });\n                    }\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var state_1 = _loop_1(item);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        this.parent.trigger(events.contextMenuOpen, args);\n    };\n    Render.prototype.getMenuItem = function (isStringField) {\n        var menuItems = [];\n        for (var i = 0; i < this.parent.aggregateTypes.length; i++) {\n            var key = this.parent.aggregateTypes[i];\n            if (isStringField !== 'string') {\n                if ((this.parent.getAllSummaryType().indexOf(key) > -1) && (menuItems.indexOf(key) === -1)) {\n                    menuItems.push(key);\n                }\n            }\n            else {\n                if ((['Count', 'DistinctCount'].indexOf(key) > -1) && (menuItems.indexOf(key) === -1)) {\n                    menuItems.push(key);\n                }\n            }\n        }\n        return menuItems;\n    };\n    Render.prototype.contextMenuClick = function (args) {\n        var _this = this;\n        // this.parent.gridSettings.contextMenuClick();\n        var target = this.parent.lastCellClicked;\n        var selected = args.item.id;\n        var event = new MouseEvent('dblclick', {\n            'view': window,\n            'bubbles': true,\n            'cancelable': true\n        });\n        var exportArgs = {};\n        var ele = null;\n        if (target.classList.contains('e-stackedheadercelldiv') || target.classList.contains('e-cellvalue') ||\n            target.classList.contains('e-headercelldiv') || target.classList.contains('e-icons') || target.classList.contains('e-rhandler')) {\n            ele = target.parentElement;\n        }\n        else if (target.classList.contains('e-headercell') || target.classList.contains('e-rowcell')) {\n            ele = target;\n        }\n        else if (target.classList.contains('e-headertext')) {\n            ele = target.parentElement.parentElement;\n        }\n        var rowIndx = Number(ele.getAttribute('index'));\n        var colIndx = Number(ele.getAttribute('aria-colindex'));\n        var pivotValue = this.parent.pivotValues[rowIndx][colIndx];\n        var aggregateType;\n        if (args.item.id.indexOf(this.parent.element.id + '_Agg') > -1) {\n            this.field = this.parent.engineModule.fieldList[pivotValue.actualText.toString()].id;\n            this.fieldCaption = this.parent.engineModule.fieldList[pivotValue.actualText.toString()].caption;\n            aggregateType = args.item.id.split('_Agg')[1];\n        }\n        switch (selected) {\n            case this.parent.element.id + '_pdf':\n                exportArgs = {\n                    pdfDoc: undefined,\n                    isBlob: false,\n                    isMultipleExport: false,\n                    pdfExportProperties: { fileName: 'Export.pdf' },\n                };\n                this.parent.trigger(events.beforeExport, exportArgs, function (observedArgs) {\n                    if (isBlazor()) {\n                        var pdfProperties = PivotUtil.formatPdfExportProperties(observedArgs.pdfExportProperties);\n                        _this.parent.pdfExport(pdfProperties, observedArgs.isMultipleExport, observedArgs.pdfDoc, observedArgs.isBlob);\n                    }\n                    else {\n                        _this.parent.pdfExport(observedArgs.pdfExportProperties, observedArgs.isMultipleExport, observedArgs.pdfDoc, observedArgs.isBlob);\n                    }\n                });\n                break;\n            case this.parent.element.id + '_excel':\n                exportArgs = {\n                    isBlob: false,\n                    isMultipleExport: false,\n                    workbook: undefined,\n                    excelExportProperties: { fileName: 'Export.xlsx' },\n                };\n                this.parent.trigger(events.beforeExport, exportArgs, function (observedArgs) {\n                    if (isBlazor()) {\n                        var excelProperties = PivotUtil.formatExcelExportProperties(observedArgs.excelExportProperties);\n                        _this.parent.excelExport(excelProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n                    }\n                    else {\n                        _this.parent.excelExport(observedArgs.excelExportProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n                    }\n                });\n                break;\n            case this.parent.element.id + '_csv':\n                exportArgs = {\n                    isBlob: false,\n                    workbook: undefined,\n                    isMultipleExport: false,\n                    excelExportProperties: { fileName: 'Export.csv' },\n                };\n                this.parent.trigger(events.beforeExport, exportArgs, function (observedArgs) {\n                    if (isBlazor()) {\n                        var excelProperties = PivotUtil.formatExcelExportProperties(observedArgs.excelExportProperties);\n                        _this.parent.csvExport(excelProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n                    }\n                    else {\n                        _this.parent.csvExport(observedArgs.excelExportProperties, observedArgs.isMultipleExport, observedArgs.workbook, observedArgs.isBlob);\n                    }\n                });\n                break;\n            case this.parent.element.id + '_drillthrough_menu':\n                ele.dispatchEvent(event);\n                break;\n            case this.parent.element.id + '_sortasc':\n                this.parent.setProperties({\n                    dataSourceSettings: {\n                        valueSortSettings: {\n                            headerText: pivotValue.valueSort.levelName,\n                            headerDelimiter: this.parent.dataSourceSettings.valueSortSettings.headerDelimiter\n                        }\n                    }\n                });\n                this.parent.dataSourceSettings.valueSortSettings.sortOrder = 'Ascending';\n                break;\n            case this.parent.element.id + '_sortdesc':\n                this.parent.setProperties({\n                    dataSourceSettings: {\n                        valueSortSettings: {\n                            headerText: pivotValue.valueSort.levelName,\n                            headerDelimiter: this.parent.dataSourceSettings.valueSortSettings.headerDelimiter\n                        }\n                    }\n                });\n                this.parent.dataSourceSettings.valueSortSettings.sortOrder = 'Descending';\n                break;\n            case this.parent.element.id + '_expand':\n                if (ele.querySelectorAll('.' + cls.EXPAND)) {\n                    var exp = ele.querySelectorAll('.' + cls.EXPAND)[0];\n                    this.parent.onDrill(exp);\n                }\n                break;\n            case this.parent.element.id + '_collapse':\n                if (ele.querySelectorAll('.' + cls.COLLAPSE)) {\n                    var colp = ele.querySelectorAll('.' + cls.COLLAPSE)[0];\n                    this.parent.onDrill(colp);\n                }\n                break;\n            case this.parent.element.id + '_CalculatedField':\n                this.parent.calculatedFieldModule.createCalculatedFieldDialog();\n                break;\n            case this.parent.element.id + '_AggMoreOption':\n            case this.parent.element.id + '_AggDifferenceFrom':\n            case this.parent.element.id + '_AggPercentageOfDifferenceFrom':\n            case this.parent.element.id + '_AggPercentageOfParentTotal':\n                ele.setAttribute('id', this.field);\n                ele.setAttribute('data-caption', this.fieldCaption);\n                ele.setAttribute('data-field', this.field);\n                ele.setAttribute('data-type', this.engine.fieldList[pivotValue.actualText.toString()].aggregateType);\n                ele.setAttribute('data-basefield', this.engine.fieldList[pivotValue.actualText.toString()].baseField);\n                ele.setAttribute('data-baseItem', this.engine.fieldList[pivotValue.actualText.toString()].baseItem);\n                this.aggMenu.createValueSettingsDialog(ele, this.parent.element, aggregateType);\n                break;\n            case this.parent.element.id + '_Agg' + aggregateType:\n                this.updateAggregate(aggregateType);\n                break;\n            case this.parent.element.id + '_custom_group':\n            case this.parent.element.id + '_custom_ungroup':\n                if (this.parent.groupingModule) {\n                    var args_1 = {\n                        target: ele,\n                        option: selected,\n                        parentElement: this.parent.element\n                    };\n                    this.parent.notify(events.initGrouping, args_1);\n                    this.parent.grid.contextMenuModule.contextMenu.close();\n                }\n                break;\n        }\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    Render.prototype.validateColumnTotalcell = function (columnIndex) {\n        var headerPosKeys = Object.keys(this.engine.headerContent);\n        var keysLength = headerPosKeys.length;\n        var sumLock = false;\n        var fieldName = \"\";\n        for (var pos = keysLength - 1; pos >= 0; pos--) {\n            var cell = this.engine.headerContent[headerPosKeys[pos]][columnIndex];\n            if (cell) {\n                sumLock = sumLock && fieldName !== '' ? fieldName === cell.valueSort.axis : false;\n                fieldName = cell.valueSort.axis ? cell.valueSort.axis.toString() : '';\n                if (cell.type === 'sum') {\n                    sumLock = true;\n                }\n                if (sumLock && cell.members && cell.members.length > 0) {\n                    return true;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n        return false;\n    };\n    Render.prototype.validateField = function (target) {\n        var isValueField = false;\n        if (target.classList.contains('e-stot') || target.classList.contains('e-gtot') || target.classList.contains('e-valuescontent') || target.classList.contains('e-valuesheader')) {\n            isValueField = true;\n        }\n        else {\n            var fieldName = target.getAttribute('fieldName');\n            if (!fieldName || fieldName == '') {\n                var rowIndx = Number(target.getAttribute('index'));\n                var colIndx = Number(target.getAttribute('aria-colindex'));\n                fieldName = this.engine.pivotValues[rowIndx][colIndx].actualText;\n            }\n            var valuefields = this.parent.dataSourceSettings.values;\n            for (var valueCnt = 0; valueCnt < valuefields.length; valueCnt++) {\n                if (this.parent.dataSourceSettings.values[valueCnt].name === fieldName) {\n                    isValueField = true;\n                    break;\n                }\n            }\n        }\n        return isValueField;\n    };\n    /* eslint-enable */\n    Render.prototype.updateAggregate = function (aggregate) {\n        if (this.parent.getAllSummaryType().indexOf(aggregate) > -1) {\n            var valuefields = this.parent.dataSourceSettings.values;\n            for (var valueCnt = 0; valueCnt < this.parent.dataSourceSettings.values.length; valueCnt++) {\n                if (this.parent.dataSourceSettings.values[valueCnt].name === this.field) {\n                    var dataSourceItem = valuefields[valueCnt];\n                    dataSourceItem.type = aggregate;\n                }\n            }\n        }\n    };\n    Render.prototype.injectGridModules = function (parent) {\n        Grid.Inject(Freeze);\n        if (parent.allowExcelExport) {\n            Grid.Inject(ExcelExport);\n        }\n        if (parent.allowPdfExport) {\n            Grid.Inject(PdfExport);\n        }\n        Grid.Inject(Selection, Reorder, Resize);\n        if (this.gridSettings.contextMenuItems) {\n            Grid.Inject(ContextMenu);\n        }\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.updateGridSettings = function () {\n        this.injectGridModules(this.parent);\n        this.parent.grid.allowResizing = this.gridSettings.allowResizing;\n        this.parent.grid.allowTextWrap = this.gridSettings.allowTextWrap;\n        this.parent.grid.allowReordering = (this.parent.showGroupingBar ? false : this.gridSettings.allowReordering);\n        this.parent.grid.allowSelection = this.gridSettings.allowSelection;\n        /* eslint-disable-next-line */\n        this.parent.grid.contextMenuItems = this.gridSettings.contextMenuItems;\n        this.parent.grid.selectedRowIndex = this.gridSettings.selectedRowIndex;\n        /* eslint-disable-next-line */\n        this.parent.grid.selectionSettings = this.gridSettings.selectionSettings;\n        this.parent.grid.textWrapSettings = this.gridSettings.textWrapSettings;\n        this.parent.grid.printMode = this.gridSettings.printMode;\n        this.parent.grid.rowHeight = this.gridSettings.rowHeight;\n        this.parent.grid.gridLines = this.gridSettings.gridLines;\n        if (this.parent.lastGridSettings) {\n            var keys = Object.keys(this.parent.lastGridSettings);\n            if (keys.indexOf('height') > -1) {\n                this.parent.grid.height = this.gridSettings.height;\n            }\n            if (keys.indexOf('width') > -1) {\n                this.parent.grid.width = this.gridSettings.width;\n            }\n            this.updatePivotColumns();\n            if (keys.indexOf('allowTextWrap') > -1) {\n                this.parent.layoutRefresh();\n            }\n        }\n        this.clearColumnSelection();\n    };\n    Render.prototype.updatePivotColumns = function () {\n        var keys = Object.keys(this.parent.lastGridSettings);\n        for (var colPos = 0; colPos < this.parent.pivotColumns.length; colPos++) {\n            var pivotColumn = this.parent.pivotColumns[colPos];\n            for (var keyPos = 0; keyPos < keys.length; keyPos++) {\n                var key = keys[keyPos];\n                /* eslint-disable-next-line */\n                if (!isNullOrUndefined(this.parent.pivotColumns[colPos][key])) {\n                    /* eslint-disable-next-line */\n                    pivotColumn[key] = this.parent.lastGridSettings[key];\n                }\n            }\n        }\n        this.parent.fillGridColumns(this.parent.grid.columns);\n    };\n    Render.prototype.clearColumnSelection = function () {\n        removeClass(this.parent.element.querySelectorAll('.' + cls.CELL_ACTIVE_BGCOLOR), [cls.CELL_ACTIVE_BGCOLOR, cls.SELECTED_BGCOLOR]);\n    };\n    Render.prototype.appendValueSortIcon = function (cell, tCell, rCnt, cCnt) {\n        if (this.parent.enableValueSorting && this.parent.dataType === 'pivot') {\n            var vSort = this.parent.dataSourceSettings.valueSortSettings;\n            var len = (cell.type === 'grand sum' &&\n                this.parent.dataSourceSettings.values.length === 1 && !this.parent.dataSourceSettings.alwaysShowValueHeader) ? 0 :\n                (this.parent.dataSourceSettings.values.length > 1 || this.parent.dataSourceSettings.alwaysShowValueHeader) ?\n                    (this.parent.engineModule.headerContent.length - 1) :\n                    this.parent.dataSourceSettings.columns.length === 0 ? 0 : (this.parent.engineModule.headerContent.length - 1);\n            var lock = (vSort && vSort.headerText) ? cell.valueSort.levelName === vSort.headerText : cCnt === vSort.columnIndex;\n            if (vSort !== undefined && lock && rCnt === len && this.parent.dataSourceSettings.valueAxis === 'column') {\n                if (tCell.querySelector('.e-sortfilterdiv')) {\n                    tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ?\n                        'e-descending' : 'e-ascending');\n                    tCell.querySelector('.e-sortfilterdiv').classList.add(vSort.sortOrder === 'Descending' ?\n                        'e-icon-descending' : 'e-icon-ascending');\n                }\n                else {\n                    tCell.appendChild(createElement('div', {\n                        className: (vSort.sortOrder === 'Descending' ?\n                            'e-icon-descending e-icons e-descending e-sortfilterdiv' :\n                            'e-icon-ascending e-icons e-ascending e-sortfilterdiv')\n                    }));\n                }\n                if (!isNullOrUndefined(cell.hasChild) && cell.type !== 'grand sum' && tCell.querySelector('.e-expand') &&\n                    (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'))) {\n                    var element = (tCell.querySelector('.e-icon-descending') || tCell.querySelector('.e-icon-ascending'));\n                    setStyleAttribute(element, { 'padding-top': '12px' });\n                }\n            }\n            // return tCell;\n        }\n        return tCell;\n    };\n    Render.prototype.onResizeStop = function (args) {\n        /* eslint-disable-next-line */\n        var column = args.column.field === '0.formattedText' ? '0.formattedText' : args.column.customAttributes.cell.valueSort.levelName;\n        this.parent.resizeInfo[column] = Number(args.column.width.toString().split('px')[0]);\n        if (this.parent.enableVirtualization && args.column.field === '0.formattedText') {\n            if (this.parent.dataSourceSettings.values.length > 1) {\n                var gridColumns = this.parent.grid.columns[this.parent.grid.columns.length - 1].columns;\n                gridColumns[gridColumns.length - 1].minWidth = this.parent.gridSettings.columnWidth;\n            }\n            else {\n                this.parent.grid.columns[this.parent.grid.columns.length - 1].minWidth = this.parent.gridSettings.columnWidth;\n            }\n            this.parent.layoutRefresh();\n        }\n        this.setGroupWidth(args);\n        this.calculateGridHeight(true);\n        this.parent.grid.hideScroll();\n    };\n    Render.prototype.setGroupWidth = function (args) {\n        if (this.parent.enableVirtualization && args.column.field === '0.formattedText') {\n            if (this.parent.showGroupingBar && this.parent.groupingBarModule && this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS) && Number(args.column.width.toString().split('px')[0]) < 250) {\n                args.cancel = true;\n            }\n            else {\n                this.parent.element.querySelector('.e-frozenscrollbar').style.width = args.column.width.toString().split('px')[0] + 'px';\n            }\n        }\n        if (this.parent.showGroupingBar && this.parent.groupingBarModule &&\n            this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS)) {\n            this.parent.groupingBarModule.refreshUI();\n            if (this.parent.element.querySelector('.e-group-row').offsetWidth < 245 && !this.parent.firstColWidth) {\n                args.cancel = true;\n                var gridColumn = this.parent.grid.columns;\n                if (gridColumn && gridColumn.length > 0) {\n                    gridColumn[0].width = this.resColWidth;\n                }\n                this.parent.element.querySelector('.e-frozenheader').querySelector('col').style.width = (this.resColWidth + 'px');\n                this.parent.element.querySelector('.e-frozencontent').querySelector('col').style.width = (this.resColWidth + 'px');\n            }\n            this.parent.element.querySelector('.e-group-rows').style.height = 'auto';\n            this.parent.element.querySelector('.e-group-values').style.width =\n                this.parent.element.querySelector('.e-group-row').offsetWidth + 'px';\n            var firstRowHeight = this.parent.element.querySelector('.e-headercontent').offsetHeight;\n            this.parent.element.querySelector('.e-group-rows').style.height = firstRowHeight + 'px';\n        }\n        if (args.cancel) {\n            var column = args.column.field === '0.formattedText' ? '0.formattedText' : args.column.customAttributes.cell.valueSort.levelName;\n            this.parent.resizeInfo[column] = Number(args.column.width.toString().split('px')[0]);\n            if (this.parent.enableVirtualization) {\n                this.parent.layoutRefresh();\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            this.parent.resizedValue = (args.cancel || args.column.field !== '0.formattedText') ? this.parent.resizedValue : Number(args.column.width.toString().split('px')[0]);\n        }\n        this.parent.trigger(args.e.type === 'touchend' || args.e.type === 'mouseup' ? events.resizeStop : events.resizing, args);\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.selected = function () {\n        clearTimeout(this.timeOutObj);\n        this.timeOutObj = setTimeout(this.onSelect.bind(this), 300);\n    };\n    Render.prototype.onSelect = function () {\n        var pivotArgs = { selectedCellsInfo: [], pivotValues: this.parent.pivotValues, currentCell: null };\n        /* eslint-disable-next-line */\n        var selectedElements = this.parent.element.querySelectorAll('.' + cls.CELL_SELECTED_BGCOLOR + ',.' + cls.SELECTED_BGCOLOR);\n        for (var _i = 0, selectedElements_1 = selectedElements; _i < selectedElements_1.length; _i++) {\n            var element = selectedElements_1[_i];\n            var colIndex = Number(element.getAttribute('aria-colindex'));\n            var rowIndex = Number(element.getAttribute('index'));\n            var cell = this.engine.pivotValues[rowIndex][colIndex];\n            if (cell) {\n                if (cell.axis === 'value') {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.value,\n                        columnHeaders: cell.columnHeaders,\n                        rowHeaders: cell.rowHeaders,\n                        measure: cell.actualText.toString()\n                    });\n                }\n                else if (cell.axis === 'column') {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.formattedText,\n                        columnHeaders: cell.valueSort.levelName,\n                        rowHeaders: '',\n                        measure: ''\n                    });\n                }\n                else {\n                    pivotArgs.selectedCellsInfo.push({\n                        currentCell: cell,\n                        value: cell.formattedText,\n                        columnHeaders: '',\n                        rowHeaders: cell.valueSort.levelName,\n                        measure: ''\n                    });\n                }\n            }\n        }\n        this.parent.trigger(events.cellSelected, pivotArgs);\n    };\n    Render.prototype.rowCellBoundEvent = function (args) {\n        var tCell = args.cell;\n        if (tCell && (this.parent.notEmpty) && this.engine.headerContent) {\n            var customClass = this.parent.hyperlinkSettings.cssClass;\n            tCell.setAttribute('index', (Number(tCell.getAttribute('index')) + this.engine.headerContent.length).toString());\n            var cell = args.data[0];\n            if (tCell.getAttribute('aria-colindex') === '0') {\n                if (this.parent.dataType === 'pivot') {\n                    var isValueCell = cell.type && cell.type === 'value';\n                    tCell.innerText = '';\n                    var level = cell.level ? cell.level : (isValueCell ? (this.lastSpan + 1) : 0);\n                    do {\n                        if (level > 0) {\n                            tCell.appendChild(createElement('span', {\n                                className: level === 0 ? '' : cls.NEXTSPAN\n                            }));\n                        }\n                        level--;\n                    } while (level > -1);\n                    level = cell.level ? cell.level : 0;\n                    this.lastSpan = !isValueCell ? level : this.lastSpan;\n                    if (!cell.hasChild && level > 0) {\n                        tCell.appendChild(createElement('span', {\n                            className: cls.LASTSPAN\n                        }));\n                    }\n                    var fieldName = void 0;\n                    if ((this.parent.dataSourceSettings.rows.length > 0 &&\n                        (cell.valueSort ? Object.keys(cell.valueSort).length > 0 : true))) {\n                        fieldName = level > -1 ? this.parent.dataSourceSettings.rows[level].name : '';\n                        tCell.setAttribute('fieldname', fieldName);\n                    }\n                }\n                else {\n                    tCell = this.onOlapRowCellBoundEvent(tCell, cell);\n                }\n                var localizedText = cell.formattedText;\n                if (cell.type) {\n                    if (cell.type === 'grand sum') {\n                        this.rowGrandPos = cell.rowIndex;\n                        tCell.classList.add('e-gtot');\n                        localizedText = this.parent.localeObj.getConstant('grandTotal');\n                    }\n                    else if (cell.valueSort.levelName === (this.parent.localeObj.getConstant('grandTotal') +\n                        (this.parent.dataSourceSettings.valueSortSettings.headerDelimiter) + (cell.formattedText))) {\n                        tCell.classList.add('e-gtot');\n                    }\n                    else {\n                        tCell.classList.add('e-stot');\n                    }\n                }\n                tCell.classList.add(cls.ROWSHEADER);\n                if (cell.hasChild === true && !cell.isNamedSet) {\n                    tCell.appendChild(createElement('div', {\n                        className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n                        attrs: {\n                            'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') :\n                                this.parent.localeObj.getConstant('expand')\n                        }\n                    }));\n                }\n                tCell.appendChild(createElement('span', {\n                    className: cls.CELLVALUE,\n                    innerHTML: (this.parent.isRowCellHyperlink || cell.enableHyperlink ? '<a  data-url=\"' + localizedText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + localizedText + '</a>' : localizedText)\n                }));\n                var vSort = this.parent.pivotView.dataSourceSettings.valueSortSettings;\n                if (this.parent.enableValueSorting) {\n                    if (vSort && vSort.headerText && this.parent.dataSourceSettings.valueAxis === 'row'\n                        && this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName) {\n                        if (this.parent.pivotValues[Number(tCell.getAttribute('index'))][0].valueSort.levelName\n                            === vSort.headerText) {\n                            var style = (tCell.querySelector('.e-expand') || tCell.querySelector('.e-collapse')) ?\n                                'padding-top: 18px' : 'padding-top: 12px';\n                            tCell.appendChild(createElement('div', {\n                                className: (vSort.sortOrder === 'Descending' ?\n                                    'e-icon-descending e-icons e-descending e-sortfilterdiv' :\n                                    'e-icon-ascending e-icons e-ascending e-sortfilterdiv'),\n                                styles: style\n                            }));\n                        }\n                    }\n                }\n            }\n            else {\n                var innerText = tCell.innerText;\n                tCell.innerText = '';\n                tCell.classList.add(cls.VALUESCONTENT);\n                cell = args.data[Number(tCell.getAttribute('aria-colindex'))];\n                if (cell.isSum) {\n                    tCell.classList.add(cls.SUMMARY);\n                }\n                if (cell.isGrandSum || this.colGrandPos === Number(tCell.getAttribute('aria-colindex')) || this.rowGrandPos === Number(tCell.getAttribute('index'))) {\n                    tCell.classList.add('e-gtot');\n                }\n                else if (this.parent.dataType === 'olap' ? cell.isSum : this.validateColumnTotalcell(!isNullOrUndefined(cell.value) ? cell.colIndex : cell.colIndex - 1)) {\n                    tCell.classList.add('e-colstot');\n                }\n                if (cell.cssClass) {\n                    tCell.classList.add(cell.cssClass);\n                }\n                tCell.appendChild(createElement('span', {\n                    className: cls.CELLVALUE,\n                    innerHTML: ((tCell.className.indexOf('e-summary') !== -1 && this.parent.isSummaryCellHyperlink) ||\n                        (tCell.className.indexOf('e-summary') === -1 && this.parent.isValueCellHyperlink) || cell.enableHyperlink ?\n                        '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>' : innerText)\n                }));\n                if (this.parent.gridSettings.allowReordering && !this.parent.showGroupingBar) {\n                    tCell.setAttribute('aria-colindex', args.column.customAttributes.cell.colIndex.toString());\n                }\n            }\n            if (this.parent.cellTemplate) {\n                var index = tCell.getAttribute('index');\n                var colindex = tCell.getAttribute('aria-colindex');\n                var templateID = index + '_' + colindex;\n                if (!(window && isBlazor())) {\n                    /* eslint-disable-next-line */\n                    var element = this.parent.getCellTemplate()({ targetCell: tCell, cellInfo: cell }, this.parent, 'cellTemplate', this.parent.element.id + '_cellTemplate', null, null, tCell);\n                    if (element && element !== '' && element.length > 0) {\n                        if (this.parent.enableHtmlSanitizer) {\n                            this.parent.appendHtml(tCell, SanitizeHtmlHelper.sanitize(element[0].outerHTML));\n                        }\n                        else {\n                            this.parent.appendHtml(tCell, element[0].outerHTML);\n                        }\n                    }\n                }\n                else if (index && colindex) {\n                    this.parent.gridCellCollection[templateID] = tCell;\n                }\n            }\n            this.unWireEvents(tCell);\n            this.wireEvents(tCell);\n        }\n        args.pivotview = this.parent;\n        this.parent.trigger(events.queryCellInfo, args);\n    };\n    /* eslint-disable */\n    Render.prototype.onOlapRowCellBoundEvent = function (tCell, cell) {\n        tCell.innerText = '';\n        var rowMeasurePos = this.engine.rowMeasurePos;\n        if (this.parent.enableVirtualization) {\n            if (cell.ordinal > -1 && this.parent.olapEngineModule.tupRowInfo.length > 0) {\n                var tupInfo = this.parent.olapEngineModule.tupRowInfo[cell.ordinal];\n                var memberPosition = tupInfo.uNameCollection.indexOf(cell.actualText.toString());\n                var cropUName = tupInfo.uNameCollection.substring(0, memberPosition) +\n                    (cell.memberType === 3 ? '' : cell.actualText.toString());\n                var fieldSep = cropUName.split('::[').map(function (item) {\n                    return item[0] === '[' ? item : ('[' + item);\n                });\n                if (cell.memberType === 3 && rowMeasurePos) {\n                    fieldSep.push(cell.actualText.toString());\n                }\n                var nxtIndextCount = -1;\n                var lastIndextCount = 0;\n                var prevHasChild = false;\n                for (var fPos = 0; fPos < fieldSep.length; fPos++) {\n                    var fieldMembers = fieldSep[fPos];\n                    var membersCount = fieldMembers.split('~~').length;\n                    nxtIndextCount += membersCount;\n                    var hasChild = tupInfo.typeCollection[fPos] !== '2' ? (this.engine.fieldList[tupInfo.members[fPos].getAttribute('Hierarchy')] && this.engine.fieldList[tupInfo.members[fPos].getAttribute('Hierarchy')].isHierarchy && fPos < this.parent.dataSourceSettings.rows.length - 1 && !this.parent.dataSourceSettings.rows[fPos + 1].isNamedSet && this.parent.dataSourceSettings.rows[fPos + 1].name.indexOf('[Measures]') < 0 && this.engine.fieldList[this.parent.dataSourceSettings.rows[fPos + 1].name] && this.engine.fieldList[this.parent.dataSourceSettings.rows[fPos + 1].name].hasAllMember) ? true : Number(tupInfo.members[fPos].querySelector('CHILDREN_CARDINALITY').textContent) > 0 : false;\n                    lastIndextCount += (fPos > 0 && prevHasChild && !hasChild) ? 1 : 0;\n                    prevHasChild = hasChild;\n                }\n                var indent = 0;\n                for (var iPos = 0; iPos < nxtIndextCount; iPos++) {\n                    tCell.appendChild(createElement('span', {\n                        className: cls.NEXTSPAN,\n                    }));\n                    indent++;\n                }\n                for (var iPos = 0; iPos < lastIndextCount && nxtIndextCount > 0; iPos++) {\n                    tCell.appendChild(createElement('span', {\n                        className: cls.LASTSPAN,\n                    }));\n                }\n                this.indentCollection[cell.rowIndex] = indent;\n                this.maxIndent = this.maxIndent > indent ? this.maxIndent : indent;\n            }\n        }\n        else {\n            var hierarchyName = cell.hierarchy;\n            var levelName = cell.memberType === 3 ? (this.measurePos + '.' + cell.levelUniqueName) : cell.levelUniqueName;\n            var hasChild = cell.hasChild;\n            if (!this.lvlCollection[levelName] && levelName) {\n                this.lvlPosCollection[this.position] = levelName;\n                this.lvlCollection[levelName] = { position: this.position, hasChild: hasChild };\n                this.position++;\n            }\n            else if (levelName) {\n                var currPos_1 = this.lvlCollection[levelName].position;\n                for (var pos = currPos_1 + 1; pos < this.position; pos++) {\n                    delete this.lvlCollection[this.lvlPosCollection[pos]];\n                    delete this.lvlPosCollection[pos];\n                }\n                this.position = this.position > (currPos_1 + 1) ? (currPos_1 + 1) : this.position;\n            }\n            if (!this.hierarchyCollection[hierarchyName] && hierarchyName) {\n                this.hierarchyPosCollection[this.hierarchyCount] = hierarchyName;\n                this.hierarchyCollection[hierarchyName] = {\n                    lvlPosition: this.position - 1,\n                    hierarchyPOs: this.hierarchyCount\n                };\n                this.hierarchyCount++;\n            }\n            else if (hierarchyName) {\n                var currPos_2 = this.hierarchyCollection[hierarchyName].hierarchyPOs;\n                for (var pos = currPos_2 + 1; pos < this.hierarchyCount; pos++) {\n                    delete this.hierarchyCollection[this.hierarchyPosCollection[pos]];\n                    delete this.hierarchyPosCollection[pos];\n                }\n                this.hierarchyCount = this.hierarchyCount > (currPos_2 + 1) ? (currPos_2 + 1) : this.hierarchyCount;\n            }\n            if (cell.memberType !== 3 && levelName && this.lvlCollection[levelName]) {\n                var currHierarchyPos = this.hierarchyCollection[hierarchyName] ?\n                    this.hierarchyCollection[hierarchyName].hierarchyPOs : -1;\n                this.measurePos = rowMeasurePos <= currHierarchyPos && this.hierarchyPosCollection[rowMeasurePos + 1] ?\n                    this.measurePos : this.lvlCollection[levelName].position;\n            }\n            var currPos = this.lvlCollection[levelName] ? this.lvlCollection[levelName].position : -1;\n            var lvlPos = 0;\n            var indent = 0;\n            while (lvlPos <= currPos && currPos > 0 && cell.level > -1) {\n                var hasChild_1 = this.lvlCollection[this.lvlPosCollection[lvlPos]].hasChild;\n                var prevHasChild = lvlPos > 0 ? this.lvlCollection[this.lvlPosCollection[lvlPos - 1]].hasChild : false;\n                if (prevHasChild && !hasChild_1) {\n                    tCell.appendChild(createElement('span', {\n                        className: cls.LASTSPAN,\n                    }));\n                }\n                if (lvlPos !== currPos) {\n                    tCell.appendChild(createElement('span', {\n                        className: cls.NEXTSPAN,\n                    }));\n                    indent++;\n                }\n                lvlPos++;\n            }\n            if (cell.memberType === 3 && cell.level === -1 && Object.keys(this.lvlCollection).length > 1) {\n                tCell.appendChild(createElement('span', {\n                    className: cls.NEXTSPAN,\n                }));\n                indent++;\n            }\n            this.indentCollection[cell.rowIndex] = indent;\n            this.maxIndent = this.maxIndent > indent ? this.maxIndent : indent;\n        }\n        tCell.setAttribute('fieldname', cell.hierarchy);\n        var grandTotal = (this.parent.olapEngineModule.tupRowInfo[cell.ordinal] ?\n            (this.parent.olapEngineModule.tupRowInfo[cell.ordinal].measurePosition === 0 ?\n                this.parent.olapEngineModule.tupRowInfo[cell.ordinal].allStartPos === 1 :\n                this.parent.olapEngineModule.tupRowInfo[cell.ordinal].allStartPos === 0) : false);\n        if (grandTotal) {\n            tCell.classList.add('e-gtot');\n        }\n        return tCell;\n    };\n    /* eslint-enable */\n    Render.prototype.columnCellBoundEvent = function (args) {\n        if (args.cell.column && args.cell.column.customAttributes) {\n            var cell = args.cell.column.customAttributes.cell;\n            var tCell = args.node;\n            if (cell) {\n                var customClass = this.parent.hyperlinkSettings.cssClass;\n                var level = cell.level ? cell.level : 0;\n                if ((cell.level === -1 && !cell.rowSpan) || cell.rowSpan === -1) {\n                    args.node.style.display = 'none';\n                }\n                else if (cell.rowSpan > 1) {\n                    args.node.setAttribute('rowspan', cell.rowSpan.toString());\n                    args.node.setAttribute('aria-rowspan', cell.rowSpan.toString());\n                    if ((cell.rowIndex + cell.rowSpan) === this.engine.headerContent.length) {\n                        args.node.style.borderBottomWidth = '0px';\n                    }\n                }\n                args.node.setAttribute('aria-colindex', cell.colIndex.toString());\n                args.node.setAttribute('index', cell.rowIndex.toString());\n                var fieldName = void 0;\n                if (this.parent.dataType === 'pivot') {\n                    if (!(this.parent.dataSourceSettings.values && this.parent.dataSourceSettings.valueAxis === 'column' &&\n                        this.parent.dataSourceSettings.values.length > 1 &&\n                        (cell.rowIndex === this.engine.headerContent.length - 1)) && this.parent.dataSourceSettings.columns &&\n                        this.parent.dataSourceSettings.columns.length > 0) {\n                        fieldName = level > -1 && this.parent.dataSourceSettings.columns[level] ?\n                            this.parent.dataSourceSettings.columns[level].name : '';\n                        tCell.setAttribute('fieldname', fieldName);\n                    }\n                    if (this.validateColumnTotalcell(cell.colIndex)) {\n                        tCell.classList.add('e-colstot');\n                    }\n                }\n                else {\n                    tCell = this.onOlapColumnCellBoundEvent(tCell, cell);\n                }\n                if (cell.type) {\n                    tCell.classList.add(cell.type === 'grand sum' ? 'e-gtot' : 'e-stot');\n                    if (cell.type === 'grand sum') {\n                        this.colGrandPos = cell.colIndex;\n                    }\n                    else {\n                        tCell.classList.add('e-colstot');\n                    }\n                    var localizedText = cell.type === 'grand sum' ? this.parent.localeObj.getConstant('grandTotal') :\n                        cell.formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total');\n                    if (tCell.querySelector('.e-headertext') !== null) {\n                        tCell.querySelector('.e-headertext').innerText = localizedText;\n                    }\n                    else {\n                        tCell.querySelector('.e-stackedheadercelldiv').innerText = localizedText;\n                    }\n                }\n                tCell.classList.add(cls.COLUMNSHEADER);\n                if (this.parent.isColumnCellHyperlink || cell.enableHyperlink) {\n                    if (tCell.querySelector('.e-stackedheadercelldiv')) {\n                        var innerText = tCell.querySelector('.e-stackedheadercelldiv').innerText;\n                        tCell.querySelector('.e-stackedheadercelldiv').innerHTML =\n                            '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n                    }\n                    else if (tCell.querySelector('.e-headertext')) {\n                        var innerText = tCell.querySelector('.e-headertext').innerText;\n                        tCell.querySelector('.e-headertext').innerHTML =\n                            '<a data-url=\"' + innerText + '\" class=\"e-hyperlinkcell ' + customClass + '\">' + innerText + '</a>';\n                    }\n                }\n                if (cell.hasChild === true && !cell.isNamedSet) {\n                    var hdrdiv = tCell.querySelector('.e-headercelldiv');\n                    if (hdrdiv) {\n                        hdrdiv.style.height = 'auto';\n                        hdrdiv.style.lineHeight = 'normal';\n                    }\n                    var div = createElement('div', {\n                        className: (cell.isDrilled === true ? cls.COLLAPSE : cls.EXPAND) + ' ' + cls.ICON,\n                        attrs: {\n                            'title': cell.isDrilled === true ? this.parent.localeObj.getConstant('collapse') :\n                                this.parent.localeObj.getConstant('expand')\n                        }\n                    });\n                    tCell.children[0].classList.add(cls.CELLVALUE);\n                    if (window.navigator.userAgent.indexOf('Edge') > -1 || window.navigator.userAgent.indexOf('Trident') > -1) {\n                        tCell.children[0].style.display = 'table';\n                    }\n                    else {\n                        tCell.children[0].style.display = 'block';\n                    }\n                    tCell.insertBefore(div, tCell.children[0]);\n                }\n                tCell = this.appendValueSortIcon(cell, tCell, cell.rowIndex, cell.colIndex);\n                if (this.parent.cellTemplate) {\n                    var index = tCell.getAttribute('index');\n                    var colindex = tCell.getAttribute('aria-colindex');\n                    var templateID = index + '_' + colindex;\n                    if (!(window && isBlazor())) {\n                        this.parent.gridHeaderCellInfo.push({ targetCell: tCell });\n                    }\n                    else if (index && colindex) {\n                        this.parent.gridCellCollection[templateID] = tCell;\n                    }\n                }\n                var len = this.parent.dataSourceSettings.values.length;\n                for (var vCnt = 0; vCnt < len; vCnt++) {\n                    if (this.parent.dataSourceSettings.values[vCnt].name === cell.actualText) {\n                        if (this.parent.dataType === 'olap') {\n                            var grandTotal = (this.parent.olapEngineModule.tupColumnInfo[cell.ordinal] ?\n                                (this.parent.olapEngineModule.tupColumnInfo[cell.ordinal].measurePosition === 0 ?\n                                    this.parent.olapEngineModule.tupColumnInfo[cell.ordinal].allStartPos === 1 :\n                                    this.parent.olapEngineModule.tupColumnInfo[cell.ordinal].allStartPos === 0) : false);\n                            if (grandTotal) {\n                                tCell.classList.add('e-gtot');\n                            }\n                        }\n                        if (cell.valueSort.levelName === (this.parent.localeObj.getConstant('grandTotal') + (this.parent.dataSourceSettings.valueSortSettings.headerDelimiter) + (cell.formattedText))\n                            || cell.valueSort.levelName === ('Grand Total' + (this.parent.dataSourceSettings.valueSortSettings.headerDelimiter) + (cell.formattedText))) {\n                            tCell.classList.add('e-gtot');\n                        }\n                        else {\n                            tCell.classList.add(cls.VALUESHEADER);\n                        }\n                    }\n                }\n                this.unWireEvents(tCell);\n                this.wireEvents(tCell);\n            }\n        }\n        this.parent.trigger(events.headerCellInfo, args);\n    };\n    Render.prototype.onOlapColumnCellBoundEvent = function (tCell, cell) {\n        tCell.setAttribute('fieldname', cell.memberType === 3 ? cell.actualText.toString() : cell.hierarchy);\n        var prevCell = this.engine.headerContent[cell.rowIndex] ?\n            this.engine.headerContent[cell.rowIndex][cell.colIndex - 1] : undefined;\n        if (prevCell && prevCell.actualText === cell.actualText && prevCell.type === cell.type &&\n            (prevCell.colSpan > 1)) {\n            tCell.style.display = 'none';\n        }\n        else {\n            tCell.setAttribute('colspan', cell.colSpan.toString());\n            tCell.setAttribute('aria-colspan', cell.colSpan.toString());\n        }\n        if (cell.rowIndex === (this.engine.headerContent.length - 1) && cell.memberType === 2) {\n            tCell.style.display = this.isSpannedCell(this.engine.headerContent.length, cell) ? 'none' : tCell.style.display;\n        }\n        return tCell;\n    };\n    Render.prototype.isSpannedCell = function (colLength, currCell) {\n        var prevCell = this.engine.headerContent[currCell.rowIndex - 1] ?\n            this.engine.headerContent[currCell.rowIndex - 1][currCell.colIndex] : undefined;\n        var parentCellSpan;\n        var parentCellPos;\n        while (prevCell && ((prevCell.memberType === currCell.memberType) || (prevCell.type && currCell.type))) {\n            if (prevCell.rowSpan > 0) {\n                parentCellSpan = prevCell.rowSpan;\n                parentCellPos = prevCell.rowIndex;\n            }\n            prevCell = this.engine.headerContent[prevCell.rowIndex - 1] ?\n                this.engine.headerContent[prevCell.rowIndex - 1][currCell.colIndex] : undefined;\n        }\n        return (parentCellPos + parentCellSpan) >= colLength;\n    };\n    Render.prototype.onHyperCellClick = function (e) {\n        var cell = e.target.parentElement.parentElement;\n        cell = (cell.className.indexOf('e-headercelldiv') > -1 ? cell.parentElement : cell);\n        var args = {\n            currentCell: cell,\n            data: this.engine.pivotValues[Number(cell.getAttribute('index'))][Number(cell.getAttribute('aria-colindex'))],\n            cancel: true,\n            nativeEvent: e\n        };\n        this.parent.trigger(events.hyperlinkCellClick, args, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                args.currentCell = getElement(args.currentCell);\n                var url = args.currentCell.getAttribute('data-url') ? (args.currentCell).getAttribute('data-url') :\n                    args.currentCell.querySelector('a').getAttribute('data-url');\n                window.open(url);\n            }\n        });\n    };\n    Render.prototype.getRowStartPos = function () {\n        var pivotValues = this.parent.pivotValues;\n        var rowPos;\n        for (var rCnt = 0; rCnt < (pivotValues ? pivotValues.length : 0); rCnt++) {\n            if (pivotValues[rCnt] && pivotValues[rCnt][0] && pivotValues[rCnt][0].axis === 'row') {\n                rowPos = rCnt;\n                break;\n            }\n        }\n        return rowPos;\n    };\n    Render.prototype.frameDataSource = function (type) {\n        var dataContent = [];\n        if (this.parent.dataSourceSettings.values.length > 0 && !this.engine.isEmptyData) {\n            if ((this.parent.enableValueSorting) || !this.engine.isEngineUpdated) {\n                var rowCnt = 0;\n                var pivotValues = this.parent.pivotValues;\n                var start = type === 'value' ? this.rowStartPos : 0;\n                var end = type === 'value' ? (pivotValues ? pivotValues.length : 0) : this.rowStartPos;\n                for (var rCnt = start; rCnt < end; rCnt++) {\n                    if (pivotValues[rCnt]) {\n                        rowCnt = type === 'header' ? rCnt : rowCnt;\n                        dataContent[rowCnt] = {};\n                        for (var cCnt = 0; cCnt < pivotValues[rCnt].length; cCnt++) {\n                            if (pivotValues[rCnt][cCnt]) {\n                                dataContent[rowCnt][cCnt] = pivotValues[rCnt][cCnt];\n                            }\n                        }\n                        rowCnt++;\n                    }\n                }\n            }\n            else {\n                dataContent = type === 'value' ? this.engine.valueContent : this.engine.headerContent;\n            }\n        }\n        else {\n            dataContent = this.frameEmptyData();\n        }\n        return dataContent;\n    };\n    /** @hidden */\n    /* eslint-disable-next-line */\n    Render.prototype.frameEmptyData = function () {\n        /* eslint-disable-next-line */\n        var dataContent = [{\n                0: { formattedText: this.parent.localeObj.getConstant('grandTotal') },\n                1: { formattedText: this.parent.localeObj.getConstant('emptyData') }\n            }];\n        return dataContent;\n    };\n    Render.prototype.calculateColWidth = function (colCount) {\n        if (!isNullOrUndefined(this.parent.resizedValue)) {\n            this.parent.resizedValue = (this.parent.showGroupingBar && this.parent.resizedValue < 250) ? 250 : this.parent.resizedValue;\n        }\n        this.resColWidth = !isNullOrUndefined(this.parent.resizedValue) ? this.parent.resizedValue : this.resColWidth;\n        var offsetWidth = this.parent.element.offsetWidth ? this.parent.element.offsetWidth :\n            this.parent.element.getBoundingClientRect().width;\n        var parWidth = isNaN(this.parent.width) ? (this.parent.width.toString().indexOf('%') > -1 ?\n            ((parseFloat(this.parent.width.toString()) / 100) * offsetWidth) : offsetWidth) :\n            Number(this.parent.width);\n        parWidth = parWidth - (this.gridSettings.columnWidth > this.resColWidth ? this.gridSettings.columnWidth : this.resColWidth) - 2;\n        colCount = colCount - 1;\n        this.isOverflows = !((colCount * this.gridSettings.columnWidth) < parWidth);\n        var colWidth = (colCount * this.gridSettings.columnWidth) < parWidth ? (parWidth / colCount) : this.gridSettings.columnWidth;\n        return (!this.isOverflows && !this.gridSettings.allowAutoResizing) ? this.gridSettings.columnWidth : Math.floor(colWidth);\n    };\n    Render.prototype.resizeColWidth = function (colCount) {\n        if (!isNullOrUndefined(this.parent.resizedValue)) {\n            this.parent.resizedValue = (this.parent.showGroupingBar && this.parent.resizedValue < 250) ? 250 : this.parent.resizedValue;\n        }\n        this.resColWidth = !isNullOrUndefined(this.parent.resizedValue) ? this.parent.resizedValue : this.resColWidth;\n        var parWidth = isNaN(this.parent.width) ? (this.parent.width.toString().indexOf('%') > -1 ?\n            ((parseFloat(this.parent.width.toString()) / 100) * this.parent.element.offsetWidth) : this.parent.element.offsetWidth) :\n            Number(this.parent.width);\n        colCount = colCount - 1;\n        parWidth = parWidth - (this.gridSettings.columnWidth > this.resColWidth ? this.gridSettings.columnWidth : this.resColWidth) - 2;\n        this.isOverflows = !((colCount * this.gridSettings.columnWidth) < parWidth);\n        var colWidth = (colCount * this.gridSettings.columnWidth) < parWidth ? (parWidth / colCount) : this.gridSettings.columnWidth;\n        return (!this.isOverflows && !this.gridSettings.allowAutoResizing) ? this.gridSettings.columnWidth : Math.floor(colWidth);\n    };\n    Render.prototype.calculateGridWidth = function () {\n        var parWidth = this.parent.width;\n        var eleWidth = this.parent.element.getBoundingClientRect().width ?\n            this.parent.element.getBoundingClientRect().width : this.parent.element.offsetWidth;\n        if (this.gridSettings.width === 'auto') {\n            if (this.parent.width === 'auto') {\n                parWidth = eleWidth;\n            }\n            else if (this.parent.width.toString().indexOf('%') > -1) {\n                parWidth = ((parseFloat(this.parent.width.toString()) / 100) * eleWidth);\n            }\n        }\n        else {\n            parWidth = this.gridSettings.width;\n        }\n        return (!this.gridSettings.allowAutoResizing && parWidth > this.parent.totColWidth) ? this.parent.totColWidth : parWidth;\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.calculateGridHeight = function (elementCreated) {\n        var gridHeight = this.parent.height;\n        var parHeight = this.parent.getHeightAsNumber();\n        if (isNaN(parHeight)) {\n            parHeight = parHeight > this.parent.minHeight ? parHeight : this.parent.minHeight;\n        }\n        if (this.parent.currentView !== 'Chart') {\n            if (this.gridSettings.height === 'auto' && parHeight && this.parent.element.querySelector('.' + cls.GRID_HEADER)) {\n                var rowColHeight = this.parent.element.querySelector('.' + cls.GRID_HEADER).offsetHeight;\n                var gBarHeight = rowColHeight + (this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS) ?\n                    this.parent.element.querySelector('.' + cls.GROUPING_BAR_CLASS).offsetHeight : 0);\n                var toolBarHeight = this.parent.element.querySelector('.' + cls.GRID_TOOLBAR) ? 42 : 0;\n                gridHeight = parHeight - (gBarHeight + toolBarHeight) - 1;\n                gridHeight = gridHeight < 40 ? 40 : gridHeight;\n                if (elementCreated) {\n                    var tableHeight = this.parent.element.querySelector('.' + cls.FROZENCONTENT_DIV + ' .' + cls.TABLE).offsetHeight;\n                    var contentHeight = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).offsetHeight;\n                    var tableWidth = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV + ' .' + cls.TABLE).offsetWidth;\n                    var contentWidth = this.parent.element.querySelector('.' + cls.MOVABLECONTENT_DIV).offsetWidth;\n                    var horizontalOverflow = contentWidth < tableWidth;\n                    //let verticalOverflow: boolean = contentHeight < tableHeight;\n                    var commonOverflow = horizontalOverflow && ((gridHeight - tableHeight) < 18) ? true : false;\n                    if (gridHeight >= tableHeight && (horizontalOverflow ? gridHeight >= contentHeight : true) &&\n                        !commonOverflow) {\n                        this.parent.grid.height = 'auto';\n                    }\n                    else {\n                        this.parent.grid.height = gridHeight;\n                        this.parent.grid.dataBind();\n                    }\n                    this.parent.grid.widthService.refreshFrozenScrollbar();\n                }\n                else {\n                    if (gridHeight > (this.engine.valueContent.length * this.gridSettings.rowHeight)) {\n                        gridHeight = 'auto';\n                    }\n                }\n            }\n            else {\n                gridHeight = this.gridSettings.height;\n            }\n        }\n        return gridHeight < this.parent.gridSettings.rowHeight ? this.parent.gridSettings.rowHeight : gridHeight;\n    };\n    Render.prototype.frameStackedHeaders = function () {\n        var singleValueFormat = this.parent.dataSourceSettings.values.length === 1 &&\n            !this.parent.dataSourceSettings.alwaysShowValueHeader ?\n            this.formatList[this.parent.dataSourceSettings.values[0].name] : undefined;\n        var integrateModel = [];\n        if ((this.parent.dataType === 'olap' ? true : this.parent.dataSourceSettings.values.length > 0) && !this.engine.isEmptyData) {\n            var headerCnt = this.engine.headerContent.length;\n            var headerSplit = []; /* eslint-disable-line */\n            var splitPos = []; /* eslint-disable-line */\n            var colWidth = this.calculateColWidth(this.engine.pivotValues ? this.engine.pivotValues[0].length : 0);\n            do {\n                var columnModel = [];\n                var actualCnt = 0;\n                headerCnt--;\n                var colField = this.engine.headerContent[headerCnt];\n                if (colField) {\n                    for (var cCnt = 0; cCnt < Object.keys(colField).length + (colField[0] ? 0 : 1); cCnt++) {\n                        var colSpan = (colField[cCnt] && colField[cCnt].colSpan) ?\n                            ((colField[cCnt].memberType !== 3 || headerCnt === 0) ?\n                                colField[cCnt].colSpan : headerSplit[cCnt]) : 1;\n                        colSpan = this.parent.dataType === 'olap' ? 1 : colSpan;\n                        var formattedText = colField[cCnt] ? (colField[cCnt].type === 'grand sum' ?\n                            this.parent.localeObj.getConstant('grandTotal') : (colField[cCnt].type === 'sum' ?\n                            colField[cCnt].formattedText.split('Total')[0] + this.parent.localeObj.getConstant('total') :\n                            colField[cCnt].formattedText)) : '';\n                        if (headerCnt === this.engine.headerContent.length - 1) {\n                            colSpan = 1;\n                            columnModel[actualCnt] = {\n                                field: (cCnt + '.formattedText'),\n                                headerText: formattedText,\n                                customAttributes: { 'cell': colField[cCnt] },\n                                /* eslint-disable-next-line */\n                                width: colField[cCnt] ? this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) : this.resColWidth,\n                                minWidth: 30,\n                                format: cCnt === 0 ? '' : (isNullOrUndefined(singleValueFormat) ? this.formatList[colField[cCnt].actualText] : singleValueFormat),\n                                allowReordering: (this.parent.showGroupingBar ? false : this.parent.gridSettings.allowReordering),\n                                allowResizing: this.parent.gridSettings.allowResizing,\n                                visible: true\n                            };\n                        }\n                        else if (headerSplit[cCnt]) {\n                            colSpan = (colField[cCnt] && colField[cCnt].type === 'grand sum' &&\n                                colField[cCnt].memberType === 2) ? 1 : colSpan;\n                            var tmpSpan = colSpan;\n                            var innerModel = [];\n                            var innerPos = cCnt;\n                            while (tmpSpan > 0) {\n                                if (columnModel[actualCnt]) {\n                                    if (!integrateModel[splitPos[innerPos]]) {\n                                        break;\n                                    }\n                                    innerModel.push(integrateModel[splitPos[innerPos]]);\n                                }\n                                else {\n                                    columnModel[actualCnt] = {\n                                        headerText: formattedText,\n                                        /* eslint-disable-next-line */\n                                        field: colField[cCnt] ? colField[cCnt].valueSort.levelName : '',\n                                        customAttributes: { 'cell': colField[cCnt] },\n                                        /* eslint-disable-next-line */\n                                        width: colField[cCnt] ? this.setSavedWidth(colField[cCnt].valueSort.levelName, colWidth) :\n                                            this.resColWidth,\n                                        minWidth: 30,\n                                        allowReordering: (this.parent.showGroupingBar ? false : this.parent.gridSettings.allowReordering),\n                                        allowResizing: this.parent.gridSettings.allowResizing,\n                                        visible: true\n                                    };\n                                    innerModel = [integrateModel[splitPos[innerPos]]];\n                                }\n                                tmpSpan = tmpSpan - headerSplit[innerPos];\n                                innerPos = innerPos + headerSplit[innerPos];\n                            }\n                            columnModel[actualCnt].columns = innerModel;\n                        }\n                        if (columnModel[actualCnt]) {\n                            columnModel[actualCnt].clipMode = this.gridSettings.clipMode;\n                        }\n                        headerSplit[cCnt] = colSpan;\n                        splitPos[cCnt] = actualCnt;\n                        actualCnt++;\n                        cCnt = cCnt + colSpan - 1;\n                    }\n                }\n                integrateModel = columnModel.length > 0 ? columnModel : integrateModel;\n            } while (headerCnt > 0);\n            integrateModel[0] = {\n                field: (0 + '.formattedText'),\n                width: this.resColWidth,\n                minWidth: 30,\n                headerText: '',\n                allowReordering: false,\n                allowResizing: this.parent.gridSettings.allowResizing,\n                visible: true\n            };\n        }\n        else {\n            integrateModel = this.frameEmptyColumns();\n        }\n        if (integrateModel.length > 1) {\n            var lastColumn = integrateModel[integrateModel.length - 1];\n            lastColumn.minWidth = lastColumn.width;\n            lastColumn.width = 'auto';\n            if (lastColumn.columns && lastColumn.columns.length > 0) {\n                this.configLastColumnWidth(lastColumn.columns[lastColumn.columns.length - 1]);\n            }\n        }\n        this.parent.triggerColumnRenderEvent(integrateModel);\n        return integrateModel;\n    };\n    Render.prototype.configLastColumnWidth = function (column) {\n        column.minWidth = column.width;\n        column.width = 'auto';\n        if (column.columns && column.columns.length > 0) {\n            this.configLastColumnWidth(column.columns[column.columns.length - 1]);\n        }\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.setSavedWidth = function (column, width) {\n        if (column === '0.formattedText' && !isNullOrUndefined(this.parent.resizedValue)) {\n            width = this.parent.resizedValue;\n        }\n        else {\n            width = this.parent.resizeInfo[column] ? this.parent.resizeInfo[column] : width;\n        }\n        return width;\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.frameEmptyColumns = function () {\n        var columns = [];\n        var colWidth = this.calculateColWidth(2);\n        columns.push({ field: '0.formattedText', headerText: '', minWidth: 30, width: this.resColWidth });\n        columns.push({ field: '1.formattedText', headerText: this.parent.localeObj.getConstant('grandTotal'), minWidth: 30, width: colWidth });\n        return columns;\n    };\n    /* eslint-disable-next-line */\n    /** @hidden */\n    Render.prototype.getFormatList = function () {\n        var formatArray = {};\n        for (var vCnt = 0; vCnt < this.parent.dataSourceSettings.values.length; vCnt++) {\n            var field = this.parent.dataSourceSettings.values[vCnt];\n            var format = 'N';\n            if (this.parent.dataType === 'olap') {\n                if (this.parent.olapEngineModule.fieldList[field.name]) {\n                    var fString = this.parent.olapEngineModule.fieldList[field.name].formatString;\n                    format = fString.indexOf('#') > -1 ? fString : (fString[0] + '2');\n                }\n            }\n            else {\n                if (this.parent.dataSourceSettings.formatSettings.length > 0) {\n                    for (var fCnt = 0; fCnt < this.parent.dataSourceSettings.formatSettings.length; fCnt++) {\n                        var formatSettings = this.parent.dataSourceSettings.formatSettings[fCnt];\n                        if (field.name === formatSettings.name) {\n                            format = formatSettings.format;\n                            break;\n                        }\n                        else {\n                            continue;\n                        }\n                    }\n                }\n            }\n            formatArray[field.name] = format;\n        }\n        return formatArray;\n    };\n    /* eslint-disable */\n    Render.prototype.excelColumnEvent = function (args) {\n        if (args.gridCell !== undefined && args.gridCell.column.width === 'auto') {\n            this.parent.lastColumn = args.gridCell.column;\n            args.gridCell.column.width = args.gridCell.column.minWidth;\n        }\n        args = this.exportHeaderEvent(args);\n        this.parent.trigger(events.excelHeaderQueryCellInfo, args);\n    };\n    Render.prototype.pdfColumnEvent = function (args) {\n        if (args.gridCell !== undefined && args.gridCell.column.width === 'auto') {\n            this.parent.lastColumn = args.gridCell.column;\n            args.gridCell.column.width = args.gridCell.column.minWidth;\n        }\n        this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n    };\n    /* eslint-enable */\n    Render.prototype.excelRowEvent = function (args) {\n        if (args.column.field === '0.formattedText') {\n            var isValueCell = args.data[0].type === 'value';\n            var level = 0;\n            if (this.parent.dataType === 'olap') {\n                /* eslint-disable-next-line */\n                level = this.indentCollection[args.data[0].rowIndex];\n            }\n            else {\n                level = isValueCell ? (this.lastSpan + 1) : args.data[0].level;\n            }\n            this.colPos = 0;\n            args.style = { hAlign: 'Left', indent: level * 2 };\n            this.lastSpan = isValueCell ? this.lastSpan : level;\n        }\n        else {\n            this.colPos++;\n            /* eslint-disable-next-line */\n            if (isNullOrUndefined(args.data[this.colPos].value) || isNullOrUndefined(args.data[this.colPos].formattedText) || args.data[this.colPos].formattedText === \"\") {\n                args.value = this.parent.exportType === 'Excel' ? null : '';\n            }\n            else {\n                /* eslint-disable-next-line */\n                args.value = !isNullOrUndefined(args.data[this.colPos].value) ? args.data[this.colPos].value : args.data[this.colPos].formattedText;\n            }\n        }\n        args = this.exportContentEvent(args);\n        this.parent.trigger(events.excelQueryCellInfo, args);\n    };\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    Render.prototype.pdfRowEvent = function (args) {\n        args = this.exportContentEvent(args);\n        if (args.column.field === '0.formattedText') {\n            var level = 0;\n            var isValueCell = args.data[0].type === 'value';\n            if (this.parent.dataType === 'olap') {\n                level = this.indentCollection[args.data[0].rowIndex];\n            }\n            else {\n                level = isValueCell ? (this.lastSpan + 1) : args.data[0].level !== -1 ?\n                    args.data[0].level : 0;\n            }\n            args.style = { paragraphIndent: level * 10 };\n            this.lastSpan = isValueCell ? this.lastSpan : level;\n        }\n        this.parent.trigger(events.pdfQueryCellInfo, args);\n    };\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    Render.prototype.excelDataBound = function (args) {\n        var excelRows = args.excelRows;\n        var rowStartPos = Object.keys(this.engine.headerContent).length;\n        for (var i = 0; i < rowStartPos; i++) {\n            var cells = excelRows[i].cells;\n            var tmpCell = [];\n            for (var j = 0; j < cells.length; j++) {\n                if (cells[j].rowSpan !== -1) {\n                    tmpCell.push(cells[j]);\n                }\n            }\n            excelRows[i].cells = tmpCell;\n        }\n    };\n    Render.prototype.exportHeaderEvent = function (args) {\n        var rowSpan = 1;\n        if (args.gridCell.column.customAttributes) {\n            var cell = args.gridCell.column.customAttributes.cell;\n            if (this.actualText !== cell.actualText && cell.colSpan > 1 && cell.level > -1) {\n                args.gridCell.colSpan = args.cell.colSpan = cell.colSpan > -1 ? cell.colSpan : 1;\n            }\n            rowSpan = cell.rowSpan > -1 ? cell.rowSpan : 1;\n            if (args.name === 'excelHeaderQueryCellInfo') {\n                if (cell.rowSpan > -1) {\n                    rowSpan = cell.rowSpan;\n                }\n                else if (!isNullOrUndefined(cell.type) && cell.level !== 0) {\n                    rowSpan = -1;\n                    args.cell.rowSpan = -1;\n                }\n            }\n            this.actualText = cell.actualText;\n        }\n        else {\n            rowSpan = Object.keys(this.engine.headerContent).length;\n        }\n        if (args.cell.rowSpan !== rowSpan && rowSpan > -1) {\n            args.cell.rowSpan = rowSpan;\n        }\n        return args;\n    };\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n    Render.prototype.exportContentEvent = function (args) {\n        args.value = args.data[Number(args.column.field.split('.formattedText')[0])].type === 'grand sum' ? /* eslint-disable-line */\n            this.parent.localeObj.getConstant('grandTotal') : args.value;\n        return args;\n    };\n    Render.prototype.unWireEvents = function (cell) {\n        if (cell.querySelector('.e-hyperlinkcell')) {\n            EventHandler.remove(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick);\n        }\n        else {\n            return;\n        }\n    };\n    Render.prototype.wireEvents = function (cell) {\n        if (cell.querySelector('.e-hyperlinkcell')) {\n            EventHandler.add(cell.querySelector('.e-hyperlinkcell'), this.parent.isAdaptive ? 'touchend' : 'click', this.onHyperCellClick, this);\n        }\n        else {\n            return;\n        }\n    };\n    return Render;\n}());\nexport { Render };\n"]},"metadata":{},"sourceType":"module"}