{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n/* eslint-disable @typescript-eslint/ban-types */\n\n/* eslint-disable jsdoc/require-returns */\n\n/* eslint-disable valid-jsdoc */\n\n/* eslint-disable jsdoc/require-param */\nimport { Series, Points } from '../series/chart-series';\nimport { findClipRect, RectOption } from '../../common/utils/helper';\n/**\n * `Trendline` module is used to render 6 types of trendlines in chart.\n */\n\nvar Trendlines = function () {\n  function Trendlines() {}\n  /**\n   * Defines the collection of series, that are used to represent a trendline\n   *\n   * @private\n   */\n\n\n  Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n    var trendLineSeries = new Series(trendline, 'targetSeries', {}, true);\n\n    if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n      trendLineSeries.type = 'Line';\n    } else {\n      trendLineSeries.type = 'Spline';\n    }\n\n    this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n  };\n  /**\n   * Initializes the properties of the trendline series\n   */\n\n\n  Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n    series.name = trendline.name;\n    series.xName = 'x';\n    series.yName = 'y';\n    series.fill = fill || 'blue';\n    series.width = width;\n    series.dashArray = trendline.dashArray;\n    series.clipRectElement = trendline.clipRectElement;\n    series.points = [];\n    series.enableTooltip = trendline.enableTooltip;\n    series.index = trendline.index;\n    series.sourceIndex = trendline.sourceIndex;\n    series.interior = series.fill;\n    series.animation = trendline.animation;\n    series.legendShape = 'HorizontalLine';\n    series.marker = trendline.marker;\n    series.category = 'TrendLine';\n    series.chart = chart;\n    series.xMin = Infinity;\n    series.xMax = -Infinity;\n    series.yMin = Infinity;\n    series.yMax = -Infinity;\n    series.xData = [];\n    series.yData = [];\n    trendline.targetSeries = series;\n\n    if (chart.isBlazor) {\n      trendline.targetSeries.border = {}; // To avoid console error in blazor\n\n      trendline.targetSeries.connector = {}; // To avoid console error in blazor\n    }\n  };\n  /**\n   * Creates the elements of a trendline\n   */\n\n\n  Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n    trendline.trendLineElement = element;\n    trendline.targetSeries.clipRectElement = clipRectElement;\n    trendline.targetSeries.seriesElement = element;\n\n    if (chart.trendLineElements) {\n      chart.trendLineElements.appendChild(trendline.trendLineElement);\n    }\n  };\n  /**\n   * Defines the data point of trendline\n   */\n\n\n  Trendlines.prototype.getDataPoint = function (x, y, series, index) {\n    var trendPoint = new Points();\n    trendPoint.x = series.xAxis.valueType === 'DateTime' ? new Date(Number(x)) : x;\n    trendPoint.y = y;\n    trendPoint.xValue = Number(x);\n    trendPoint.color = series.fill;\n    trendPoint.index = index;\n    trendPoint.yValue = Number(y);\n    trendPoint.visible = true;\n    series.xMin = Math.min(series.xMin, trendPoint.xValue);\n    series.yMin = Math.min(series.yMin, trendPoint.yValue);\n    series.xMax = Math.max(series.xMax, trendPoint.xValue);\n    series.yMax = Math.max(series.yMax, trendPoint.yValue);\n    series.xData.push(trendPoint.xValue);\n    return trendPoint;\n  };\n  /**\n   * Finds the slope and intercept of trendline\n   */\n\n\n  Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n    var xAvg = 0;\n    var yAvg = 0;\n    var xyAvg = 0;\n    var xxAvg = 0;\n    var index = 0;\n    var slope = 0;\n    var intercept = 0;\n\n    while (index < points.length) {\n      // To fix trendline not rendered issue while Nan Value is provided for y values.\n      if (isNaN(yValues[index])) {\n        yValues[index] = (yValues[index - 1] + yValues[index + 1]) / 2;\n      }\n\n      xAvg += xValues[index];\n      yAvg += yValues[index];\n      xyAvg += xValues[index] * yValues[index];\n      xxAvg += xValues[index] * xValues[index];\n      index++;\n    }\n\n    var type = trendline.type;\n\n    if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n      intercept = trendline.intercept;\n\n      switch (type) {\n        case 'Linear':\n          slope = (xyAvg - trendline.intercept * xAvg) / xxAvg;\n          break;\n\n        case 'Exponential':\n          slope = (xyAvg - Math.log(Math.abs(trendline.intercept)) * xAvg) / xxAvg;\n          break;\n      }\n    } else {\n      slope = (points.length * xyAvg - xAvg * yAvg) / (points.length * xxAvg - xAvg * xAvg);\n      slope = type === 'Linear' ? slope : Math.abs(slope);\n\n      if (type === 'Exponential' || type === 'Power') {\n        intercept = Math.exp((yAvg - slope * xAvg) / points.length);\n      } else {\n        intercept = (yAvg - slope * xAvg) / points.length;\n      }\n    }\n\n    return {\n      slope: slope,\n      intercept: intercept\n    };\n  };\n  /**\n   * Defines the points to draw the trendlines\n   */\n\n\n  Trendlines.prototype.initDataSource = function (trendline) {\n    var points = trendline.points;\n\n    if (points && points.length) {\n      //prepare data\n      var trendlineSeries = trendline.targetSeries;\n\n      switch (trendline.type) {\n        case 'Linear':\n          this.setLinearRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Exponential':\n          this.setExponentialRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'MovingAverage':\n          this.setMovingAverageRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Polynomial':\n          this.setPolynomialRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Power':\n          this.setPowerRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Logarithmic':\n          this.setLogarithmicRange(points, trendline, trendlineSeries);\n          break;\n      }\n\n      if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n        trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n      }\n    }\n  };\n  /**\n   * Calculation of exponential points\n   */\n\n\n  Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n    var xValue = [];\n    var yValue = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n      xValue.push(point.xValue);\n      yValue.push(yDataValue);\n      index++;\n    }\n\n    var slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n    series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n  };\n  /**\n   * Calculation of logarithmic points\n   */\n\n\n  Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n    var xLogValue = [];\n    var yLogValue = [];\n    var xPointsLgr = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n      xPointsLgr.push(point.xValue);\n      xLogValue.push(xDataValue);\n      yLogValue.push(point.yValue);\n      index++;\n    }\n\n    var slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n    series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n  };\n  /**\n   * Calculation of polynomial points\n   */\n\n\n  Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n    var xPolyValues = [];\n    var yPolyValues = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      xPolyValues.push(point.xValue);\n      yPolyValues.push(point.yValue);\n      index++;\n    }\n\n    series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n  };\n  /**\n   * Calculation of power points\n   */\n\n\n  Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var powerPoints = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n      var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n      powerPoints.push(point.xValue);\n      xValues.push(xDataValue);\n      yValues.push(yDataValue);\n      index++;\n    }\n\n    var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n    series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n  };\n  /**\n   * Calculation of linear points\n   */\n\n\n  Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      xValues.push(point.xValue);\n      yValues.push(point.yValue);\n      index++;\n    }\n\n    var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n    series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n  };\n  /**\n   * Calculation of moving average points\n   */\n\n\n  Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var xAvgValues = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      xAvgValues.push(point.xValue);\n      xValues.push(index + 1);\n      yValues.push(point.yValue);\n      index++;\n    }\n\n    series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n  };\n  /**\n   * Calculation of logarithmic points\n   */\n\n\n  Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var x1Log = xValues[0] - trendline.backwardForecast;\n    var x1 = x1Log ? Math.log(x1Log) : 0;\n    var y1Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x1;\n    var x2Log = xValues[midPoint - 1];\n    var x2 = x2Log ? Math.log(x2Log) : 0;\n    var y2Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x2;\n    var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var x3 = x3Log ? Math.log(x3Log) : 0;\n    var y3Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x3;\n    pts.push(this.getDataPoint(x1Log, y1Log, series, pts.length));\n    pts.push(this.getDataPoint(x2Log, y2Log, series, pts.length));\n    pts.push(this.getDataPoint(x3Log, y3Log, series, pts.length));\n    return pts;\n  };\n  /**\n   * Defines the points based on data point\n   */\n\n\n  Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var x1 = xValues[0] - trendline.backwardForecast;\n    x1 = x1 > -1 ? x1 : 0;\n    var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n    var x2 = xValues[midPoint - 1];\n    var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n    var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n    pts.push(this.getDataPoint(x1, y1, series, pts.length));\n    pts.push(this.getDataPoint(x2, y2, series, pts.length));\n    pts.push(this.getDataPoint(x3, y3, series, pts.length));\n    return pts;\n  };\n  /**\n   * Get the polynomial points based on polynomial slopes\n   */\n\n\n  Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n    var pts = [];\n    var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n    polynomialOrder = Math.max(2, polynomialOrder);\n    polynomialOrder = Math.min(6, polynomialOrder);\n    trendline.polynomialOrder = polynomialOrder;\n    trendline.polynomialSlopes = [];\n    trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n    var index = 0;\n\n    while (index < xValues.length) {\n      var xVal = xValues[index];\n      var yVal = yValues[index];\n      var subIndex = 0;\n\n      while (subIndex <= trendline.polynomialOrder) {\n        if (!trendline.polynomialSlopes[subIndex]) {\n          trendline.polynomialSlopes[subIndex] = 0;\n        }\n\n        trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n        ++subIndex;\n      }\n\n      index++;\n    }\n\n    var numArray = [];\n    numArray.length = 1 + 2 * trendline.polynomialOrder;\n    var matrix = [];\n    matrix.length = trendline.polynomialOrder + 1;\n    var newIndex = 0;\n\n    while (newIndex < trendline.polynomialOrder + 1) {\n      matrix[newIndex] = [];\n      matrix[newIndex].length = 3;\n      newIndex++;\n    }\n\n    var nIndex = 0;\n\n    while (nIndex < xValues.length) {\n      var d = xValues[nIndex];\n      var num2 = 1.0;\n      var nIndex2 = 0;\n\n      while (nIndex2 < numArray.length) {\n        if (!numArray[nIndex2]) {\n          numArray[nIndex2] = 0;\n        }\n\n        numArray[nIndex2] += num2;\n        num2 *= d;\n        ++nIndex2;\n      }\n\n      ++nIndex;\n    }\n\n    var nnIndex = 0;\n\n    while (nnIndex <= trendline.polynomialOrder) {\n      var nnIndex2 = 0;\n\n      while (nnIndex2 <= trendline.polynomialOrder) {\n        matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n        ++nnIndex2;\n      }\n\n      ++nnIndex;\n    }\n\n    if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n      trendline.polynomialSlopes = null;\n    }\n\n    pts = this.getPoints(trendline, points, xValues, series);\n    return pts;\n  };\n  /**\n   * Defines the moving average points\n   */\n\n\n  Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n    var pts = [];\n    var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n    period = Math.max(2, period);\n    var index = 0;\n    var y;\n    var x;\n    var count;\n    var nullCount;\n\n    while (index < points.length - 1) {\n      y = count = nullCount = 0;\n\n      for (var j = index; count < period; j++) {\n        count++;\n\n        if (!yValues[j]) {\n          nullCount++;\n        }\n\n        y += yValues[j];\n      }\n\n      y = period - nullCount <= 0 ? null : y / (period - nullCount);\n\n      if (y && !isNaN(y)) {\n        x = xValues[period - 1 + index];\n        pts.push(this.getDataPoint(x, y, series, pts.length));\n      }\n\n      index++;\n    }\n\n    return pts;\n  };\n  /**\n   * Defines the linear points\n   */\n\n\n  Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n    var pts = [];\n    var max = xValues.indexOf(Math.max.apply(null, xValues));\n    var min = xValues.indexOf(Math.min.apply(null, xValues));\n    var x1Linear = xValues[min] - trendline.backwardForecast;\n    var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n    var x2Linear = xValues[max] + trendline.forwardForecast;\n    var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n    pts.push(this.getDataPoint(x1Linear, y1Linear, series, pts.length));\n    pts.push(this.getDataPoint(x2Linear, y2Linear, series, pts.length));\n    return pts;\n  };\n  /**\n   * Defines the exponential points\n   */\n\n\n  Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n    var midPoint = Math.round(points.length / 2);\n    var ptsExp = [];\n    var x1 = xValues[0] - trendline.backwardForecast;\n    var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n    var x2 = xValues[midPoint - 1];\n    var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n    var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n    ptsExp.push(this.getDataPoint(x1, y1, series, ptsExp.length));\n    ptsExp.push(this.getDataPoint(x2, y2, series, ptsExp.length));\n    ptsExp.push(this.getDataPoint(x3, y3, series, ptsExp.length));\n    return ptsExp;\n  };\n  /**\n   * Defines the points based on data point\n   */\n\n\n  Trendlines.prototype.getPoints = function (trendline, points, xValues, series) {\n    var polynomialSlopes = trendline.polynomialSlopes;\n    var pts = [];\n    var x1 = 1;\n    var index = 1;\n    var xValue;\n    var yValue; // We have to sort the points in ascending order. Because, the data source of the series may be random order.\n\n    points.sort(function (a, b) {\n      return a.xValue - b.xValue;\n    });\n    xValues.sort(function (a, b) {\n      return a - b;\n    });\n\n    while (index <= polynomialSlopes.length) {\n      if (index === 1) {\n        xValue = xValues[0] - trendline.backwardForecast;\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      } else if (index === polynomialSlopes.length) {\n        xValue = xValues[points.length - 1] + trendline.forwardForecast;\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      } else {\n        x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n        xValue = xValues[parseInt(x1.toString(), 10) - 1];\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      }\n\n      index++;\n    }\n\n    return pts;\n  };\n  /**\n   * Defines the polynomial value of y\n   */\n\n\n  Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n    var sum = 0;\n    var index = 0;\n\n    while (index < slopes.length) {\n      sum += slopes[index] * Math.pow(x, index);\n      index++;\n    }\n\n    return sum;\n  };\n  /**\n   * Defines the gauss jordan elimination\n   */\n\n\n  Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n    var length = matrix.length;\n    var numArray1 = [];\n    var numArray2 = [];\n    var numArray3 = [];\n    numArray1.length = length;\n    numArray2.length = length;\n    numArray3.length = length;\n    var index = 0;\n\n    while (index < length) {\n      numArray3[index] = 0;\n      ++index;\n    }\n\n    var index1 = 0;\n\n    while (index1 < length) {\n      var num1 = 0;\n      var index2 = 0;\n      var index3 = 0;\n      var index4 = 0;\n\n      while (index4 < length) {\n        if (numArray3[index4] !== 1) {\n          var index5 = 0;\n\n          while (index5 < length) {\n            if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n              num1 = Math.abs(matrix[index4][index5]);\n              index2 = index4;\n              index3 = index5;\n            }\n\n            ++index5;\n          }\n        }\n\n        ++index4;\n      }\n\n      ++numArray3[index3];\n\n      if (index2 !== index3) {\n        var index4_1 = 0;\n\n        while (index4_1 < length) {\n          var num2 = matrix[index2][index4_1];\n          matrix[index2][index4_1] = matrix[index3][index4_1];\n          matrix[index3][index4_1] = num2;\n          ++index4_1;\n        }\n\n        var num3 = polynomialSlopes[index2];\n        polynomialSlopes[index2] = polynomialSlopes[index3];\n        polynomialSlopes[index3] = num3;\n      }\n\n      numArray2[index1] = index2;\n      numArray1[index1] = index3;\n\n      if (matrix[index3][index3] === 0.0) {\n        return false;\n      }\n\n      var num4 = 1.0 / matrix[index3][index3];\n      matrix[index3][index3] = 1.0;\n      var iindex4 = 0;\n\n      while (iindex4 < length) {\n        matrix[index3][iindex4] *= num4;\n        ++iindex4;\n      }\n\n      polynomialSlopes[index3] *= num4;\n      var iandex4 = 0;\n\n      while (iandex4 < length) {\n        if (iandex4 !== index3) {\n          var num2 = matrix[iandex4][index3];\n          matrix[iandex4][index3] = 0.0;\n          var index5 = 0;\n\n          while (index5 < length) {\n            matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n            ++index5;\n          }\n\n          polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n        }\n\n        ++iandex4;\n      }\n\n      ++index1;\n    }\n\n    var iindex1 = length - 1;\n\n    while (iindex1 >= 0) {\n      if (numArray2[iindex1] !== numArray1[iindex1]) {\n        var iindex2 = 0;\n\n        while (iindex2 < length) {\n          var num = matrix[iindex2][numArray2[iindex1]];\n          matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n          matrix[iindex2][numArray1[iindex1]] = num;\n          ++iindex2;\n        }\n      }\n\n      --iindex1;\n    }\n\n    return true;\n  };\n  /**\n   * Defines the trendline elements\n   */\n\n\n  Trendlines.prototype.getTrendLineElements = function (series, chart) {\n    findClipRect(series);\n    var clipRect = series.clipRect;\n    var clipRectElement = chart.renderer.drawClipPath(new RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', {\n      width: 1,\n      color: 'Gray'\n    }, 1, {\n      x: 0,\n      y: 0,\n      width: clipRect.width,\n      height: clipRect.height\n    }));\n    var element = chart.renderer.createGroup({\n      'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n      'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n      'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n    }); //defines the clip rect element\n\n    if (element) {\n      element.appendChild(clipRectElement);\n    }\n\n    for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n      var trendline = _a[_i];\n      this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n    }\n  };\n  /**\n   * To destroy the trendline\n   */\n\n\n  Trendlines.prototype.destroy = function () {\n    /**\n     * Destroys the Linear Trendline\n     */\n  };\n  /**\n   * Get module name\n   */\n\n\n  Trendlines.prototype.getModuleName = function () {\n    /**\n     * Returns the module name of the series\n     */\n    return 'TrendLine';\n  };\n\n  return Trendlines;\n}();\n\nexport { Trendlines };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-charts/src/chart/trend-lines/trend-line.js"],"names":["Series","Points","findClipRect","RectOption","Trendlines","prototype","initSeriesCollection","trendline","chart","trendLineSeries","type","setSeriesProperties","fill","width","series","name","xName","yName","dashArray","clipRectElement","points","enableTooltip","index","sourceIndex","interior","animation","legendShape","marker","category","xMin","Infinity","xMax","yMin","yMax","xData","yData","targetSeries","isBlazor","border","connector","createTrendLineElements","element","trendLineElement","seriesElement","trendLineElements","appendChild","getDataPoint","x","y","trendPoint","xAxis","valueType","Date","Number","xValue","color","yValue","visible","Math","min","max","push","findSlopeIntercept","xValues","yValues","xAvg","yAvg","xyAvg","xxAvg","slope","intercept","length","isNaN","log","abs","exp","initDataSource","trendlineSeries","setLinearRange","setExponentialRange","setMovingAverageRange","setPolynomialRange","setPowerRange","setLogarithmicRange","splineSeriesModule","findSplinePoint","point","yDataValue","slopeIntercept","getExponentialPoints","xLogValue","yLogValue","xPointsLgr","xDataValue","getLogarithmicPoints","xPolyValues","yPolyValues","getPolynomialPoints","powerPoints","getPowerPoints","getLinearPoints","xAvgValues","getMovingAveragePoints","slopeInterceptLog","midPoint","round","pts","x1Log","backwardForecast","x1","y1Log","x2Log","x2","y2Log","x3Log","forwardForecast","x3","y3Log","slopeInterceptPower","y1","pow","y2","y3","polynomialOrder","polynomialSlopes","xVal","yVal","subIndex","numArray","matrix","newIndex","nIndex","d","num2","nIndex2","nnIndex","nnIndex2","gaussJordanElimination","getPoints","period","count","nullCount","j","slopeInterceptLinear","indexOf","apply","x1Linear","y1Linear","x2Linear","y2Linear","slopeInterceptExp","ptsExp","sort","a","b","getPolynomialYValue","parseInt","toString","slopes","sum","numArray1","numArray2","numArray3","index1","num1","index2","index3","index4","index5","index4_1","num3","num4","iindex4","iandex4","iindex1","iindex2","num","getTrendLineElements","clipRect","renderer","drawClipPath","id","height","createGroup","_i","_a","trendlines","destroy","getModuleName"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable jsdoc/require-returns */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\nimport { Series, Points } from '../series/chart-series';\nimport { findClipRect, RectOption } from '../../common/utils/helper';\n/**\n * `Trendline` module is used to render 6 types of trendlines in chart.\n */\nvar Trendlines = /** @class */ (function () {\n    function Trendlines() {\n    }\n    /**\n     * Defines the collection of series, that are used to represent a trendline\n     *\n     * @private\n     */\n    Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n        var trendLineSeries = new Series(trendline, 'targetSeries', {}, true);\n        if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n            trendLineSeries.type = 'Line';\n        }\n        else {\n            trendLineSeries.type = 'Spline';\n        }\n        this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n    };\n    /**\n     * Initializes the properties of the trendline series\n     */\n    Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n        series.name = trendline.name;\n        series.xName = 'x';\n        series.yName = 'y';\n        series.fill = fill || 'blue';\n        series.width = width;\n        series.dashArray = trendline.dashArray;\n        series.clipRectElement = trendline.clipRectElement;\n        series.points = [];\n        series.enableTooltip = trendline.enableTooltip;\n        series.index = trendline.index;\n        series.sourceIndex = trendline.sourceIndex;\n        series.interior = series.fill;\n        series.animation = trendline.animation;\n        series.legendShape = 'HorizontalLine';\n        series.marker = trendline.marker;\n        series.category = 'TrendLine';\n        series.chart = chart;\n        series.xMin = Infinity;\n        series.xMax = -Infinity;\n        series.yMin = Infinity;\n        series.yMax = -Infinity;\n        series.xData = [];\n        series.yData = [];\n        trendline.targetSeries = series;\n        if (chart.isBlazor) {\n            trendline.targetSeries.border = {}; // To avoid console error in blazor\n            trendline.targetSeries.connector = {}; // To avoid console error in blazor\n        }\n    };\n    /**\n     * Creates the elements of a trendline\n     */\n    Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n        trendline.trendLineElement = element;\n        trendline.targetSeries.clipRectElement = clipRectElement;\n        trendline.targetSeries.seriesElement = element;\n        if (chart.trendLineElements) {\n            chart.trendLineElements.appendChild(trendline.trendLineElement);\n        }\n    };\n    /**\n     * Defines the data point of trendline\n     */\n    Trendlines.prototype.getDataPoint = function (x, y, series, index) {\n        var trendPoint = new Points();\n        trendPoint.x = series.xAxis.valueType === 'DateTime' ? new Date(Number(x)) : x;\n        trendPoint.y = y;\n        trendPoint.xValue = Number(x);\n        trendPoint.color = series.fill;\n        trendPoint.index = index;\n        trendPoint.yValue = Number(y);\n        trendPoint.visible = true;\n        series.xMin = Math.min(series.xMin, trendPoint.xValue);\n        series.yMin = Math.min(series.yMin, trendPoint.yValue);\n        series.xMax = Math.max(series.xMax, trendPoint.xValue);\n        series.yMax = Math.max(series.yMax, trendPoint.yValue);\n        series.xData.push(trendPoint.xValue);\n        return trendPoint;\n    };\n    /**\n     * Finds the slope and intercept of trendline\n     */\n    Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n        var xAvg = 0;\n        var yAvg = 0;\n        var xyAvg = 0;\n        var xxAvg = 0;\n        var index = 0;\n        var slope = 0;\n        var intercept = 0;\n        while (index < points.length) {\n            // To fix trendline not rendered issue while Nan Value is provided for y values.\n            if (isNaN(yValues[index])) {\n                yValues[index] = ((yValues[index - 1] + yValues[index + 1]) / 2);\n            }\n            xAvg += xValues[index];\n            yAvg += yValues[index];\n            xyAvg += xValues[index] * yValues[index];\n            xxAvg += xValues[index] * xValues[index];\n            index++;\n        }\n        var type = trendline.type;\n        if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n            intercept = trendline.intercept;\n            switch (type) {\n                case 'Linear':\n                    slope = ((xyAvg) - (trendline.intercept * xAvg)) / xxAvg;\n                    break;\n                case 'Exponential':\n                    slope = ((xyAvg) - (Math.log(Math.abs(trendline.intercept)) * xAvg)) / xxAvg;\n                    break;\n            }\n        }\n        else {\n            slope = ((points.length * xyAvg) - (xAvg * yAvg)) / ((points.length * xxAvg) - (xAvg * xAvg));\n            slope = (type === 'Linear' ? slope : Math.abs(slope));\n            if (type === 'Exponential' || type === 'Power') {\n                intercept = Math.exp((yAvg - (slope * xAvg)) / points.length);\n            }\n            else {\n                intercept = (yAvg - (slope * xAvg)) / points.length;\n            }\n        }\n        return { slope: slope, intercept: intercept };\n    };\n    /**\n     * Defines the points to draw the trendlines\n     */\n    Trendlines.prototype.initDataSource = function (trendline) {\n        var points = trendline.points;\n        if (points && points.length) {\n            //prepare data\n            var trendlineSeries = trendline.targetSeries;\n            switch (trendline.type) {\n                case 'Linear':\n                    this.setLinearRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Exponential':\n                    this.setExponentialRange(points, trendline, trendlineSeries);\n                    break;\n                case 'MovingAverage':\n                    this.setMovingAverageRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Polynomial':\n                    this.setPolynomialRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Power':\n                    this.setPowerRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Logarithmic':\n                    this.setLogarithmicRange(points, trendline, trendlineSeries);\n                    break;\n            }\n            if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n                trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n            }\n        }\n    };\n    /**\n     * Calculation of exponential points\n     */\n    Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n        var xValue = [];\n        var yValue = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n            xValue.push(point.xValue);\n            yValue.push(yDataValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n        series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n    };\n    /**\n     * Calculation of logarithmic points\n     */\n    Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n        var xLogValue = [];\n        var yLogValue = [];\n        var xPointsLgr = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n            xPointsLgr.push(point.xValue);\n            xLogValue.push(xDataValue);\n            yLogValue.push(point.yValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n        series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n    };\n    /**\n     * Calculation of polynomial points\n     */\n    Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n        var xPolyValues = [];\n        var yPolyValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xPolyValues.push(point.xValue);\n            yPolyValues.push(point.yValue);\n            index++;\n        }\n        series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n    };\n    /**\n     * Calculation of power points\n     */\n    Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var powerPoints = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n            var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n            powerPoints.push(point.xValue);\n            xValues.push(xDataValue);\n            yValues.push(yDataValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n        series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n    };\n    /**\n     * Calculation of linear points\n     */\n    Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xValues.push(point.xValue);\n            yValues.push(point.yValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n        series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n    };\n    /**\n     * Calculation of moving average points\n     */\n    Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var xAvgValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xAvgValues.push(point.xValue);\n            xValues.push(index + 1);\n            yValues.push(point.yValue);\n            index++;\n        }\n        series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n    };\n    /**\n     * Calculation of logarithmic points\n     */\n    Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var x1Log = xValues[0] - trendline.backwardForecast;\n        var x1 = x1Log ? Math.log(x1Log) : 0;\n        var y1Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x1);\n        var x2Log = xValues[midPoint - 1];\n        var x2 = x2Log ? Math.log(x2Log) : 0;\n        var y2Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x2);\n        var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var x3 = x3Log ? Math.log(x3Log) : 0;\n        var y3Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x3);\n        pts.push(this.getDataPoint(x1Log, y1Log, series, pts.length));\n        pts.push(this.getDataPoint(x2Log, y2Log, series, pts.length));\n        pts.push(this.getDataPoint(x3Log, y3Log, series, pts.length));\n        return pts;\n    };\n    /**\n     * Defines the points based on data point\n     */\n    Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var x1 = xValues[0] - trendline.backwardForecast;\n        x1 = x1 > -1 ? x1 : 0;\n        var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n        var x2 = xValues[midPoint - 1];\n        var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n        var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n        pts.push(this.getDataPoint(x1, y1, series, pts.length));\n        pts.push(this.getDataPoint(x2, y2, series, pts.length));\n        pts.push(this.getDataPoint(x3, y3, series, pts.length));\n        return pts;\n    };\n    /**\n     * Get the polynomial points based on polynomial slopes\n     */\n    Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n        var pts = [];\n        var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n        polynomialOrder = Math.max(2, polynomialOrder);\n        polynomialOrder = Math.min(6, polynomialOrder);\n        trendline.polynomialOrder = polynomialOrder;\n        trendline.polynomialSlopes = [];\n        trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n        var index = 0;\n        while (index < xValues.length) {\n            var xVal = xValues[index];\n            var yVal = yValues[index];\n            var subIndex = 0;\n            while (subIndex <= trendline.polynomialOrder) {\n                if (!trendline.polynomialSlopes[subIndex]) {\n                    trendline.polynomialSlopes[subIndex] = 0;\n                }\n                trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n                ++subIndex;\n            }\n            index++;\n        }\n        var numArray = [];\n        numArray.length = 1 + 2 * trendline.polynomialOrder;\n        var matrix = [];\n        matrix.length = trendline.polynomialOrder + 1;\n        var newIndex = 0;\n        while (newIndex < (trendline.polynomialOrder + 1)) {\n            matrix[newIndex] = [];\n            matrix[newIndex].length = 3;\n            newIndex++;\n        }\n        var nIndex = 0;\n        while (nIndex < xValues.length) {\n            var d = xValues[nIndex];\n            var num2 = 1.0;\n            var nIndex2 = 0;\n            while (nIndex2 < numArray.length) {\n                if (!numArray[nIndex2]) {\n                    numArray[nIndex2] = 0;\n                }\n                numArray[nIndex2] += num2;\n                num2 *= d;\n                ++nIndex2;\n            }\n            ++nIndex;\n        }\n        var nnIndex = 0;\n        while (nnIndex <= trendline.polynomialOrder) {\n            var nnIndex2 = 0;\n            while (nnIndex2 <= trendline.polynomialOrder) {\n                matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n                ++nnIndex2;\n            }\n            ++nnIndex;\n        }\n        if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n            trendline.polynomialSlopes = null;\n        }\n        pts = this.getPoints(trendline, points, xValues, series);\n        return pts;\n    };\n    /**\n     * Defines the moving average points\n     */\n    Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n        var pts = [];\n        var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n        period = Math.max(2, period);\n        var index = 0;\n        var y;\n        var x;\n        var count;\n        var nullCount;\n        while (index < points.length - 1) {\n            y = count = nullCount = 0;\n            for (var j = index; count < period; j++) {\n                count++;\n                if (!yValues[j]) {\n                    nullCount++;\n                }\n                y += yValues[j];\n            }\n            y = period - nullCount <= 0 ? null : y / (period - nullCount);\n            if (y && !isNaN(y)) {\n                x = xValues[period - 1 + index];\n                pts.push(this.getDataPoint(x, y, series, pts.length));\n            }\n            index++;\n        }\n        return pts;\n    };\n    /**\n     * Defines the linear points\n     */\n    Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n        var pts = [];\n        var max = xValues.indexOf(Math.max.apply(null, xValues));\n        var min = xValues.indexOf(Math.min.apply(null, xValues));\n        var x1Linear = xValues[min] - trendline.backwardForecast;\n        var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n        var x2Linear = xValues[max] + trendline.forwardForecast;\n        var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n        pts.push(this.getDataPoint(x1Linear, y1Linear, series, pts.length));\n        pts.push(this.getDataPoint(x2Linear, y2Linear, series, pts.length));\n        return pts;\n    };\n    /**\n     * Defines the exponential points\n     */\n    Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n        var midPoint = Math.round((points.length / 2));\n        var ptsExp = [];\n        var x1 = xValues[0] - trendline.backwardForecast;\n        var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n        var x2 = xValues[midPoint - 1];\n        var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n        var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n        ptsExp.push(this.getDataPoint(x1, y1, series, ptsExp.length));\n        ptsExp.push(this.getDataPoint(x2, y2, series, ptsExp.length));\n        ptsExp.push(this.getDataPoint(x3, y3, series, ptsExp.length));\n        return ptsExp;\n    };\n    /**\n     * Defines the points based on data point\n     */\n    Trendlines.prototype.getPoints = function (trendline, points, xValues, series) {\n        var polynomialSlopes = trendline.polynomialSlopes;\n        var pts = [];\n        var x1 = 1;\n        var index = 1;\n        var xValue;\n        var yValue;\n        // We have to sort the points in ascending order. Because, the data source of the series may be random order.\n        points.sort(function (a, b) { return a.xValue - b.xValue; });\n        xValues.sort(function (a, b) { return a - b; });\n        while (index <= polynomialSlopes.length) {\n            if (index === 1) {\n                xValue = xValues[0] - trendline.backwardForecast;\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            else if (index === polynomialSlopes.length) {\n                xValue = xValues[points.length - 1] + trendline.forwardForecast;\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            else {\n                x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n                xValue = xValues[parseInt(x1.toString(), 10) - 1];\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            index++;\n        }\n        return pts;\n    };\n    /**\n     * Defines the polynomial value of y\n     */\n    Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n        var sum = 0;\n        var index = 0;\n        while (index < slopes.length) {\n            sum += slopes[index] * Math.pow(x, index);\n            index++;\n        }\n        return sum;\n    };\n    /**\n     * Defines the gauss jordan elimination\n     */\n    Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n        var length = matrix.length;\n        var numArray1 = [];\n        var numArray2 = [];\n        var numArray3 = [];\n        numArray1.length = length;\n        numArray2.length = length;\n        numArray3.length = length;\n        var index = 0;\n        while (index < length) {\n            numArray3[index] = 0;\n            ++index;\n        }\n        var index1 = 0;\n        while (index1 < length) {\n            var num1 = 0;\n            var index2 = 0;\n            var index3 = 0;\n            var index4 = 0;\n            while (index4 < length) {\n                if (numArray3[index4] !== 1) {\n                    var index5 = 0;\n                    while (index5 < length) {\n                        if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n                            num1 = Math.abs(matrix[index4][index5]);\n                            index2 = index4;\n                            index3 = index5;\n                        }\n                        ++index5;\n                    }\n                }\n                ++index4;\n            }\n            ++numArray3[index3];\n            if (index2 !== index3) {\n                var index4_1 = 0;\n                while (index4_1 < length) {\n                    var num2 = matrix[index2][index4_1];\n                    matrix[index2][index4_1] = matrix[index3][index4_1];\n                    matrix[index3][index4_1] = num2;\n                    ++index4_1;\n                }\n                var num3 = polynomialSlopes[index2];\n                polynomialSlopes[index2] = polynomialSlopes[index3];\n                polynomialSlopes[index3] = num3;\n            }\n            numArray2[index1] = index2;\n            numArray1[index1] = index3;\n            if (matrix[index3][index3] === 0.0) {\n                return false;\n            }\n            var num4 = 1.0 / matrix[index3][index3];\n            matrix[index3][index3] = 1.0;\n            var iindex4 = 0;\n            while (iindex4 < length) {\n                matrix[index3][iindex4] *= num4;\n                ++iindex4;\n            }\n            polynomialSlopes[index3] *= num4;\n            var iandex4 = 0;\n            while (iandex4 < length) {\n                if (iandex4 !== index3) {\n                    var num2 = matrix[iandex4][index3];\n                    matrix[iandex4][index3] = 0.0;\n                    var index5 = 0;\n                    while (index5 < length) {\n                        matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n                        ++index5;\n                    }\n                    polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n                }\n                ++iandex4;\n            }\n            ++index1;\n        }\n        var iindex1 = length - 1;\n        while (iindex1 >= 0) {\n            if (numArray2[iindex1] !== numArray1[iindex1]) {\n                var iindex2 = 0;\n                while (iindex2 < length) {\n                    var num = matrix[iindex2][numArray2[iindex1]];\n                    matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n                    matrix[iindex2][numArray1[iindex1]] = num;\n                    ++iindex2;\n                }\n            }\n            --iindex1;\n        }\n        return true;\n    };\n    /**\n     * Defines the trendline elements\n     */\n    Trendlines.prototype.getTrendLineElements = function (series, chart) {\n        findClipRect(series);\n        var clipRect = series.clipRect;\n        var clipRectElement = chart.renderer.drawClipPath(new RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n            x: 0, y: 0, width: clipRect.width,\n            height: clipRect.height\n        }));\n        var element = chart.renderer.createGroup({\n            'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n            'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n            'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n        });\n        //defines the clip rect element\n        if (element) {\n            element.appendChild(clipRectElement);\n        }\n        for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n            var trendline = _a[_i];\n            this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n        }\n    };\n    /**\n     * To destroy the trendline\n     */\n    Trendlines.prototype.destroy = function () {\n        /**\n         * Destroys the Linear Trendline\n         */\n    };\n    /**\n     * Get module name\n     */\n    Trendlines.prototype.getModuleName = function () {\n        /**\n         * Returns the module name of the series\n         */\n        return 'TrendLine';\n    };\n    return Trendlines;\n}());\nexport { Trendlines };\n"]},"metadata":{},"sourceType":"module"}