{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable valid-jsdoc */\n\n/* eslint-disable jsdoc/require-param */\n\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding } from '../model/base';\nimport { Theme } from '../model/theme';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the location for the legend.\n */\n\nvar Location = function (_super) {\n  __extends(Location, _super);\n\n  function Location() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(0)], Location.prototype, \"x\", void 0);\n\n  __decorate([Property(0)], Location.prototype, \"y\", void 0);\n\n  return Location;\n}(ChildProperty);\n\nexport { Location };\n/**\n * Configures the legends in charts.\n */\n\nvar LegendSettings = function (_super) {\n  __extends(LegendSettings, _super);\n\n  function LegendSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(true)], LegendSettings.prototype, \"visible\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"height\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"width\", void 0);\n\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, Location)], LegendSettings.prototype, \"location\", void 0);\n\n  __decorate([Property('Auto')], LegendSettings.prototype, \"position\", void 0);\n\n  __decorate([Property('Series')], LegendSettings.prototype, \"mode\", void 0);\n\n  __decorate([Property(8)], LegendSettings.prototype, \"padding\", void 0);\n\n  __decorate([Property('Center')], LegendSettings.prototype, \"alignment\", void 0);\n\n  __decorate([Complex(Theme.legendLabelFont, Font)], LegendSettings.prototype, \"textStyle\", void 0);\n\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeHeight\", void 0);\n\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeWidth\", void 0);\n\n  __decorate([Complex({}, Border)], LegendSettings.prototype, \"border\", void 0);\n\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, Margin)], LegendSettings.prototype, \"margin\", void 0);\n\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, ContainerPadding)], LegendSettings.prototype, \"containerPadding\", void 0);\n\n  __decorate([Property(5)], LegendSettings.prototype, \"shapePadding\", void 0);\n\n  __decorate([Property('transparent')], LegendSettings.prototype, \"background\", void 0);\n\n  __decorate([Property(1)], LegendSettings.prototype, \"opacity\", void 0);\n\n  __decorate([Property(true)], LegendSettings.prototype, \"toggleVisibility\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"description\", void 0);\n\n  __decorate([Property(3)], LegendSettings.prototype, \"tabIndex\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"title\", void 0);\n\n  __decorate([Complex(Theme.legendTitleFont, Font)], LegendSettings.prototype, \"titleStyle\", void 0);\n\n  __decorate([Property('Top')], LegendSettings.prototype, \"titlePosition\", void 0);\n\n  __decorate([Property(100)], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n\n  __decorate([Property(true)], LegendSettings.prototype, \"enablePages\", void 0);\n\n  __decorate([Property(false)], LegendSettings.prototype, \"isInversed\", void 0);\n\n  return LegendSettings;\n}(ChildProperty);\n\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\n\nvar BaseLegend = function () {\n  /**\n   * Constructor for the dateTime module.\n   *\n   * @private\n   */\n  function BaseLegend(chart) {\n    this.pageXCollections = []; // pages of x locations\n\n    this.legendTitleCollections = [];\n    this.legendRegions = [];\n    this.pagingRegions = [];\n    this.chart = chart;\n    this.legend = chart.legendSettings;\n    this.legendID = chart.element.id + '_chart_legend';\n    this.isChartControl = chart.getModuleName() === 'chart';\n    this.isBulletChartControl = chart.getModuleName() === 'bulletChart';\n    this.isStockChartControl = chart.getModuleName() === 'stockChart';\n    this.bulletChart = this.chart;\n    this.fivePixel = 5;\n    this.rowCount = 0;\n    this.pageButtonSize = 8;\n    this.maxColumns = 0;\n    this.maxWidth = 0;\n    this.currentPage = 1;\n    this.backwardArrowOpacity = 0;\n    this.forwardArrowOpacity = 1;\n    this.arrowWidth = 2 * (this.fivePixel + this.pageButtonSize + this.fivePixel);\n    this.arrowHeight = this.arrowWidth;\n    this.isTop = false;\n    this.isTitle = false;\n    this.currentPageNumber = 1;\n  }\n  /**\n   * Calculate the bounds for the legends.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n    var legend = this.legend;\n    var defaultValue = this.isBulletChartControl ? '40%' : '20%';\n    this.getPosition(legend.position, availableSize);\n    this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n    this.isVertical = this.position === 'Left' || this.position === 'Right';\n\n    if (this.isVertical) {\n      this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n      this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n    } else {\n      this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n      this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n    }\n\n    this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n\n    if (!this.isBulletChartControl) {\n      this.legendBounds.width += this.legend.containerPadding.left + this.legend.containerPadding.right;\n      this.legendBounds.height += this.legend.containerPadding.top + this.legend.containerPadding.bottom;\n    }\n\n    this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n  };\n  /**\n   * To find legend position based on available size for chart and accumulation chart\n   *\n   * @param position\n   * @param availableSize\n   * @param position\n   * @param availableSize\n   * @returns {void}\n   */\n\n\n  BaseLegend.prototype.getPosition = function (position, availableSize) {\n    var chart = this.chart;\n    var accumulation = this.chart;\n\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n      this.position = position !== 'Auto' ? position : 'Bottom';\n    } else {\n      if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n        position = 'Top';\n      }\n\n      this.position = position !== 'Auto' ? position : availableSize.width > availableSize.height ? 'Right' : 'Bottom';\n    }\n  };\n  /**\n   * To set bounds for chart and accumulation chart\n   *\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @returns {void}\n   */\n\n\n  BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n    var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n\n    if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n      titleHeight += this.pageButtonSize + this.fivePixel;\n    }\n\n    computedWidth = Math.min(computedWidth, legendBounds.width);\n    computedHeight = Math.min(computedHeight, legendBounds.height);\n\n    if (legend.mode === 'Gradient') {\n      legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n      legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n    } else {\n      legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n      legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n    }\n\n    if (!this.isBulletChartControl) {\n      if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n        this.calculateLegendTitle(legend, legendBounds);\n        legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ? this.legendTitleSize.height - this.legendTitleSize.height / this.legendTitleCollections.length : 0;\n      }\n    }\n\n    this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) / (this.maxItemHeight + legend.padding)));\n  };\n  /**\n   * To find legend location based on position, alignment for chart and accumulation chart\n   *\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   */\n\n\n  BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n    var padding = this.legend.border.width;\n    var isBulletChart = this.isBulletChartControl;\n    var bulletChart = this.bulletChart;\n    var labelIns = bulletChart.labelPosition === 'Inside';\n    var ticklIns = bulletChart.tickPosition === 'Inside';\n    var isVertical = bulletChart.orientation === 'Vertical';\n    var categoryFieldValue = isBulletChart && bulletChart.categoryField !== '' ? maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n    var marginBottom = this.chart.margin.bottom;\n    var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n    var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n\n    if (position === 'Bottom') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n      legendBounds.y += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 : isVertical && bulletChart.categoryField !== '' ? maxLabelSize.height + padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n    } else if (position === 'Top') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + padding + this.legend.margin.top;\n      legendBounds.y -= isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n      legendHeight -= isBulletChart ? -padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n    } else if (position === 'Right') {\n      legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height : 0;\n      subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n    } else if (position === 'Left') {\n      legendBounds.x = legendBounds.x + this.legend.margin.left;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height : bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '' ? categoryFieldValue : 0;\n      subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n    } else {\n      legendBounds.x = this.legend.location.x;\n      legendBounds.y = this.legend.location.y;\n      subtractThickness(rect, new Thickness(0, 0, 0, 0));\n    }\n  };\n  /**\n   * To find legend alignment for chart and accumulation chart\n   *\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   */\n\n\n  BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n    switch (alignment) {\n      case 'Far':\n        start = size - legendSize - start;\n        break;\n\n      case 'Center':\n        start = (size - legendSize) / 2;\n        break;\n    }\n\n    return start;\n  };\n  /**\n   * Renders the legend.\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n    var titleHeight = 0;\n    var titlePlusArrowWidth = 0;\n    var pagingLegendBounds = new Rect(0, 0, 0, 0);\n    var requireLegendBounds = new Rect(0, 0, 0, 0);\n    var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n    var padding = legend.padding;\n    var isPaging = legend.enablePages;\n    var titlePosition = legend.titlePosition;\n    var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n    var legendGroup = chart.renderer.createGroup({\n      id: this.legendID + '_g'\n    });\n    var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n    this.legendRegions = [];\n    var maxHeight = 0;\n\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      if (this.legendCollections[i].text !== '') {\n        maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n        break;\n      } else {\n        continue;\n      }\n    }\n\n    this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight); // For new legend navigation\n\n    if (!isPaging && this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n      titlePlusArrowWidth += this.pageButtonSize + 2 * this.fivePixel;\n    } else if (!this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = this.isTitle && titlePosition === 'Left' ? this.fivePixel + this.legendTitleSize.width : 0;\n    }\n\n    titleHeight = !this.isTitle ? 0 : this.isTop || this.isVertical ? this.legendTitleSize.height : 0;\n\n    if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n      this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n      this.totalPages = 1;\n    } else if (firstLegend !== this.legendCollections.length) {\n      var legendSeriesGroup = void 0; // legendItem group for each series group element\n\n      var count = 0;\n      var previousLegend = this.legendCollections[firstLegend]; // starting shape center x,y position && to resolve lint error used new line for declaration\n\n      var start = new ChartLocation(this.isBulletChartControl ? legendBounds.x + titlePlusArrowWidth + padding + legend.shapeWidth / 2 : legendBounds.x + titlePlusArrowWidth + padding + legend.shapeWidth / 2 + legend.containerPadding.left, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 : legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 + legend.containerPadding.top);\n      var anchor = chart.isRtlEnabled ? 'end' : 'start';\n      var textOptions = new TextOption('', start.x, start.y, anchor);\n      var textPadding = legend.shapePadding + padding + legend.shapeWidth; //  initialization for totalPages legend click totalpage again calculate\n\n      this.totalPages = this.totalPages = this.isChartControl || this.isBulletChartControl || this.isStockChartControl ? this.totalPages : 0;\n      this.pageXCollections = [];\n      this.legendCollections[firstLegend].location = start;\n\n      if (!legend.enablePages && this.isPaging) {\n        var x = start.x - this.fivePixel;\n        var y = start.y - this.fivePixel;\n        var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ? this.legendTitleSize.width + this.fivePixel : 0;\n        var bottomSapce = this.isVertical ? this.pageButtonSize + Math.abs(y - legendBounds.y) : 0;\n        var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0;\n        rightSpace += this.isVertical ? 0 : this.fivePixel + this.pageButtonSize + this.fivePixel;\n        pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n        requireLegendBounds = pagingLegendBounds;\n      } else {\n        requireLegendBounds = legendBounds;\n      }\n\n      for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n        var legendOption = _a[_i];\n\n        if (this.chart.getModuleName() === 'accumulationchart') {\n          // eslint-disable-next-line max-len\n          legendOption.fill = (this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n        }\n\n        if (this.chart.getModuleName() === 'stockChart') {\n          legendOption.type = this.chart.visibleSeries[count].type;\n        }\n\n        this.accessbilityText = this.isBulletChartControl ? 'Legend of bullet chart' + '' + legendOption.text : 'Click to show or hide the ' + legendOption.text + ' series';\n\n        if (legendOption.render && legendOption.text !== '') {\n          legendSeriesGroup = chart.renderer.createGroup({\n            id: this.legendID + this.generateId(legendOption, '_g_', count)\n          });\n\n          if (legendSeriesGroup) {\n            legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n            legendSeriesGroup.setAttribute('aria-label', legend.description || this.accessbilityText);\n          }\n\n          this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n          this.renderSymbol(legendOption, legendSeriesGroup, count);\n          this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count);\n\n          if (legendSeriesGroup) {\n            legendSeriesGroup.setAttribute('style', 'outline: none; cursor: ' + (!legend.toggleVisibility && (chart.selectionMode === 'None' || chart.highlightMode === 'None' || chart.selectionMode === 'None') || this.isBulletChartControl ? 'auto' : 'pointer'));\n          }\n\n          if (legendTranslateGroup) {\n            legendTranslateGroup.appendChild(legendSeriesGroup);\n          }\n\n          previousLegend = legendOption;\n        }\n\n        count++;\n      }\n\n      if (this.isPaging) {\n        this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n      } else {\n        this.totalPages = 1;\n      }\n    }\n\n    appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n  };\n  /** @private */\n\n\n  BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var previousLegend = this.legendCollections[0];\n    var nextLegend = this.legendCollections[1];\n    var defElement = this.chart.renderer.createDefs();\n    var gradientLegendCount = 0;\n    var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n    var opacity = 1;\n    var fillColors = [];\n    var numberItems = [];\n\n    if (legend.title) {\n      if (!this.isVertical) {\n        if (legend.titlePosition === 'Left') {\n          legendBounds.x += this.legendTitleSize.width;\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Right') {\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Top') {\n          legendBounds.y += this.legendTitleSize.height;\n          legendBounds.height -= this.legendTitleSize.height;\n        }\n      } else {\n        legendBounds.y += this.legendTitleSize.height;\n        legendBounds.height -= this.legendTitleSize.height;\n      }\n    }\n\n    for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n      var colorMap = _a[_i];\n\n      if (numberItems.indexOf(colorMap.start) < 0) {\n        numberItems.push(colorMap.start);\n      }\n\n      if (colorMap.colors.length > 2) {\n        var diffValue = colorMap.end - colorMap.start;\n        var colorsLength = colorMap.colors.length - 1;\n\n        if (diffValue > 0) {\n          diffValue = diffValue / colorsLength;\n\n          for (var index = 1; index < colorsLength; index++) {\n            var calculatedValue = colorMap.start + diffValue * index;\n            numberItems.push(calculatedValue);\n          }\n        } else {\n          for (var index = 1; index < colorsLength; index++) {\n            numberItems.push(colorMap.start);\n          }\n        }\n      }\n\n      if (numberItems.indexOf(colorMap.end) < 0) {\n        numberItems.push(colorMap.end);\n      }\n\n      for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n        var fillColor = _c[_b];\n\n        if (fillColors.indexOf(fillColor) < 0) {\n          fillColors.push(fillColor);\n        }\n      }\n\n      if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n        fillColors.push(colorMap.colors[0]);\n      }\n    }\n\n    var x2 = this.isVertical ? '0' : '100';\n    var y2 = this.isVertical ? '100' : '0';\n    linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n    linerGradientEle.setAttribute('x1', 0 + '%');\n    linerGradientEle.setAttribute('y1', 0 + '%');\n    linerGradientEle.setAttribute('x2', x2 + '%');\n    linerGradientEle.setAttribute('y2', y2 + '%');\n    var full = numberItems[numberItems.length - 1] - numberItems[0];\n\n    for (var b = 0; b < fillColors.length; b++) {\n      var offsetValue = numberItems[b] - numberItems[0];\n      offsetValue = offsetValue / full;\n      var stopEle = document.createElementNS(xmlns, 'stop');\n      stopEle.setAttribute('offset', offsetValue.toString());\n      stopEle.setAttribute('stop-color', fillColors[b]);\n      stopEle.setAttribute('stop-opacity', opacity.toString());\n      linerGradientEle.appendChild(stopEle);\n    }\n\n    var startLabel = previousLegend.text.toString();\n    var endLabel = nextLegend.text.toString();\n    var startTextSize = measureText(startLabel, legend.textStyle);\n    var endTextSize = measureText(endLabel, legend.textStyle);\n    var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n    var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n    var otherSpaces = 2 * textWidth + 4 * legend.padding;\n    var linearBarWidth = legendBounds.width;\n    var linearBarHeight = legendBounds.height;\n    var xValue = legendBounds.x + textWidth + 2 * legend.padding;\n    var yValue = legendBounds.y + legend.padding;\n    var startLabelY;\n    var endLabelY;\n    var startLabelX;\n    var endLabelX;\n\n    if (this.isVertical) {\n      otherSpaces = 2 * textHeight + 4 * legend.padding;\n      linearBarWidth = legendBounds.width - 2 * legend.padding;\n      linearBarHeight = legendBounds.height - otherSpaces;\n      xValue = legendBounds.x + legend.padding;\n      yValue = legendBounds.y + textHeight + 2 * legend.padding;\n      startLabelY = legendBounds.y + legend.padding + textHeight;\n      endLabelY = yValue + linearBarHeight + textHeight;\n      startLabelX = legendBounds.x + legendBounds.width * 0.5 - textWidth * 0.5;\n      endLabelX = startLabelX;\n\n      if (linearBarWidth > 30) {\n        var diffWidth = linearBarWidth - 30;\n        linearBarWidth = 30;\n        xValue = xValue + diffWidth / 2;\n      }\n    } else {\n      linearBarWidth = legendBounds.width - otherSpaces;\n      linearBarHeight = legendBounds.height - 2 * legend.padding;\n      startLabelX = legendBounds.x + legend.padding + (textWidth - startTextSize.width);\n      endLabelX = legendBounds.x + linearBarWidth + 3 * legend.padding + textWidth;\n      startLabelY = legendBounds.y + legendBounds.height * 0.5 + textHeight * 0.25;\n      endLabelY = startLabelY;\n\n      if (linearBarHeight > 30) {\n        var diffHeight = linearBarHeight - 30;\n        linearBarHeight = 30;\n        yValue = yValue + diffHeight / 2;\n      }\n    }\n\n    var textOptions = new TextOption('', startLabelX, startLabelY, '', startLabel);\n    var hiddenColor = '#D3D3D3';\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n    var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    textOptions = new TextOption('', endLabelX, endLabelY, '', endLabel);\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    var gradientLegend = chart.renderer.drawRectangle({\n      width: linearBarWidth,\n      height: linearBarHeight,\n      x: xValue,\n      y: yValue,\n      fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n    });\n    defElement.appendChild(linerGradientEle);\n    legendTranslateGroup.appendChild(defElement);\n    legendTranslateGroup.appendChild(gradientLegend);\n  };\n  /**\n   * To find first valid legend text index for chart and accumulation chart\n   *\n   * @param legendCollection\n   * @returns {number}\n   * @private\n   */\n\n\n  BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n    var count = 0;\n\n    for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n      var legend = legendCollection_1[_i];\n\n      if (legend.render && legend.text !== '') {\n        break;\n      }\n\n      count++;\n    }\n\n    return count;\n  };\n  /**\n   * To get the legend title text width and height.\n   *\n   * @param legend\n   * @param legendBounds\n   */\n\n\n  BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n    if (legend.title) {\n      this.isTop = legend.titlePosition === 'Top';\n      var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n\n      if (this.isTop || this.isVertical) {\n        this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, legendBounds.width - padding);\n      } else {\n        this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle);\n      }\n\n      var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n      this.legendTitleSize = measureText(text, legend.titleStyle);\n      this.legendTitleSize.height *= this.legendTitleCollections.length;\n    } else {\n      this.legendTitleSize = new Size(0, 0);\n    }\n  };\n  /**\n   * Render the legend title\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param legendGroup\n   */\n\n\n  BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n    var padding = legend.padding;\n    var alignment = legend.titleStyle.textAlignment;\n    this.isTop = legend.titlePosition === 'Top';\n    var anchor = alignment === 'Near' ? 'start' : alignment === 'Far' ? 'end' : 'middle';\n    var x = titlePositionX(legendBounds, legend.titleStyle);\n    anchor = this.isTop || this.isVertical ? anchor : '';\n    x = alignment === 'Near' ? x + padding : alignment === 'Far' ? x - padding : x;\n    x = this.isTop || this.isVertical ? x : legendBounds.x + (legend.titlePosition === 'Left' ? 5 : legendBounds.width - this.legendTitleSize.width - 5);\n    var topPadding = legendBounds.height / 2 + this.legendTitleSize.height / 4;\n    var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding : this.legendTitleSize.height / this.legendTitleCollections.length);\n    var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n    textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color, legendGroup);\n  };\n  /**\n   * To create legend rendering elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendBounds\n   * @param legendGroup\n   * @param legend\n   * @param id\n   * @param redraw\n   */\n\n\n  BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n    var padding = legend.padding;\n    var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n    var legendItemsGroup = chart.renderer.createGroup({\n      id: id + '_collections'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var clippath = chart.renderer.createClipPath({\n      id: id + '_clipPath'\n    });\n\n    if (legendGroup) {\n      legendGroup.appendChild(chart.renderer.drawRectangle(options));\n    } else {\n      chart.renderer.drawRectangle(options);\n    }\n\n    if (legend.title) {\n      this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n    }\n\n    if (!isCanvas) {\n      legendGroup.appendChild(legendItemsGroup);\n    }\n\n    this.legendTranslateGroup = chart.renderer.createGroup({\n      id: id + '_translate_g'\n    });\n\n    if (!isCanvas) {\n      legendItemsGroup.appendChild(this.legendTranslateGroup);\n    }\n\n    options.y += padding + (this.isTop ? this.legendTitleSize.height : 0);\n    options.id += '_clipPath_rect';\n    options.width = !this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl && this.isVertical ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right : legendBounds.width;\n\n    if (!isCanvas) {\n      this.clipRect = chart.renderer.drawRectangle(options);\n      clippath.appendChild(this.clipRect);\n    } else {\n      this.pagingClipRect = options;\n    }\n\n    appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n\n    if (!isCanvas) {\n      legendItemsGroup.setAttribute('style', 'clip-path:url(#' + clippath.id + ')');\n    }\n\n    return this.legendTranslateGroup;\n  };\n  /**\n   * To render legend symbols for chart and accumulation chart\n   *\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   */\n\n\n  BaseLegend.prototype.renderSymbol = function (legendOption, group, i) {\n    var control = this.isBulletChartControl ? this.chart : null;\n    var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n    var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && legendOption.shape === 'SeriesType' && legendOption.type.toLowerCase().indexOf('line') > -1 && legendOption.type.toLowerCase().indexOf('area') === -1;\n    var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var borderColor;\n    var shape = legendOption.shape === 'SeriesType' ? legendOption.type : legendOption.shape;\n    var strokewidth = isStrokeWidth ? this.legend.mode === 'Series' ? this.chart.visibleSeries[i].width : this.chart.visibleSeries[0].width : this.isBulletChartControl && legendOption.shape === 'Multiply' ? 4 : 1;\n    var regionPadding;\n    shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n\n    if (isCustomBorder && i < this.chart.visibleSeries.length) {\n      var seriesBorder = this.chart.visibleSeries[i].border;\n      borderColor = seriesBorder.color ? seriesBorder.color : symbolColor;\n      strokewidth = seriesBorder.width ? seriesBorder.width : 1;\n    }\n\n    var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', i), symbolColor, strokewidth, isCustomBorder ? borderColor : symbolColor, 1, '', '');\n    var textSize = measureText(legendOption.text, this.legend.textStyle);\n    var x = this.legend.isInversed ? legendOption.location.x + textSize.width + this.legend.shapePadding : legendOption.location.x;\n    var y = legendOption.location.y;\n\n    if (!isCanvas) {\n      group.appendChild(drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n    } else {\n      regionPadding = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber);\n      drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n      this.legendRegions.push({\n        rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding),\n        index: i\n      });\n    }\n\n    if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' || legendOption.type === 'Doughnut' && shape === 'Doughnut') {\n      symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', i);\n      shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n      symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n\n      if (!isCanvas) {\n        // eslint-disable-next-line max-len\n        group.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n      } else {\n        drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n      }\n    }\n  };\n  /**\n   * To render legend text for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   */\n\n\n  BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i) {\n    var legend = chart.legendSettings;\n    var hiddenColor = '#D3D3D3';\n    var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textOptions.id = this.legendID + this.generateId(legendOption, '_text_', i);\n    textOptions.text = legendOption.text;\n    textOptions.x = legend.isInversed ? legendOption.location.x - legend.shapeWidth / 2 : legendOption.location.x + legend.shapeWidth / 2 + legend.shapePadding;\n    textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n    var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n\n    if (element) {\n      element.setAttribute('aria-label', legend.description || this.accessbilityText);\n    }\n\n    if (isCanvas) {\n      var textSize = measureText(textOptions.text, legend.textStyle);\n      this.legendRegions[i].rect.y = textOptions.y < this.legendRegions[i].rect.y ? textOptions.y : this.legendRegions[i].rect.y;\n      this.legendRegions[i].rect.width += textSize.width;\n      this.legendRegions[i].rect.height = textSize.height;\n      this.legendRegions[i].rect.y -= textSize.height * 0.5;\n    }\n  };\n  /**\n   * To render legend paging elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   */\n\n\n  BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n    var paginggroup = chart.renderer.createGroup({\n      id: this.legendID + '_navigation'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n    var grayColor = '#545454';\n    var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n\n    var padding = 8; // const padding for paging elements\n\n    var symbolOption = new PathOption(this.legendID + '_pageup', 'transparent', 5, grayColor, 1, '', '');\n    var iconSize = this.pageButtonSize; // Page left arrow drawing calculation started here\n\n    var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 : this.rowCount - 1;\n    var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n    this.pagingRegions = [];\n    this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n    this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n\n    if (!isCanvas) {\n      legendGroup.appendChild(paginggroup);\n    }\n\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n      this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n    } else {\n      this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n    }\n\n    if (paginggroup) {\n      paginggroup.setAttribute('style', 'cursor: pointer');\n    }\n\n    this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n\n    if (!isCanvas) {\n      this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n    } else {\n      //paging clipRect only for canvas mode\n      this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight - (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n      this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n      this.pagingClipRect.x += legend.border.width;\n      this.pagingClipRect.width -= legend.border.width + legend.border.width / 2;\n      this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n    }\n\n    var pageTextElement;\n    var x = bounds.x + iconSize / 2;\n    var y = bounds.y + this.clipPathHeight + (titleHeight + bounds.height - this.clipPathHeight) / 2;\n\n    if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n      x = bounds.x + this.fivePixel + this.pageButtonSize + titleWidth;\n      y = legend.title && this.isTop ? bounds.y + padding + titleHeight + iconSize / 1 + 0.5 : bounds.y + padding + iconSize + 0.5;\n    }\n\n    var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + iconSize / 2 + padding + titleHeight;\n        symbolOption.opacity = this.backwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n      } else {\n        symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity : legend.enablePages ? 1 : this.backwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(bounds.width - (2 * (iconSize + padding) + padding + size.width), 0, 0, 0));\n    }\n\n    this.pagingRegions.push(new Rect(x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5, y - iconSize * 0.5, iconSize, iconSize)); // Page numbering rendering calculation started here\n\n    textOption.x = x + iconSize / 2 + padding;\n    textOption.y = y + size.height / 4;\n    textOption.id = this.legendID + '_pagenumber';\n    textOption.text = '1/' + this.totalPages;\n\n    if (isCanvas && this.totalNoOfPages) {\n      textOption.text = this.currentPageNumber + '/' + this.totalNoOfPages;\n    }\n\n    if (legend.enablePages || this.isBulletChartControl) {\n      pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, legend.textStyle.color, paginggroup, false, false, false, false, null, new Rect(bounds.width - (2 * (iconSize + padding) + padding + size.width), 0, 0, 0));\n    } // Page right arrow rendering calculation started here\n\n\n    x = textOption.x + padding + iconSize / 2 + size.width;\n\n    if (this.isPaging && !legend.enablePages && !this.isVertical) {\n      x = bounds.x + bounds.width - this.fivePixel - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0);\n    }\n\n    symbolOption.id = this.legendID + '_pagedown';\n    symbolOption.opacity = !legend.enablePages ? this.forwardArrowOpacity : 1;\n\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + bounds.height - iconSize / 2 - padding;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n      } else {\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(bounds.width - (2 * (iconSize + padding) + padding + size.width), 0, 0, 0));\n    }\n\n    this.pagingRegions.push(new Rect(x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5), y - iconSize * 0.5, iconSize, iconSize));\n\n    if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      //placing the navigation buttons and page numbering in legend right corner\n      paginggroup.setAttribute('transform', 'translate(' + (bounds.width - (2 * (iconSize + padding) + padding + size.width)) + ', ' + 0 + ')');\n    } else {\n      if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n        this.totalNoOfPages = this.totalPages;\n        this.calTotalPage = false;\n      }\n\n      if (!legend.enablePages && !this.isBulletChartControl) {\n        // For new legend page navigation\n        this.translatePage(null, this.currentPage - 1, this.currentPage, legend);\n      }\n    }\n\n    if (legend.enablePages || this.isBulletChartControl) {\n      this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage, legend);\n    }\n  };\n  /**\n   * To translate legend pages for chart and accumulation chart\n   *\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   */\n\n\n  BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber, legend) {\n    var size = this.clipPathHeight * page;\n    var translate = 'translate(0,-' + size + ')';\n\n    if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n      size = this.pageXCollections[page * this.maxColumns] - this.legendBounds.x;\n      size = size < 0 ? 0 : size; // to avoid small pixel variation\n\n      translate = 'translate(-' + size + ',0)';\n    }\n\n    if (!this.chart.enableCanvas) {\n      this.legendTranslateGroup.setAttribute('transform', translate);\n    }\n\n    if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      pagingText.textContent = pageNumber + '/' + this.totalPages;\n    }\n\n    this.currentPage = pageNumber;\n    return size;\n  };\n  /**\n   * To change legend pages for chart and accumulation chart\n   *\n   * @param event\n   * @param pageUp\n   * @param event\n   * @param pageUp\n   */\n\n\n  BaseLegend.prototype.changePage = function (event, pageUp) {\n    var legend = this.chart.legendSettings;\n    var backwardArrow = document.getElementById(this.legendID + '_pageup');\n    var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n    var pageText = legend.enablePages || this.isBulletChartControl ? document.getElementById(this.legendID + '_pagenumber') : null;\n    var page = legend.enablePages || this.isBulletChartControl ? parseInt(pageText.textContent.split('/')[0], 10) : this.currentPage;\n\n    if (pageUp && page > 1) {\n      this.translatePage(pageText, page - 2, page - 1, legend);\n    } else if (!pageUp && page < this.totalPages) {\n      this.translatePage(pageText, page, page + 1, legend);\n    }\n\n    if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow); // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\n      this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n    }\n  };\n  /**\n   * To hide the backward and forward arrow\n   *\n   * @param arrowElement\n   */\n\n\n  BaseLegend.prototype.hideArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '0');\n  };\n  /**\n   * To show the  backward and forward arrow\n   *\n   * @param arrowElement\n   */\n\n\n  BaseLegend.prototype.showArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '1');\n  };\n  /**\n   * To find legend elements id based on chart or accumulation chart\n   *\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @private\n   */\n\n\n  BaseLegend.prototype.generateId = function (option, prefix, count) {\n    if (this.isChartControl || this.isStockChartControl) {\n      return prefix + count;\n    } else {\n      return prefix + option.pointIndex;\n    }\n  };\n  /**\n   * To show or hide trimmed text tooltip for legend.\n   *\n   * @param event\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseLegend.prototype.move = function (event) {\n    var _this = this;\n\n    var x = this.chart.mouseX;\n    var y = this.chart.mouseY;\n\n    if (event.target.textContent.indexOf('...') > -1) {\n      var targetId = event.target.id.split(this.legendID + '_text_');\n\n      if (targetId.length === 2) {\n        var index = parseInt(targetId[1], 10);\n        var element = this.chart.element;\n\n        if (!isNaN(index)) {\n          if (this.chart.isTouch) {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n          }\n\n          if (this.isChartControl) {\n            showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          } else {\n            showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          }\n        }\n      }\n    } else {\n      removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n    }\n\n    if (this.chart.isTouch) {\n      clearTimeout(this.clearTooltip);\n      this.clearTooltip = +setTimeout(function () {\n        removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip');\n      }, 1000);\n    }\n  };\n\n  return BaseLegend;\n}();\n\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\n\nvar LegendOptions = function () {\n  function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex) {\n    this.location = {\n      x: 0,\n      y: 0\n    };\n    this.text = text;\n    this.fill = fill;\n    this.shape = shape;\n    this.url = url;\n    this.visible = visible;\n    this.type = type;\n    this.markerVisibility = markerVisibility;\n    this.markerShape = markerShape;\n    this.pointIndex = pointIndex;\n    this.seriesIndex = seriesIndex;\n  }\n\n  return LegendOptions;\n}();\n\nexport { LegendOptions };","map":{"version":3,"sources":["/workspace/Commb-olap-poc/commb-olap-js/node_modules/@syncfusion/ej2-charts/src/common/legend/legend.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Property","Complex","ChildProperty","measureText","Rect","TextOption","Size","PathOption","Font","Border","Margin","ContainerPadding","Theme","subtractThickness","Thickness","drawSymbol","ChartLocation","titlePositionX","getTitle","textTrim","RectOption","textElement","stringToNumber","removeElement","showTooltip","getElement","appendChildElement","Location","_super","apply","LegendSettings","x","y","legendLabelFont","left","right","top","bottom","legendTitleFont","BaseLegend","chart","pageXCollections","legendTitleCollections","legendRegions","pagingRegions","legend","legendSettings","legendID","element","id","isChartControl","getModuleName","isBulletChartControl","isStockChartControl","bulletChart","fivePixel","rowCount","pageButtonSize","maxColumns","maxWidth","currentPage","backwardArrowOpacity","forwardArrowOpacity","arrowWidth","arrowHeight","isTop","isTitle","currentPageNumber","calculateLegendBounds","rect","availableSize","maxLabelSize","defaultValue","getPosition","position","legendBounds","isVertical","height","margin","width","library","getLegendBounds","containerPadding","getLocation","alignment","accumulation","visibleSeries","type","setBounds","computedWidth","computedHeight","titleHeight","title","titlePosition","legendTitleSize","isPaging","enablePages","Math","min","mode","titleStyle","textOverflow","calculateLegendTitle","max","ceil","padding","maxItemHeight","border","isBulletChart","labelIns","labelPosition","ticklIns","tickPosition","orientation","categoryFieldValue","categoryField","marginBottom","legendHeight","legendWidth","alignLegend","opposedPosition","majorTickLines","location","start","size","legendSize","renderLegend","redraw","titlePlusArrowWidth","pagingLegendBounds","requireLegendBounds","firstLegend","findFirstLegendPosition","legendCollections","upArrowHeight","legendGroup","renderer","createGroup","legendTranslateGroup","createLegendElements","maxHeight","text","textSize","shapeHeight","getLinearLegend","totalPages","legendSeriesGroup","count","previousLegend","shapeWidth","anchor","isRtlEnabled","textOptions","textPadding","shapePadding","leftSpace","bottomSapce","abs","rightSpace","_i","_a","legendOption","fill","points","pointIndex","color","accessbilityText","render","generateId","setAttribute","tabIndex","toString","description","getRenderPoint","renderSymbol","renderText","toggleVisibility","selectionMode","highlightMode","appendChild","renderPagingElements","enableCanvas","svgObject","xmlns","nextLegend","defElement","createDefs","gradientLegendCount","linerGradientEle","document","createElementNS","opacity","fillColors","numberItems","rangeColorSettings","colorMap","indexOf","push","colors","diffValue","end","colorsLength","index","calculatedValue","_b","_c","fillColor","x2","y2","full","offsetValue","stopEle","startLabel","endLabel","startTextSize","textStyle","endTextSize","textWidth","textHeight","otherSpaces","linearBarWidth","linearBarHeight","xValue","yValue","startLabelY","endLabelY","startLabelX","endLabelX","diffWidth","diffHeight","hiddenColor","fontcolor","visible","themeStyle","legendLabel","isCanvas","translatePage","gradientLegend","drawRectangle","legendCollection","legendCollection_1","maximumTitleWidth","renderLegendTitle","textAlignment","topPadding","legendTitleTextOptions","options","background","legendItemsGroup","clippath","createClipPath","clipRect","pagingClipRect","group","control","symbolColor","isStrokeWidth","shape","toLowerCase","isCustomBorder","borderColor","strokewidth","regionPadding","markerShape","seriesBorder","symbolOption","isInversed","url","markerVisibility","bounds","textOption","paginggroup","grayColor","iconSize","titleWidth","clipPathHeight","clearRect","pageTextElement","totalNoOfPages","calTotalPage","pagingText","page","pageNumber","translate","textContent","changePage","event","pageUp","backwardArrow","getElementById","forwardArrow","pageText","parseInt","split","hideArrow","showArrow","arrowElement","option","prefix","move","_this","mouseX","mouseY","targetId","isNaN","isTouch","series","name","offsetWidth","clearTimeout","clearTooltip","setTimeout","LegendOptions","seriesIndex"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding } from '../model/base';\nimport { Theme } from '../model/theme';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the location for the legend.\n */\nvar Location = /** @class */ (function (_super) {\n    __extends(Location, _super);\n    function Location() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], Location.prototype, \"x\", void 0);\n    __decorate([\n        Property(0)\n    ], Location.prototype, \"y\", void 0);\n    return Location;\n}(ChildProperty));\nexport { Location };\n/**\n * Configures the legends in charts.\n */\nvar LegendSettings = /** @class */ (function (_super) {\n    __extends(LegendSettings, _super);\n    function LegendSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"width\", void 0);\n    __decorate([\n        Complex({ x: 0, y: 0 }, Location)\n    ], LegendSettings.prototype, \"location\", void 0);\n    __decorate([\n        Property('Auto')\n    ], LegendSettings.prototype, \"position\", void 0);\n    __decorate([\n        Property('Series')\n    ], LegendSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"padding\", void 0);\n    __decorate([\n        Property('Center')\n    ], LegendSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Complex(Theme.legendLabelFont, Font)\n    ], LegendSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n    __decorate([\n        Complex({}, Border)\n    ], LegendSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, Margin)\n    ], LegendSettings.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, ContainerPadding)\n    ], LegendSettings.prototype, \"containerPadding\", void 0);\n    __decorate([\n        Property(5)\n    ], LegendSettings.prototype, \"shapePadding\", void 0);\n    __decorate([\n        Property('transparent')\n    ], LegendSettings.prototype, \"background\", void 0);\n    __decorate([\n        Property(1)\n    ], LegendSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"description\", void 0);\n    __decorate([\n        Property(3)\n    ], LegendSettings.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"title\", void 0);\n    __decorate([\n        Complex(Theme.legendTitleFont, Font)\n    ], LegendSettings.prototype, \"titleStyle\", void 0);\n    __decorate([\n        Property('Top')\n    ], LegendSettings.prototype, \"titlePosition\", void 0);\n    __decorate([\n        Property(100)\n    ], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"enablePages\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"isInversed\", void 0);\n    return LegendSettings;\n}(ChildProperty));\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */ (function () {\n    /**\n     * Constructor for the dateTime module.\n     *\n     * @private\n     */\n    function BaseLegend(chart) {\n        this.pageXCollections = []; // pages of x locations\n        this.legendTitleCollections = [];\n        this.legendRegions = [];\n        this.pagingRegions = [];\n        this.chart = chart;\n        this.legend = chart.legendSettings;\n        this.legendID = chart.element.id + '_chart_legend';\n        this.isChartControl = (chart.getModuleName() === 'chart');\n        this.isBulletChartControl = (chart.getModuleName() === 'bulletChart');\n        this.isStockChartControl = (chart.getModuleName() === 'stockChart');\n        this.bulletChart = this.chart;\n        this.fivePixel = 5;\n        this.rowCount = 0;\n        this.pageButtonSize = 8;\n        this.maxColumns = 0;\n        this.maxWidth = 0;\n        this.currentPage = 1;\n        this.backwardArrowOpacity = 0;\n        this.forwardArrowOpacity = 1;\n        this.arrowWidth = (2 * (this.fivePixel + this.pageButtonSize + this.fivePixel));\n        this.arrowHeight = this.arrowWidth;\n        this.isTop = false;\n        this.isTitle = false;\n        this.currentPageNumber = 1;\n    }\n    /**\n     * Calculate the bounds for the legends.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n        var legend = this.legend;\n        var defaultValue = (this.isBulletChartControl) ? '40%' : '20%';\n        this.getPosition(legend.position, availableSize);\n        this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n        this.isVertical = (this.position === 'Left' || this.position === 'Right');\n        if (this.isVertical) {\n            this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n            this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n        }\n        else {\n            this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n            this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n        }\n        this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n        if (!this.isBulletChartControl) {\n            this.legendBounds.width += (this.legend.containerPadding.left + this.legend.containerPadding.right);\n            this.legendBounds.height += (this.legend.containerPadding.top + this.legend.containerPadding.bottom);\n        }\n        this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n    };\n    /**\n     * To find legend position based on available size for chart and accumulation chart\n     *\n     * @param position\n     * @param availableSize\n     * @param position\n     * @param availableSize\n     * @returns {void}\n     */\n    BaseLegend.prototype.getPosition = function (position, availableSize) {\n        var chart = this.chart;\n        var accumulation = this.chart;\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n            this.position = (position !== 'Auto') ? position : 'Bottom';\n        }\n        else {\n            if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n                position = 'Top';\n            }\n            this.position = (position !== 'Auto') ? position :\n                (availableSize.width > availableSize.height ? 'Right' : 'Bottom');\n        }\n    };\n    /**\n     * To set bounds for chart and accumulation chart\n     *\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @returns {void}\n     */\n    BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n        var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n        if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n            titleHeight += (this.pageButtonSize + this.fivePixel);\n        }\n        computedWidth = Math.min(computedWidth, legendBounds.width);\n        computedHeight = Math.min(computedHeight, legendBounds.height);\n        if (legend.mode === 'Gradient') {\n            legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n            legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n        }\n        else {\n            legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n            legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n        }\n        if (!this.isBulletChartControl) {\n            if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n                this.calculateLegendTitle(legend, legendBounds);\n                legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ?\n                    (this.legendTitleSize.height - (this.legendTitleSize.height / this.legendTitleCollections.length)) : 0;\n            }\n        }\n        this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) /\n            (this.maxItemHeight + legend.padding)));\n    };\n    /**\n     * To find legend location based on position, alignment for chart and accumulation chart\n     *\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     */\n    BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n        var padding = this.legend.border.width;\n        var isBulletChart = this.isBulletChartControl;\n        var bulletChart = this.bulletChart;\n        var labelIns = bulletChart.labelPosition === 'Inside';\n        var ticklIns = bulletChart.tickPosition === 'Inside';\n        var isVertical = bulletChart.orientation === 'Vertical';\n        var categoryFieldValue = (isBulletChart && bulletChart.categoryField !== '') ?\n            maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n        var marginBottom = this.chart.margin.bottom;\n        var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n        var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n        if (position === 'Bottom') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n            legendBounds.y += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns\n                && !isVertical) ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 :\n                (isVertical && bulletChart.categoryField !== '') ? maxLabelSize.height + padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n        }\n        else if (position === 'Top') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + padding + this.legend.margin.top;\n            legendBounds.y -= (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                !isVertical) ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n            legendHeight -= (isBulletChart) ? -padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n        }\n        else if (position === 'Right') {\n            legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height) : 0;\n            subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n        }\n        else if (position === 'Left') {\n            legendBounds.x = legendBounds.x + this.legend.margin.left;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height) :\n                (bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '') ? categoryFieldValue : 0;\n            subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n        }\n        else {\n            legendBounds.x = this.legend.location.x;\n            legendBounds.y = this.legend.location.y;\n            subtractThickness(rect, new Thickness(0, 0, 0, 0));\n        }\n    };\n    /**\n     * To find legend alignment for chart and accumulation chart\n     *\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     */\n    BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n        switch (alignment) {\n            case 'Far':\n                start = (size - legendSize) - start;\n                break;\n            case 'Center':\n                start = ((size - legendSize) / 2);\n                break;\n        }\n        return start;\n    };\n    /**\n     * Renders the legend.\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n        var titleHeight = 0;\n        var titlePlusArrowWidth = 0;\n        var pagingLegendBounds = new Rect(0, 0, 0, 0);\n        var requireLegendBounds = new Rect(0, 0, 0, 0);\n        var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n        var padding = legend.padding;\n        var isPaging = legend.enablePages;\n        var titlePosition = legend.titlePosition;\n        var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n        var legendGroup = chart.renderer.createGroup({ id: this.legendID + '_g' });\n        var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n        this.legendRegions = [];\n        var maxHeight = 0;\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            if (this.legendCollections[i].text !== '') {\n                maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n                break;\n            }\n            else {\n                continue;\n            }\n        }\n        this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n        // For new legend navigation\n        if (!isPaging && this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n            titlePlusArrowWidth += (this.pageButtonSize + (2 * this.fivePixel));\n        }\n        else if (!this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = this.isTitle && titlePosition === 'Left' ? (this.fivePixel + this.legendTitleSize.width) : 0;\n        }\n        titleHeight = !this.isTitle ? 0 : (this.isTop || this.isVertical ? this.legendTitleSize.height : 0);\n        if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n            this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n            this.totalPages = 1;\n        }\n        else if (firstLegend !== this.legendCollections.length) {\n            var legendSeriesGroup = void 0; // legendItem group for each series group element\n            var count = 0;\n            var previousLegend = this.legendCollections[firstLegend];\n            // starting shape center x,y position && to resolve lint error used new line for declaration\n            var start = new ChartLocation(this.isBulletChartControl ? legendBounds.x + titlePlusArrowWidth + padding + (legend.shapeWidth / 2) :\n                legendBounds.x + titlePlusArrowWidth + padding + (legend.shapeWidth / 2) + legend.containerPadding.left, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) :\n                legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) + legend.containerPadding.top);\n            var anchor = chart.isRtlEnabled ? 'end' : 'start';\n            var textOptions = new TextOption('', start.x, start.y, anchor);\n            var textPadding = legend.shapePadding + padding + legend.shapeWidth;\n            //  initialization for totalPages legend click totalpage again calculate\n            this.totalPages = this.totalPages = (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) ? this.totalPages : 0;\n            this.pageXCollections = [];\n            this.legendCollections[firstLegend].location = start;\n            if (!legend.enablePages && this.isPaging) {\n                var x = start.x - this.fivePixel;\n                var y = start.y - this.fivePixel;\n                var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                var bottomSapce = this.isVertical ? (this.pageButtonSize) + Math.abs(y - legendBounds.y) : 0;\n                var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                rightSpace += this.isVertical ? 0 : (this.fivePixel + this.pageButtonSize + this.fivePixel);\n                pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n                requireLegendBounds = pagingLegendBounds;\n            }\n            else {\n                requireLegendBounds = legendBounds;\n            }\n            for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n                var legendOption = _a[_i];\n                if (this.chart.getModuleName() === 'accumulationchart') {\n                    // eslint-disable-next-line max-len\n                    legendOption.fill = (this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n                }\n                if (this.chart.getModuleName() === 'stockChart') {\n                    legendOption.type = this.chart.visibleSeries[count].type;\n                }\n                this.accessbilityText = (this.isBulletChartControl) ? 'Legend of bullet chart' + '' + legendOption.text\n                    : 'Click to show or hide the ' + legendOption.text + ' series';\n                if (legendOption.render && legendOption.text !== '') {\n                    legendSeriesGroup = chart.renderer.createGroup({\n                        id: this.legendID + this.generateId(legendOption, '_g_', count)\n                    });\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n                        legendSeriesGroup.setAttribute('aria-label', legend.description ||\n                            this.accessbilityText);\n                    }\n                    this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n                    this.renderSymbol(legendOption, legendSeriesGroup, count);\n                    this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count);\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.setAttribute('style', 'outline: none; cursor: ' + ((!legend.toggleVisibility && (chart.selectionMode === 'None' ||\n                            chart.highlightMode === 'None' ||\n                            chart.selectionMode === 'None') || this.isBulletChartControl) ? 'auto' : 'pointer'));\n                    }\n                    if (legendTranslateGroup) {\n                        legendTranslateGroup.appendChild(legendSeriesGroup);\n                    }\n                    previousLegend = legendOption;\n                }\n                count++;\n            }\n            if (this.isPaging) {\n                this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n            }\n            else {\n                this.totalPages = 1;\n            }\n        }\n        appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n    };\n    /** @private */\n    BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n        var xmlns = 'http://www.w3.org/2000/svg';\n        var previousLegend = this.legendCollections[0];\n        var nextLegend = this.legendCollections[1];\n        var defElement = this.chart.renderer.createDefs();\n        var gradientLegendCount = 0;\n        var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n        var opacity = 1;\n        var fillColors = [];\n        var numberItems = [];\n        if (legend.title) {\n            if (!this.isVertical) {\n                if (legend.titlePosition === 'Left') {\n                    legendBounds.x += this.legendTitleSize.width;\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Right') {\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Top') {\n                    legendBounds.y += this.legendTitleSize.height;\n                    legendBounds.height -= this.legendTitleSize.height;\n                }\n            }\n            else {\n                legendBounds.y += this.legendTitleSize.height;\n                legendBounds.height -= this.legendTitleSize.height;\n            }\n        }\n        for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n            var colorMap = _a[_i];\n            if (numberItems.indexOf(colorMap.start) < 0) {\n                numberItems.push(colorMap.start);\n            }\n            if (colorMap.colors.length > 2) {\n                var diffValue = (colorMap.end - colorMap.start);\n                var colorsLength = colorMap.colors.length - 1;\n                if (diffValue > 0) {\n                    diffValue = diffValue / colorsLength;\n                    for (var index = 1; index < colorsLength; index++) {\n                        var calculatedValue = colorMap.start + (diffValue * index);\n                        numberItems.push(calculatedValue);\n                    }\n                }\n                else {\n                    for (var index = 1; index < colorsLength; index++) {\n                        numberItems.push(colorMap.start);\n                    }\n                }\n            }\n            if (numberItems.indexOf(colorMap.end) < 0) {\n                numberItems.push(colorMap.end);\n            }\n            for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n                var fillColor = _c[_b];\n                if (fillColors.indexOf(fillColor) < 0) {\n                    fillColors.push(fillColor);\n                }\n            }\n            if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n                fillColors.push(colorMap.colors[0]);\n            }\n        }\n        var x2 = this.isVertical ? '0' : '100';\n        var y2 = this.isVertical ? '100' : '0';\n        linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n        linerGradientEle.setAttribute('x1', 0 + '%');\n        linerGradientEle.setAttribute('y1', 0 + '%');\n        linerGradientEle.setAttribute('x2', x2 + '%');\n        linerGradientEle.setAttribute('y2', y2 + '%');\n        var full = numberItems[numberItems.length - 1] - numberItems[0];\n        for (var b = 0; b < fillColors.length; b++) {\n            var offsetValue = numberItems[b] - numberItems[0];\n            offsetValue = offsetValue / full;\n            var stopEle = document.createElementNS(xmlns, 'stop');\n            stopEle.setAttribute('offset', offsetValue.toString());\n            stopEle.setAttribute('stop-color', fillColors[b]);\n            stopEle.setAttribute('stop-opacity', opacity.toString());\n            linerGradientEle.appendChild(stopEle);\n        }\n        var startLabel = previousLegend.text.toString();\n        var endLabel = nextLegend.text.toString();\n        var startTextSize = measureText(startLabel, legend.textStyle);\n        var endTextSize = measureText(endLabel, legend.textStyle);\n        var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n        var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n        var otherSpaces = (2 * textWidth) + (4 * legend.padding);\n        var linearBarWidth = legendBounds.width;\n        var linearBarHeight = legendBounds.height;\n        var xValue = legendBounds.x + textWidth + (2 * legend.padding);\n        var yValue = legendBounds.y + legend.padding;\n        var startLabelY;\n        var endLabelY;\n        var startLabelX;\n        var endLabelX;\n        if (this.isVertical) {\n            otherSpaces = (2 * textHeight) + (4 * legend.padding);\n            linearBarWidth = legendBounds.width - (2 * legend.padding);\n            linearBarHeight = legendBounds.height - otherSpaces;\n            xValue = legendBounds.x + legend.padding;\n            yValue = legendBounds.y + textHeight + (2 * legend.padding);\n            startLabelY = legendBounds.y + legend.padding + textHeight;\n            endLabelY = yValue + linearBarHeight + textHeight;\n            startLabelX = (legendBounds.x + (legendBounds.width * 0.5)) - (textWidth * 0.5);\n            endLabelX = startLabelX;\n            if (linearBarWidth > 30) {\n                var diffWidth = linearBarWidth - 30;\n                linearBarWidth = 30;\n                xValue = xValue + (diffWidth / 2);\n            }\n        }\n        else {\n            linearBarWidth = legendBounds.width - otherSpaces;\n            linearBarHeight = legendBounds.height - (2 * legend.padding);\n            startLabelX = legendBounds.x + legend.padding + (textWidth - startTextSize.width);\n            endLabelX = legendBounds.x + linearBarWidth + (3 * legend.padding) + textWidth;\n            startLabelY = legendBounds.y + (legendBounds.height * 0.5) + (textHeight * 0.25);\n            endLabelY = startLabelY;\n            if (linearBarHeight > 30) {\n                var diffHeight = linearBarHeight - 30;\n                linearBarHeight = 30;\n                yValue = yValue + (diffHeight / 2);\n            }\n        }\n        var textOptions = new TextOption('', startLabelX, startLabelY, '', startLabel);\n        var hiddenColor = '#D3D3D3';\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n        var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        textOptions = new TextOption('', endLabelX, endLabelY, '', endLabel);\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        var gradientLegend = chart.renderer.drawRectangle({\n            width: linearBarWidth,\n            height: linearBarHeight,\n            x: xValue,\n            y: yValue,\n            fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n        });\n        defElement.appendChild(linerGradientEle);\n        legendTranslateGroup.appendChild(defElement);\n        legendTranslateGroup.appendChild(gradientLegend);\n    };\n    /**\n     * To find first valid legend text index for chart and accumulation chart\n     *\n     * @param legendCollection\n     * @returns {number}\n     * @private\n     */\n    BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n        var count = 0;\n        for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n            var legend = legendCollection_1[_i];\n            if (legend.render && legend.text !== '') {\n                break;\n            }\n            count++;\n        }\n        return count;\n    };\n    /**\n     * To get the legend title text width and height.\n     *\n     * @param legend\n     * @param legendBounds\n     */\n    BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n        if (legend.title) {\n            this.isTop = legend.titlePosition === 'Top';\n            var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n            if (this.isTop || this.isVertical) {\n                this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, (legendBounds.width - padding));\n            }\n            else {\n                this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle);\n            }\n            var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n            this.legendTitleSize = measureText(text, legend.titleStyle);\n            this.legendTitleSize.height *= this.legendTitleCollections.length;\n        }\n        else {\n            this.legendTitleSize = new Size(0, 0);\n        }\n    };\n    /**\n     * Render the legend title\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n        var padding = legend.padding;\n        var alignment = legend.titleStyle.textAlignment;\n        this.isTop = legend.titlePosition === 'Top';\n        var anchor = alignment === 'Near' ? 'start' : alignment === 'Far' ? 'end' : 'middle';\n        var x = titlePositionX(legendBounds, legend.titleStyle);\n        anchor = this.isTop || this.isVertical ? anchor : '';\n        x = alignment === 'Near' ? (x + padding) : alignment === 'Far' ? (x - padding) : x;\n        x = (this.isTop || this.isVertical) ? x : ((legendBounds.x) + (legend.titlePosition === 'Left' ? 5 :\n            (legendBounds.width - this.legendTitleSize.width - 5)));\n        var topPadding = (legendBounds.height / 2) + (this.legendTitleSize.height / 4);\n        var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding :\n            (this.legendTitleSize.height / this.legendTitleCollections.length));\n        var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n        textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color, legendGroup);\n    };\n    /**\n     * To create legend rendering elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendBounds\n     * @param legendGroup\n     * @param legend\n     * @param id\n     * @param redraw\n     */\n    BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n        var padding = legend.padding;\n        var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n        var legendItemsGroup = chart.renderer.createGroup({ id: id + '_collections' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var clippath = chart.renderer.createClipPath({ id: id + '_clipPath' });\n        if (legendGroup) {\n            legendGroup.appendChild(chart.renderer.drawRectangle(options));\n        }\n        else {\n            chart.renderer.drawRectangle(options);\n        }\n        if (legend.title) {\n            this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n        }\n        if (!isCanvas) {\n            legendGroup.appendChild(legendItemsGroup);\n        }\n        this.legendTranslateGroup = chart.renderer.createGroup({ id: id + '_translate_g' });\n        if (!isCanvas) {\n            legendItemsGroup.appendChild(this.legendTranslateGroup);\n        }\n        options.y += padding + (this.isTop ? this.legendTitleSize.height : 0);\n        options.id += '_clipPath_rect';\n        options.width = ((!this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl) && this.isVertical) ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right\n            : legendBounds.width;\n        if (!isCanvas) {\n            this.clipRect = chart.renderer.drawRectangle(options);\n            clippath.appendChild(this.clipRect);\n        }\n        else {\n            this.pagingClipRect = options;\n        }\n        appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n        if (!isCanvas) {\n            legendItemsGroup.setAttribute('style', 'clip-path:url(#' + clippath.id + ')');\n        }\n        return this.legendTranslateGroup;\n    };\n    /**\n     * To render legend symbols for chart and accumulation chart\n     *\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     */\n    BaseLegend.prototype.renderSymbol = function (legendOption, group, i) {\n        var control = this.isBulletChartControl ? this.chart : null;\n        var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n        var isStrokeWidth = ((this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.shape === 'SeriesType') &&\n            (legendOption.type.toLowerCase().indexOf('line') > -1) && (legendOption.type.toLowerCase().indexOf('area') === -1));\n        var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') &&\n            (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var borderColor;\n        var shape = (legendOption.shape === 'SeriesType') ? legendOption.type : legendOption.shape;\n        var strokewidth = isStrokeWidth ? (this.legend.mode === 'Series' ?\n            this.chart.visibleSeries[i].width : this.chart.visibleSeries[0].width) :\n            (this.isBulletChartControl && legendOption.shape === 'Multiply') ? 4 : 1;\n        var regionPadding;\n        shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n        if (isCustomBorder && i < this.chart.visibleSeries.length) {\n            var seriesBorder = this.chart.visibleSeries[i].border;\n            borderColor = seriesBorder.color ? seriesBorder.color : symbolColor;\n            strokewidth = seriesBorder.width ? seriesBorder.width : 1;\n        }\n        var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', i), symbolColor, strokewidth, (isCustomBorder ? borderColor : symbolColor), 1, '', '');\n        var textSize = measureText(legendOption.text, this.legend.textStyle);\n        var x = this.legend.isInversed ? legendOption.location.x + textSize.width + this.legend.shapePadding\n            : legendOption.location.x;\n        var y = legendOption.location.y;\n        if (!isCanvas) {\n            group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n        }\n        else {\n            regionPadding = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber);\n            drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n            this.legendRegions.push({\n                rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding), index: i\n            });\n        }\n        if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' ||\n            (legendOption.type === 'Doughnut' && shape === 'Doughnut')) {\n            symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', i);\n            shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n            symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n            if (!isCanvas) {\n                // eslint-disable-next-line max-len\n                group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n            }\n            else {\n                drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ?\n                    new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n            }\n        }\n    };\n    /**\n     * To render legend text for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     */\n    BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i) {\n        var legend = chart.legendSettings;\n        var hiddenColor = '#D3D3D3';\n        var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textOptions.id = this.legendID + this.generateId(legendOption, '_text_', i);\n        textOptions.text = legendOption.text;\n        textOptions.x = legend.isInversed ? legendOption.location.x - (legend.shapeWidth / 2) :\n            legendOption.location.x + (legend.shapeWidth / 2) + legend.shapePadding;\n        textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n        var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        if (element) {\n            element.setAttribute('aria-label', legend.description || this.accessbilityText);\n        }\n        if (isCanvas) {\n            var textSize = measureText(textOptions.text, legend.textStyle);\n            this.legendRegions[i].rect.y = textOptions.y < this.legendRegions[i].rect.y ? textOptions.y : this.legendRegions[i].rect.y;\n            this.legendRegions[i].rect.width += textSize.width;\n            this.legendRegions[i].rect.height = textSize.height;\n            this.legendRegions[i].rect.y -= textSize.height * 0.5;\n        }\n    };\n    /**\n     * To render legend paging elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n        var paginggroup = chart.renderer.createGroup({ id: this.legendID + '_navigation' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n        var grayColor = '#545454';\n        var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n        var padding = 8; // const padding for paging elements\n        var symbolOption = new PathOption(this.legendID + '_pageup', 'transparent', 5, grayColor, 1, '', '');\n        var iconSize = this.pageButtonSize;\n        // Page left arrow drawing calculation started here\n        var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 :\n            (this.rowCount - 1);\n        var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n        this.pagingRegions = [];\n        this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n        this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n        if (!isCanvas) {\n            legendGroup.appendChild(paginggroup);\n        }\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n            this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n        }\n        else {\n            this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n        }\n        if (paginggroup) {\n            paginggroup.setAttribute('style', 'cursor: pointer');\n        }\n        this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n        if (!isCanvas) {\n            this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n        }\n        else {\n            //paging clipRect only for canvas mode\n            this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight -\n                (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n            this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n            this.pagingClipRect.x += legend.border.width;\n            this.pagingClipRect.width -= (legend.border.width + legend.border.width / 2);\n            this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n        }\n        var pageTextElement;\n        var x = (bounds.x + iconSize / 2);\n        var y = bounds.y + this.clipPathHeight + ((titleHeight + bounds.height - this.clipPathHeight) / 2);\n        if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n            x = (bounds.x + this.fivePixel + this.pageButtonSize + titleWidth);\n            y = legend.title && this.isTop ? (bounds.y + padding + titleHeight + (iconSize / 1) + 0.5) :\n                (bounds.y + padding + iconSize + 0.5);\n        }\n        var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + (iconSize / 2) + padding + titleHeight;\n                symbolOption.opacity = this.backwardArrowOpacity;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n            }\n            else {\n                symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity :\n                    (legend.enablePages ? 1 : this.backwardArrowOpacity);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(bounds.width - (2 * (iconSize + padding) + padding + size.width), 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5, y - iconSize * 0.5, iconSize, iconSize));\n        // Page numbering rendering calculation started here\n        textOption.x = x + (iconSize / 2) + padding;\n        textOption.y = y + (size.height / 4);\n        textOption.id = this.legendID + '_pagenumber';\n        textOption.text = '1/' + this.totalPages;\n        if (isCanvas && this.totalNoOfPages) {\n            textOption.text = this.currentPageNumber + '/' + this.totalNoOfPages;\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, legend.textStyle.color, paginggroup, false, false, false, false, null, new Rect(bounds.width - (2 * (iconSize + padding) + padding + size.width), 0, 0, 0));\n        }\n        // Page right arrow rendering calculation started here\n        x = textOption.x + padding + (iconSize / 2) + size.width;\n        if (this.isPaging && !legend.enablePages && !this.isVertical) {\n            x = (bounds.x + bounds.width - this.fivePixel - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ?\n                this.legendTitleSize.width + this.fivePixel : 0));\n        }\n        symbolOption.id = this.legendID + '_pagedown';\n        symbolOption.opacity = !legend.enablePages ? this.forwardArrowOpacity : 1;\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + bounds.height - (iconSize / 2) - padding;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n            }\n            else {\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(bounds.width - (2 * (iconSize + padding) + padding + size.width), 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5), y - iconSize * 0.5, iconSize, iconSize));\n        if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            //placing the navigation buttons and page numbering in legend right corner\n            paginggroup.setAttribute('transform', 'translate(' + (bounds.width - (2 * (iconSize + padding) +\n                padding + size.width)) + ', ' + 0 + ')');\n        }\n        else {\n            if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n                this.totalNoOfPages = this.totalPages;\n                this.calTotalPage = false;\n            }\n            if (!legend.enablePages && !this.isBulletChartControl) { // For new legend page navigation\n                this.translatePage(null, this.currentPage - 1, this.currentPage, legend);\n            }\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage, legend);\n        }\n    };\n    /**\n     * To translate legend pages for chart and accumulation chart\n     *\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     */\n    BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber, legend) {\n        var size = (this.clipPathHeight) * page;\n        var translate = 'translate(0,-' + size + ')';\n        if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n            size = this.pageXCollections[page * this.maxColumns] - this.legendBounds.x;\n            size = size < 0 ? 0 : size; // to avoid small pixel variation\n            translate = 'translate(-' + size + ',0)';\n        }\n        if (!this.chart.enableCanvas) {\n            this.legendTranslateGroup.setAttribute('transform', translate);\n        }\n        if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            pagingText.textContent = (pageNumber) + '/' + this.totalPages;\n        }\n        this.currentPage = pageNumber;\n        return size;\n    };\n    /**\n     * To change legend pages for chart and accumulation chart\n     *\n     * @param event\n     * @param pageUp\n     * @param event\n     * @param pageUp\n     */\n    BaseLegend.prototype.changePage = function (event, pageUp) {\n        var legend = this.chart.legendSettings;\n        var backwardArrow = document.getElementById(this.legendID + '_pageup');\n        var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n        var pageText = (legend.enablePages || this.isBulletChartControl) ?\n            document.getElementById(this.legendID + '_pagenumber') : null;\n        var page = (legend.enablePages || this.isBulletChartControl) ? parseInt(pageText.textContent.split('/')[0], 10) :\n            this.currentPage;\n        if (pageUp && page > 1) {\n            this.translatePage(pageText, (page - 2), (page - 1), legend);\n        }\n        else if (!pageUp && page < this.totalPages) {\n            this.translatePage(pageText, page, (page + 1), legend);\n        }\n        if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n        }\n    };\n    /**\n     * To hide the backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.hideArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '0');\n    };\n    /**\n     * To show the  backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.showArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '1');\n    };\n    /**\n     * To find legend elements id based on chart or accumulation chart\n     *\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @private\n     */\n    BaseLegend.prototype.generateId = function (option, prefix, count) {\n        if (this.isChartControl || this.isStockChartControl) {\n            return prefix + count;\n        }\n        else {\n            return prefix + option.pointIndex;\n        }\n    };\n    /**\n     * To show or hide trimmed text tooltip for legend.\n     *\n     * @param event\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.move = function (event) {\n        var _this = this;\n        var x = this.chart.mouseX;\n        var y = this.chart.mouseY;\n        if (event.target.textContent.indexOf('...') > -1) {\n            var targetId = event.target.id.split(this.legendID + '_text_');\n            if (targetId.length === 2) {\n                var index = parseInt(targetId[1], 10);\n                var element = this.chart.element;\n                if (!isNaN(index)) {\n                    if (this.chart.isTouch) {\n                        removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n                    }\n                    if (this.isChartControl) {\n                        showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                    else {\n                        showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                }\n            }\n        }\n        else {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n        }\n        if (this.chart.isTouch) {\n            clearTimeout(this.clearTooltip);\n            this.clearTooltip = +setTimeout(function () { removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip'); }, 1000);\n        }\n    };\n    return BaseLegend;\n}());\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */ (function () {\n    function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex) {\n        this.location = { x: 0, y: 0 };\n        this.text = text;\n        this.fill = fill;\n        this.shape = shape;\n        this.url = url;\n        this.visible = visible;\n        this.type = type;\n        this.markerVisibility = markerVisibility;\n        this.markerShape = markerShape;\n        this.pointIndex = pointIndex;\n        this.seriesIndex = seriesIndex;\n    }\n    return LegendOptions;\n}());\nexport { LegendOptions };\n"]},"metadata":{},"sourceType":"module"}